<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>High Performance List: Re: Force calculation with neighbourlist</TITLE>
<META NAME="Author" CONTENT="Joachim Wesner (Joachim.Wesner@frankfurt.netsurf.de)">
<META NAME="Subject" CONTENT="Re: Force calculation with neighbourlist">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Force calculation with neighbourlist</H1>
<HR>
<P>
<!-- received="Thu Mar 04 22:53:16 1999 PST" -->
<!-- sent="Thu, 04 Mar 1999 22:42:32 +0100" -->
<!-- name="Joachim Wesner" -->
<!-- email="Joachim.Wesner@frankfurt.netsurf.de" -->
<!-- subject="Re: Force calculation with neighbourlist" -->
<!-- id="36DEFE48.79926BB3@frankfurt.netsurf.de" -->
<!-- inreplyto="36DEE27D.C293552A@theophys.kth.se" -->
<STRONG>Joachim Wesner</STRONG> (<A HREF="mailto:Joachim.Wesner@frankfurt.netsurf.de?subject=Re:%20Force%20calculation%20with%20neighbourlist"><EM>Joachim.Wesner@frankfurt.netsurf.de</EM></A>)<BR>
<EM>Thu, 04 Mar 1999 22:42:32 +0100</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#21">[ date ]</A>
<A HREF="index.html#21">[ thread ]</A>
<A HREF="subject.html#21">[ subject ]</A>
<A HREF="author.html#21">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0020.html">Joachim Wesner: "Re: Force calculation with neighbourlist"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0018.html">Erik Lindahl: "Force calculation with neighbourlist"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Joachim Wesner wrote:
<BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Erik Lindahl wrote:
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; &gt; The routine below is an inner loop in a molecular dynamics program.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; &gt; This code is called once for each atom every timestep. A typical
</EM><BR>
<EM>&gt; &gt; system might contain 30000 atoms and each particle has a couple of
</EM><BR>
<EM>&gt; &gt; hundred of the others as neighbours.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; I would DEFINITELY suggest trying to use vectorized sqrti, you HAVE
</EM><BR>
<EM>&gt; pretty large vectors as it seems (30000) and it' s about 5-7 times
</EM><BR>
<EM>&gt; faster than. I already can hear the &quot;any cache-trashing is bad&quot; fraction
</EM><BR>
<EM>&gt; howl when you use so much &quot;local&quot; memory, but I clearly would suggest a
</EM><BR>
<EM>&gt; try. Maybe you later should try to split the 30000 vectors in smaller
</EM><BR>
<EM>&gt; parts to feed to sqrtiv ??
</EM><BR>
<P><P>Sorry, I seems that your vector length is limited to only the local
<BR>
fraction, yet, vectorized sqrti as K. Goto did, is very effective even
<BR>
on pretty short vectors (0.028*n + 0.12) instead of 0.13*n microsec as I
<BR>
find ,so you should gain enough. (AND you don't &quot;stress&quot; L1 cache so
<BR>
much).
<BR>
<P><P>JW
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0020.html">Joachim Wesner: "Re: Force calculation with neighbourlist"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0018.html">Erik Lindahl: "Force calculation with neighbourlist"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Thu Mar 04 1999 - 15:00:17 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
