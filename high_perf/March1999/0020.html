<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>High Performance List: Re: Force calculation with neighbourlist</TITLE>
<META NAME="Author" CONTENT="Joachim Wesner (Joachim.Wesner@frankfurt.netsurf.de)">
<META NAME="Subject" CONTENT="Re: Force calculation with neighbourlist">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Force calculation with neighbourlist</H1>
<HR>
<P>
<!-- received="Thu Mar 04 21:24:24 1999 PST" -->
<!-- sent="Thu, 04 Mar 1999 22:04:44 +0100" -->
<!-- name="Joachim Wesner" -->
<!-- email="Joachim.Wesner@frankfurt.netsurf.de" -->
<!-- subject="Re: Force calculation with neighbourlist" -->
<!-- id="36DEF56C.2965F61D@frankfurt.netsurf.de" -->
<!-- inreplyto="36DEE27D.C293552A@theophys.kth.se" -->
<STRONG>Joachim Wesner</STRONG> (<A HREF="mailto:Joachim.Wesner@frankfurt.netsurf.de?subject=Re:%20Force%20calculation%20with%20neighbourlist"><EM>Joachim.Wesner@frankfurt.netsurf.de</EM></A>)<BR>
<EM>Thu, 04 Mar 1999 22:04:44 +0100</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#20">[ date ]</A>
<A HREF="index.html#20">[ thread ]</A>
<A HREF="subject.html#20">[ subject ]</A>
<A HREF="author.html#20">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0019.html">Erik Lindahl: "Force calculation again..."</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Erik Lindahl wrote:
<BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Hi,
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; I said the other day that I'd share a piece of code with you -
</EM><BR>
<EM>&gt; I'd be thrilled if you could come up with any ideas to speed it up :-)
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; The routine below is an inner loop in a molecular dynamics program.
</EM><BR>
<P><EM>&gt; This code is called once for each atom every timestep. A typical
</EM><BR>
<EM>&gt; system might contain 30000 atoms and each particle has a couple of
</EM><BR>
<EM>&gt; hundred of the others as neighbours.
</EM><BR>
<EM>&gt; (But if A is a neigbour of B, B is not one of A)
</EM><BR>
<EM>&gt; The routine uses a table-driven inverse square root routine
</EM><BR>
<EM>&gt; (more or less the same algorithm as Goto's). One idea might be to
</EM><BR>
<EM>&gt; implement the whole routine in assembly to avoid loading/unloading
</EM><BR>
<EM>&gt; the table. Or should I store values in an array and call a vectorized
</EM><BR>
<EM>&gt; sqrti?
</EM><BR>
<EM>&gt; 
</EM><BR>
<P>I would DEFINITELY suggest trying to use vectorized sqrti, you HAVE
<BR>
pretty large vectors as it seems (30000) and it' s about 5-7 times
<BR>
faster than. I already can hear the &quot;any cache-trashing is bad&quot; fraction
<BR>
howl when you use so much &quot;local&quot; memory, but I clearly would suggest a
<BR>
try. Maybe you later should try to split the 30000 vectors in smaller
<BR>
parts to feed to sqrtiv ??
<BR>
<P>This is something the Alpha architecture seems to be lacking compared to
<BR>
the old i860, the latter one had a special pipelined load instruction to
<BR>
use for vectorized routines, that would not trash (i.e. would bypass
<BR>
instead) L1 cache contents to avoid wiping out the cache when using
<BR>
large vectors.
<BR>
<P>Joachim
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0019.html">Erik Lindahl: "Force calculation again..."</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Thu Mar 04 1999 - 14:00:20 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
