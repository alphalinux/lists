<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>High Performance List: Re: Free Compaq Math Library for Linux</TITLE>
<META NAME="Author" CONTENT="Robert Harley (Robert.Harley@inria.fr)">
<META NAME="Subject" CONTENT="Re: Free Compaq Math Library for Linux">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Free Compaq Math Library for Linux</H1>
<HR>
<P>
<!-- received="Wed Mar 03 18:10:22 1999 PST" -->
<!-- sent="Wed, 3 Mar 1999 18:36:07 +0100 (MET)" -->
<!-- name="Robert Harley" -->
<!-- email="Robert.Harley@inria.fr" -->
<!-- subject="Re: Free Compaq Math Library for Linux" -->
<!-- id="199903031736.SAA15424@pauillac.inria.fr" -->
<!-- inreplyto="Free Compaq Math Library for Linux" -->
<STRONG>Robert Harley</STRONG> (<A HREF="mailto:Robert.Harley@inria.fr?subject=Re:%20Free%20Compaq%20Math%20Library%20for%20Linux"><EM>Robert.Harley@inria.fr</EM></A>)<BR>
<EM>Wed, 3 Mar 1999 18:36:07 +0100 (MET)</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#8">[ date ]</A>
<A HREF="index.html#8">[ thread ]</A>
<A HREF="subject.html#8">[ subject ]</A>
<A HREF="author.html#8">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0007.html">Joachim Wesner: "Re: Free Compaq Math Library for Linux"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0006.html">Andrei A. Dergatchev: "Free Compaq Math Library for Linux"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Joachim quoted:
<BR>
<EM>&gt;&gt; Now, this CPML will enable customers to significantly increase the
</EM><BR>
<EM>&gt;&gt; precision and speed of mathematical calculations by more than 10 times
</EM><BR>
<EM>&gt;&gt; compared to other mathematical libraries currently available on Linux.
</EM><BR>
<P>and wrote:
<BR>
<P><EM>&gt;I'd say, don't expect that much. And precision, AFAIK, is actually
</EM><BR>
<EM>&gt;comparable or worse than current libs
</EM><BR>
<P><P>The file <A HREF="http://www.unix.digital.com/linux/cpml.0.1.tar.gz">http://www.unix.digital.com/linux/cpml.0.1.tar.gz</A>
<BR>
contains a README that gives the following numbers:
<BR>
<P>==============================================================================
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Accuracy                           Performance
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-----------------------   -----------------------------------------
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CPML            Fast CPML
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Fast           Input   -----------       -----------
<BR>
Func    CPML  libm   CPML  FFM      Value   Tru64 Linux libm  Tru64 Linux FFM
<BR>
-----  ------------------------   --------------------------------------------
<BR>
<P>sqrt     .50   .50   1.90   .97       10.0    68   68   1017    41    44   75
<BR>
sin      .54   .83   1.91  3.20       1.96    68   74    268    54    61   85
<BR>
log10    .55  1.92   3.22  3.57        2.1    56   62    367    43    49  105
<BR>
rsqrt   1.43     -      -  2.19       10.0    45   50      -     -     -   73
<BR>
atan     .53   .76      -  1.86       200.    81   83    242     -     -   95
<BR>
acos     .59   .88      -  1.44       -.99    89   95   1185     -     -  161
<BR>
atan2   1.27  1.43      -  2.89    1.1,2.1   105  108    408     -     -  139
<BR>
sinh     .51  1.78      -  2.43        2.1    78   83    535     -     -  122
<BR>
log      .55   .85   3.45  3.78        2.1    56   62    299    43    49  104
<BR>
tanh     .61  2.08      -  3.34        2.1   134  139    489     -     -  155
<BR>
asin     .63   .85      -  2.50        .99    92   99   1193     -     -  162
<BR>
tan      .54   .83   2.67  3.46       7.85    90  101    505    75    81   97
<BR>
log2     .58     -      -  3.26       10.0    57   61      -     -     -  102
<BR>
cosh     .51  1.31      -  2.51        2.1    79   82    440     -     -  122
<BR>
cos      .53   .81   1.97  3.00       1.57    68   73    251    53    61   89
<BR>
exp      .50   .85   3.53  2.14        2.1    62   67    376    47    52   87
<BR>
pow      .51   .82   3.76  2706   1.1,10.1   113  118   1047    91    91  203
<BR>
cot      .54     -      -  4.05        2.1    84   92      -     -     -   88
<BR>
==============================================================================
<BR>
<P><P>Those suggest that the precision really is good and, compared to libm
<BR>
at least, there are several functions for which there is a 10x speed-up.
<BR>
<P><P><P><EM>&gt;(I played around with some DU binary, sqrt is NOT correctly rounded).
</EM><BR>
<P>That happens is you use the &quot;-fast&quot; flag which is documented as:
<BR>
<P>==============================================================================
<BR>
&nbsp;&nbsp;-fast
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Provides a single method for turning on a collection of optimizations
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for increased performance.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Note that the -fast flag can produce different results for floating-
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;point arithmetic and math functions, although most programs are not
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sensitive to these differences.  [...]
<BR>
==============================================================================
<BR>
<P><P>I doubt very much if the non &quot;-fast&quot; sqrt() has any last bit errors...
<BR>
<P><P><EM>&gt;AND, regarding the latest discussion here, it's HEAVILY table driven !
</EM><BR>
<P>Doh!  Is there any consensus on what size of tables are accpetable for
<BR>
a library?  For a specific app, it would be &quot;as big as necessary to go
<BR>
as fast as possible&quot; but for a library routine I try to stick to &lt;=
<BR>
256 bytes.
<BR>
<P>The sqrt code I posted a few days ago can be sped up by abut 5 cycles
<BR>
(and the branch removed) by doubling the table size to 512 bytes to
<BR>
handle even and odd exponents in one go.
<BR>
<P>It's quite annoying because the entries are floats but have only a
<BR>
byte of information each.  A table of bytes would be 4 times smaller
<BR>
but then it would cost several cycles to stash the byte into a float.
<BR>
<P>Bye,
<BR>
&nbsp;&nbsp;Rob.
<BR>
<P>PS: I haven't looked into Kazushige's reply yet.  I'll get around to it RSN!
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0007.html">Joachim Wesner: "Re: Free Compaq Math Library for Linux"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0006.html">Andrei A. Dergatchev: "Free Compaq Math Library for Linux"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Wed Mar 03 1999 - 11:00:13 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
