<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>High Performance List: sqrt</TITLE>
<META NAME="Author" CONTENT="Robert Harley (Robert.Harley@inria.fr)">
<META NAME="Subject" CONTENT="sqrt">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>sqrt</H1>
<HR>
<P>
<!-- received="Sun Feb 21 16:57:09 1999 PST" -->
<!-- sent="Sun, 21 Feb 1999 17:02:55 +0100 (MET)" -->
<!-- name="Robert Harley" -->
<!-- email="Robert.Harley@inria.fr" -->
<!-- subject="sqrt" -->
<!-- id="199902211602.RAA25400@pauillac.inria.fr" -->
<!-- inreplyto="" -->
<STRONG>Robert Harley</STRONG> (<A HREF="mailto:Robert.Harley@inria.fr?subject=Re:%20sqrt"><EM>Robert.Harley@inria.fr</EM></A>)<BR>
<EM>Sun, 21 Feb 1999 17:02:55 +0100 (MET)</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#2">[ date ]</A>
<A HREF="index.html#2">[ thread ]</A>
<A HREF="subject.html#2">[ subject ]</A>
<A HREF="author.html#2">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0003.html">Robert Harley: "sqrt.c"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0001.html">Robert Harley: "sqrt.S"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
We have a problem with sqrt on Alpha Linux.
<BR>
<P>&nbsp;&nbsp;1. The original square root gave bogus answers for very small inputs.
<BR>
&nbsp;&nbsp;2. The current one is ten times too slow.
<BR>
&nbsp;&nbsp;3. The fast one by Wesner &amp; Goto doesn't get the last bit correct.
<BR>
<P><P>Ideally we should have one that's correct (well duh), fast, and gets
<BR>
the last bit right (as required by the IEEE standard, so we can
<BR>
replace the default one in libm).  Then most people will be happy and
<BR>
those who want to lose last bit accuracy in exchange for the extra bit
<BR>
of speed can still do so.
<BR>
<P>Anyway we should grab this particular bull by the horns, IMHO.
<BR>
<P><P>In the next messages I'll send a C implementation (using 64-bit longs)
<BR>
and an ASM one (for Alpha of course).
<BR>
<P>I left out the code to handle negative inputs, NaNs and so on for now
<BR>
to avoid getting distracted by them.
<BR>
<P>What I'm hoping is that some of you will see ways to simplify and/or
<BR>
speed up the code.  I've tried tuning the ASM a bit, but I don't
<BR>
understand the 21164's scheduling well.  For instance there's one
<BR>
place I have a FNOP and putting a UNOP costs five extra cycles.  I've
<BR>
no idea why!
<BR>
<P>The total time seems to be 101 or 103 cycles or thereabouts.  Anyone
<BR>
want to knock of a few cycles to get under the 100 barrier?
<BR>
<P>Rob.
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0003.html">Robert Harley: "sqrt.c"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0001.html">Robert Harley: "sqrt.S"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Sun Feb 21 1999 - 09:00:26 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
