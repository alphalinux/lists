<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>High Performance List: Re: binary optimization</TITLE>
<META NAME="Author" CONTENT="Adam C Powell IV (hazelsct@MIT.EDU)">
<META NAME="Subject" CONTENT="Re: binary optimization">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: binary optimization</H1>
<HR>
<P>
<!-- received="Thu Oct 14 16:20:31 1999" -->
<!-- isoreceived="19991014232031" -->
<!-- sent="Thu, 14 Oct 1999 11:15:18 -0400" -->
<!-- isosent="19991014151518" -->
<!-- name="Adam C Powell IV" -->
<!-- email="hazelsct@MIT.EDU" -->
<!-- subject="Re: binary optimization" -->
<!-- id="3805F385.FFA2BEFB@mit.edu" -->
<!-- inreplyto="199909271336.JAA0000003130@amt174.lkg.dec.com" -->
<STRONG>Subject: </STRONG>Re: binary optimization<BR>
<STRONG>From: </STRONG>Adam C Powell IV (<EM>hazelsct@MIT.EDU</EM>)<BR>
<STRONG>Date: </STRONG>Thu Oct 14 1999 - 08:15:18 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#0">[ date ]</A>
<A HREF="index.html#0">[ thread ]</A>
<A HREF="subject.html#0">[ subject ]</A>
<A HREF="author.html#0">[ author ]</A>
<!-- next="start" -->
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Richard Gorton wrote:
<BR>
<P><EM>&gt; &gt;Suppose I'd like to build one binary which runs optimally on every
</EM><BR>
<EM>&gt; &gt;Alpha.  Okay, that's too tall an order, how about the tightest loops,
</EM><BR>
<EM>&gt; &gt;the most time-consuming subroutines having versions compiled for
</EM><BR>
<EM>&gt; &gt;multiple processors.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; A very tall order, indeed.  Especially since there are different
</EM><BR>
<EM>&gt; sized caches on different machines.  For example, it is possible
</EM><BR>
<EM>&gt; to get a PWS500a with 0, 1, or 2 Mb of cache (off-chip).
</EM><BR>
<EM>&gt; So far as I know, the only way to currently determine the off-chip
</EM><BR>
<EM>&gt; cache size is to run some code which attempts to figure it out
</EM><BR>
<EM>&gt; based upon the timing of memory traffic.
</EM><BR>
<P>Interesting, /proc/cpuinfo has cache sizes on PPC and x86, so I thought
<BR>
it did on Alpha, but it doesn't.  So there's no way to get this at all?
<BR>
Oh well.
<BR>
<P><EM>&gt; I would recommend building different versions for the relevant
</EM><BR>
<EM>&gt; chip generations (one for ev56, one for ev6) to handle architectural
</EM><BR>
<EM>&gt; differences (sqrt, ftoi, itof, etc.) until someone ships a
</EM><BR>
<EM>&gt; dynamic binary optimization system.
</EM><BR>
<P>But this is the kind of thing my primitive scheme would allow.  You have
<BR>
multiple symbols for a given routine, each compiled for a different chip
<BR>
generation, and (following esci's suggestion) index to a function pointer
<BR>
table at runtime to choose between them.
<BR>
<P><EM>&gt; See (shameless plug):
</EM><BR>
<EM>&gt;         <A HREF="http://rob.millbury.net/~wlug/slides.html">http://rob.millbury.net/~wlug/slides.html</A>
</EM><BR>
<EM>&gt;         The september '99 talk on &quot;Wiggins/Redstone&quot;
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; for an overview of the kind of things that a dynamic optimization
</EM><BR>
<EM>&gt; system has to worry about, opportunities, etc.  Another dynamic
</EM><BR>
<EM>&gt; optimization effort is HP's Dynamo project:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;         <A HREF="http://www.hpl.hp.com/techreports/1999/HPL-1999-77.pdf">http://www.hpl.hp.com/techreports/1999/HPL-1999-77.pdf</A>
</EM><BR>
<EM>&gt;         <A HREF="http://www.hpl.hp.com/techreports/1999/HPL-1999-78.pdf">http://www.hpl.hp.com/techreports/1999/HPL-1999-78.pdf</A>
</EM><BR>
<P>Wow!  These are way more advanced than what I was looking for.  Thanks
<BR>
for the pointers to the latest and greatest!  I think for now I'll just
<BR>
use this compile-time optimization for multiple generations with runtime
<BR>
selection, and wait for these runtime optimization schemes to bear fruit
<BR>
before building for them.
<BR>
<P>Thanks,
<BR>
<P>-Adam P.
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Thu Nov 04 1999 - 16:56:56 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
