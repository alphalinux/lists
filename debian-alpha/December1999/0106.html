<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: Re: That highly annoying C++ unaligned trap..</TITLE>
<META NAME="Author" CONTENT="Christopher C Chimelis (chris@debian.org)">
<META NAME="Subject" CONTENT="Re: That highly annoying C++ unaligned trap..">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: That highly annoying C++ unaligned trap..</H1>
<HR>
<P>
<!-- received="Wed Dec 15 18:55:55 1999" -->
<!-- isoreceived="19991216025555" -->
<!-- sent="Wed, 15 Dec 1999 12:41:56 -0500 (EST)" -->
<!-- isosent="19991215174156" -->
<!-- name="Christopher C Chimelis" -->
<!-- email="chris@debian.org" -->
<!-- subject="Re: That highly annoying C++ unaligned trap.." -->
<!-- id="Pine.LNX.3.96.991215123839.24757A-100000@charity.besmarter.com" -->
<!-- inreplyto="Pine.LNX.3.96.991214233021.4900C-100000@wakko.deltatee.com" -->
<STRONG>Subject: </STRONG>Re: That highly annoying C++ unaligned trap..<BR>
<STRONG>From: </STRONG>Christopher C Chimelis (<EM>chris@debian.org</EM>)<BR>
<STRONG>Date: </STRONG>Wed Dec 15 1999 - 09:41:56 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#106">[ date ]</A>
<A HREF="index.html#106">[ thread ]</A>
<A HREF="subject.html#106">[ subject ]</A>
<A HREF="author.html#106">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0107.html">Christopher C Chimelis: "Re: potato/main/binary-alpha/Packages empty"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0105.html">Hendrik Seffler: "broken nis via apt-get"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0101.html">Jason Gunthorpe: "That highly annoying C++ unaligned trap.."</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0101.html">Christopher C Chimelis: "Re: That highly annoying C++ unaligned trap.."</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
On Wed, 15 Dec 1999, Jason Gunthorpe wrote:
<BR>
<P><EM>&gt; .. turns out to be a bug in the glibc dynamic linker or gcc!
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Now at this point I start to give up - the dl_relocate_object is a
</EM><BR>
<EM>&gt; *MASSIVE* inline'd function that spans many header files and so on - the
</EM><BR>
<EM>&gt; net results is that *reloc_addr is not an aligned value. What I don't know
</EM><BR>
<EM>&gt; is if it *should* be an aligned value or not.. ie should the linker be
</EM><BR>
<EM>&gt; taking special measures to not do trap, or should the compiler not be
</EM><BR>
<EM>&gt; generating relocations like that. 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Indeed, given this information an 'objdump -R
</EM><BR>
<EM>&gt; /usr/lib/libstdc++-libc6.1-2.so.3' turns up a couple addresses like this: 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; 0000000000159424 RELATIVE          *ABS*
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; That's unaligned!!!
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; So.. The net result is that G++ is generating unaligned 64 bit relocation
</EM><BR>
<EM>&gt; fields in the C++ library which causes the dynamic loader to unalign trap
</EM><BR>
<EM>&gt; when it loads them.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; 'Fini'
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Guys, I don't even know *who* to send this to who knows more about what
</EM><BR>
<EM>&gt; should be going on, let alone fixing it - but I strongly suspect it should
</EM><BR>
<EM>&gt; go to the gcc group.
</EM><BR>
<P>It sounds like gcc, but it may be helpful to cross-post it to the
<BR>
libc-alpha list as well.  Either way, I get the feeling that the gcc group
<BR>
will try to pawn this off a bit onto the glibc folks.  I've got some other
<BR>
issues with gcc on Alpha (namely that including the C++ libs during
<BR>
bootstrapping makes the build fail and has for about two months now), so
<BR>
this shouldn't be a shock.  I get the feeling that RTH hasn't been doing
<BR>
alot with the Alpha lately (well deserved vacation time for him?), but I'm
<BR>
not positive on that.
<BR>
<P>C
<BR>
<P><P>--  
<BR>
To UNSUBSCRIBE, email to debian-alpha-request@lists.debian.org
<BR>
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0107.html">Christopher C Chimelis: "Re: potato/main/binary-alpha/Packages empty"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0105.html">Hendrik Seffler: "broken nis via apt-get"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0101.html">Jason Gunthorpe: "That highly annoying C++ unaligned trap.."</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0101.html">Christopher C Chimelis: "Re: That highly annoying C++ unaligned trap.."</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Mon Jan 03 2000 - 11:15:12 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
