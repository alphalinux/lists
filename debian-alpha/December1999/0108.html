<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: Unaligned relocations on Alpha ELF64</TITLE>
<META NAME="Author" CONTENT="Jason Gunthorpe (jgg@ualberta.ca)">
<META NAME="Subject" CONTENT="Unaligned relocations on Alpha ELF64">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Unaligned relocations on Alpha ELF64</H1>
<HR>
<P>
<!-- received="Wed Dec 15 23:13:34 1999" -->
<!-- isoreceived="19991216071334" -->
<!-- sent="Wed, 15 Dec 1999 14:11:29 -0700 (MST)" -->
<!-- isosent="19991215211129" -->
<!-- name="Jason Gunthorpe" -->
<!-- email="jgg@ualberta.ca" -->
<!-- subject="Unaligned relocations on Alpha ELF64" -->
<!-- id="Pine.LNX.3.96.991215135222.4900E-100000@wakko.deltatee.com" -->
<STRONG>Subject: </STRONG>Unaligned relocations on Alpha ELF64<BR>
<STRONG>From: </STRONG>Jason Gunthorpe (<EM>jgg@ualberta.ca</EM>)<BR>
<STRONG>Date: </STRONG>Wed Dec 15 1999 - 13:11:29 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#108">[ date ]</A>
<A HREF="index.html#108">[ thread ]</A>
<A HREF="subject.html#108">[ subject ]</A>
<A HREF="author.html#108">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0109.html">Adam Klein: "slink or potato?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0107.html">Christopher C Chimelis: "Re: potato/main/binary-alpha/Packages empty"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Hi,
<BR>
<P>I've been trying to find the cause of alignment trap messages like the
<BR>
following:
<BR>
perl(12327): unaligned trap at 000002000001118c: 00000200011caef4 29 1
<BR>
<P>Yesterday I found the cause. That address is inside the relocation code
<BR>
for the linux dynamic linker. The problem seems to be that certain shared
<BR>
libraries like libstc++ have relocations that are not aligned, for
<BR>
instance: 
<BR>
<P>lully{jgg}~#objdump -R /usr/lib/libstdc++-libc6.1-2.so.3 | grep -i &quot;4 &quot;
<BR>
0000000000156374 RELATIVE          *ABS*
<BR>
0000000000158ef4 RELATIVE          *ABS*
<BR>
0000000000159424 RELATIVE          *ABS*
<BR>
[..]
<BR>
<P>When ld.so loads these shared libs it alignement faults :&lt; (I have a gdb
<BR>
stack trace w/ debug info if anyone wants the exact line)
<BR>
<P>I'm not certain if this is a bug in gcc/g++ or a bug in ld.so, I don't
<BR>
know what constraints should be placed on ELF64 relocations.
<BR>
<P>My system is Debian Potato on Alpha running glibc 2.1.2 (I have also tried
<BR>
the loader from 2.1.3) the compiler environment is:
<BR>
&nbsp;gcc version 2.95.2 19991109 (Debian GNU/Linux)
<BR>
&nbsp;GNU ld version 2.9.5 (with BFD 2.9.5.0.22)
<BR>
<P>And libstdc++ was compiled using EGCS 1.1.1 (I think)
<BR>
<P>Thanks,
<BR>
Jason
<BR>
<P><P>--  
<BR>
To UNSUBSCRIBE, email to debian-alpha-request@lists.debian.org
<BR>
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0109.html">Adam Klein: "slink or potato?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0107.html">Christopher C Chimelis: "Re: potato/main/binary-alpha/Packages empty"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Mon Jan 03 2000 - 11:15:12 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
