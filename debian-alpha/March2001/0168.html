<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: Re: help with 2.2r2 install</TITLE>
<META NAME="Author" CONTENT="Sebastian Moeller (sebastian.moeller@lur.rwth-aachen.de)">
<META NAME="Subject" CONTENT="Re: help with 2.2r2 install">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: help with 2.2r2 install</H1>
<HR>
<P>
<!-- received="Thu Mar 29 09:04:51 2001" -->
<!-- isoreceived="20010329170451" -->
<!-- sent="Thu, 29 Mar 2001 10:54:01 +0200 (CEST)" -->
<!-- isosent="20010329085401" -->
<!-- name="Sebastian Moeller" -->
<!-- email="sebastian.moeller@lur.rwth-aachen.de" -->
<!-- subject="Re: help with 2.2r2 install" -->
<!-- id="Pine.LNX.4.21.0103291012570.27901-100000@lx42.lur.rwth-aachen.de" -->
<!-- inreplyto="F1269Ee4zadTMVwVn2000008fe2@hotmail.com" -->
<STRONG>Subject: </STRONG>Re: help with 2.2r2 install<BR>
<STRONG>From: </STRONG>Sebastian Moeller (<EM>sebastian.moeller@lur.rwth-aachen.de</EM>)<BR>
<STRONG>Date: </STRONG>Thu Mar 29 2001 - 00:54:01 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#168">[ date ]</A>
<A HREF="index.html#168">[ thread ]</A>
<A HREF="subject.html#168">[ subject ]</A>
<A HREF="author.html#168">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0169.html">Masaki Nomura: "Re: cxx on Potato"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0167.html">Paul Slootman: "Re: cxx on Potato"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0157.html">Luiz Emediato: "Re: help with 2.2r2 install"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0157.html">Sebastian Moeller: "Re: help with 2.2r2 install"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Hello Luiz, hello Jakub,
<BR>
<P>It's me again...
<BR>
I produced the jensen17.img, so maybe I can be of any help.
<BR>
As I am no debian expert I urge all who are to scrutinize over my advices
<BR>
and make corrections where I missed the point and/or debian way of doing
<BR>
things. TIA.
<BR>
<P>On Wed, 28 Mar 2001, Luiz Emediato wrote:
<BR>
<P><EM>&gt; Hi Jakub,
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; I am a little bit confused about the differences between Debian
</EM><BR>
<EM>&gt; install and AlphaLinux aboot install. According to AlphaLinux we have
</EM><BR>
<EM>&gt; to use minlabel to partition the disk, and copy jensen17.img to the 1st 
</EM><BR>
<EM>&gt; partition using copyboot. But I have observed from Debian install
</EM><BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OK, the point here is unless your system can boot from CD-rom you
<BR>
will have to get a kernel on the disk, as you can't boot from
<BR>
floppy. Minlabel is needed to produce the BSD-disklabels in systems that
<BR>
can't boot from CD. Fdisk set to BSD-mode is the better method, as IIRC
<BR>
minlabel is not maintained by anybody and might have trouble with big
<BR>
disks. Copyboot will in essence just take what is on the floppy and write
<BR>
it to the beginning of the specified disk. Again this is for poeple who
<BR>
can't get anything linux-like running, be it from disk or cd. Just as in
<BR>
the minlabel case I think it is better to use swriteboot from the aboot
<BR>
package as this is maintained.
<BR>
<P><EM>&gt; that it will try to create the aboot by itself (option: copy aboot to
</EM><BR>
<EM>&gt; partition ??? ). I may be misunderstanding it. Using kernel from 
</EM><BR>
<EM>&gt; jensen17.img (2.2.7), that is, Alphalinux kernel, I could install Debian but 
</EM><BR>
<EM>&gt; then I realized that Debian kernel 2.2.18 does not work. I decided to start 
</EM><BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;My guess is (see later) the debian kernel is build for generic
<BR>
alpha, a target that is broken for the jensen. Just compile your own
<BR>
kernel and specify jensen instead of generic. (You might wan't to patch
<BR>
traps.c also.).
<BR>
<P><EM>&gt; it over and curiously I no longer can install Debian, even after reformating 
</EM><BR>
<EM>&gt; the disk. That is, I no longer can initialize the base system. It could be 
</EM><BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Well let me guess (again), you used the minlabel/copyboot route to
<BR>
get the system to boot 2.2.17 from alphalinux.org and started the debian
<BR>
installation from there? If that is the caes probably the debian
<BR>
installation wrote a new disklabel to the disk and by that whiped aboot
<BR>
and/or the initial kernel. Then it wrote its own 2.2.18 kernel to the boot
<BR>
partition. This leaves your system in a semi-working state.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Question: does &quot;boot dkXN&quot; bring you into aboot? (X is a letter,
<BR>
probably &quot;a&quot; denoting the order of the scsi device, N is natural number
<BR>
identical to the boot device's SCSI-ID.) If that is the case the debian
<BR>
installation routine managed to properly install aboot. (If the command
<BR>
to boot the initial kernel &quot;b 0/a root=/dev/fd0&quot; does not work the
<BR>
installer just whiped your initial kernel.) It probably produced a small
<BR>
partition mounted on /boot, where kernel should go. If the installation
<BR>
routine gives you access to a console maybe you can copy a working kernel
<BR>
to this partition (or just to the / partition). You will probably have to
<BR>
use &quot;Alt FN&quot; (N denotes the number of the pseudo terminals) to switch to a
<BR>
console. From there just copy
<BR>
<A HREF="ftp://ftp.alphalinux.org/pub/Linux-Alpha/jensen/install/jensen17.gz">ftp://ftp.alphalinux.org/pub/Linux-Alpha/jensen/install/jensen17.gz</A> to
<BR>
&quot;/boot&quot; (you should find out the partition number where boot
<BR>
resides, let it be 3 for explanation purposes). The jensen17.gz file can
<BR>
be copied from a fat-floppy using the mtools (if they are available: mcopy
<BR>
A:\jensen17.gz /boot/jensen17.gz) or cp (cp /mnt/jensen17.gz
<BR>
/boot/jensen17.gz) after mounting the floppy (mount -t fat /dev/fd0 /mnt).
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Then it should be possible to tell aboot something like:
<BR>
&quot;b 3/jensen17.gz root=/dev/sda4&quot;, assuming sda4 is your &quot;/&quot;-partition and
<BR>
sda3 is mounted on &quot;/boot&quot;. The &quot;magic&quot; behind this is aboot ability to
<BR>
boot from kernels from different partitions on its disk. (As a side
<BR>
note: this ability is what the rest of the alpha folks are using, the
<BR>
initial kernel aboot combo is something only the jensen really needs.) 
<BR>
<P><EM>&gt;the fact that I am using now ECU NT version which is different than ECU 
</EM><BR>
<EM>&gt; Linux version provided by AlphaLinux (as far as I know). I have also notice 
</EM><BR>
<EM>&gt; that Debian install uses fdisk in BSD mode to create its own partition 
</EM><BR>
<EM>&gt; scheme (option &quot;f&quot;) skipping the first cylinder of first partition (2-515) 
</EM><BR>
<EM>&gt; which is quite different than the minlabel method.
</EM><BR>
<EM>&gt; I would like to have a copy of your linux kernel file for the Debian
</EM><BR>
<EM>&gt; install. I will provide to you a ftp access since file is big as you 
</EM><BR>
<EM>&gt; mentioned.
</EM><BR>
<EM>&gt; I'd also like to learn how you recompiled the kernel, did you use
</EM><BR>
<EM>&gt; another similar Alpha machine running Debian?
</EM><BR>
<EM>&gt; Did you delete jensen17-kernel(2.2.17) and copy your new kernel IMAGE 
</EM><BR>
<EM>&gt; directly to aboot?
</EM><BR>
<EM>&gt; Would you please describe a little bit your install method ?
</EM><BR>
<EM>&gt; I have tried so many things so far, as you can see.
</EM><BR>
<EM>&gt; I really appreciate your help.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Thanks
</EM><BR>
<EM>&gt; Luiz
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; PS: I will send the ftp access to your e-mail. thanks again.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; &gt;From: Jakub Ambro¿ewicz &lt;ja@vigor.com.pl&gt;
</EM><BR>
<EM>&gt; &gt;Reply-To: Jakub Ambro¿ewicz &lt;ja@vigor.com.pl&gt;
</EM><BR>
<EM>&gt; &gt;To: &quot;Luiz Emediato&quot; &lt;thooft2002@hotmail.com&gt;
</EM><BR>
<EM>&gt; &gt;Subject: Re: help with 2.2r2 install
</EM><BR>
<EM>&gt; &gt;Date: Wed, 28 Mar 2001 16:08:40 +0200
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; &gt; Dear Debian-Alpha-Jensen users:
</EM><BR>
<EM>&gt; &gt; &gt;
</EM><BR>
<EM>&gt; &gt; &gt; I tried to use the following command to start the Debian-Jensen
</EM><BR>
<EM>&gt; &gt; &gt; install:
</EM><BR>
<EM>&gt; &gt; &gt;
</EM><BR>
<EM>&gt; &gt; &gt; &gt;&gt;&gt;boot -fl i dka400
</EM><BR>
<EM>&gt; &gt; &gt;
</EM><BR>
<EM>&gt; &gt; &gt; aboot1.7&gt; b 0/dists/potato/main/disks-alpha/current/jensen/linux
</EM><BR>
<EM>&gt; &gt; &gt; root=/dev/fd0 load_ramdisk=1
</EM><BR>
<EM>&gt; &gt; &gt;
</EM><BR>
<EM>&gt; &gt; &gt; but the file &quot;linux&quot; is broken.
</EM><BR>
<EM>&gt; &gt; &gt; Does anyone know where I can find a &quot;linux&quot; file which works with
</EM><BR>
<EM>&gt; &gt; &gt; Debian-Jensen?
</EM><BR>
<EM>&gt; &gt; &gt;
</EM><BR>
<EM>&gt; &gt; &gt; TIA,
</EM><BR>
<EM>&gt; &gt; &gt;   Luiz
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;It's me again.  I hope you won't add me to rbl for stupid answers :-)
</EM><BR>
<EM>&gt; &gt;I was dealing with same problem, and noone could help me. I think you saw
</EM><BR>
<EM>&gt; &gt;kernel booting and then stopped after Kswapd. That's known bug. The answer
</EM><BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The hang after kswapd or parport0 (depending on the compiled in
<BR>
options and kernel version) used to come from kernel compiled for
<BR>
the generic target instead of the target jensen. I guess this is still the
<BR>
case.
<BR>
<P><EM>&gt; &gt;is to change the kernel to the one you have compiled by yourself, write it
</EM><BR>
<EM>&gt; &gt;to disk and boot.
</EM><BR>
<EM>&gt; &gt;If you have no acces to the working kernel i can send it to you but it's 
</EM><BR>
<EM>&gt; &gt;3mb
</EM><BR>
<EM>&gt; &gt;big
</EM><BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;May I ask what make command you used? To be more precise, did make
<BR>
boot produce this kernel? (My compressed kernels (2.2.x) always ended up
<BR>
around 1mb in size, so the looks awefully large to me.)
<BR>
<P>Ahoi &amp; good luck
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sebastian Moeller
<BR>
<P><P><PRE>
-- 
To UNSUBSCRIBE, email to debian-alpha-request@lists.debian.org
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0169.html">Masaki Nomura: "Re: cxx on Potato"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0167.html">Paul Slootman: "Re: cxx on Potato"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0157.html">Luiz Emediato: "Re: help with 2.2r2 install"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0157.html">Sebastian Moeller: "Re: help with 2.2r2 install"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Tue Apr 10 2001 - 10:35:37 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
