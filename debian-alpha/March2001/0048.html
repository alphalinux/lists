<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: Re: DS20E, SMP</TITLE>
<META NAME="Author" CONTENT="Rich Payne (rdp@talisman.alphalinux.org)">
<META NAME="Subject" CONTENT="Re: DS20E, SMP">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: DS20E, SMP</H1>
<HR>
<P>
<!-- received="Mon Mar 12 17:34:05 2001" -->
<!-- isoreceived="20010313013405" -->
<!-- sent="Mon, 12 Mar 2001 12:05:49 -0500 (EST)" -->
<!-- isosent="20010312170549" -->
<!-- name="Rich Payne" -->
<!-- email="rdp@talisman.alphalinux.org" -->
<!-- subject="Re: DS20E, SMP" -->
<!-- id="Pine.LNX.4.21.0103121204040.16926-100000@talisman.mv.com" -->
<!-- inreplyto="20010312080043.A7878@iarc.uaf.edu" -->
<STRONG>Subject: </STRONG>Re: DS20E, SMP<BR>
<STRONG>From: </STRONG>Rich Payne (<EM>rdp@talisman.alphalinux.org</EM>)<BR>
<STRONG>Date: </STRONG>Mon Mar 12 2001 - 09:05:49 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#48">[ date ]</A>
<A HREF="index.html#48">[ thread ]</A>
<A HREF="subject.html#48">[ subject ]</A>
<A HREF="author.html#48">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0049.html">Christopher S. Swingley: "Re: DS20E, SMP"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0047.html">Christopher S. Swingley: "DS20E, SMP"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0047.html">Christopher S. Swingley: "DS20E, SMP"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0049.html">Christopher S. Swingley: "Re: DS20E, SMP"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0047.html">Rich Payne: "Re: DS20E, SMP"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
When you compiled 2.2.19pre13 did you include RTC (Real Time Clock
<BR>
) Support? If so, either get the rtc-lite patches or turn it off.
<BR>
<P>The RTC Lite patches can be found on the kernel mirrors, under
<BR>
linux/kernel/people/andrea
<BR>
<P>--rdp
<BR>
<P>On Mon, 12 Mar 2001, Christopher S. Swingley wrote:
<BR>
<P><EM>&gt; Hi!
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; I recently got a new dual processor Compaq DS20E, and am trying
</EM><BR>
<EM>&gt; to get Debian running.  I've gotten virtually everything working,
</EM><BR>
<EM>&gt; but I'm having trouble with SMP.  I tried compiling 2.4.2 and 2.4.3pre3
</EM><BR>
<EM>&gt; (GENERIC processor) and both of these kernels panic on boot.  Next,
</EM><BR>
<EM>&gt; I compiled 2.2.19pre13 (from a Debian source package) with SMP support.
</EM><BR>
<EM>&gt; It seems to compile in, and it sees both processors:
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;     $ uname -a
</EM><BR>
<EM>&gt;     Linux tonka 2.2.19pre13 #1 SMP Fri Mar 9 07:02:02 AKST 2001     \
</EM><BR>
<EM>&gt;     alpha unknown
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;     $ cat /proc/cpuinfo
</EM><BR>
<EM>&gt;     cpu			: Alpha
</EM><BR>
<EM>&gt;     cpu model		: EV67
</EM><BR>
<EM>&gt;     cpu variation		: 7
</EM><BR>
<EM>&gt;     cpu revision		: 0
</EM><BR>
<EM>&gt;     cpu serial number	: 
</EM><BR>
<EM>&gt;     system type		: Tsunami
</EM><BR>
<EM>&gt;     system variation	: Catamaran
</EM><BR>
<EM>&gt;     system revision		: 0
</EM><BR>
<EM>&gt;     cycle frequency [Hz]	: 666666666 
</EM><BR>
<EM>&gt;     timer frequency [Hz]	: 1024.00
</EM><BR>
<EM>&gt;     page size [bytes]	: 8192
</EM><BR>
<EM>&gt;     phys. address bits	: 44
</EM><BR>
<EM>&gt;     max. addr. space #	: 255
</EM><BR>
<EM>&gt;     BogoMIPS		: 1325.40
</EM><BR>
<EM>&gt;     kernel unaligned acc	: 0 (pc=0,va=0)
</EM><BR>
<EM>&gt;     user unaligned acc	: 0 (pc=0,va=0)
</EM><BR>
<EM>&gt;     platform string		: COMPAQ AlphaServer DS20E 666 MHz
</EM><BR>
<EM>&gt;     cpus detected		: 2
</EM><BR>
<EM>&gt;     CPUs probed 2 active 2 map 0x3 IPIs 985
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; But the data in /proc/stat seems pretty bizzare (CPU1 is doing something,
</EM><BR>
<EM>&gt; but it's not user, system or nice CPU time?):
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;     $ cat /proc/stat
</EM><BR>
<EM>&gt;     cpu  15209 0 3468 288257
</EM><BR>
<EM>&gt;     cpu0 15209 0 3468 134790
</EM><BR>
<EM>&gt;     cpu1 0 0 0 153467
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; When I compile a kernel with 'MAKE=make' it takes a wall clock time
</EM><BR>
<EM>&gt; of 5m3.822s and user time of 2m16.566s.  With 'MAKE=make -j3' it's
</EM><BR>
<EM>&gt; wall clock time is 2m58.493s and user time is 2m17.061s.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; So, the kernel seems to be using both processors (a kernel compile
</EM><BR>
<EM>&gt; can take almost half as long), but the information the kernel provides
</EM><BR>
<EM>&gt; seems to be wrong.  'top' also shows strange behavior, probably because
</EM><BR>
<EM>&gt; it's trying to get information from /proc.  I've got the latest version
</EM><BR>
<EM>&gt; of procps, which is supposed to support multiple CPU's:
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;     $ dpkg --list procps
</EM><BR>
<EM>&gt;     ii  procps      2.0.7-3    The /proc file system utilities
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Is this what I should be seeing?
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Any idea on what's wrong with the 2.4 kernels, or if a solution to
</EM><BR>
<EM>&gt; the panic is imminant?
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Thanks!
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Chris
</EM><BR>
<EM>&gt; 
</EM><BR>
<P><PRE>
-- 
Rich Payne
rpayne@alphalinux.org			www.alphalinux.org
<P><P>-- 
To UNSUBSCRIBE, email to debian-alpha-request@lists.debian.org
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0049.html">Christopher S. Swingley: "Re: DS20E, SMP"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0047.html">Christopher S. Swingley: "DS20E, SMP"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0047.html">Christopher S. Swingley: "DS20E, SMP"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0049.html">Christopher S. Swingley: "Re: DS20E, SMP"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0047.html">Rich Payne: "Re: DS20E, SMP"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Tue Apr 10 2001 - 10:35:36 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
