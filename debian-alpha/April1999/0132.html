<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: knfsd flakiness</TITLE>
<META NAME="Author" CONTENT="Wai-Sun Chia (waisun.chia@msa.dec.com)">
<META NAME="Subject" CONTENT="knfsd flakiness">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>knfsd flakiness</H1>
<HR>
<P>
<!-- received="Mon Apr 19 05:21:49 1999 PDT" -->
<!-- sent="Mon, 19 Apr 1999 13:23:49 +0800" -->
<!-- name="Wai-Sun Chia" -->
<!-- email="waisun.chia@msa.dec.com" -->
<!-- subject="knfsd flakiness" -->
<!-- id="371ABDE5.6B252694@msa.dec.com" -->
<!-- inreplyto="" -->
<STRONG>Wai-Sun Chia</STRONG> (<A HREF="mailto:waisun.chia@msa.dec.com?subject=Re:%20knfsd%20flakiness"><EM>waisun.chia@msa.dec.com</EM></A>)<BR>
<EM>Mon, 19 Apr 1999 13:23:49 +0800</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#132">[ date ]</A>
<A HREF="index.html#132">[ thread ]</A>
<A HREF="subject.html#132">[ subject ]</A>
<A HREF="author.html#132">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0131.html">Jamie Raymond: "NIS funkiness"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Folks,
<BR>
This morning I came into office and found our nfs master totally dead.
<BR>
Dead in terms of nis, nfs, sendmail, inetd, etc. i.e. almost all
<BR>
services are down eventhough host is still ping'able..
<BR>
<P>When we try to manually restart it says something like &quot;named cannot
<BR>
start due to insufficient memory...&quot;. Reluctantly I rebooted the
<BR>
machine. And everything went back to normal.
<BR>
<P>But even then, &quot;normal&quot; still means I get a lot of scary nfs errors (see
<BR>
below). I'm running nis and user home directories are mounted to the
<BR>
various user systems from this host.
<BR>
<P>I'm running Alpha/Debian 2.1/knfsd 1.2/kernel 2.2.5-ac6.
<BR>
<P>******************************* knfsd server
<BR>
**********************************
<BR>
Apr 18 15:20:46 host kernel: EXT2-fs warning (device sd(8,80)):
<BR>
ext2_free_inode
<BR>
<EM>: bit already cleared for inode 12352 
</EM><BR>
Apr 18 15:20:46 slinky kernel: lookup_by_inode: ino 12352 not found in
<BR>
mqueue 
<BR>
Apr 18 15:20:46 slinky kernel: find_fh_dentry: 08:50/12352 dir/12289 not
<BR>
found! 
<BR>
Apr 18 15:20:46 slinky kernel: nfs_revalidate_inode: mqueue/dfPAA14186
<BR>
getattr fa
<BR>
iled, ino=12352, error=-2 Apr 19 11:17:27 slinky kernel: fh_verify:
<BR>
mqueue/xfLAA30833 permission failure, acc=2, error=13 
<BR>
Apr 19 11:19:49 slinky kernel: __nfs_fhget: inode 12367 busy, i_count=2,
<BR>
i_nlink=1 
<BR>
Apr 19 11:19:49 slinky kernel: nfs_free_dentries: found
<BR>
mqueue/qfLAA30829, d_count=0, hashed=1 
<BR>
Apr 19 11:19:49 slinky kernel: nfs_dentry_delete: mqueue/qfLAA30829:
<BR>
ino=12367, count=2, nlink=1 
<BR>
Apr 19 11:20:09 slinky kernel: EXT2-fs warning (device sd(8,80)):
<BR>
ext2_free_inode: bit already cleared for inode 12352 
<BR>
Apr 19 11:17:27 slinky kernel: fh_verify: mqueue/xfLAA30833 permission
<BR>
failure, acc=2, error=13 
<BR>
Apr 19 11:19:49 slinky kernel: __nfs_fhget: inode 12367 busy, i_count=2,
<BR>
i_nlink=1 
<BR>
Apr 19 11:19:49 slinky kernel: nfs_free_dentries: found
<BR>
mqueue/qfLAA30829, d_count=0, hashed=1 
<BR>
Apr 19 11:19:49 slinky kernel: nfs_dentry_delete: mqueue/qfLAA30829:
<BR>
ino=12367, count=2, nlink=1 
<BR>
Apr 19 11:20:09 slinky kernel: EXT2-fs warning (device sd(8,80)):
<BR>
ext2_free_inode: bit already cleared for inode 12352 
<BR>
Apr 19 11:20:09 slinky kernel: lookup_by_inode: ino 12352 not found in
<BR>
mqueue 
<BR>
Apr 19 11:20:09 slinky kernel: find_fh_dentry: 08:50/12352 dir/12289 not
<BR>
found! 
<BR>
Apr 19 11:25:08 slinky kernel: fh_verify: mqueue/xfLAA30841 permission
<BR>
failure, acc=2, error=13 
<BR>
Apr 19 11:26:23 slinky kernel: fh_verify: mqueue/xfLAA08300 permission
<BR>
failure, acc=2, error=13 
<BR>
Apr 19 11:27:17 slinky kernel: fh_verify: mqueue/xfLAA30845 permission
<BR>
failure, acc=2, error=13 
<BR>
<P>***************************** knfsd client
<BR>
************************************
<BR>
<P>Apr 18 07:17:20 client kernel: nfs_revalidate_inode: waisun/.kderc
<BR>
getattr failed, ino=51223, error=-70 
<BR>
Apr 18 07:17:20 client kernel: NFS: bad fh
<BR>
0000000000000000000000000000000000000000000000000000000000000000 
<BR>
Apr 18 07:17:20 client kernel:            
<BR>
feebbaca000000000000c8170000c80100000830000008300000000200000001 
<BR>
Apr 18 07:17:20 client kernel: nfs_revalidate_inode: waisun/.kderc
<BR>
getattr failed, ino=51223, error=-70 
<BR>
Apr 18 07:17:20 client kernel: NFS: bad fh
<BR>
0000000000000000000000000000000000000000000000000000000000000000 
<BR>
Apr 18 07:17:20 client kernel:   Apr 19 07:45:50 nexus kernel:
<BR>
nfs_revalidate_inode: waisun/.kderc getattr failed
<BR>
, ino=51223, error=-13 
<BR>
Apr 19 07:45:58 nexus last message repeated 2451 times
<BR>
Apr 19 07:45:58 nexus kernel: nfs_revalidate_inode: /// getattr failed,
<BR>
ino=2, e
<BR>
rror=-13 
<BR>
Apr 19 07:45:58 nexus kernel: nfs_revalidate_inode: waisun/.kderc
<BR>
getattr failed
<BR>
, ino=51223, error=-13 
<BR>
Apr 19 07:46:28 nexus last message repeated 8700 times
<BR>
Apr 19 07:47:30 nexus last message repeated 19366 times
<BR>
Apr 19 07:48:31 nexus last message repeated 21296 times
<BR>
Apr 19 07:49:32 nexus last message repeated 21424 times
<BR>
Apr 19 07:50:33 nexus last message repeated 21449 times
<BR>
Apr 19 07:51:34 nexus last message repeated 21452 times
<BR>
Apr 19 07:52:35 nexus last message repeated 21396 times
<BR>
Apr 19 07:53:36 nexus last message repeated 21354 times
<BR>
Apr 19 07:54:37 nexus last message repeated 21418 times
<BR>
Apr 19 07:55:38 nexus last message repeated 21193 times
<BR>
Apr 19 07:56:39 nexus last message repeated 21287 times
<BR>
Apr 19 07:57:40 nexus last message repeated 21164 times
<BR>
Apr 19 07:58:40 nexus last message repeated 21008 times
<BR>
<P>This particular client busted its /var partition and froze, due to the
<BR>
logs.
<BR>
<P>Initially I was running userland nfsd and has problems with locking.
<BR>
After consulting the list, some of gurus recommended going over to knfsd
<BR>
as only it provides nfs locking. Now the lock related problems have
<BR>
dissapeared only to be replace by this problem.
<BR>
<P>Any ideas? This is a fairly busy environment with about 300 user
<BR>
population.
<BR>
<P><P><PRE>
-- 
Wai-Sun &quot;squidster&quot; Chia
<P><P>--  
To UNSUBSCRIBE, email to <A HREF="mailto:debian-alpha-request@lists.debian.org?subject=Re:%20knfsd%20flakiness">debian-alpha-request@lists.debian.org</A>
with a subject of &quot;unsubscribe&quot;. Trouble? Contact <A HREF="mailto:listmaster@lists.debian.org?subject=Re:%20knfsd%20flakiness">listmaster@lists.debian.org</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0131.html">Jamie Raymond: "NIS funkiness"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Sun Apr 18 1999 - 23:00:24 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
