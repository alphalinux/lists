<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: Fwd: desk-guide applet does not display wind</TITLE>
<META NAME="Author" CONTENT="Doug Larrick (doug@ties.org)">
<META NAME="Subject" CONTENT="Fwd: desk-guide applet does not display window contents">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Fwd: desk-guide applet does not display window contents</H1>
<HR>
<P>
<!-- received="Sun Dec 03 13:35:04 2000" -->
<!-- isoreceived="20001203213504" -->
<!-- sent="Sat, 02 Dec 2000 09:12:21 -0500 (EST)" -->
<!-- isosent="20001202141221" -->
<!-- name="Doug Larrick" -->
<!-- email="doug@ties.org" -->
<!-- subject="Fwd: desk-guide applet does not display window contents" -->
<!-- id="XFMail.20001202091221.doug@ties.org" -->
<STRONG>Subject: </STRONG>Fwd: desk-guide applet does not display window contents<BR>
<STRONG>From: </STRONG>Doug Larrick (<EM>doug@ties.org</EM>)<BR>
<STRONG>Date: </STRONG>Sat Dec 02 2000 - 06:12:21 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#0">[ date ]</A>
<A HREF="index.html#0">[ thread ]</A>
<A HREF="subject.html#0">[ subject ]</A>
<A HREF="author.html#0">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0001.html">Branden Robinson: "pre-release 4.0.1-10 packages available for building"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
[Forwarding to Debian-Alpha FYI... I filed this yesterday --Doug]
<BR>
<P>Package: gnome-applets
<BR>
version: 1.2.4-1
<BR>
<P>On systems that, for one reason or other, are unable or unwilling to
<BR>
allocate X shared memory for its use, deskguide_applet does not fill
<BR>
its thumbnails with screen contents, regardless of the setting of the
<BR>
Properties checkbox to that effect.  This problem affects at least
<BR>
some Alpha systems using XFree86 3.3.6 under current Woody.
<BR>
<P>deskguide-applet contains code to deal with failure to allocate X
<BR>
shared memory, but this code is not being properly triggered.  The
<BR>
following patch to gnome-core-1.2.4/applets/desk-guide/gwmthumbnail.c
<BR>
fixes the problem.
<BR>
<P><P>--- gwmthumbnail.c.orig Wed Nov 15 12:57:58 2000
<BR>
+++ gwmthumbnail.c      Fri Dec  1 22:54:19 2000
<BR>
@@ -553,6 +553,7 @@
<BR>
&nbsp;&nbsp;&nbsp;XShmSegmentInfo *x_shm_info;
<BR>
&nbsp;&nbsp;&nbsp;gint depth = -1;
<BR>
&nbsp;&nbsp;&nbsp;gint saved_gdk_use_xshm;
<BR>
+  gint errcode;
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;g_return_val_if_fail (width != 0 &amp;&amp; height != 0, NULL);
<BR>
&nbsp;&nbsp;&nbsp;g_return_val_if_fail (pixmap_p != NULL, NULL);
<BR>
@@ -585,8 +586,8 @@
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x_shm_info,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width, height, depth);
<BR>
&nbsp;&nbsp;&nbsp;XSync (private-&gt;xdisplay, False);
<BR>
-  gdk_error_trap_pop ();
<BR>
-  if (!private-&gt;xwindow)
<BR>
+  errcode = gdk_error_trap_pop ();
<BR>
+  if (!private-&gt;xwindow || errcode != 0)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;g_free (private);
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gdk_image_destroy (image);
<BR>
<P><P><P><PRE>
-- 
Doug Larrick  doug@ties.org  doug.larrick@compaq.com  AIM: DougLarick
<P><P>-- 
To UNSUBSCRIBE, email to debian-alpha-request@lists.debian.org
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0001.html">Branden Robinson: "pre-release 4.0.1-10 packages available for building"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Tue Jan 02 2001 - 07:48:33 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
