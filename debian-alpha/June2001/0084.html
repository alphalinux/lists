<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: Re: tulip driver 2.4.x kernel</TITLE>
<META NAME="Author" CONTENT="James D. Freels (freelsjd@ornl.gov)">
<META NAME="Subject" CONTENT="Re: tulip driver 2.4.x kernel">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: tulip driver 2.4.x kernel</H1>
<HR>
<P>
<!-- received="Sun Jun 24 00:01:54 2001" -->
<!-- isoreceived="20010624070154" -->
<!-- sent="Fri, 22 Jun 2001 15:44:34 -0400" -->
<!-- isosent="20010622194434" -->
<!-- name="James D. Freels" -->
<!-- email="freelsjd@ornl.gov" -->
<!-- subject="Re: tulip driver 2.4.x kernel" -->
<!-- id="01062215443404.04603@fea" -->
<!-- inreplyto="3B334730.AE98A369@cs.wustl.edu" -->
<STRONG>Subject: </STRONG>Re: tulip driver 2.4.x kernel<BR>
<STRONG>From: </STRONG>James D. Freels (<EM>freelsjd@ornl.gov</EM>)<BR>
<STRONG>Date: </STRONG>Fri Jun 22 2001 - 12:44:34 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#84">[ date ]</A>
<A HREF="index.html#84">[ thread ]</A>
<A HREF="subject.html#84">[ subject ]</A>
<A HREF="author.html#84">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0085.html">Nikita Schmidt: "Re: problems with milo boot"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0083.html">Peter S Galbraith: "Re: Anyone willing to autobuild for non-us"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0075.html">Mr. Berkley Shands: "Re: tulip driver 2.4.x kernel"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0075.html">James D. Freels: "Re: tulip driver 2.4.x kernel"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Berkley,
<BR>
<P>Thanks for responding with your suggestions.  It is nice to see someone 
<BR>
listening.  I have had this problem since 2.4.0, and yours is the most 
<BR>
helpful to actually solve the problem.  Most people assume user error, which 
<BR>
it may be, but I have also seen some indication on the net of real problems 
<BR>
with the de4x5 driver which I suspect.  It took a while to generate this 
<BR>
information, but if I can fix the problem, it will be worth the effort.  I 
<BR>
recompiled the 2.4.5 kernel to make sure that the only difference between the 
<BR>
two versions was the de4x5 and tulip ethernet drivers.
<BR>
<P>On Friday 22 June 2001 09:25 am, Mr. Berkley Shands wrote:
<BR>
<EM>&gt; &quot;James D. Freels&quot; wrote:
</EM><BR>
<EM>&gt; &gt; I have a DE-500-AA ethernet card on a PC164 motherboard with 500Mhz
</EM><BR>
<EM>&gt; &gt; 21164A Alpha chip.  I purchased this turnkey from Microway.  It has
</EM><BR>
<EM>&gt; &gt; worked fine with all kernels up until 2.4.x.  Then it fails both with
</EM><BR>
<EM>&gt; &gt; de4x5 and tulip drivers.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Please try an &quot;ifconfig -a&quot; are you getting collisions or carrier
</EM><BR>
<EM>&gt; errors?
</EM><BR>
<P>OK.  I have three outputs to show: 1) ifconfig -a &gt; ifconfig.2.2.19 
<BR>
2) ifconfig -a &gt;ifconfig.2.4.5_de4x5, and 3) ifconfig.2.4.5_tulip.  Nothing 
<BR>
unusual that I could see.  The system runs 2.2.19 nearly all the time, so a 
<BR>
few errors show up out of the millions of packets transfered for that kernel.
<BR>
<P>ifconfig.2.2.19:
<BR>
__________________
<BR>
<P>dummy     Link encap:Ethernet  HWaddr 00:00:00:00:00:00  
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BROADCAST NOARP  MTU:1500  Metric:1
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RX packets:0 errors:0 dropped:0 overruns:0 frame:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collisions:0 txqueuelen:0 
<BR>
<P>eth0      Link encap:Ethernet  HWaddr 00:00:F8:05:C2:19  
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inet addr:128.219.17.74  Bcast:128.219.255.255  Mask:255.255.0.0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RX packets:88795640 errors:481 dropped:0 overruns:0 frame:481
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TX packets:28433672 errors:742 dropped:0 overruns:0 carrier:543
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collisions:2051727 txqueuelen:100 
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Interrupt:17 Base address:0x8000 
<BR>
<P>lo        Link encap:Local Loopback  
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inet addr:127.0.0.1  Mask:255.0.0.0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UP LOOPBACK RUNNING  MTU:8020  Metric:1
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RX packets:6988535 errors:0 dropped:0 overruns:0 frame:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TX packets:6988535 errors:0 dropped:0 overruns:0 carrier:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collisions:0 txqueuelen:0 
<BR>
<P>ifconfig.2.4.5_de4x5
<BR>
________________
<BR>
<P>dummy0    Link encap:Ethernet  HWaddr 00:00:00:00:00:00  
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BROADCAST NOARP  MTU:1500  Metric:1
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RX packets:0 errors:0 dropped:0 overruns:0 frame:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collisions:0 txqueuelen:0 
<BR>
<P>eth0      Link encap:Ethernet  HWaddr 00:00:F8:05:C2:19  
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inet addr:128.219.17.74  Bcast:128.219.255.255  Mask:255.255.0.0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RX packets:9798 errors:0 dropped:0 overruns:0 frame:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TX packets:61 errors:0 dropped:0 overruns:0 carrier:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collisions:4 txqueuelen:100 
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Interrupt:17 Base address:0x8400 
<BR>
<P>lo        Link encap:Local Loopback  
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inet addr:127.0.0.1  Mask:255.0.0.0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UP LOOPBACK RUNNING  MTU:16436  Metric:1
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RX packets:36 errors:0 dropped:0 overruns:0 frame:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TX packets:36 errors:0 dropped:0 overruns:0 carrier:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collisions:0 txqueuelen:0 
<BR>
<P><P>ifconfig.2.4.5_tulip
<BR>
_______________
<BR>
dummy0    Link encap:Ethernet  HWaddr 00:00:00:00:00:00  
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BROADCAST NOARP  MTU:1500  Metric:1
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RX packets:0 errors:0 dropped:0 overruns:0 frame:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collisions:0 txqueuelen:0 
<BR>
<P>eth0      Link encap:Ethernet  HWaddr 00:00:F8:05:C2:19  
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inet addr:128.219.17.74  Bcast:128.219.255.255  Mask:255.255.0.0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RX packets:1929 errors:0 dropped:0 overruns:0 frame:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TX packets:39 errors:1 dropped:0 overruns:0 carrier:1
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collisions:0 txqueuelen:100 
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Interrupt:17 Base address:0x8400 
<BR>
<P>lo        Link encap:Local Loopback  
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inet addr:127.0.0.1  Mask:255.0.0.0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UP LOOPBACK RUNNING  MTU:16436  Metric:1
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RX packets:36 errors:0 dropped:0 overruns:0 frame:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TX packets:36 errors:0 dropped:0 overruns:0 carrier:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collisions:0 txqueuelen:0 
<BR>
<P><P><EM>&gt; I have 3 pc164lx boxes, they don't show this problem.
</EM><BR>
<P>That is good.  I also have another pc164lx box, that has a a later tulip 
<BR>
device, but I have not tested the new kernel on it yet.
<BR>
<P><EM>&gt; All have firmware V5.8-1 and the srm console.
</EM><BR>
<P>This machine is at v4.8-1 or srm.  I have read where later versions of srm 
<BR>
may not work for it.  when I originally bought the machine, I tri-booted 
<BR>
between DEC-Unix, Linux, and Alpha-NT.  So, I got used to changing firmware.  
<BR>
I am willing to upgrade the SRM version, if it won't cause more problems than 
<BR>
fix.
<BR>
<P><EM>&gt;         &lt;DT&gt;&lt;A
</EM><BR>
<EM>&gt; HREF=&quot;<A HREF="http://ftp.digital.com/pub/Digital/Alpha/firmware/index.html">http://ftp.digital.com/pub/Digital/Alpha/firmware/index.html</A>&quot;
</EM><BR>
<EM>&gt; ADD_DATE=&quot;983218449&quot; LAST_VISIT=&quot;993060491&quot;
</EM><BR>
<EM>&gt; LAST_MODIFIED=&quot;983218444&quot;&gt;Alpha Systems Firmware&lt;/A&gt;
</EM><BR>
<EM>&gt;         &lt;DT&gt;&lt;A
</EM><BR>
<EM>&gt; HREF=&quot;<A HREF="http://www.alpha-processor.com/support/firmware.shtml">http://www.alpha-processor.com/support/firmware.shtml</A>&quot;
</EM><BR>
<EM>&gt; ADD_DATE=&quot;983471635&quot; LAST_VISIT=&quot;993060620&quot;
</EM><BR>
<EM>&gt; LAST_MODIFIED=&quot;983471629&quot;&gt;API NetWorks, Inc: Firmware&lt;/A&gt;
</EM><BR>
<EM>&gt; The microway is a good box...
</EM><BR>
<P>Damn right Microway is good!  I have bene a customer of theres long before 
<BR>
Alphas came out.  They have always been a customer that brings high 
<BR>
performance to the desktop at a reasonable cost.
<BR>
<P><EM>&gt; What does &quot;&gt;&gt;&gt; show ewa*&quot; return for ewa0_mode off the srm console?
</EM><BR>
<P>Twisted-Pair
<BR>
<P><EM>&gt;
</EM><BR>
<EM>&gt; Maybe I should back up a step. What does
</EM><BR>
<EM>&gt; &quot;Then it fails both with de4x5 and tulip drivers.&quot; mean ?
</EM><BR>
<EM>&gt; it won't boot or it doesn't talk to the world?
</EM><BR>
<P>It boots fine and will run for several minutes.  But, when you give it a 
<BR>
decent network load, it just hangs the system dead.  Luckily, the Linux 
<BR>
e2fsck process is robust enough to correct the many errors that show up on 
<BR>
the drives when it reboots.  My main goal is to get reiserfs running on this 
<BR>
machine, but I am sure other new features of the kernel will also be used.
<BR>
<P><EM>&gt; Do you have aboot v0.7 or v0.7a installed? If not, you can
</EM><BR>
<EM>&gt; end up not mounting root.
</EM><BR>
<P>I am running v0.7a of aboot.
<BR>
<P><EM>&gt; If it does boot, but will not talk, make sure &quot;&gt;&gt;&gt; set ewa0_mode auto&quot;
</EM><BR>
<EM>&gt; and that your switch is autonegotiate on that port. The tulip driver
</EM><BR>
<EM>&gt; should report how it is talking... (this is from the generic tulip
</EM><BR>
<EM>&gt; driver CONFIG_DE4X5=y)
</EM><BR>
<P>I don't understand why I need to change ewa0_mode to auto.  I have no idea 
<BR>
where to look for the autonegotiate switch for the port ?
<BR>
Again here are three examples of the ethernet section out of dmesg output:
<BR>
<P>dmesg.2.2.19_de4x5
<BR>
_________________
<BR>
<P>Linux version 2.2.19 (root@fea6) (gcc version 2.95.2 20000220 (Debian 
<BR>
GNU/Linux)) #1 Thu Mar 29 16:20:46 EST 2001
<BR>
Booting on EB164 variation PC164 using machine vector PC164 from SRM
<BR>
.
<BR>
.
<BR>
.
<BR>
eth0: DE500-AA at 0x8000 (PCI bus 0, device 7), h/w address 00:00:f8:05:c2:19,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and requires IRQ17 (provided by PCI BIOS).
<BR>
de4x5.c:V0.544 1999/5/8 davies@maniac.ultranet.com
<BR>
.
<BR>
.
<BR>
.
<BR>
eth0: media is TP.
<BR>
<P>dmesg.2.4.5_de4x5
<BR>
________________
<BR>
<P>Linux version 2.4.5 (root@fea6) (gcc version 2.95.2 20000220 (Debian 
<BR>
GNU/Linux)) #1 Fri Jun 22 14:00:43 EDT 2001
<BR>
Booting on EB164 variation PC164 using machine vector PC164 from SRM
<BR>
.
<BR>
.
<BR>
.
<BR>
eth0: DE500-AA at 0x8400 (PCI bus 0, device 7), h/w address 00:00:f8:05:c2:19,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and requires IRQ17 (provided by PCI BIOS).
<BR>
de4x5.c:V0.546 2001/02/22 davies@maniac.ultranet.com
<BR>
.
<BR>
.
<BR>
.
<BR>
eth0: media is TP.
<BR>
<P>dmesg.2.4.5_tulip
<BR>
______________
<BR>
Linux version 2.4.5 (root@fea6) (gcc version 2.95.2 20000220 (Debian 
<BR>
GNU/Linux)) #2 Fri Jun 22 14:47:12 EDT 2001
<BR>
Booting on EB164 variation PC164 using machine vector PC164 from SRM
<BR>
.
<BR>
.
<BR>
.
<BR>
Linux Tulip driver version 0.9.15-pre2 (May 16, 2001)
<BR>
tulip0:  EEPROM default media type Autosense.
<BR>
tulip0:  Index #0 - Media MII (#11) described by a 21140 MII PHY (1) block.
<BR>
tulip0:  MII transceiver #5 config 0000 status 780d advertising 00a1.
<BR>
tulip0:  Advertising 01e1 on PHY 5, previously advertising 00a1.
<BR>
eth0: Digital DS21140 Tulip rev 32 at 0x8400, 00:00:F8:05:C2:19, IRQ 17.
<BR>
.
<BR>
.
<BR>
.
<BR>
(no eth0 media message found ?)
<BR>
________________________________
<BR>
<P>I hope you or someone can help me with this.  I wonder if if may be necessary 
<BR>
to get a different ethernet card.
<BR>
<P><P><PRE>
-- 
James D. Freels, P.E._i, Ph.D.
Oak Ridge National Laboratory
freelsjd@ornl.gov - work
jdfreels@home.com - home
<P><P>-- 
To UNSUBSCRIBE, email to debian-alpha-request@lists.debian.org
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0085.html">Nikita Schmidt: "Re: problems with milo boot"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0083.html">Peter S Galbraith: "Re: Anyone willing to autobuild for non-us"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0075.html">Mr. Berkley Shands: "Re: tulip driver 2.4.x kernel"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0075.html">James D. Freels: "Re: tulip driver 2.4.x kernel"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Thu Jul 05 2001 - 05:45:31 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
