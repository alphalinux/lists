<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: Re: Is this a gcc problem?</TITLE>
<META NAME="Author" CONTENT="Christopher C. Chimelis (chris@debian.org)">
<META NAME="Subject" CONTENT="Re: Is this a gcc problem?">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Is this a gcc problem?</H1>
<HR>
<P>
<!-- received="Wed Nov 29 07:46:47 2000" -->
<!-- isoreceived="20001129154647" -->
<!-- sent="Tue, 28 Nov 2000 23:27:59 -0500 (EST)" -->
<!-- isosent="20001129042759" -->
<!-- name="Christopher C. Chimelis" -->
<!-- email="chris@debian.org" -->
<!-- subject="Re: Is this a gcc problem?" -->
<!-- id="Pine.LNX.4.21.0011282323080.15867-100000@spawn.hockeyfiend.com" -->
<!-- inreplyto="XFMail.20001128231938.doug@ties.org" -->
<STRONG>Subject: </STRONG>Re: Is this a gcc problem?<BR>
<STRONG>From: </STRONG>Christopher C. Chimelis (<EM>chris@debian.org</EM>)<BR>
<STRONG>Date: </STRONG>Tue Nov 28 2000 - 20:27:59 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#256">[ date ]</A>
<A HREF="index.html#256">[ thread ]</A>
<A HREF="subject.html#256">[ subject ]</A>
<A HREF="author.html#256">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0257.html">Robert Martinovic: "Re: Is this a gcc problem?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0255.html">Doug Larrick: "Is this a gcc problem?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0255.html">Doug Larrick: "Is this a gcc problem?"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0257.html">Robert Martinovic: "Re: Is this a gcc problem?"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0255.html">Christopher C. Chimelis: "Re: Is this a gcc problem?"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
On Tue, 28 Nov 2000, Doug Larrick wrote:
<BR>
<P><EM>&gt; I have tracked down a problem I've been seeing with gtk apps for quite
</EM><BR>
<EM>&gt; some time, where certain windows don't display properly... see
</EM><BR>
<EM>&gt; <A HREF="http://jekyl.ddts.net/~doug/control-center-1.jpg">http://jekyl.ddts.net/~doug/control-center-1.jpg</A> for an example.  The
</EM><BR>
<EM>&gt; problem is in the GtkHPaned widget, specifically in how it calculates
</EM><BR>
<EM>&gt; a particular subwidget's size.  However, the problem appears to be one
</EM><BR>
<EM>&gt; of code generation rather than a problem with the source.  Here's the
</EM><BR>
<EM>&gt; relevant snippet, from gtk/gtkhpaned.c in libgtk1.2, near line 219
</EM><BR>
<EM>&gt; (the #if'd out part is the original; the #else part is my replacement):
</EM><BR>
<P>Thanks for looking into this.  It's been on my &quot;list of stuff to look
<BR>
at&quot; for weeks now, but the C++ multiple inheritance stuff has superceded
<BR>
it :-(
<BR>
<P>I believe that you're correct that the code is being misgenerated.  It's
<BR>
quite possible that it's an optimiser bug (yet again).  I'll try to
<BR>
compile GTK again without any optimisation and see if it helps.  If so,
<BR>
I'll do a binary NMU on it and put it on my list of &quot;stuff to compile
<BR>
without optimisation&quot; :-P
<BR>
<P><EM>&gt; The interesting thing to note is that child2_allocation looks like
</EM><BR>
<EM>&gt; this:
</EM><BR>
<EM>&gt;   struct GtkAllocation
</EM><BR>
<EM>&gt;    {
</EM><BR>
<EM>&gt;      gint16 x;
</EM><BR>
<EM>&gt;      gint16 y;
</EM><BR>
<EM>&gt;      guint16 width;
</EM><BR>
<EM>&gt;      guint16 height;
</EM><BR>
<EM>&gt;    };
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; This looks like a gcc bug (and a bad one) to me.  The two values
</EM><BR>
<EM>&gt; printf'd out are nearly always different.
</EM><BR>
<P>I'm wondering if the bug is related to the casting.  Either way, if no
<BR>
optimisation fixes it, I wouldn't bother submitting it as a bug unless the
<BR>
newer gcc snapshot exhibits the same behaviour (sooooooo many changes have
<BR>
been made to gcc between 2.95.2 and now).  I don't think we're far away
<BR>
from gcc 3.0, but there's no guarantee of that.
<BR>
<P><EM>&gt; I am going to try to narrow this down to a good test case and submit a
</EM><BR>
<EM>&gt; bug against gcc, but first I'm wondering if it rings a bell with
</EM><BR>
<EM>&gt; anyone?
</EM><BR>
<P>Well, at least I know that Rich Payne and I aren't alone in seeing this
<BR>
:-P  I'm also glad that you took the initiative and looked at the problem
<BR>
(big thanks for that).
<BR>
<P>C
<BR>
<P><P><PRE>
-- 
To UNSUBSCRIBE, email to debian-alpha-request@lists.debian.org
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0257.html">Robert Martinovic: "Re: Is this a gcc problem?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0255.html">Doug Larrick: "Is this a gcc problem?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0255.html">Doug Larrick: "Is this a gcc problem?"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0257.html">Robert Martinovic: "Re: Is this a gcc problem?"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0255.html">Christopher C. Chimelis: "Re: Is this a gcc problem?"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Fri Dec 01 2000 - 08:00:12 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
