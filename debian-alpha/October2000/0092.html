<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: Re: compiling</TITLE>
<META NAME="Author" CONTENT="T. Weyergraf (kirk@colinet.de)">
<META NAME="Subject" CONTENT="Re: compiling">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: compiling</H1>
<HR>
<P>
<!-- received="Thu Oct 26 00:49:20 2000" -->
<!-- isoreceived="20001026074920" -->
<!-- sent="Wed, 25 Oct 2000 18:44:36 +0200" -->
<!-- isosent="20001025164436" -->
<!-- name="T. Weyergraf" -->
<!-- email="kirk@colinet.de" -->
<!-- subject="Re: compiling" -->
<!-- id="kirk-1001025184435.A0128876@hydra.colinet.de" -->
<!-- inreplyto="Pine.SOL.3.96.1001025173747.9577A-100000@campfire.rrz.Uni-Koeln.DE" -->
<STRONG>Subject: </STRONG>Re: compiling<BR>
<STRONG>From: </STRONG>T. Weyergraf (<EM>kirk@colinet.de</EM>)<BR>
<STRONG>Date: </STRONG>Wed Oct 25 2000 - 09:44:36 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#92">[ date ]</A>
<A HREF="index.html#92">[ thread ]</A>
<A HREF="subject.html#92">[ subject ]</A>
<A HREF="author.html#92">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0093.html">Major A: "UP1100 install tweaks"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0091.html">Kerstin Hoef-Emden: "Re: compiling"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0091.html">Kerstin Hoef-Emden: "Re: compiling"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0099.html">Kerstin Hoef-Emden: "Re: compiling"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0091.html">T. Weyergraf: "Re: compiling"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Hi, again.
<BR>
<P><P><EM>&gt; It worked! Now the file is 610 kb large. What does it do? The ld is
</EM><BR>
<EM>&gt; started and the lib*.a for static linking somehow converted to the lib
</EM><BR>
<EM>&gt; for dynamic linking?
</EM><BR>
<P>Yes. Here's the breakdown of the more intereting option.
<BR>
<P>-shared   create a shared lib.
<BR>
-whole-archive use *all&quot; objects in the following archive.
<BR>
-no-whole-archive the opposite to the above.
<BR>
<P>The reason for the &quot;whole-archive&quot; thing is to use *ALL* functions ( objects ), that are in
<BR>
libcpml_ev6.a, but only those needed in libots.
<BR>
<P>The -soname switch tells the linker, to set the SONAME field in the shared lib to the specified
<BR>
name. That way, you can use -lcpml and have the link libcpml.so point to the real thing - which
<BR>
is libcpml_ev6.so, in our case.
<BR>
<P><EM>&gt; The libcpml*.so is now labelled as executable should this be changed?
</EM><BR>
<P>Oh yes, adjust that. Also, don't forget to run the obvious ldconfig(8) after creating the new
<BR>
shared lib. You may strip(1) it first, for space-saving.
<BR>
<P><EM>&gt; The complaint about a truncated lcpml does not show up anymore, but now
</EM><BR>
<EM>&gt; the compilation stops with this error message:
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; ld: cannot find -lgcc
</EM><BR>
<EM>&gt; make: *** [mb] Error 1
</EM><BR>
<P>That'a a support lib needed by GCC and friends. This looks like, you have not setup
<BR>
you CCC config-file correctly. Check the following file:
<BR>
<P>/usr/lib/compaq/ccc-&quot;your_version&quot;alpha-linux/bin/comp.config
<BR>
<P>The path's in there should reflect your system. You can create this file, after you edited
<BR>
the script create-comp-config.sh to reflect your system. It's also in the above directory.
<BR>
This script is the setup-script for the Compaq compiler ( and typically run at rpm postinst, IIRC ).
<BR>
<P>If you have trouble setting up the compiler, let me know. It's a bit lengthly, but I can
<BR>
provide the setup for you.
<BR>
&nbsp;
<BR>
<P><EM>&gt; Greetings from Cologne (Alaaf),
</EM><BR>
<P>Helau ;-)
<BR>
&nbsp;
<BR>
<EM>&gt; regards,
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Kerstin 
</EM><BR>
<P><P>regards,
<BR>
Thomas Weyergraf
<BR>
<P><P><P><PRE>
-- 
To UNSUBSCRIBE, email to debian-alpha-request@lists.debian.org
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0093.html">Major A: "UP1100 install tweaks"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0091.html">Kerstin Hoef-Emden: "Re: compiling"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0091.html">Kerstin Hoef-Emden: "Re: compiling"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0099.html">Kerstin Hoef-Emden: "Re: compiling"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0091.html">T. Weyergraf: "Re: compiling"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Thu Nov 02 2000 - 08:06:31 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
