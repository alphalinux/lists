<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: Re: There can be only one: LAPACK and F2C vs</TITLE>
<META NAME="Author" CONTENT="Christopher C Chimelis (chris@classnet.med.miami.edu)">
<META NAME="Subject" CONTENT="Re: There can be only one: LAPACK and F2C vs G77 on the Alpha">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: There can be only one: LAPACK and F2C vs G77 on the Alpha</H1>
<HR>
<P>
<!-- received="Wed Feb 17 22:07:55 1999 PST" -->
<!-- sent="Wed, 17 Feb 1999 09:32:03 -0500 (EST)" -->
<!-- name="Christopher C Chimelis" -->
<!-- email="chris@classnet.med.miami.edu" -->
<!-- subject="Re: There can be only one: LAPACK and F2C vs G77 on the Alpha" -->
<!-- id="Pine.LNX.3.96.990217083217.3783A-100000@beezer.med.miami.edu" -->
<!-- inreplyto="m10Cx1I-0009TuC@sweat.cs.unm.edu" -->
<STRONG>Christopher C Chimelis</STRONG> (<A HREF="mailto:chris@classnet.med.miami.edu?subject=Re:%20There%20can%20be%20only%20one:%20LAPACK%20and%20F2C%20vs%20G77%20on%20the%20Alpha"><EM>chris@classnet.med.miami.edu</EM></A>)<BR>
<EM>Wed, 17 Feb 1999 09:32:03 -0500 (EST)</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#198">[ date ]</A>
<A HREF="index.html#198">[ thread ]</A>
<A HREF="subject.html#198">[ subject ]</A>
<A HREF="author.html#198">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0199.html">Barak Pearlmutter: "Re: There can be only one: LAPACK and F2C vs G77 on the Alpha"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0197.html">Michael Schwingen: "Re: Hylafax broken?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0175.html">Christopher C Chimelis: "Re: Hylafax broken?"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0199.html">Barak Pearlmutter: "Re: There can be only one: LAPACK and F2C vs G77 on the Alpha"</A>
</UL>
<HR>
<!-- body="start" -->
<P>
On Tue, 16 Feb 1999, Barak Pearlmutter wrote:
<BR>
<P><EM>&gt; There are a few possible fixes.  As a first measure, the Debian Alpha
</EM><BR>
<EM>&gt; team should declare whether f2c/fort77 or g77 is the &quot;official&quot;
</EM><BR>
<EM>&gt; Fortran compiler for the Alpha, and libraries like lapack should
</EM><BR>
<EM>&gt; declare appropriate dependencies to make sure the right one is
</EM><BR>
<EM>&gt; installed, and to give users an extra hint about the matter.
</EM><BR>
<P>Hmmm...as far as I can say, personally, we're all considering g77 to be
<BR>
the &quot;official&quot; F77 compiler for Debian Alpha (I wasn't aware that there
<BR>
was any &quot;official&quot; F77 compilers on any arch, but if I were to pick one to
<BR>
use, it would be g77).  What kind of hints are needed in this case?
<BR>
<P><EM>&gt; As a second measure, both fort77 and g77 and &quot;gcc -l f2c&quot; should
</EM><BR>
<EM>&gt; produce executables that dynamically link in an libf2c.so or
</EM><BR>
<EM>&gt; libg2c.so, respectively.
</EM><BR>
<P>Code generated by g77 is automatically linked to libg2c.a, fyi.
<BR>
There are command-line options for g77 for providing compatibility for
<BR>
object files generated by f2c.  You could also add a #include &lt;g2c.h&gt; to 
<BR>
the source you intend on compiling with g77, which (from what I can gather
<BR>
from docs) adds in any leftover stuff needed for f2c compatibility. See
<BR>
g77.info-12 for more info on g77&lt;-&gt;f2c compatibility.  The egcs group
<BR>
renamed their version of libf2c.a to libg2c.a to avoid problems with
<BR>
linking if both were installed, fyi.
<BR>
<P><EM>&gt; As a longer-term measure, probably f2c should be modified to use
</EM><BR>
<EM>&gt; 32-bit integers, so that gcc, g77, g++, and f2c/fort77 would share the
</EM><BR>
<EM>&gt; same notion of the default machine integer size.  This would
</EM><BR>
<P>This is true.  It's probably not a huge modification.  If you'd like, I
<BR>
can look more into this, although I'm not sure when I'll be able to get to
<BR>
it (actually, I'm looking at it now and it's not that bad).
<BR>
<P><EM>&gt; necessitate recompiling lapack, and would also be a good time to split
</EM><BR>
<EM>&gt; f2c up into libf2c, libf2c-dev, and f2c proper.
</EM><BR>
<P>That's up to the maintainer, but I can see that this probably should
<BR>
happen.
<BR>
<P><EM>&gt; ----------------------------------------------------------------
</EM><BR>
<EM>&gt; $ make LDFLAGS='-v -Xlinker --trace'
</EM><BR>
<EM>&gt; cc -v -Xlinker --trace  cntxtica.o normmix-em.o simath1.o matf.o recipies.o dgesvd.o logdetfgh.o read.o -lblas -llapack -lf2c -lm  -o cntxtica
</EM><BR>
<EM>&gt; Reading specs from /usr/lib/gcc-lib/alpha-linux/egcs-2.91.60/specs
</EM><BR>
<EM>&gt; gcc version egcs-2.91.60 Debian 2.1 (egcs-1.1.1 release)
</EM><BR>
<EM>&gt;  /usr/lib/gcc-lib/alpha-linux/egcs-2.91.60/collect2 -m elf64alpha -O1 -dynamic-linker /lib/ld-linux.so.2 -o cntxtica /usr/lib/crt1.o /usr/lib/crti.o /usr/lib/gcc-lib/alpha-linux/egcs-2.91.60/crtbegin.o -L/usr/lib/gcc-lib/alpha-linux/egcs-2.91.60 --trace cntxtica.o normmix-em.o simath1.o matf.o recipies.o dgesvd.o logdetfgh.o read.o -lblas -llapack -lf2c -lm -lgcc -lc -lgcc /usr/lib/gcc-lib/alpha-linux/egcs-2.91.60/crtend.o /usr/lib/crtn.o
</EM><BR>
<EM>&gt; /usr/bin/ld: mode elf64alpha
</EM><BR>
<EM>&gt; /usr/lib/crt1.o
</EM><BR>
<EM>&gt; /usr/lib/crti.o
</EM><BR>
<EM>&gt; /usr/lib/gcc-lib/alpha-linux/egcs-2.91.60/crtbegin.o
</EM><BR>
<EM>&gt; cntxtica.o
</EM><BR>
<EM>&gt; normmix-em.o
</EM><BR>
<EM>&gt; simath1.o
</EM><BR>
<EM>&gt; matf.o
</EM><BR>
<EM>&gt; recipies.o
</EM><BR>
<EM>&gt; dgesvd.o
</EM><BR>
<EM>&gt; logdetfgh.o
</EM><BR>
<EM>&gt; read.o
</EM><BR>
<EM>&gt; -lblas (/usr/bin/../lib/libblas.so)
</EM><BR>
<EM>&gt; -llapack (/usr/bin/../lib/liblapack.so)
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)c_abs.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)c_div.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)c_exp.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)c_sqrt.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)cabs.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)d_lg10.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)pow_dd.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)r_lg10.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)s_cat.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)s_cmp.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)s_copy.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)s_stop.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)sig_die.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)z_abs.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)z_div.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)z_exp.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)z_sqrt.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)close.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)endfile.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)err.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)fmt.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)open.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)sfe.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)util.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)wsfe.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)F77_aloc.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)exit_.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)wrtfmt.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)fmtlib.o
</EM><BR>
<EM>&gt; (/usr/bin/../lib/libf2c.a)wref.o
</EM><BR>
<EM>&gt; -lm (/usr/bin/../lib/libm.so)
</EM><BR>
<EM>&gt; /lib/libc.so.6.1
</EM><BR>
<EM>&gt; /usr/lib/gcc-lib/alpha-linux/egcs-2.91.60/crtend.o
</EM><BR>
<EM>&gt; /usr/lib/crtn.o
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; $ ldd cntxtica
</EM><BR>
<EM>&gt;         libblas.so.2 =&gt; /usr/lib/libblas.so.2 (0x0000020000004000)
</EM><BR>
<EM>&gt;         liblapack.so.2 =&gt; /usr/lib/liblapack.so.2 (0x000002000016a000)
</EM><BR>
<EM>&gt;         libm.so.6.1 =&gt; /lib/libm.so.6.1 (0x000002000069a000)
</EM><BR>
<EM>&gt;         libc.so.6.1 =&gt; /lib/libc.so.6.1 (0x00000200007c6000)
</EM><BR>
<EM>&gt;         /lib/ld-linux.so.2 =&gt; /lib/ld-linux.so.2 (0x0000020001000000)
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; --  
</EM><BR>
<EM>&gt; To UNSUBSCRIBE, email to <A HREF="mailto:debian-alpha-request@lists.debian.org?subject=Re:%20There%20can%20be%20only%20one:%20LAPACK%20and%20F2C%20vs%20G77%20on%20the%20Alpha">debian-alpha-request@lists.debian.org</A>
</EM><BR>
<EM>&gt; with a subject of &quot;unsubscribe&quot;. Trouble? Contact <A HREF="mailto:listmaster@lists.debian.org?subject=Re:%20There%20can%20be%20only%20one:%20LAPACK%20and%20F2C%20vs%20G77%20on%20the%20Alpha">listmaster@lists.debian.org</A>
</EM><BR>
<EM>&gt; 
</EM><BR>
<P><P><P>--  
<BR>
To UNSUBSCRIBE, email to <A HREF="mailto:debian-alpha-request@lists.debian.org?subject=Re:%20There%20can%20be%20only%20one:%20LAPACK%20and%20F2C%20vs%20G77%20on%20the%20Alpha">debian-alpha-request@lists.debian.org</A>
<BR>
with a subject of &quot;unsubscribe&quot;. Trouble? Contact <A HREF="mailto:listmaster@lists.debian.org?subject=Re:%20There%20can%20be%20only%20one:%20LAPACK%20and%20F2C%20vs%20G77%20on%20the%20Alpha">listmaster@lists.debian.org</A>
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0199.html">Barak Pearlmutter: "Re: There can be only one: LAPACK and F2C vs G77 on the Alpha"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0197.html">Michael Schwingen: "Re: Hylafax broken?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0175.html">Christopher C Chimelis: "Re: Hylafax broken?"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0199.html">Barak Pearlmutter: "Re: There can be only one: LAPACK and F2C vs G77 on the Alpha"</A>
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Wed Feb 17 1999 - 15:00:15 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
