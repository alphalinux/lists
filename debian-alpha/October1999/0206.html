<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: Re: diald?  -- Found it!</TITLE>
<META NAME="Author" CONTENT="Doug Larrick (doug@ties.org)">
<META NAME="Subject" CONTENT="Re: diald?  -- Found it!">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: diald?  -- Found it!</H1>
<HR>
<P>
<!-- received="Fri Oct 29 13:25:49 1999" -->
<!-- isoreceived="19991029202549" -->
<!-- sent="Fri, 29 Oct 1999 08:25:05 -0400" -->
<!-- isosent="19991029122505" -->
<!-- name="Doug Larrick" -->
<!-- email="doug@ties.org" -->
<!-- subject="Re: diald?  -- Found it!" -->
<!-- id="v04210100b43f4048b294@[192.168.0.4]" -->
<!-- inreplyto="19991023160553.B309@xs4all.nl" -->
<STRONG>Subject: </STRONG>Re: diald?  -- Found it!<BR>
<STRONG>From: </STRONG>Doug Larrick (<EM>doug@ties.org</EM>)<BR>
<STRONG>Date: </STRONG>Fri Oct 29 1999 - 05:25:05 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#206">[ date ]</A>
<A HREF="index.html#206">[ thread ]</A>
<A HREF="subject.html#206">[ subject ]</A>
<A HREF="author.html#206">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0207.html">Larrick, Douglas: "RE: diald?  -- Found it!"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0205.html">Michael Neuffer: "Re: apt-get upgrade dies badly ..."</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
I have found the cause of diald's crash on startup.  I believe it to 
<BR>
be a bug in, or improper use of, sccanf.  When called as follows:
<BR>
<P>sscanf(line, &quot;%s %d/%s&quot;, name, &amp;serv, proto);
<BR>
<P>where line contains '#' followed by 79 or so '=', sscanf (I believe) 
<BR>
is attempting to place the entire string into name, even though it 
<BR>
does not match the pattern.  Since name (and proto) are stack-based 
<BR>
strings 20 characters long, this wreaks total havoc.  Someone with 
<BR>
more knowledge of sscanf than me will have to rule whether it is 
<BR>
sscanf or diald that is at fault here.
<BR>
<P>In any case, I don't have time to submit a proper diff right now, but 
<BR>
checking for and skipping comment lines in two (obvious) places in 
<BR>
function init_servs in utils.c works around the problem for me, 
<BR>
though this obviously does not catch all the possible error 
<BR>
conditions.
<BR>
<P>Now, the question is (bear with me, I'm new to Linux and Debian):
<BR>
<P>* what's the proper way to fix this?
<BR>
* if it is indeed a bug in sscanf, how/to whom do I report it?
<BR>
* If it is a bug in diald, to whom do I submit my diffs?
<BR>
<P>-Doug
<BR>
<PRE>
---
Doug Larrick  doug@ties.org  doug.larrick@compaq.com  AIM: DougLarick
<P><P>--  
To UNSUBSCRIBE, email to debian-alpha-request@lists.debian.org
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0207.html">Larrick, Douglas: "RE: diald?  -- Found it!"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0205.html">Michael Neuffer: "Re: apt-get upgrade dies badly ..."</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Thu Nov 04 1999 - 16:56:58 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
