<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: Re: Bug in kernel 2.4.3?</TITLE>
<META NAME="Author" CONTENT="Herbert Xu (herbert@gondor.apana.org.au)">
<META NAME="Subject" CONTENT="Re: Bug in kernel 2.4.3?">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Bug in kernel 2.4.3?</H1>
<HR>
<P>
<!-- received="Fri Apr 13 09:33:27 2001" -->
<!-- isoreceived="20010413163327" -->
<!-- sent="Fri, 13 Apr 2001 19:12:14 +1000" -->
<!-- isosent="20010413091214" -->
<!-- name="Herbert Xu" -->
<!-- email="herbert@gondor.apana.org.au" -->
<!-- subject="Re: Bug in kernel 2.4.3?" -->
<!-- id="E14nzck-0005n9-00@gondolin.me.apana.org.au" -->
<!-- inreplyto="20010413181601.A27244@eye-net.com.au" -->
<STRONG>Subject: </STRONG>Re: Bug in kernel 2.4.3?<BR>
<STRONG>From: </STRONG>Herbert Xu (<EM>herbert@gondor.apana.org.au</EM>)<BR>
<STRONG>Date: </STRONG>Fri Apr 13 2001 - 02:12:14 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#24">[ date ]</A>
<A HREF="index.html#24">[ thread ]</A>
<A HREF="subject.html#24">[ subject ]</A>
<A HREF="author.html#24">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0025.html">Martin Schulze: "[2.2r3] glibc 2.1.3-18 for alpha and powerpc?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0023.html">Paul Slootman: "Re: Bug in kernel 2.4.3?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0022.html">Craig Small: "Bug in kernel 2.4.3?"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0022.html">Herbert Xu: "Re: Bug in kernel 2.4.3?"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Craig Small &lt;csmall@eye-net.com.au&gt; wrote:
<BR>
<P><EM>&gt; I tried compiling the 2.4.3 kernel with the tlb and numa-2 patches.
</EM><BR>
<EM>&gt; But there is definitely something wrong with
</EM><BR>
<EM>&gt; include/linux/kernel.h, it has:
</EM><BR>
<P><EM>&gt; #define PADDING 22 + sizeof(short) - 3 * sizeof(long) - sizeof(int)
</EM><BR>
<EM>&gt;        char _f[PADDING];               /* Padding: libc5 uses this.. */
</EM><BR>
<P><EM>&gt; 22 + 2 - (3 * 8 ) - 4 = 22 + 2 - 24 - 4 = -4
</EM><BR>
<P><EM>&gt; I'm going to try to remove the padding and see if that works, it may
</EM><BR>
<EM>&gt; be ok due to the comment. (I hope so anyway).
</EM><BR>
<P>Removing it should be fine.  Either that or apply this patch.
<BR>
<PRE>
-- 
Debian GNU/Linux 2.2 is out! ( <A HREF="http://www.debian.org/">http://www.debian.org/</A> )
Email:  Herbert Xu ~{PmV&gt;HI~} &lt;herbert@gondor.apana.org.au&gt;
Home Page: <A HREF="http://gondor.apana.org.au/~herbert/">http://gondor.apana.org.au/~herbert/</A>
PGP Key: <A HREF="http://gondor.apana.org.au/~herbert/pubkey.txt">http://gondor.apana.org.au/~herbert/pubkey.txt</A>
--
diff -u -r1.5 kernel.h
--- include/linux/kernel.h	2001/02/11 20:41:04	1.5
+++ include/linux/kernel.h	2001/04/13 09:10:52
@@ -127,9 +127,9 @@
 	unsigned long totalhigh;	/* Total high memory size */
 	unsigned long freehigh;		/* Available high memory size */
 	unsigned int mem_unit;		/* Memory unit size in bytes */
-#define PADDING 22 + sizeof(short) - 3 * sizeof(long) - sizeof(int)
-	char _f[PADDING];		/* Padding: libc5 uses this.. */
-#undef PADDING
+#define P 22 + sizeof(short) - 3 * sizeof(long) - sizeof(int)
+	char _f[P &gt; 0 ? P : 0];		/* Padding: libc5 uses this.. */
+#undef P
 };
 
 #endif
<P><P>-- 
To UNSUBSCRIBE, email to debian-alpha-request@lists.debian.org
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0025.html">Martin Schulze: "[2.2r3] glibc 2.1.3-18 for alpha and powerpc?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0023.html">Paul Slootman: "Re: Bug in kernel 2.4.3?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0022.html">Craig Small: "Bug in kernel 2.4.3?"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0022.html">Herbert Xu: "Re: Bug in kernel 2.4.3?"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Sat May 05 2001 - 06:18:16 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
