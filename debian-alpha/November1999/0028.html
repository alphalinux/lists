<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: broken kernel FP completion, -mieee</TITLE>
<META NAME="Author" CONTENT="David Huggins-Daines (dhd@eradicator.org)">
<META NAME="Subject" CONTENT="broken kernel FP completion, -mieee">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>broken kernel FP completion, -mieee</H1>
<HR>
<P>
<!-- received="Sun Nov 07 23:15:13 1999" -->
<!-- isoreceived="19991108071513" -->
<!-- sent="Sun, 7 Nov 1999 17:56:17 -0500" -->
<!-- isosent="19991107225617" -->
<!-- name="David Huggins-Daines" -->
<!-- email="dhd@eradicator.org" -->
<!-- subject="broken kernel FP completion, -mieee" -->
<!-- id="19991107175617.F6762@blood-axp.eradicator.org" -->
<STRONG>Subject: </STRONG>broken kernel FP completion, -mieee<BR>
<STRONG>From: </STRONG>David Huggins-Daines (<EM>dhd@eradicator.org</EM>)<BR>
<STRONG>Date: </STRONG>Sun Nov 07 1999 - 14:56:17 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#28">[ date ]</A>
<A HREF="index.html#28">[ thread ]</A>
<A HREF="subject.html#28">[ subject ]</A>
<A HREF="author.html#28">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0029.html">Ron Farrer: "potato + Netscape (Tru64)?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0027.html">Matthias Halfmann: "Re: scsi bus reset during fixating with cdrecord"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Hi,
<BR>
<P>I've noticed that floating point operations involving inexact results or
<BR>
denormalized numbers seem to result in a SIGFPE on Alpha, whereas they do
<BR>
not on any other platform.  This seems to affect a large number of packages,
<BR>
the most recent one I noticed was my own Festival package.
<BR>
<P>A simple demonstration:
<BR>
<P>dhd@blood-axp:~$ uname -a
<BR>
Linux blood-axp.eradicator.org 2.2.13 #1 Tue Nov 2 12:55:27 EST 1999 alpha
<BR>
unknown
<BR>
dhd@blood-axp:~$ perl -le '$f = 1e-308; $f++; print $f'
<BR>
Floating point exception
<BR>
<P>vs.
<BR>
<P>dhd@bender:~$ uname -a
<BR>
Linux bender.foo.bogus 2.2.10 #125 Tue Oct 26 23:02:35 EDT 1999 m68k unknown
<BR>
dhd@bender:~$ perl -le '$f = 1e-308; $f++; print $f'
<BR>
1
<BR>
<P>dhd@elgin:~$ uname -a
<BR>
Linux elgin 2.2.13 #1 Tue Nov 2 20:16:34 EST 1999 i686 unknown
<BR>
dhd@elgin:~$ perl -le '$f = 1e-308; $f++; print $f'
<BR>
1
<BR>
<P>If I understand correctly this is related to the design of the Alpha FPU,
<BR>
and can be compensated for by specifying the -mieee flag in compilation.
<BR>
However I was under the impression that the kernel's floating point
<BR>
emulation should compensate for inexact results automatically.
<BR>
<P>Is this a bug in the kernel?  Should we be recompiling things that are
<BR>
broken with -mieee?  (That's what I've done for Festival for the time being)
<BR>
<P>It strikes me that the Linux kernel should provide source compatibility
<BR>
across platforms, and this behaviour breaks that assumption very badly.
<BR>
<P><PRE>
-- 
make: *** No rule to make target `binary-argh'.  Stop.
<P><P>--  
To UNSUBSCRIBE, email to debian-alpha-request@lists.debian.org
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0029.html">Ron Farrer: "potato + Netscape (Tru64)?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0027.html">Matthias Halfmann: "Re: scsi bus reset during fixating with cdrecord"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Wed Dec 01 1999 - 06:08:08 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
