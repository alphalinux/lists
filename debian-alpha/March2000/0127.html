<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: Re: New scratch build of boot-floppies (UP10</TITLE>
<META NAME="Author" CONTENT="David Butts (dbutts@bbn.com)">
<META NAME="Subject" CONTENT="Re: New scratch build of boot-floppies (UP1000, serial console, TFTP)">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: New scratch build of boot-floppies (UP1000, serial console, TFTP)</H1>
<HR>
<P>
<!-- received="Sat Mar 25 12:47:06 2000" -->
<!-- isoreceived="20000325204706" -->
<!-- sent="Sat, 25 Mar 2000 07:31:56 -0500 (EST)" -->
<!-- isosent="20000325123156" -->
<!-- name="David Butts" -->
<!-- email="dbutts@bbn.com" -->
<!-- subject="Re: New scratch build of boot-floppies (UP1000, serial console, TFTP)" -->
<!-- id="Pine.GSO.4.04.10003250636340.27086-100000@edsel.bbn.com" -->
<!-- inreplyto="87ya77leru.fsf@saison.thepuffigroup.com" -->
<STRONG>Subject: </STRONG>Re: New scratch build of boot-floppies (UP1000, serial console, TFTP)<BR>
<STRONG>From: </STRONG>David Butts (<EM>dbutts@bbn.com</EM>)<BR>
<STRONG>Date: </STRONG>Sat Mar 25 2000 - 04:31:56 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#127">[ date ]</A>
<A HREF="index.html#127">[ thread ]</A>
<A HREF="subject.html#127">[ subject ]</A>
<A HREF="author.html#127">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0128.html">Nikita Schmidt: "Re: New scratch build of boot-floppies (UP1000, serial console, TFTP)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0126.html">mary23@post.com: "Email Advertising Works--Special Rates till Friday"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0125.html">David Huggins-Daines: "Re: New scratch build of boot-floppies (UP1000, serial console, TFTP)"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0128.html">Nikita Schmidt: "Re: New scratch build of boot-floppies (UP1000, serial console, TFTP)"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0125.html">David Butts: "Re: New scratch build of boot-floppies (UP1000, serial console, TFTP)"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Hello, again-
<BR>
<P>Thanks for the fast response!
<BR>
<P>For those of you not looking for suspense, the short answer is that I've
<BR>
now got it up and running, after ~12 hours of fighting with it.  More on
<BR>
that later :)
<BR>
<P>On 25 Mar 2000, David Huggins-Daines wrote:
<BR>
<P><EM>&gt; David Butts &lt;dbutts@bbn.com&gt; writes:
</EM><BR>
<EM>&gt; &gt; the images.  I suspect that I just need a sound beating with a clue
</EM><BR>
<EM>&gt; &gt; stick... any volunteers?
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; No, you own a Multia.  It's not your fault :)
</EM><BR>
<P>Of course I am the one who salvaged it from a co-worker's basement
<BR>
and decided to try to make it useful...
<BR>
<P><EM>&gt; &gt; Just out of curiosity, is the console=ttyS0 option a new feature of
</EM><BR>
<EM>&gt; &gt; the kernel, or was it always there?
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; It's not really a feature ... on Sparc, the kernel can automatically
</EM><BR>
<EM>&gt; detect if the console is a serial line by asking the firmware, but
</EM><BR>
<EM>&gt; there doesn't seem to be any way to do this on Alpha, and therefore
</EM><BR>
<EM>&gt; you have to tell the kernel that the console is ttyS0.
</EM><BR>
<P>*nod*
<BR>
<P>I keep meaning to look more closely at the various SRM HOWTOs and FAQs
<BR>
to see whether I can get the SRM console to run on ttyS0 as well.  From
<BR>
looking at some of the existing environment variables, it seems like I
<BR>
should be able to...
<BR>
<P><EM>&gt; &gt; I have a bootp/tftp server running on a Sparc Classic (frozen, thanks
</EM><BR>
<EM>&gt; &gt; again :), and I renamed tftpboot.img and put it in /tftpboot.  I've set
</EM><BR>
<EM>&gt; &gt; ewa0_protocols to bootp on the UDB and configured bootp on the classic
</EM><BR>
<EM>&gt; &gt; with the UDB's ethernet address and related information.  When I run a
</EM><BR>
<EM>&gt; &gt; 'boot ewa0', it grabs the tftpboot.img fine, but, when it's done, the
</EM><BR>
<EM>&gt; &gt; SRM console resets.  It looks like its generating some errors, but they
</EM><BR>
<EM>&gt; &gt; scroll past too quickly for me to see.  Unlike the DS10 hangs mentioned
</EM><BR>
<EM>&gt; &gt; below, this seems to be quite consistent.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Urgh.  It definitely works on my DS10 (more or less).  You should use
</EM><BR>
<EM>&gt; a serial console, then you can scroll back to see those errors in
</EM><BR>
<EM>&gt; minicom (or whatever).  Please report them so we can possibly figure
</EM><BR>
<EM>&gt; out what the problem is.
</EM><BR>
<P>After much scrutiny, I have decided that the SRM console is rebooting
<BR>
just before aboot would have started (or, at least, just before aboot
<BR>
would have given its first line of output).  To my untrained eye, it
<BR>
seemed almost as if aboot weren't where it was expected to be, but,
<BR>
given that you've gotten it to work on your machine, that seems pretty
<BR>
unlikely.  Could it me an issue with the amount of available memory?
<BR>
All the recent milos I've found complain that I don't have enough RAM
<BR>
and them fail to boot...  In any case, it certainly wasn't dumping any
<BR>
registers or anything.
<BR>
<P>Interestingly, Nikita's earlier tftpboot.img does work, and allowed me
<BR>
to boot.  I'm too lazy to quote the earlier message, but here's the
<BR>
location: (<A HREF="ftp://genie.ucd.ie/pub/alpha/test/tftpboot.img">ftp://genie.ucd.ie/pub/alpha/test/tftpboot.img</A>)
<BR>
<P><EM>&gt; How were you booting on your Multia previously?  Have you installed
</EM><BR>
<EM>&gt; the latest firmware updates?  It may be that the firmware on it is
</EM><BR>
<EM>&gt; just brain-damaged...
</EM><BR>
<P>*grin*
<BR>
<P>I expect that the floppy drive is just really marginal, but that the
<BR>
higher-level environments have enough error correction that they can
<BR>
cope.  A lot of the docs I found out on the web discouraged upgrading
<BR>
the ARC firmware.  Is the SRM firmware better (or at least better-
<BR>
maintained)?
<BR>
<P>Here's the history (for the past few weeks) of this particular Multia:
<BR>
<P>When i got it, it had a milo disk in the drive (linload.exe, milo and
<BR>
linux), and a seriously hosed copy of RH 5.1 on the hard drive.
<BR>
<P>In an attempt to preserve what little functionality it had, I stuck
<BR>
with MILO for the time being, but I haven't managed to get any MILO
<BR>
since that one to boot the system (they all report that I don't have
<BR>
enough memory).  What I ended up doing was booting the system to
<BR>
MILO off the old RH milo disk, and then, from there, booting the kernel
<BR>
off of a 2.1r4 rescue floppy.  From there, I did a floppy base install
<BR>
and essentially left it.  In order to get it to boot from the hard
<BR>
drive, I did a dd from the original MILO disk to a 5MB /dev/sda1.  I
<BR>
wasn't proud of it, but didn't have any other immediate way to get a
<BR>
FAT partition on the disk :)
<BR>
<P>But the real fun was getting potato on it this time.
<BR>
<P>I got the same basic problems as Brian Macy did with his UDB, namely
<BR>
the install not recognizing vmlinux because it wasn't compressed, the
<BR>
fact that aboot didn't install automatically, and the fact that I
<BR>
couldn't reboot the system from within dbootstrap.  In my case, they
<BR>
were more interesting, because my floppy drive is clearly not useful
<BR>
from the SRM console (although ARC, MILO, and linux are all much more
<BR>
tolerant).  I had to boot to the original MILO disk from ARC, put a
<BR>
copy of your 03/19 kernel on another DOS floppy (score another one
<BR>
for the Classic), and booted that kernel (which could read the BSD
<BR>
disk label) with root=/dev/sda2.
<BR>
<P>The copy of the kernel I ended up with after the base-install didn't
<BR>
recognize the ethernet card, either.  If I were thinking more clearly,
<BR>
I would have a better idea of where that kernel (vmlinux-2.2.14) came
<BR>
from, but I rather suspect it's an artifact of the older tftpboot.img.
<BR>
In any case, The kernel on your 03/19 rescue disk seems to be working
<BR>
admirably in its place.  On a related note, is it safe to assume that
<BR>
the aboot and kernel living on the boot block will survive an fdisk,
<BR>
as long as they aren't explicitly overwritten by one of the new disk
<BR>
slices?  If so, does it make sense to recommend that all subarchs,
<BR>
not just jensen, reserve space for both, in order to provide a more
<BR>
complete failsafe, or is that just too paranoid (or, more to the point,
<BR>
too great a change this late in the game)?
<BR>
<P>One thing I have noticed that seems conspicuously absent, however,
<BR>
is pcmcia-module-xxx.  ISTR one of the earlier messages to this list
<BR>
was asking about doing driver development on an Alpha, so I'm hoping
<BR>
that the modules can be had somewhere, but I haven't found them.  Do
<BR>
I have to compile them from pcmcia-source?  I've got a pcmcia modem
<BR>
in the Multia that I'd like to get set up at some point.
<BR>
<P>In any case, I'm hopelessly sleep-deprived, and have rambled for far
<BR>
too long.
<BR>
<P>My thanks again to you, David, and to Nikita, and everybody else
<BR>
whose names I haven't yet associated with a solution to one of my
<BR>
(many) problems.
<BR>
<P>David
<BR>
<P><P><P><PRE>
-- 
To UNSUBSCRIBE, email to debian-alpha-request@lists.debian.org
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0128.html">Nikita Schmidt: "Re: New scratch build of boot-floppies (UP1000, serial console, TFTP)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0126.html">mary23@post.com: "Email Advertising Works--Special Rates till Friday"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0125.html">David Huggins-Daines: "Re: New scratch build of boot-floppies (UP1000, serial console, TFTP)"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0128.html">Nikita Schmidt: "Re: New scratch build of boot-floppies (UP1000, serial console, TFTP)"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0125.html">David Butts: "Re: New scratch build of boot-floppies (UP1000, serial console, TFTP)"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Sat Apr 01 2000 - 04:15:02 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
