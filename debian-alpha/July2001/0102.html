<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Debian Alpha List: iptables and X11 forwarding</TITLE>
<META NAME="Author" CONTENT="Martin Sanborn (marty@delirium.cqe.nwu.edu)">
<META NAME="Subject" CONTENT="iptables and X11 forwarding">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>iptables and X11 forwarding</H1>
<HR>
<P>
<!-- received="Thu Jul 26 08:59:28 2001" -->
<!-- isoreceived="20010726155928" -->
<!-- sent="Wed, 25 Jul 2001 11:34:40 -0500" -->
<!-- isosent="20010725163440" -->
<!-- name="Martin Sanborn" -->
<!-- email="marty@delirium.cqe.nwu.edu" -->
<!-- subject="iptables and X11 forwarding" -->
<!-- id="01072511344001.10562@delirium" -->
<STRONG>Subject: </STRONG>iptables and X11 forwarding<BR>
<STRONG>From: </STRONG>Martin Sanborn (<EM>marty@delirium.cqe.nwu.edu</EM>)<BR>
<STRONG>Date: </STRONG>Wed Jul 25 2001 - 09:34:40 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#102">[ date ]</A>
<A HREF="index.html#102">[ thread ]</A>
<A HREF="subject.html#102">[ subject ]</A>
<A HREF="author.html#102">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0103.html">Edgar Denny: "Re: iptables and X11 forwarding"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0101.html">Luiz Emediato: "Re: Tape compression fiasco"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0103.html">Edgar Denny: "Re: iptables and X11 forwarding"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
I posted this on debian-user, but I didn't get any response. Maybe someone 
<BR>
here can help me out. It's more of a general linux question than 
<BR>
alpha-specific, but I need to use it on my alpha linux boxes.
<BR>
<P>I have a number of linux boxes, each with its own network connection. I am 
<BR>
installing iptables on each of the machines to limit outside access to each 
<BR>
(due to the physical location of the machines, I cannot simply make a 
<BR>
subnetwork and have a single firewall blocking access to the machines) in 
<BR>
conjuction with tcpwrappers to limit access to any ports iptables allows.
<BR>
<P>We use ssh with X forwarding enabled to connect to the different machines. 
<BR>
However, I cannot seem to get the forwarding to work when the default INPUT 
<BR>
policy is set to DROP. On host1, iptables -L looks like,
<BR>
<P>Chain INPUT (policy DROP)
<BR>
target     prot opt source               destination
<BR>
ACCEPT     all  --  host1               anywhere state RELATED,ESTABLISHED
<BR>
ACCEPT     all  --  anywhere       host1 state RELATED,ESTABLISHED
<BR>
ACCEPT     tcp  --  anywhere       host1 tcp dpt:smtp
<BR>
ACCEPT     tcp  --  anywhere       host1 tcp dpt:ssh
<BR>
&nbsp;
<BR>
Chain FORWARD (policy DROP)
<BR>
target     prot opt source               destination
<BR>
&nbsp;
<BR>
Chain OUTPUT (policy ACCEPT)
<BR>
target     prot opt source               destination
<BR>
ACCEPT     all  --  host1              anywhere           state NEW
<BR>
<P>If I ssh from host2, it connects just fine, but if I attempt to open a X 
<BR>
program from host1 on host2 over that connection, nothing happens. If I 
<BR>
change the default INPUT policy to ACCEPT on host1, X forwarding works fine. 
<BR>
I don't know what rule to add to make X forwarding work correctly. I've tried 
<BR>
the following (individually):
<BR>
<P>iptables -A INPUT -s host2 -d host1 -j ACCEPT
<BR>
iptables -A INPUT -s host2 -d host1 -m state --state NEW -j ACCEPT
<BR>
<P>I thought that all X connections where forwarded over the ssh port, but 
<BR>
apparently something else is needed here. Any suggestions?
<BR>
<P>I'm using Debian testing/woody on both machines. Kernel version is 2.4.5 for 
<BR>
both with the XFS patch included. All the netfilter modules are built into 
<BR>
the kernel. I am using OpenSSH 2.5.2p2 on both machines, and ssh and sshd 
<BR>
onboth are configured to allow X forwarding.
<BR>
<P>Thanks for your help.
<BR>
<P>Marty Sanborn
<BR>
<P><PRE>
-- 
| Martin Sanborn - Dept. of Chemical Engineering - Northwestern University |
| m-sanborn@nwu.edu - (847)467-1653 - <A HREF="http://zeolites.cqe.nwu.edu/marty">http://zeolites.cqe.nwu.edu/marty</A> |
<P><P>-- 
To UNSUBSCRIBE, email to debian-alpha-request@lists.debian.org
with a subject of &quot;unsubscribe&quot;. Trouble? Contact listmaster@lists.debian.org
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0103.html">Edgar Denny: "Re: iptables and X11 forwarding"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0101.html">Luiz Emediato: "Re: Tape compression fiasco"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0103.html">Edgar Denny: "Re: iptables and X11 forwarding"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Wed Aug 01 2001 - 06:11:43 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
