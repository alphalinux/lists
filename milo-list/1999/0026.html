<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Milo List: Re: Milo 2.2 (release)</TITLE>
<META NAME="Author" CONTENT="Matt Wilson (msw@redhat.com)">
<META NAME="Subject" CONTENT="Re: Milo 2.2 (release)">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Milo 2.2 (release)</H1>
<HR>
<P>
<!-- received="Tue Nov 16 02:48:29 1999" -->
<!-- isoreceived="19991116104829" -->
<!-- sent="Mon, 15 Nov 1999 15:29:23 -0500" -->
<!-- isosent="19991115202923" -->
<!-- name="Matt Wilson" -->
<!-- email="msw@redhat.com" -->
<!-- subject="Re: Milo 2.2 (release)" -->
<!-- id="19991115152923.C12244@devserv.devel.redhat.com" -->
<!-- inreplyto="Pine.LNX.4.00.9911091042480.24380-100000@wesley.informatik.uni-freiburg.de" -->
<STRONG>Subject: </STRONG>Re: Milo 2.2 (release)<BR>
<STRONG>From: </STRONG>Matt Wilson (<EM>msw@redhat.com</EM>)<BR>
<STRONG>Date: </STRONG>Mon Nov 15 1999 - 12:29:23 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#26">[ date ]</A>
<A HREF="index.html#26">[ thread ]</A>
<A HREF="subject.html#26">[ subject ]</A>
<A HREF="author.html#26">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0027.html">Jeff Garzik: "Re: Milo 2.2 (release)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0025.html">Stefan Reinauer: "Milo 2.2 (release)"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0025.html">Stefan Reinauer: "Milo 2.2 (release)"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0027.html">Jeff Garzik: "Re: Milo 2.2 (release)"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0025.html">Matt Wilson: "Re: Milo 2.2 (release)"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
On Tue, Nov 09, 1999 at 10:46:17AM +0100, Stefan Reinauer wrote:
<BR>
<EM>&gt;    
</EM><BR>
<EM>&gt;    Have fun and please send me thousands of comments....
</EM><BR>
<P>Thanks for doing this work, Stefan.  A few things.  First, the ext2
<BR>
reading code is not handling revision 1 ext2 filesystems.  Revision 1
<BR>
filesystems split the 16 bit length name_len field of the dirent into
<BR>
two 8 bit fields, &quot;file_type&quot; and &quot;name_len&quot;.  Milo still uses the
<BR>
ext2_dir_entry structrue and reads name_len as a 16 bit value, so you
<BR>
get file lengths that are extraordinary long.  For example, the 'etc'
<BR>
entry of the '/' directory is read to be 515 bytes long.  Since it's
<BR>
checking to see that the lenths of the file you're looking for and the
<BR>
dentry that you're looking at have the same length, nothing matches
<BR>
and MILO fails to open the file.
<BR>
<P>Of course, 515 is just 0x0203, showing that it is a EXT2_FT_DIR (type
<BR>
2) with entry length of 3.  All we really need to do is a lot of 0xff
<BR>
masking whenever you use a dentry-&gt;name_len.
<BR>
<P>There seems to be a problem reading 4096 byte block sizes.  I've not
<BR>
tracked down the exact problem here.
<BR>
<P>Stefan - could you send the .config of the kernel that you built
<BR>
against?  I'm having trouble with symbol resolution, probably because
<BR>
I have too many drivers/subsystems turned on.
<BR>
<P>Thanks again.
<BR>
<P>Matt
<BR>
msw@redhat.com
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0027.html">Jeff Garzik: "Re: Milo 2.2 (release)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0025.html">Stefan Reinauer: "Milo 2.2 (release)"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0025.html">Stefan Reinauer: "Milo 2.2 (release)"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0027.html">Jeff Garzik: "Re: Milo 2.2 (release)"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0025.html">Matt Wilson: "Re: Milo 2.2 (release)"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Mon Jan 03 2000 - 11:15:14 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
