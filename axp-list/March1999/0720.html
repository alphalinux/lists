<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: &gt; 1GB on alpha. Patch to 1TB?</TITLE>
<META NAME="Author" CONTENT="Greg Lindahl (lindahl@cs.virginia.edu)">
<META NAME="Subject" CONTENT="Re: &gt; 1GB on alpha. Patch to 1TB?">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: &gt; 1GB on alpha. Patch to 1TB?</H1>
<HR>
<P>
<!-- received="Sun Mar 14 18:47:20 1999 PST" -->
<!-- sent="Sun, 14 Mar 1999 13:23:43 -0500 (EST)" -->
<!-- name="Greg Lindahl" -->
<!-- email="lindahl@cs.virginia.edu" -->
<!-- subject="Re: &gt; 1GB on alpha. Patch to 1TB?" -->
<!-- id="199903141823.NAA00858@adder.cs.Virginia.EDU" -->
<!-- inreplyto="19990313192105.A14626@twiddle.net" -->
<STRONG>Greg Lindahl</STRONG> (<A HREF="mailto:lindahl@cs.virginia.edu?subject=Re:%20&gt;%201GB%20on%20alpha.%20Patch%20to%201TB?"><EM>lindahl@cs.virginia.edu</EM></A>)<BR>
<EM>Sun, 14 Mar 1999 13:23:43 -0500 (EST)</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#720">[ date ]</A>
<A HREF="index.html#720">[ thread ]</A>
<A HREF="subject.html#720">[ subject ]</A>
<A HREF="author.html#720">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0721.html">Greg Lindahl: "Re: &gt; 1GB on alpha. Patch to 1TB?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0719.html">Rui-Tao Dong 董瑞涛: "Re: multia PCI slot"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0690.html">Brendan Miller: "Re: multia PCI slot"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
<EM>&gt; We do already prefer `dma-able' pages for dma tasks.  There is a kmalloc
</EM><BR>
<EM>&gt; flag just for that.  No matter what you do though, at some point it will
</EM><BR>
<EM>&gt; so happen that the data is required at some high physical address.
</EM><BR>
<P>One trivial example would be a system with 8 gigs in which it makes
<BR>
sense to have more than 4 gigs used for disk cache. Another example is
<BR>
a driver that DMAs to user-allocated buffers. A third example is any
<BR>
system which has more than 4 gigs of ram; although we prefer dma-able
<BR>
pages for dma tasks, there's no way you can *guarantee* that you can get
<BR>
a dma-able page when you want a buffer; you might have to copy a page
<BR>
to high memory.
<BR>
<P><EM>&gt; Alternately, we can adjust the DMA window so that physical addresses
</EM><BR>
<EM>&gt; 0x100000000 through 0x13FFFFFFF (4GB - 5GB) are visible at PCI addresses
</EM><BR>
<EM>&gt; 0xC0000000 through 0xFFFFFFFF (3GB - 4GB).  At which point we do not have
</EM><BR>
<EM>&gt; to copy data around in kernel space, which is a real win.
</EM><BR>
<P>Doesn't this require some driver modifications? We need to keep this
<BR>
in mind, too, in our solution. This solution is probably the highest
<BR>
performance. Another intermediate solution is to prefer dma-able pages
<BR>
and have every driver know how to employ a bounce buffer if the
<BR>
destination is not dma-able. This requires modifying every driver. The
<BR>
third solution is to use windows in clever ways. That requires
<BR>
modifying every driver, and we'd probably have to also require bounce
<BR>
buffer capability since you can run out of DMA windows, or there could
<BR>
be architecture which has no windows.
<BR>
<P>-- greg
<BR>
<P><P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20&gt;%201GB%20on%20alpha.%20Patch%20to%201TB?">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20&gt;%201GB%20on%20alpha.%20Patch%20to%201TB?">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0721.html">Greg Lindahl: "Re: &gt; 1GB on alpha. Patch to 1TB?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0719.html">Rui-Tao Dong 董瑞涛: "Re: multia PCI slot"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0690.html">Brendan Miller: "Re: multia PCI slot"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Sun Mar 14 1999 - 11:00:28 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
