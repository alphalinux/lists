<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Solved: LX hangs under high SCSI load</TITLE>
<META NAME="Author" CONTENT="furio ercolessi (furio@spin.it)">
<META NAME="Subject" CONTENT="Solved: LX hangs under high SCSI load">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Solved: LX hangs under high SCSI load</H1>
<HR>
<P>
<!-- received="Tue Mar 02 17:50:15 1999 PST" -->
<!-- sent="Tue, 02 Mar 1999 18:06:05 MET" -->
<!-- name="furio ercolessi" -->
<!-- email="furio@spin.it" -->
<!-- subject="Solved: LX hangs under high SCSI load" -->
<!-- id="199903021706.SAA12115@noc.spin.it" -->
<!-- inreplyto="" -->
<STRONG>furio ercolessi</STRONG> (<A HREF="mailto:furio@spin.it?subject=Re:%20Solved:%20LX%20hangs%20under%20high%20SCSI%20load"><EM>furio@spin.it</EM></A>)<BR>
<EM>Tue, 02 Mar 1999 18:06:05 MET</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#65">[ date ]</A>
<A HREF="index.html#65">[ thread ]</A>
<A HREF="subject.html#65">[ subject ]</A>
<A HREF="author.html#65">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0066.html">Ron Farrer: "system lockup (was: Re: AXPpci33 and onboard-NCR8xx SCSI)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0064.html">Andrei A. Dergatchev: "Re: Alpha too slow?"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
This problem, that I reported to the list on 20 Jan 1999, is now
<BR>
solved - which doesn't mean understood.  We simply replaced the
<BR>
Adaptec 2940 with an Intraserver 3140 controller, changed the driver
<BR>
in the kernel to ncr53c8xx, and the machine has happily passed a busy
<BR>
night of tests.  We are now proceeding to do that also on our other
<BR>
three alphaservers.  The Adaptec boards will go into intel boxes.
<BR>
<P>Happiness is a stable AlphaLinux! :-)
<BR>
<P>furio ercolessi
<BR>
Spin - Trieste (Italy)
<BR>
<P><EM>&gt; 
</EM><BR>
<EM>&gt; We are experiencing hangs of LX boxes under high SCSI disk load.
</EM><BR>
<EM>&gt; This is the same problem that I previously reported as an
</EM><BR>
<EM>&gt; rsync-induced crash:
</EM><BR>
<EM>&gt; <A HREF="http://www.lib.uaa.alaska.edu/axp-list/archive/1998-11/0658.html">http://www.lib.uaa.alaska.edu/axp-list/archive/1998-11/0658.html</A>
</EM><BR>
<EM>&gt; I have now seen that occurring also with rdist, so the application
</EM><BR>
<EM>&gt; is not responsible.  In both cases I was trying to replicate
</EM><BR>
<EM>&gt; a directory tree of about 2GB from one disk to another.
</EM><BR>
<EM>&gt; The hangs occur randomly, usually after several minutes of intense
</EM><BR>
<EM>&gt; disk activity.  I have seen it on two similar boxes,
</EM><BR>
<EM>&gt; so a h/w failure is unlikely.  Under &quot;normal&quot; disk load the
</EM><BR>
<EM>&gt; machines are doing fine and stay up for (at least) weeks.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; There are no kernel messages, and a very substantial file system corruption.  
</EM><BR>
<EM>&gt; By pressing Ctrl-ScrLock, Shift-ScrLock after the hangs (the only action
</EM><BR>
<EM>&gt; that triggers some response from the box..) , I see that the program 
</EM><BR>
<EM>&gt; counter points either to do_sd_request or requeue_sd_request (within 
</EM><BR>
<EM>&gt; drivers/scsi/sd.c). Other addresses that I see in registers refer to 
</EM><BR>
<EM>&gt; blk_dev , random_pool, all_requests.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Machine is LX 533MHz/2Mb, Adaptec AHA-294X Ultra SCSI, one
</EM><BR>
<EM>&gt; Seagate ST39102LW (9GB) and one Fujitsu MAB3045SC (4.5GB),
</EM><BR>
<EM>&gt; SCSI setting: Synchronous at 40.0 Mbyte/sec.
</EM><BR>
<EM>&gt; RH 5.2, kernel 2.0.36 (from RH updates), SCSI driver AIC7XXX 5.1.4/3.2.4
</EM><BR>
<EM>&gt; I have tried running with option aic7xxx=panic_on_abort, but the
</EM><BR>
<EM>&gt; aic7xxx_panic_abort function is never called.
</EM><BR>
<EM>&gt; 
</EM><BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20Solved:%20LX%20hangs%20under%20high%20SCSI%20load">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20Solved:%20LX%20hangs%20under%20high%20SCSI%20load">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0066.html">Ron Farrer: "system lockup (was: Re: AXPpci33 and onboard-NCR8xx SCSI)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0064.html">Andrei A. Dergatchev: "Re: Alpha too slow?"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Tue Mar 02 1999 - 10:00:08 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
