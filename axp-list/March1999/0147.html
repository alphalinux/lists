<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: Alpha too slow?</TITLE>
<META NAME="Author" CONTENT="Andreas Krebs (krebs@qkal.sap-ag.de)">
<META NAME="Subject" CONTENT="Re: Alpha too slow?">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Alpha too slow?</H1>
<HR>
<P>
<!-- received="Wed Mar 03 16:55:20 1999 PST" -->
<!-- sent="Wed, 03 Mar 1999 17:44:05 +0100" -->
<!-- name="Andreas Krebs" -->
<!-- email="krebs@qkal.sap-ag.de" -->
<!-- subject="Re: Alpha too slow?" -->
<!-- id="199903031644.RAA0000000871@storm.qkal.sap-ag.de" -->
<!-- inreplyto="000001be658f$e4ccac60$cc000001@PC_VIGNAUD.xandmail.com" -->
<STRONG>Andreas Krebs</STRONG> (<A HREF="mailto:krebs@qkal.sap-ag.de?subject=Re:%20Alpha%20too%20slow?"><EM>krebs@qkal.sap-ag.de</EM></A>)<BR>
<EM>Wed, 03 Mar 1999 17:44:05 +0100</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#147">[ date ]</A>
<A HREF="index.html#147">[ thread ]</A>
<A HREF="subject.html#147">[ subject ]</A>
<A HREF="author.html#147">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0146.html">Ross A. Knepper: "Re: Dead Alpha/Corrupted SRM (QSNVR)?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0139.html">Mark Conway Wirt: "Dead Alpha/Corrupted SRM (QSNVR)?"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
<EM>&gt; &gt; one of the things i use my sx for is mpeg video encoding (only integer no
</EM><BR>
<EM>&gt; &gt; floating point). i use the stanford mpeg encoder with a modified motion
</EM><BR>
<EM>&gt; &gt; estimation routine for alpha and intel mmx.
</EM><BR>
<EM>&gt; &gt; my pc164SX/533 is about 2 to 3 times faster than my PII/333.
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; the alpha version uses my own MVI assembler (if you have a pc
</EM><BR>
<EM>&gt; &gt; alpha use it :-) )
</EM><BR>
<EM>&gt;             ^^
</EM><BR>
<EM>&gt; Where is it??
</EM><BR>
on my disk :-), all you really need is the perr instruction it does almost
<BR>
everything, so if somebody could tell me how to write inline assembler with
<BR>
gcc/egcs and do unaligned access. does anybody know of a documentation for
<BR>
writing alpha inline assembler with egcs???
<BR>
<P>under digital unix you need to following code in me.c:
<BR>
<P>#include &lt;c_asm.h&gt;
<BR>
#define perr(v1, v2)    (asm(&quot;perr %a0, %a1, %v0&quot;, (v1), (v2)))
<BR>
&nbsp;&nbsp;&nbsp;
<BR>
and in the inner loop of HPFastBME you replace (it occurs twice)
<BR>
<P>for(val=i=0;i&lt;16;i++)
<BR>
{
<BR>
&nbsp;&nbsp;&nbsp;data=(*(bptr++)-*(cptr++));
<BR>
...
<BR>
}
<BR>
<P>with
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<BR>
{
<BR>
&nbsp;&nbsp;const unsigned __unaligned __int64      *p1;
<BR>
&nbsp;&nbsp;const unsigned __int64  *p2;
<BR>
<P>&nbsp;&nbsp;p1 = (const unsigned __int64 *)bptr;
<BR>
&nbsp;&nbsp;p2 = (const unsigned __int64 *)cptr;
<BR>
<P>&nbsp;&nbsp;i=16;
<BR>
&nbsp;&nbsp;val=0;
<BR>
&nbsp;&nbsp;while(i--)
<BR>
&nbsp;&nbsp;{
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;val+=perr(p1[0], p2[0]);                /* Block 1 */
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;val+=perr(p1[1], p2[1]);                /* Block 2 */
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;((const unsigned char *) p2) += rm-&gt;width;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;((const unsigned char *) p1) += cm-&gt;width;
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;if (val COMPARISON MV)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;
<BR>
&nbsp;&nbsp;}
<BR>
}
<BR>
<P><EM>&gt; by the way, does egcs handle mvi instruction?
</EM><BR>
i don't know
<BR>
<P><P><PRE>
-- 
_____________________________________________________________________________
<P>                               Andreas S. Krebs
<P>                CEC Karlsruhe, SAP AG, <A HREF="mailto:Andreas.Krebs@sap-ag.de?subject=Re:%20Alpha%20too%20slow?">Andreas.Krebs@sap-ag.de</A>
_____________________________________________________________________________
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20Alpha%20too%20slow?">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20Alpha%20too%20slow?">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0146.html">Ross A. Knepper: "Re: Dead Alpha/Corrupted SRM (QSNVR)?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0139.html">Mark Conway Wirt: "Dead Alpha/Corrupted SRM (QSNVR)?"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Wed Mar 03 1999 - 09:00:11 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
