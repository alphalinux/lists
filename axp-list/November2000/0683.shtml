<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN"> 
     <HTML> 
     <HEAD> 
     <TITLE>Axp-List Archive</TITLE> 
     <LINK REV="made" HREF="mailto:mailto-address"> 
     <HEAD> 
     <BODY BGCOLOR="#DC9D33" TEXT="#000000" LINK="#DD0000" ALINK="#CC0000" VLINK="#CC0000">
		<CENTER>  <!--#exec cgi="/cgi-bin/banmat1.cgi"--></CENTER>

     <H1 ALIGN=CENTER>Axp-List Archive<BR> 32-bit binaries (howto?)</H1> 
	
<!-- received="Wed Nov 29 19:47:11 2000" -->
<!-- isoreceived="20001130034711" -->
<!-- sent="Wed, 29 Nov 2000 16:49:00 +0000 (GMT)" -->
<!-- isosent="20001129164900" -->
<!-- name="reig@dcs.gla.ac.uk" -->
<!-- email="reig@dcs.gla.ac.uk" -->
<!-- subject="32-bit binaries (howto?)" -->
<!-- id="200011291649.QAA21789@crab.dcs.gla.ac.uk" -->
<STRONG>Subject: </STRONG>32-bit binaries (howto?)<BR>
<EM>reig@dcs.gla.ac.uk</EM><BR>
<STRONG>Date: </STRONG>Wed Nov 29 08:49:00 2000
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.shtml#683">[ date ]</A>
<A HREF="index.shtml#683">[ thread ]</A>
<A HREF="subject.shtml#683">[ subject ]</A>
<A HREF="author.shtml#683">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0684.shtml">Maurice Hilarius: "Re: What's the maximum swap space?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0682.shtml">s-luppescu@uchicago.edu: "Re: What's the maximum swap space?"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0685.shtml">Ron Farrer: "Re: 32-bit binaries (howto?)"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Hi,
<BR>
&nbsp;
<BR>
I need to build a 32 bit binary on an alpha. I've searched the
<BR>
archives and I've found the following suggestions:
<BR>
&nbsp;
<BR>
1. a patched ld with -taso flag
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is not an option, since I cannot expect everyone who
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;builds from sources to have this patched ld.
<BR>
&nbsp;
<BR>
2. Create linker script with `ld --verbose &gt; script', edit script like this:
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;-  . = 0x120000000 + SIZEOF_HEADERS;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;+  . = 0x10000 + SIZEOF_HEADERS;
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;link with it like this:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ld -T script -static
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;set 1 at file offset 0x30 in the executable
<BR>
&nbsp;
<BR>
I could use some help for this last step. Someone said in the mailing
<BR>
list that this can be done like this:
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#include &lt;linux/personality.h&gt;
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;add this line at the beginning of main:
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;personality(0x800000);
<BR>
&nbsp;
<BR>
However, I prefer not to alter the sources, but it's OK to tweak the
<BR>
executable directly during the build process. Can anyone tell me an
<BR>
easy way to set the bit at offset 0x30, so that this can be done from
<BR>
the makefile? Any simpler alternative would do as well, of course.
<BR>
&nbsp;
<BR>
Thanks in advance,
<BR>
&nbsp;
<BR>
Fermin Reig
<BR>
&nbsp;
<BR>
<PRE>
----
Useful info:
 
uname -a
Linux &lt;machine name&gt; 2.2.13-0.9 #1 Thu Dec 9 17:03:57 EST 1999 alpha unknown
 
gcc -v
Reading specs from /usr/lib/gcc-lib/alpha-redhat-linux/egcs-2.91.66/specs
gcc version egcs-2.91.66 19990314/Linux (egcs-1.1.2 release)
<P><P><P>_______________________________________________
Axp-list mailing list
Axp-list@redhat.com
https://listman.redhat.com/mailman/listinfo/axp-list
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0684.shtml">Maurice Hilarius: "Re: What's the maximum swap space?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0682.shtml">s-luppescu@uchicago.edu: "Re: What's the maximum swap space?"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0685.shtml">Ron Farrer: "Re: 32-bit binaries (howto?)"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR> 
     <P> 
     <SMALL> 
     <EM> 
     This archive was generated by  <A HREF="http://www.landfield.com/hypermail">hypermail version 2a22 </A> on Fri Dec  1 08:00:09 2000 PST <BR>
	Send any problems or questions about this archive to <A HREF="mailto:webmaster@alphalinux.org">webmaster@alphalinux.org</A>. 
     </EM> 
     </SMALL> 
     </BODY> 
     </HTML> 
