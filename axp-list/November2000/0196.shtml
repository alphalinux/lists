<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN"> 
     <HTML> 
     <HEAD> 
     <TITLE>Axp-List Archive</TITLE> 
     <LINK REV="made" HREF="mailto:mailto-address"> 
     <HEAD> 
     <BODY BGCOLOR="#DC9D33" TEXT="#000000" LINK="#DD0000" ALINK="#CC0000" VLINK="#CC0000">
		<CENTER>  <!--#exec cgi="/cgi-bin/banmat1.cgi"--></CENTER>

     <H1 ALIGN=CENTER>Axp-List Archive<BR> FW: kernel compilation and -relax flag</H1> 
	
<!-- received="Wed Nov 08 21:12:23 2000" -->
<!-- isoreceived="20001109051223" -->
<!-- sent="Wed, 8 Nov 2000 13:07:18 -0500 " -->
<!-- isosent="20001108180718" -->
<!-- name="Rick Gorton" -->
<!-- email="rick.gorton@api-networks.com" -->
<!-- subject="FW: kernel compilation and -relax flag" -->
<!-- id="051DFF3BBA73D3119A5800A0C95BD0219BEA07@barracuda.api-networks.com" -->
<!-- inreplyto="kernel compilation and -relax flag" -->
<STRONG>Subject: </STRONG>FW: kernel compilation and -relax flag<BR>
<STRONG>From: </STRONG>Rick Gorton (<EM>rick.gorton@api-networks.com</EM>)<BR>
<STRONG>Date: </STRONG>Wed Nov  8 10:07:18 2000
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.shtml#196">[ date ]</A>
<A HREF="index.shtml#196">[ thread ]</A>
<A HREF="subject.shtml#196">[ subject ]</A>
<A HREF="author.shtml#196">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0197.shtml">Kurt Ludwig: "RE: AS800"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0195.shtml">David Addison: "kernel compilation and -relax flag"</A>
<LI><STRONG>Maybe in reply to:</STRONG> <A HREF="0195.shtml">David Addison: "kernel compilation and -relax flag"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0210.shtml">Richard Henderson: "Re: FW: kernel compilation and -relax flag"</A>
<LI><STRONG>Maybe reply:</STRONG> <A HREF="0195.shtml">Rick Gorton: "FW: kernel compilation and -relax flag"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
[Resend - mailer problems]
<BR>
<P>-----Original Message-----
<BR>
From: Rick Gorton 
<BR>
Sent: Wednesday, November 08, 2000 12:56 PM
<BR>
To: 'axp-list@redhat.com'
<BR>
Subject: RE: kernel compilation and -relax flag
<BR>
<P><P>Where can I find out what the usage of .prologue
<BR>
is supposed to be?  The offending test case can be
<BR>
reduced to using my new copy_user.S, and linking
<BR>
with -relax.  The new version of the routine doesn't
<BR>
use any new registers, and is issued in the same
<BR>
relative location as in the original.  In neither
<BR>
the original, nor in the new, touches r27 or r29,
<BR>
except as:
<BR>
<P>__copy_user:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ldgp	$29, 0($27)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.prologue	1
<BR>
<P>The code runs correctly when the kernel is not
<BR>
linked with -relax.
<BR>
<P>The only things I could think of about possible causes
<BR>
related to -relax is that the new code:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;uses ldbu and stb
<BR>
while the original doesn't.  Which suggests to me
<BR>
(without knowing more about the implementation details
<BR>
of the exception code) possible problems with:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ld -relax misbehaving for ldbu/stb in the presence
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of exception entries
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interaction of more exception entries and a .got
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boundary condition
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;interaction of exception recovery code and ldbu/stb
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(aka kernel quirk)
<BR>
<P><P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Regards,
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Rick Gorton
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rick.gorton@alpha-processor.com
<BR>
<P>-----Original Message-----
<BR>
From: Richard Henderson [mailto:rth@twiddle.net]
<BR>
Sent: Wednesday, November 08, 2000 12:48 PM
<BR>
To: axp-list@redhat.com
<BR>
Subject: Re: kernel compilation and -relax flag
<BR>
<P><P>On Wed, Nov 08, 2000 at 02:02:14PM -0000, David Addison wrote:
<BR>
<EM>&gt; This was working fine until I merged in the API EV6 2.2.17 assembler patch
</EM><BR>
<EM>&gt; and it then broke everything in that init seems to fail to parse command
</EM><BR>
<EM>&gt; line options correctly.
</EM><BR>
<P>That means that the new ev6 code is not being careful with
<BR>
the .prologue directives.  Those indicate if and how the
<BR>
incoming r27 value is used.
<BR>
<P><P><P>_______________________________________________
<BR>
Axp-list mailing list
<BR>
Axp-list@redhat.com
<BR>
https://listman.redhat.com/mailman/listinfo/axp-list
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0197.shtml">Kurt Ludwig: "RE: AS800"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0195.shtml">David Addison: "kernel compilation and -relax flag"</A>
<LI><STRONG>Maybe in reply to:</STRONG> <A HREF="0195.shtml">David Addison: "kernel compilation and -relax flag"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0210.shtml">Richard Henderson: "Re: FW: kernel compilation and -relax flag"</A>
<LI><STRONG>Maybe reply:</STRONG> <A HREF="0195.shtml">Rick Gorton: "FW: kernel compilation and -relax flag"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR> 
     <P> 
     <SMALL> 
     <EM> 
     This archive was generated by  <A HREF="http://www.landfield.com/hypermail">hypermail version 2a22 </A> on Fri Dec  1 08:00:07 2000 PST <BR>
	Send any problems or questions about this archive to <A HREF="mailto:webmaster@alphalinux.org">webmaster@alphalinux.org</A>. 
     </EM> 
     </SMALL> 
     </BODY> 
     </HTML> 
