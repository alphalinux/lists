<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN"> 
     <HTML> 
     <HEAD> 
     <TITLE>Axp-List Archive</TITLE> 
     <LINK REV="made" HREF="mailto:mailto-address"> 
     <HEAD> 
     <BODY BGCOLOR="#DC9D33" TEXT="#000000" LINK="#DD0000" ALINK="#CC0000" VLINK="#CC0000">
		<CENTER>  <!--#exec cgi="/cgi-bin/banmat1.cgi"--></CENTER>

     <H1 ALIGN=CENTER>Axp-List Archive<BR> Re: Everyone's SRM woes</H1> 
	
<!-- received="Wed Mar 14 09:24:08 2001" -->
<!-- isoreceived="20010314172408" -->
<!-- sent="Tue, 13 Mar 2001 22:24:15 -0800" -->
<!-- isosent="20010314062415" -->
<!-- name="Alan Young" -->
<!-- email="ayoung@teleport.com" -->
<!-- subject="Re: Everyone's SRM woes" -->
<!-- id="3AAF0E8F.74DD9F8B@teleport.com" -->
<!-- inreplyto="3AAEC61A.AC3980FE@alphalinux.org" -->
<STRONG>Subject: </STRONG>Re: Everyone's SRM woes<BR>
<STRONG>From: </STRONG>Alan Young (<EM>ayoung@teleport.com</EM>)<BR>
<STRONG>Date: </STRONG>Tue Mar 13 22:24:15 2001
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.shtml#166">[ date ]</A>
<A HREF="index.shtml#166">[ thread ]</A>
<A HREF="subject.shtml#166">[ subject ]</A>
<A HREF="author.shtml#166">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0167.shtml">Daniel Potts: "RE: Everyone's SRM woes"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0165.shtml">alvin: "Re: Everyone's SRM woes"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0164.shtml">Peter Petrakis: "Re: Everyone's SRM woes"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0170.shtml">alvin: "Re: Everyone's SRM woes"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0164.shtml">Alan Young: "Re: Everyone's SRM woes"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Peter Petrakis wrote:
<BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Alan Young wrote:
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Agreed. Though like you said, these machines run UNIX not windows.
</EM><BR>
<P>Well, my machines up til last year or so ran NT fairly regularly.
<BR>
(I've kicked my Lightwave habit for the moment...)
<BR>
The LX164 and PC64 and other machines were sold as &quot;dual booters&quot;.
<BR>
You could run NT, Tru64 and even OpenVMS on a bunch of them.
<BR>
<P><EM>&gt; It's not an excuse to cop out of having a nice BIOS setup your hardware
</EM><BR>
<EM>&gt; and bootstrap your box.
</EM><BR>
<P>Agreed.  I think this is why AlphaBIOS came into being.
<BR>
It was step in the right direction.
<BR>
<P><EM>&gt; I don't fully understand why milo was needed to begin with.
</EM><BR>
<EM>&gt; If it was all just to switch palcode and mess with some registers then
</EM><BR>
<EM>&gt; why couldnt ARC/AB be extend to use that PAL and do the setup required and your
</EM><BR>
<EM>&gt; off. The only thing you would care about is passing cli arguments and you
</EM><BR>
<EM>&gt; already could do that with ARC/AB.
</EM><BR>
<P>Good Question.  I've never dug into that one.
<BR>
One would guess that Linus' and/or DEC's original port may have attempted
<BR>
to use the PALcode in the ARC firmware.  I've been trying to recall if
<BR>
BLADE was developed on a SRM box or not.... Since SRM was being sold
<BR>
seperately back then, MILO may have been a stopgap measure so people
<BR>
did not have to pay extra to run a (semi-)free OS.  They may have had
<BR>
ARC issues so something more SRM-like was substituted???
<BR>
Could also be ARC was centered around a certain 32-bit OS and did
<BR>
not &quot;fully&quot; support 64-bitness?
<BR>
&nbsp;
<BR>
<EM>&gt; I love the help on &quot;ed&quot;. Try it , you'll get a laugh.
</EM><BR>
<P>&quot;BASIC-like&quot;...:)
<BR>
Try &quot;edit test&quot; and then list it.
<BR>
THAT'S SHELL SCRIPT!
<BR>
No wonder there's no room in the flash for hardware initialization!
<BR>
<P><EM>&gt; &gt; I believe you can load the firmware off of CDROM too.  If I recall
</EM><BR>
<EM>&gt; &gt; right, I think this is how the firmware update CD works.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; I'm not sure of the exact mechenism that starts the firmware update CD.
</EM><BR>
<EM>&gt; It uses fwupdate, I dont know how that works.
</EM><BR>
<P>Hmmm...I suppose fwupdate could be a program similar to aboot.
<BR>
&nbsp;
<BR>
<EM>&gt; &gt; &gt; EXT2 support in SRM is nice but whats stopping SRM from loading linux
</EM><BR>
<EM>&gt; &gt; &gt; off a FAT fs of which it already understands?
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; I thought SRM did not understand filesystems.  I thought it knew
</EM><BR>
<EM>&gt; &gt; enough about a device to pull physical blocks of media into memory
</EM><BR>
<EM>&gt; &gt; and execute the code from there... that's why aboot was written to
</EM><BR>
<EM>&gt; &gt; read the ext2 partition and load the kernel.(?)
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; SRM understands FS like FAT and ISO9660 but not the concept of
</EM><BR>
<EM>&gt; parititons.
</EM><BR>
<P>I have to try that file system command you gave in that other post.
<BR>
Seems odd that it knows one without the other.
<BR>
&nbsp;
<BR>
<EM>&gt; &gt; What would really help for those that may still run NT or perfer
</EM><BR>
<EM>&gt; &gt; slightly more sane partition table format is if SRM could be told to
</EM><BR>
<EM>&gt; &gt; look for the boot block somewhere other than what is the DOS/PC
</EM><BR>
<EM>&gt; &gt; style partition table sector.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; I thought there where patches for aboot out there that let it understand
</EM><BR>
<EM>&gt; PC partition style?
</EM><BR>
<P>Yes, I coded one set of them.  They're in the axp-list archive.
<BR>
Before I did my patches, Rumors were that patches had been done by
<BR>
someone else too.  I couldn't find them.  The problem is that the SRM
<BR>
boot block and the PC partition table occupy the same space on the hard
<BR>
disk.  I've seen references to a work around, but to do that you lose
<BR>
half the partition table entries in that block.  With Extended partitions
<BR>
you could work around that.  My patches just handle the entries in the
<BR>
primary partition block.  They would need a bit of code to traverse the
<BR>
linked list of extended partitions.  I'm not sure how NT would react to
<BR>
&quot;code&quot; for the boot block being there.  I've not tried to play with my
<BR>
partition table.  I boot aboot from floppy.  yeah, a tad slow, but it works. :)
<BR>
&nbsp;
<BR>
<EM>&gt; &gt; Well, how about _removing_ some of the more esoteric features of SRM to
</EM><BR>
<EM>&gt; &gt; stand-alone executables.  I'm talking about things like memexer, isacfg,
</EM><BR>
<EM>&gt; &gt; etc. that are nice but take up space and you don't need them to boot
</EM><BR>
<EM>&gt; &gt; the machine all the time.  ARC/AlphaBIOS was good for this as it had a
</EM><BR>
<EM>&gt; &gt; SDK that you can program with your own add-ons  (ARCDOS being one example).
</EM><BR>
<EM>&gt; &gt; The executables could be loaded from disk or floppy.  If those features
</EM><BR>
<EM>&gt; &gt; could be moved out of SRM and still being accessable (say on a bootable
</EM><BR>
<EM>&gt; &gt; CD) for those that need it, then you could put more enhancments into
</EM><BR>
<EM>&gt; &gt; the base SRM.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Here I disagree since those tools can aid the OEM, VAR, or Manufacturer
</EM><BR>
<EM>&gt; to troubleshoot and stress test the hardware. It would also be cost prohibitive
</EM><BR>
<EM>&gt; from a manufacturing POV to assmeble a product with the &quot;full featured&quot; firmware
</EM><BR>
<EM>&gt; and later reflash it to the econosize. The software could possibly diverge from
</EM><BR>
<EM>&gt; it's trunk so much that it becomes it's own thing and has it's own bugs ontop
</EM><BR>
<EM>&gt; of those of the &quot;original&quot; firmware.
</EM><BR>
<P>Please reread the last half of my suggestion again.  I suggested that they be
<BR>
removed from the firmware image, I did not suggest to delete them entirely.
<BR>
If the functionality could be retained in a standalone executable, then
<BR>
nothing is lost and we can actually _gain_.  
<BR>
<P>And I was using memexer and isacfg as examples as that was all could think
<BR>
off of the top of my head.  There could be better ones to migrate to a
<BR>
stand alone executable.  Edit for instance...  Even PCs have this as a
<BR>
seperate command once DOS has booted.
<BR>
<P><EM>&gt; &gt; I know you can't please everyone all the time.  And I know it
</EM><BR>
<EM>&gt; &gt; does boil down to money at some point.  It's too bad that at least
</EM><BR>
<EM>&gt; &gt; for video that the emulator couldn't be seperated from the console
</EM><BR>
<EM>&gt; &gt; in some way so people with old machines could at least update the
</EM><BR>
<EM>&gt; &gt; emulator.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; It probably could be made a seperate image though now you run into
</EM><BR>
<EM>&gt; problems with starting the initial firmware. On most Alphas the SROM
</EM><BR>
<EM>&gt; that executes at poweron is told to load the second rom image and execute.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Now if rom image number 2 was the bios emulator number 3 would be SRM.
</EM><BR>
<EM>&gt; There are two points of attack here now. Modify the SROM, which is a read
</EM><BR>
<EM>&gt; only chip to load image 2 then load and start image 3. Or fix independant
</EM><BR>
<EM>&gt; bios emulator rom so that when it's down initialize that it should locate
</EM><BR>
<EM>&gt; the next adjacent rom image (depending on jumper configuartion) and load
</EM><BR>
<EM>&gt; it.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; You could make your own SROM using the EBSDK, thats one. It has source
</EM><BR>
<EM>&gt; code for sx,lx, and dp. I'm talking about version 4.0 . To accomplish
</EM><BR>
<EM>&gt; option number two you would need the source to the bios emulator, which I
</EM><BR>
<EM>&gt; suspect won't be readily offered by Compqa so you're forced to seek alternatives
</EM><BR>
<EM>&gt; like the one used by the xfree group.
</EM><BR>
<P>Would you really need the source to the emulator?  I mean, if the community
<BR>
could conveince Compaq to provide an occasional binary snapshot with a
<BR>
README that said how to execute it, that would be similar to the binary only
<BR>
that we have today in MILO.  You compile your custom code and link with the
<BR>
emulator binary.  To me it seems like it would be a win for us and Compaq.
<BR>
&nbsp;
<BR>
<EM>&gt; I have accomplished the later but in a roundabout way. In my first attempts
</EM><BR>
<EM>&gt; to use DBM for the LX I tried to load it from the FSB and wondered why I heard
</EM><BR>
<EM>&gt; a few beeps but then nothing on my display (VGA). I then got clever and
</EM><BR>
<EM>&gt; renamed the file lx164nt.rom, put it on a floppy, and in srm entered &quot;NT&quot;.
</EM><BR>
<EM>&gt; which read the DBM ,loaded it, and executed it right over the SRM console.
</EM><BR>
<EM>&gt; Since the DBM image didnt have a bios emulator attached and the setup
</EM><BR>
<EM>&gt; routines that go with it. It didnt reset the console, it just loaded :-)
</EM><BR>
<P>Heehee... I thought of something similar to this a while ago.  Before
<BR>
the concept of a generic Alpha kernel came to be, I worked a bit on
<BR>
a boot/install loader that one could execute from ARC.  It would sit
<BR>
on the CD as \ALPHA\ARCINST.EXE.  Then all you would need to do was hit
<BR>
the &quot;Install Windows NT&quot; option from the ARC menu.  ARC would load and
<BR>
run it.  The program would use then the ARC ID to identify which machine
<BR>
specific Linux kernel to load and boot.
<BR>
&nbsp;
<BR>
<EM>&gt; Speaking of the EBSDK. If one had it could one put it on an ftp
</EM><BR>
<EM>&gt; site and redistribute it? The license is a BSD'sh for Alpha only.
</EM><BR>
<P>Well, I'm not a lawyer, but I'll take a stab...
<BR>
&nbsp;
<BR>
<EM>&gt; 1. GRANT
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Compaq Computer Corporation (&quot;COMPAQ&quot;) grants you the right to use the
</EM><BR>
<EM>&gt; Software Programs  and Restricted Software Program (the &quot;Software&quot;)
</EM><BR>
<EM>&gt; specified above on any number of computers  according to the following
</EM><BR>
<EM>&gt; terms.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; You may copy, modify, and distribute the Software Programs (in both
</EM><BR>
<EM>&gt; source and object form) and  its documentation.
</EM><BR>
<P>This bit is interesting.  It sounds like you can distribute the
<BR>
source and object code and documentation.
<BR>
&nbsp;
<BR>
<EM>&gt; You may distribute but not modify the Restricted Software Program.
</EM><BR>
<P>However, this bit may be bad.  What do they mean by &quot;Restricted
<BR>
Software Program&quot;?  The whole kit?  It also seems to imply that you
<BR>
can NOT modify whatever has been defined as &quot;Restricted&quot;.
<BR>
&nbsp;
<BR>
<EM>&gt; All copies of the Software and object code derived from the sources
</EM><BR>
<EM>&gt; are to be used solely within  products incorporating an integrated
</EM><BR>
<EM>&gt; circuit implementing the Alpha architecture. The permission  is granted
</EM><BR>
<EM>&gt; regardless of the origin of such integrated circuit provided that the
</EM><BR>
<EM>&gt; COMPAQ copyright  notice and these license terms appear in all copies.
</EM><BR>
<P>No problem there. :)   I think we can safely say that we all plan to use
<BR>
it on Alpha boxen whether they be DEC, Compaq, Samsung or other.
<BR>
&nbsp;
<BR>
<EM>&gt; You may not use the name, logos, or trademarks of COMPAQ and affiliated
</EM><BR>
<EM>&gt; companies unless  agreed in a separate agreement. You agree to indemnify
</EM><BR>
<EM>&gt; and hold COMPAQ harmless for all  claims and related expenses incurred
</EM><BR>
<EM>&gt; by COMPAQ as a result of your use or distribution of the  Software and
</EM><BR>
<EM>&gt; object code.
</EM><BR>
<P>This also seems to imply that you can distribute code.
<BR>
&nbsp;
<BR>
<EM>&gt; 5. U.S. GOVERNMENT RESTRICTED RIGHTS
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Commercial Computer Software, and Computer Software Documentation, and
</EM><BR>
<EM>&gt; Technical Data for  Commercial Items are licensed to the U.S. Government
</EM><BR>
<EM>&gt; with COMPAQ's standard commercial  license and, when applicable, the
</EM><BR>
<EM>&gt; rights in DFAR 252.227-7015, &quot;Technical Data - Commercial  Items.&quot;
</EM><BR>
<P>This bit definatly needs a lawyer.  DFAR is sticky when it comes to rights.
<BR>
&nbsp;
<BR>
<EM>&gt; 6. GENERAL
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; You are responsible for compliance with all applicable export or re-export
</EM><BR>
<EM>&gt; control laws and  regulations if you export the Software. This agreement
</EM><BR>
<EM>&gt; is governed by and is to be construed under  the laws of the Commonwealth
</EM><BR>
<EM>&gt; of Massachusetts.
</EM><BR>
<P>As long as there's no restricted encryption used in the code this should
<BR>
be ok too.
<BR>
&nbsp;
<BR>
<EM>&gt; If you have any questions concerning this Agreement, please contact your
</EM><BR>
<EM>&gt; local COMPAQ sales  office or write to: Compaq Computer Corporation,
</EM><BR>
<EM>&gt; Software Business Practices, ZKO1-2/D22,  110 Spit Brook Road, Nashua,
</EM><BR>
<EM>&gt; NH 03062-2802.
</EM><BR>
<P>Well, there you go.  Write 'em! :)
<BR>
&nbsp;
<BR>
&lt;snip&gt;
<BR>
<P><EM>&gt; anybody know a lawyer?
</EM><BR>
<P>The rest of those looks pretty reasonable to me, but I'm not a lawyer.
<BR>
And I don't know one.
<BR>
&nbsp;
<BR>
Alan
<BR>
<P><P><P>_______________________________________________
<BR>
Axp-list mailing list
<BR>
Axp-list@redhat.com
<BR>
https://listman.redhat.com/mailman/listinfo/axp-list
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0167.shtml">Daniel Potts: "RE: Everyone's SRM woes"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0165.shtml">alvin: "Re: Everyone's SRM woes"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0164.shtml">Peter Petrakis: "Re: Everyone's SRM woes"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0170.shtml">alvin: "Re: Everyone's SRM woes"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0164.shtml">Alan Young: "Re: Everyone's SRM woes"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR> 
     <P> 
     <SMALL> 
     <EM> 
     This archive was generated by  <A HREF="http://www.landfield.com/hypermail">hypermail version 2a22 </A> on Tue Apr 10 10:35:32 2001 PDT <BR>
	Send any problems or questions about this archive to <A HREF="mailto:webmaster@alphalinux.org">webmaster@alphalinux.org</A>. 
     </EM> 
     </SMALL> 
     </BODY> 
     </HTML> 
