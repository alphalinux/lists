<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: Tape drive problems</TITLE>
<META NAME="Author" CONTENT="Wes Bauske (wsb@paralleldata.com)">
<META NAME="Subject" CONTENT="Re: Tape drive problems">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Tape drive problems</H1>
<HR>
<P>
<!-- received="Wed Feb 03 05:37:53 1999 PST" -->
<!-- sent="Wed, 03 Feb 1999 06:37:07 +0000" -->
<!-- name="Wes Bauske" -->
<!-- email="wsb@paralleldata.com" -->
<!-- subject="Re: Tape drive problems" -->
<!-- id="36B7EE93.C185E014@paralleldata.com" -->
<!-- inreplyto="001701be4f12$b699f020$2be008cf@goliath.discordia.org" -->
<STRONG>Wes Bauske</STRONG> (<A HREF="mailto:wsb@paralleldata.com?subject=Re:%20Tape%20drive%20problems"><EM>wsb@paralleldata.com</EM></A>)<BR>
<EM>Wed, 03 Feb 1999 06:37:07 +0000</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#123">[ date ]</A>
<A HREF="index.html#123">[ thread ]</A>
<A HREF="subject.html#123">[ subject ]</A>
<A HREF="author.html#123">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0124.html">Trent Gillespie: "Overclocking was (re: Speed and price)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0122.html">Designer 7: "Why still 0.35u ??? for 21264?"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
J wrote:
<BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; I have a DSS tape drive connected to a UDB. I can read and write
</EM><BR>
<EM>&gt; test files to and from it just fine. I have a backup script that runs
</EM><BR>
<EM>&gt; each night which uses tar to dump a bunch of file systems to tape.
</EM><BR>
<EM>&gt; After the backup runs for a while, I get...
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; tar: Cannot write to /dev/tape: Input/output error
</EM><BR>
<EM>&gt; tar: Error is not recoverable: exiting now
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Thinking there was a problem with the tape drive, I got another one
</EM><BR>
<EM>&gt; (similar, but not exaclty the same model) and some new tapes. And it does
</EM><BR>
<EM>&gt; exaclty the same thing. I'm not running out of space on the tape and I
</EM><BR>
<EM>&gt; have used a cleaning tape on the drives. So now I'm wondering if there is
</EM><BR>
<EM>&gt; some bug in the tape driver or tar. Has anyone seen something like this?
</EM><BR>
<EM>&gt; And is there a way to get more error information that just Input/output
</EM><BR>
<EM>&gt; error?
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; The details...
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; 166Mhz UDB
</EM><BR>
<EM>&gt; Redhat 5.1
</EM><BR>
<EM>&gt; Kernel 2.0.35
</EM><BR>
<EM>&gt; Tape drive:
</EM><BR>
<EM>&gt;   Host: scsi0 Channel: 00 Id: 05 Lun: 00
</EM><BR>
<EM>&gt;     Vendor: ARCHIVE  Model: Python 28388-XXX Rev: 4.98
</EM><BR>
<EM>&gt;     Type:   Sequential-Access                ANSI SCSI revision: 02
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Backup script:
</EM><BR>
<EM>&gt; mt -f /dev/tape rewind
</EM><BR>
<EM>&gt; mt -f /dev/tape datcompression 1
</EM><BR>
<EM>&gt; mt -f /dev/tape status
</EM><BR>
<EM>&gt; date &gt; /dev/tape
</EM><BR>
<EM>&gt; cat /etc/fstab &gt; /dev/tape
</EM><BR>
<EM>&gt; awk '{ if ($3==&quot;ext2&quot;) { cmd = &quot;echo &quot; $2 &quot;&gt; /dev/tape ; tar clf /dev/tape
</EM><BR>
<EM>&gt; &quot; $2; print cmd; system(cmd)}}' &lt; /etc/fstab
</EM><BR>
<EM>&gt; date &gt; /dev/tape
</EM><BR>
<EM>&gt; mt -f /dev/tape rewind
</EM><BR>
<EM>&gt; mt -f /dev/tape status
</EM><BR>
<EM>&gt; mt -f /dev/tape offline
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Results from backup script:
</EM><BR>
<EM>&gt; Compression on.
</EM><BR>
<EM>&gt; SCSI 2 tape drive:
</EM><BR>
<EM>&gt; File number=0, block number=0, partition=0.
</EM><BR>
<EM>&gt; Tape block size 512 bytes. Density code 0x13 (DDS (61000 bpi)).
</EM><BR>
<EM>&gt; Soft error count since last status=0
</EM><BR>
<EM>&gt; General status bits on (41010000):
</EM><BR>
<EM>&gt; BOT ONLINE IM_REP_EN
</EM><BR>
<EM>&gt; echo /&gt; /dev/tape ; tar clf /dev/tape /
</EM><BR>
<EM>&gt; tar: Removing leading `/' from absolute path names in the archive
</EM><BR>
<EM>&gt; tar: Removing leading `/' from absolute links
</EM><BR>
<EM>&gt; echo /usr&gt; /dev/tape ; tar clf /dev/tape /usr
</EM><BR>
<EM>&gt; tar: Removing leading `/' from absolute path names in the archive
</EM><BR>
<EM>&gt; tar: Removing leading `/' from absolute links
</EM><BR>
<EM>&gt; tar: Cannot write to /dev/tape: Input/output error
</EM><BR>
<EM>&gt; tar: Error is not recoverable: exiting now
</EM><BR>
<EM>&gt; echo /var&gt; /dev/tape ; tar clf /dev/tape /var
</EM><BR>
<EM>&gt; tar: Removing leading `/' from absolute path names in the archive
</EM><BR>
<EM>&gt; tar: Cannot write to /dev/tape: Input/output error
</EM><BR>
<EM>&gt; tar: Error is not recoverable: exiting now
</EM><BR>
<EM>&gt; ...
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; So, does anyone have any ideas? Please help, before I go insane trying
</EM><BR>
<EM>&gt; to figure this out.
</EM><BR>
<EM>&gt; 
</EM><BR>
<P>One possibility. Are you trying to tar more than
<BR>
2GB? If so, watch out. Last time I tried, tar would
<BR>
bail out with an error if you tried. One way around it
<BR>
is to pipe the tar command into a 'dd' that does the
<BR>
write to the tape. Something like:
<BR>
<P>tar clf - / | dd of=/dev/tape bs=10240
<BR>
<P>I believe that was what I did when I had the problem.
<BR>
I don't try back up more than 2GB at a time anymore.
<BR>
It's too bad cause I could backup lots on my DLT's
<BR>
in one go. I now burn CD's of my SW trees for backup.
<BR>
pretty much anything else is expendable.
<BR>
<P><P>Wes
<BR>
<P><P>Wes
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20Tape%20drive%20problems">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20Tape%20drive%20problems">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0124.html">Trent Gillespie: "Overclocking was (re: Speed and price)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0122.html">Designer 7: "Why still 0.35u ??? for 21264?"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Tue Feb 02 1999 - 22:00:15 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
