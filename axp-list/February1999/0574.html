<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: OffTopic: PovRay3 for AlphaLinux ?</TITLE>
<META NAME="Author" CONTENT="Joachim Wesner (Joachim.Wesner@frankfurt.netsurf.de)">
<META NAME="Subject" CONTENT="Re: OffTopic: PovRay3 for AlphaLinux ?">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: OffTopic: PovRay3 for AlphaLinux ?</H1>
<HR>
<P>
<!-- received="Thu Feb 18 20:08:58 1999 PST" -->
<!-- sent="Thu, 18 Feb 1999 19:59:33 +0100" -->
<!-- name="Joachim Wesner" -->
<!-- email="Joachim.Wesner@frankfurt.netsurf.de" -->
<!-- subject="Re: OffTopic: PovRay3 for AlphaLinux ?" -->
<!-- id="99021820174700.01844@Othello" -->
<!-- inreplyto="19990218124753.R16253@csee.wvu.edu" -->
<STRONG>Joachim Wesner</STRONG> (<A HREF="mailto:Joachim.Wesner@frankfurt.netsurf.de?subject=Re:%20OffTopic:%20PovRay3%20for%20AlphaLinux%20?"><EM>Joachim.Wesner@frankfurt.netsurf.de</EM></A>)<BR>
<EM>Thu, 18 Feb 1999 19:59:33 +0100</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#574">[ date ]</A>
<A HREF="index.html#574">[ thread ]</A>
<A HREF="subject.html#574">[ subject ]</A>
<A HREF="author.html#574">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0573.html">Phillip Ezolt: "Re: OffTopic: PovRay3 for AlphaLinux ?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0571.html">Daniel J. Frasnelli: "Re: OffTopic: PovRay3 for AlphaLinux ?"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
On Thu, 18 Feb 1999, Daniel J. Frasnelli wrote:
<BR>
<EM>&gt;&gt; I'd suggest to check carefully that the code is never doing anything
</EM><BR>
<EM>&gt;&gt; wrong with &quot;subnormalized&quot; numbers. I found that -mieee option is
</EM><BR>
<EM>&gt;&gt; useless with my compiler and whenever my numbers are around
</EM><BR>
<EM>&gt;&gt; ...e-310 I'm getting Floating point exception.
</EM><BR>
<EM>&gt;Andrei,
</EM><BR>
<EM>&gt;	I am working with Curtis Olson (lead developer, FlightGear flight
</EM><BR>
<EM>&gt;simulator(FGFS) &lt;<A HREF="http://www.flightgear.org">http://www.flightgear.org</A>&gt;) on a similar problem.  Both he and
</EM><BR>
<EM>&gt;I are beginning to suspect bugs in the AXP port of egcs.  For example, 
</EM><BR>
<EM>&gt;part of the graphics initialization routines in FGFS set up coordinates for
</EM><BR>
<EM>&gt;a 640x480 window.  As you might have read already, FGFS crashes with a
</EM><BR>
<EM>&gt;fpe upon startup.  Going through the code stepwise and watching the 
</EM><BR>
<EM>&gt;variable values, there is a point where the following happens:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;1) Some of the coordinates are set to a number of order e-310 (obviously wrong)
</EM><BR>
<EM>&gt;2) An integer divide is called which approximates the coordinates to 0.
</EM><BR>
<EM>&gt;3) The result becomes a number x/0, which causes the fpe. 
</EM><BR>
<EM>&gt; 
</EM><BR>
<P>Much of this was discussed earlier in another thread here (or was it on
<BR>
comp.os.linux.alpha ?). You should try to check the archives (but there was no
<BR>
general solution yet). It was also noted that the math error handling in the
<BR>
Linux Kernel and the True64 Unix Kernel are the same, but some nevertheless
<BR>
reported different behaviour when running the *SAME* binray on both systems, if
<BR>
I recall correctly.
<BR>
<P>One of the reasons is very likely that the standard math library actually
<BR>
includes quite complicated *extra* code to just generate &quot;correct&quot; denormalized
<BR>
numbers, that later cause problems in such areas as above.
<BR>
<P>I bet it's even code equivalent to
<BR>
<P>if (x != 0.)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y = k/x     or      y = k/(int)x;
<BR>
<P><P>The test failing because 1e-310 is NOT zero, however, the latter calc sets it
<BR>
to zero or can't handle the denorm number. I had a similar problem with the SVD
<BR>
routines in lin-/lapack. The initial problem with the math library *should*
<BR>
(hope so) be fixed by using libffm by myself and K. Goto, 
<BR>
<P><A HREF="http://people.frankfurt.netsurf.de/Joachim.Wesner/libffm.0.28.tar.gz">http://people.frankfurt.netsurf.de/Joachim.Wesner/libffm.0.28.tar.gz</A>
<BR>
<P>*HOWEVER* several people reported that it still does not fix *all* fpes in
<BR>
PovRay (I did not yet find time to look into that, if it's a bug still in
<BR>
libffm).
<BR>
<P>I would be interested to hear if libffm in the actual version helps in
<BR>
FlightGear.
<BR>
<P><P>Joachim
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20OffTopic:%20PovRay3%20for%20AlphaLinux%20?">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20OffTopic:%20PovRay3%20for%20AlphaLinux%20?">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0573.html">Phillip Ezolt: "Re: OffTopic: PovRay3 for AlphaLinux ?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0571.html">Daniel J. Frasnelli: "Re: OffTopic: PovRay3 for AlphaLinux ?"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Thu Feb 18 1999 - 13:00:09 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
