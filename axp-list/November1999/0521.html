<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>AXP-List Hypermail Archive: Re: 21264 Alpha stuck spinlocks and</TITLE>
<META NAME="Author" CONTENT="Jay.Estabrook@digital.com (Jay.Estabrook@digital.com)">
<META NAME="Subject" CONTENT="Re: 21264 Alpha stuck spinlocks and memory woes">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: 21264 Alpha stuck spinlocks and memory woes</H1>
<HR>
<P>
<!-- received="Mon Nov 15 09:25:54 1999" -->
<!-- isoreceived="19991115182554" -->
<!-- sent="Mon, 15 Nov 1999 13:25:46 -0500" -->
<!-- isosent="19991115182546" -->
<!-- name="Jay.Estabrook@digital.com" -->
<!-- email="Jay.Estabrook@digital.com" -->
<!-- subject="Re: 21264 Alpha stuck spinlocks and memory woes" -->
<!-- id="199911151825.NAA01827@localhost.localdomain" -->
<!-- inreplyto="Pine.LNX.4.04.9911121824250.4948-100000@apollo.astro.washington.edu" -->
<STRONG>Subject: </STRONG>Re: 21264 Alpha stuck spinlocks and memory woes<BR>
<EM>Jay.Estabrook@digital.com</EM><BR>
<STRONG>Date: </STRONG>Mon Nov 15 1999 - 09:25:46 AKST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#521">[ date ]</A>
<A HREF="index.html#521">[ thread ]</A>
<A HREF="subject.html#521">[ subject ]</A>
<A HREF="author.html#521">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0522.html">Chance Reschke: "Re: 21264 Alpha stuck spinlocks and memory woes"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0520.html">Dr. David Gilbert: "Re: Gtk+ - does it work on Alpha?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0472.html">Chance Reschke: "21264 Alpha stuck spinlocks and memory woes"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0522.html">Chance Reschke: "Re: 21264 Alpha stuck spinlocks and memory woes"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0472.html">Jay.Estabrook@digital.com: "Re: 21264 Alpha stuck spinlocks and memory woes"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0521.html">Jay.Estabrook@digital.com: "Re: 21264 Alpha stuck spinlocks and memory woes"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
</PRE>
<P>
<EM>&gt;&gt;&gt; Chance Reschke said:
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; We run several dual-processor 21264 alpha machines - kernel 2.2.12smp,
</EM><BR>
<EM>&gt; RedHat 6.0 - and we'd like to resolve a couple of problems we've been
</EM><BR>
<EM>&gt; having with them.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; 1) They crash every couple of weeks complaining about stuck kernel
</EM><BR>
<EM>&gt; spinlocks.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; For example:
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;         socket.c:43 spinlock stuck in amd at fffffc00003a6eb8(0) owner
</EM><BR>
<EM>&gt;         xauth at fffffc000032ae14(1) sched.c:30
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Warnings about stuck spinlocks are regularly logged by the kernel, but the
</EM><BR>
<EM>&gt; machine usually gets unstuck and carries on.  Is there anything we can do
</EM><BR>
<EM>&gt; to eliminate this problem?
</EM><BR>
<P>Is the above an example of one of the locks that does NOT come unstuck?
<BR>
<P>As you've noticed, there are occasions when a spinlock is held for a
<BR>
very long time, during normal system operation. This is most apt to be
<BR>
the &quot;kernel&quot; lock, which under 2.2 is still being used to manage a lot
<BR>
of the kernel operations under SMP.
<BR>
<P>If you have encountered cases in which the lock does NOT (eventually)
<BR>
come unstuck, you may have found a deadlock condition that needs to be
<BR>
investigated. Please try to collect as much information about those
<BR>
cases as possible, and post here and to linux-kernel.
<BR>
<P><EM>&gt; 2) We'd like to use 4GB of physical RAM on one of these machines, but the
</EM><BR>
<EM>&gt; current Linux kernel only supports 2GB.  The i386 BIGMEM patch doesn't
</EM><BR>
<EM>&gt; appear to address our problem either.  Is anyone working on native support
</EM><BR>
<EM>&gt; for big memory on Alphas?
</EM><BR>
<P>Yes, I am working on patches that will support more than 2GB of memory, but
<BR>
only for RAWHIDE and all the EV6-based machines, nothing else. I expect to
<BR>
have something available for public consumption soon after official 2.2.14
<BR>
is released.
<BR>
<P><EM>&gt; On a related note, I recently tried compiling a 2.3.26 kernel hoping it
</EM><BR>
<EM>&gt; might fix the spinlock problems, but it failed with many errors in
</EM><BR>
<EM>&gt; /usr/src/linux/mm/memory.c
</EM><BR>
<P>Join the crowd... :-\
<BR>
<P>--Jay++
<BR>
<P>-----------------------------------------------------------------------------
<BR>
Jay A Estabrook                            Alpha Engineering - LINUX Project
<BR>
Compaq Computer Corp. - MRO1-2/K20         (508) 467-2080
<BR>
200 Forest Street, Marlboro, MA  01752     Jay.Estabrook@compaq.com
<BR>
-----------------------------------------------------------------------------
<BR>
<P><P><PRE>
-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0522.html">Chance Reschke: "Re: 21264 Alpha stuck spinlocks and memory woes"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0520.html">Dr. David Gilbert: "Re: Gtk+ - does it work on Alpha?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0472.html">Chance Reschke: "21264 Alpha stuck spinlocks and memory woes"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0522.html">Chance Reschke: "Re: 21264 Alpha stuck spinlocks and memory woes"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0472.html">Jay.Estabrook@digital.com: "Re: 21264 Alpha stuck spinlocks and memory woes"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0521.html">Jay.Estabrook@digital.com: "Re: 21264 Alpha stuck spinlocks and memory woes"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a23</A> 
: <EM>Mon Nov 15 1999 - 09:25:54 AKST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
