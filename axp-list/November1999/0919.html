<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>AXP-List Hypermail Archive: Re: Alpha Server 800 5/333 help</TITLE>
<META NAME="Author" CONTENT="Lee Parker - Compaq's Tru64 UNIX Custom Device Drivers and Realtime Support (parker@decatl.alf.dec.com)">
<META NAME="Subject" CONTENT="Re: Alpha Server 800 5/333 help">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Alpha Server 800 5/333 help</H1>
<HR>
<P>
<!-- received="Mon Nov 29 10:56:27 1999" -->
<!-- isoreceived="19991129195627" -->
<!-- sent="Mon, 29 Nov 1999 14:55:58 -0500 (EST)" -->
<!-- isosent="19991129195558" -->
<!-- name="Lee Parker - Compaq's Tru64 UNIX Custom Device Drivers and Realtime Support" -->
<!-- email="parker@decatl.alf.dec.com" -->
<!-- subject="Re: Alpha Server 800 5/333 help" -->
<!-- id="199911291955.AA06005@decatl.alf.dec.com" -->
<!-- inreplyto="199911291929.OAA31218@mail.redhat.com" -->
<STRONG>Subject: </STRONG>Re: Alpha Server 800 5/333 help<BR>
<STRONG>From: </STRONG>Lee Parker - Compaq's Tru64 UNIX Custom Device Drivers and Realtime Support (<EM>parker@decatl.alf.dec.com</EM>)<BR>
<STRONG>Date: </STRONG>Mon Nov 29 1999 - 10:55:58 AKST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#919">[ date ]</A>
<A HREF="index.html#919">[ thread ]</A>
<A HREF="subject.html#919">[ subject ]</A>
<A HREF="author.html#919">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0920.html">Jamesvi@asu.edu: "Re: Alpha Server 800 5/333 help"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0918.html">Carl Lafferty: "Alpha Server 800 5/333 help"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0918.html">Carl Lafferty: "Alpha Server 800 5/333 help"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0920.html">Jamesvi@asu.edu: "Re: Alpha Server 800 5/333 help"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0918.html">Lee Parker - Compaq's Tru64 UNIX Custom Device Drivers and Realtime Support: "Re: Alpha Server 800 5/333 help"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0919.html">Lee Parker - Compaq's Tru64 UNIX Custom Device Drivers and Realtime Support: "Re: Alpha Server 800 5/333 help"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
</PRE>
<P>
Carl,
<BR>
<P>Here is the installation procedure we used for RedHat 5.2, we have
<BR>
not gotten the system back to try 6.0 yet. Maybe you can get enough
<BR>
info out of this to get going. I'll try RedHat 6.0 as soon as I can
<BR>
arrange to get the Alpha Server 800 back. 
<BR>
<P>Hope this helps!
<BR>
<P>Lee Parker
<BR>
Compaq Tru64 UNIX and Linux Support 
<BR>
Atlanta Customer Support Center 
<BR>
<P>-------------------------------------------------------------------
<BR>
Installing Linux Redhat 5.2 on ALPHAserver AS800
<BR>
<P>1.  Create a Boot Diskette and a Ramdisk Diskette and label them:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;See Redhat Linux ALPHA Installation Addendum, page 4 for a
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;list of available images.  The noritake-s-5 image that is part of
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;the CDROM does not work.  I had to copy a patched kernel image from
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;the gatekeeper: <A HREF="ftp://ftp.digital.com/pub/DEC/Linux-Alpha/Kernels/.">ftp://ftp.digital.com/pub/DEC/Linux-Alpha/Kernels/.</A>
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Copy the noritake-s-5-980831.gz file in binary mode.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;Create a bootable boot diskette:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fdformat /dev/fd0H1440
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mke2fs /dev/fd0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mount /dev/fd0 (by default it gets mounted on /mnt/floppy)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e2writeboot /dev/fd0 /boot/bootlx
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cp noritake-s-5-980831.gz /mnt/floppy/vmlinux.gz    
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;I did the above from a Linux system since I needed to put a bootblock
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;on a floppy which Linux understands.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;Create a ramdisk:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Mount the Linux cd on a UNIX system.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# /usr/sbin/mount -r /dev/rz4c /mnt
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# cd /mnt
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# cd images
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# dd if=ramdisk.img of=/dev/rfd0c 
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2880+0 records in
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2880+0 records out
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[After this installation was done, just for fun, I started the
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;installation using the generic kernel - generic-up-221.img and 
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;generic-up-223.img.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I was able to go through the installation without any problems. I
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;copied the generic kernel using the dd command:  
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dd if= generic-up-221.img of=/dev/rfd0c.]
<BR>
<P>2.   From the SRM prompt, issue the following command:
<BR>
<P><EM>     &gt;&gt;&gt; boot dva0 -file vmlinux.gz -flags &quot;root=/dev/fd0 prompt_ramdisk=1
</EM><BR>
load_ramdisk=1&quot;
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dva0 is the boot floppy which contains either noritake-s-5-980831.gz or
<BR>
the generic kernel image.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If you get a kernel panic or get aboot&gt; prompt, it means that
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;there is a syntax error.  Reset the system and type the correct
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;command.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the boot was successful, it will prompt for the ramdisk.  Place
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the ramdisk in the floppy drive and press enter.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If all goes well, you will see the Red Hat installation menu on
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the screen.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(The system I used had a Mylex Dac960 raid controller.  With the
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;controller present, Linux installation would not recognize the
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SCSI controller.  I had to remove this from the system and use
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the internal SCSi controller.)
<BR>
<P>3.   Begin installation.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;During the installation process, we need to partition the disk and
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;specify mount points.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Use fdisk to partition the disk.  (You cannot use Disk Druid to
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;partition the disk if any disk on the system has BSD style
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;labeling or if the disk will be booted from an SRM console.)  
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;From the fdisk menu, select &quot;b&quot; for BSD disklabel.  We can install
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aboot only on disks with BSD type disklabel.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Command (m for help)b
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the system prompts to write the disklabel, type &quot;y&quot; to accept.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BSD disklabel command (m for help)n 
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Here is the partition table I used for my system:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a / root ext2       (Cyl.    2   - 60)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b        swap       (Cyl.    61  - 100)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c /usr   ext2       (Cyl.    101 - 160)
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Linux allows up to four partitions and needs a minimum of two
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for installation.  One partition needs to be Linux native type
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(ext2) and the other need to be swap.
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The following are the commands one could use from fdisk.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;w to write the partition table to the disk.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;q to quit.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m to list the help menu
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t to change the partition type
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;n to create a new partition
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;d to delete an existing partition
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;l to list all known types for the disk
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;p to list current partition table
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The first partition should start at the second or third cylinder,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;so that there are 1024 sectors free into which bootstrap code can
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;be installed in front of the first partition.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mount the disk partitions.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Select the swap partition.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Format the swap partition.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Format the disk partitions.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Select the components to install.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;All the items listed above are menu driven and are listed in the
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Redhat installation manual starting on page 44.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If the during the installation it finds a graphics card, it will
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ask if you want to configure it.  You can do it now or use
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Xconfigurator after logging in.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;After the installation is complete, it asks if you want to
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;configure the network.  
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The installation menu will ask if you want to configure the
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printer.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;It will now prompt for the boot diskette.  The system copies the
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;kernel from the floppy to the harddisk.
<BR>
<P>4.   Install the boot loader.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remove the floppy, reset the system, and reboot. 
<BR>
<P><EM>     &gt;&gt;&gt; boot dva0 -fi vmlinux.gz -flag &quot;root=/dev/sda1&quot;
</EM><BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Login to the system.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;When using the SRM firmware, aboot is the preferred way of booting
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;linux.  Install the boot loader on the harddisk using the
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;swriteboot command.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;swriteboot expects that the first few sectors of the harddisk are 
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reserved for booting purposes (which is why the disk partitioning
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;was started on cylinder 2.)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#swriteboot /dev/sda /boot/bootlx
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Shut the system down and boot from the hard drive.  Reset the
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;system before booting or the system will do a dump and reset.
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To boot from the hard disk:
<BR>
<P><EM>        &gt;&gt;&gt; boot dka0 -file 1/vmlinux.gz -flag &quot;root=/dev/sda1&quot;
</EM><BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You could set the following console variables and type boot
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;at the &gt;&gt;&gt;
<BR>
<P><EM>                  &gt;&gt;&gt;set boot_file kernels/vmlunix.gz
</EM><BR>
<EM>                  &gt;&gt;&gt;set boot_osflags &quot;root=/dev/sda1&quot;
</EM><BR>
<EM>                  &gt;&gt;&gt;set bootdef_dev dka0
</EM><BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
<BR>
<P>5. To boot using aboot loader:
<BR>
<P><EM>        &gt;&gt;&gt; boot dka0 -fl i  (i = interactive)
</EM><BR>
<P><EM>        aboot&gt; 1/vmlinux.gz root=/dev/sda1      
</EM><BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0920.html">Jamesvi@asu.edu: "Re: Alpha Server 800 5/333 help"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0918.html">Carl Lafferty: "Alpha Server 800 5/333 help"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0918.html">Carl Lafferty: "Alpha Server 800 5/333 help"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0920.html">Jamesvi@asu.edu: "Re: Alpha Server 800 5/333 help"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0918.html">Lee Parker - Compaq's Tru64 UNIX Custom Device Drivers and Realtime Support: "Re: Alpha Server 800 5/333 help"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0919.html">Lee Parker - Compaq's Tru64 UNIX Custom Device Drivers and Realtime Support: "Re: Alpha Server 800 5/333 help"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a23</A> 
: <EM>Mon Nov 29 1999 - 10:56:28 AKST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
