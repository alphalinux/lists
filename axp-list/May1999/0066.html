<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: Alpha asm &amp; Linux</TITLE>
<META NAME="Author" CONTENT="Wes Bauske (wsb@paralleldata.com)">
<META NAME="Subject" CONTENT="Re: Alpha asm &amp; Linux">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Alpha asm &amp; Linux</H1>
<HR>
<P>
<!-- received="Tue May 04 20:03:08 1999" -->
<!-- isoreceived="19990505030308" -->
<!-- sent="Tue, 04 May 1999 13:12:31 -0500" -->
<!-- isosent="19990504181231" -->
<!-- name="Wes Bauske" -->
<!-- email="wsb@paralleldata.com" -->
<!-- subject="Re: Alpha asm &amp; Linux" -->
<!-- id="372F388F.2954208C@paralleldata.com" -->
<!-- inreplyto="372ED97C.6F79A31C@voicenet.com" -->
<STRONG>Subject: </STRONG>Re: Alpha asm & Linux<BR>
<STRONG>From: </STRONG>Wes Bauske (<EM>wsb@paralleldata.com</EM>)<BR>
<STRONG>Date: </STRONG>Tue May 04 1999 - 11:12:31 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#66">[ date ]</A>
<A HREF="index.html#66">[ thread ]</A>
<A HREF="subject.html#66">[ subject ]</A>
<A HREF="author.html#66">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0067.html">Greg Lindahl: "Re: Compaq Math lib"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0065.html">Bill Nottingham: "Re: RH 6.0"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0034.html">Uncle George: "Re: Alpha asm &amp; Linux"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0034.html">Wes Bauske: "Re: Alpha asm &amp; Linux"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Uncle George wrote:
<BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Wes Bauske wrote:
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;     Take for instance    Opcodes.    Ever try to figure out how to add &quot;/U&quot;
</EM><BR>
<EM>&gt; or &quot;/S&quot; or &quot;/V&quot;, i'm sure i can find more strangeness if i were to try all
</EM><BR>
<EM>&gt; the opcodes!
</EM><BR>
<P>OK, that falls under the quirks of the given machine.
<BR>
Looking at gcc output should show you how to do that.
<BR>
Just set the appropriate flag &quot;-mieee&quot;, and see how it
<BR>
differs from a non-flagged run. In general, I have no
<BR>
interest in the various trap modes since they hurt 
<BR>
performance and about the only reason I'd use asm is 
<BR>
to get better performance.
<BR>
<P><EM>&gt;     Old pdp11/ATT unix assembler jumps/goto's were either a forward ref of
</EM><BR>
<EM>&gt; backward ref.
</EM><BR>
<EM>&gt;     I cant tell if branch labels is gonna be defined as a local symbol or
</EM><BR>
<EM>&gt; global.
</EM><BR>
<P>I thought there was a specific declaration to make a symbol external.(.globl)
<BR>
Otherwise it's local. 
<BR>
<P><EM>&gt;     Register conventions ( in __asm__ u gotta know that $9 is s0 )
</EM><BR>
<P>Is there no way to make your own register names on Alphas?
<BR>
<P>I used to use things like &quot;F4   equ    4&quot; on MVS many moons ago
<BR>
keep my eyeballs straight when using FP instructions. 
<BR>
<P><EM>&gt;     Yes, frontend &amp; backend &quot;C&quot; linkages. I generally take a &quot;something.c&quot;
</EM><BR>
<EM>&gt; program with the same   arglist an &quot;C&quot; compile with -S. THEN
</EM><BR>
<EM>&gt;     u also observe in the resultant .s  file various assembler directives
</EM><BR>
<EM>&gt; that does who knows what, and if u reserarch l( perservere ) ong enough u
</EM><BR>
<EM>&gt; will find them based on &quot;dec unix&quot;
</EM><BR>
<P>So, Alpha Linux is a halfbreed, part GNU, and part DEC UNIX.
<BR>
Need both doc sets.
<BR>
<P><EM>&gt;     Debugging - need i say more
</EM><BR>
<EM>&gt;         A particular peeve is that the opcode isn;t always printed out with
</EM><BR>
<EM>&gt; an Alpha assembler opcode
</EM><BR>
<EM>&gt;         Try matching register conventions with &quot;cc -S&quot;, and gdb
</EM><BR>
<EM>&gt;
</EM><BR>
<P>Haven't written anything so large lately that I couldn't
<BR>
just stare at it for a while and see what the problem
<BR>
was. From looking at gcc asm output, I didn't see anything
<BR>
particularly unusual, but then I could have missed it.
<BR>
&nbsp;
<BR>
<EM>&gt; &gt; The calling interface is more painful
</EM><BR>
<EM>&gt; &gt; from what I've seen. By splitting the args between
</EM><BR>
<EM>&gt; &gt; regs and memory, one can make the code faster so
</EM><BR>
<EM>&gt; &gt; it's a tradeoff in complexity for speed. Also, by
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; &gt; inlining things inside C,
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Did u mean __asm__ rather than inlineing ?
</EM><BR>
<P>Both.
<BR>
<P><EM>&gt; 
</EM><BR>
<EM>&gt; &gt; you can avoid having to
</EM><BR>
<EM>&gt; &gt; code your own interface. Also, asm for the specific
</EM><BR>
<EM>&gt; &gt; machine has it's own quirks but no more so than
</EM><BR>
<EM>&gt; &gt; other machines. Other than that, its just managing
</EM><BR>
<EM>&gt; &gt; the stack.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;     Dont forget the FP ( no not floating point ),
</EM><BR>
<P>Frame pointer
<BR>
<P><EM>&gt;     I believe also GP
</EM><BR>
<P>Global pointer
<BR>
<P><EM>&gt;     gdb stack traces
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; &gt; What am I not seeing?
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Let me also not forget that &quot;please refer to the assembler docs&quot; has always
</EM><BR>
<EM>&gt; accompanied by most man references. When I see that i also notice a lack of
</EM><BR>
<EM>&gt; complete assembler docs ( maybe i should say up-to-date assembler docs ).
</EM><BR>
<EM>&gt; THis is not just endemic of ALPHA/LINUX but of most unix's
</EM><BR>
<EM>&gt; 
</EM><BR>
<P>In general, I agree finding asm docs is more difficult
<BR>
on UNIX. Mostly due to the fact almost no application
<BR>
programmers need them.
<BR>
<P>I grabbed copies off one of Digital's old sites for
<BR>
their asm progammer's guide and the Architecture reference
<BR>
and they've so far explained everything I needed to know.
<BR>
<P>Try:
<BR>
<P><A HREF="http://www.partner.digital.com/www-swdev/pages/Home/TECH/documents/Digital_UNIX/V4.0/Digital_UNIX_Bookshelf.html">http://www.partner.digital.com/www-swdev/pages/Home/TECH/documents/Digital_UNIX/V4.0/Digital_UNIX_Bookshelf.html</A>
<BR>
<P><A HREF="http://www.partner.digital.com/www-swdev/pages/Home/TECH/documents/alpha_cookbook/biblio.htm">http://www.partner.digital.com/www-swdev/pages/Home/TECH/documents/alpha_cookbook/biblio.htm</A>
<BR>
<P>Might be newer stuff out there but they show most stuff.
<BR>
<P><P>Wes
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0067.html">Greg Lindahl: "Re: Compaq Math lib"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0065.html">Bill Nottingham: "Re: RH 6.0"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0034.html">Uncle George: "Re: Alpha asm &amp; Linux"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0034.html">Wes Bauske: "Re: Alpha asm &amp; Linux"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Tue Jun 01 1999 - 09:56:18 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
