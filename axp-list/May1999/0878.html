<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: Kermit?</TITLE>
<META NAME="Author" CONTENT="Peter Petrakis (ppetrakis@alphalinux.org)">
<META NAME="Subject" CONTENT="Re: Kermit?">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Kermit?</H1>
<HR>
<P>
<!-- received="Wed May 26 03:11:45 1999" -->
<!-- isoreceived="19990526101145" -->
<!-- sent="Tue, 25 May 1999 18:58:51 -0400" -->
<!-- isosent="19990525225851" -->
<!-- name="Peter Petrakis" -->
<!-- email="ppetrakis@alphalinux.org" -->
<!-- subject="Re: Kermit?" -->
<!-- id="374B2B2B.FB795CE3@alphalinux.org" -->
<!-- inreplyto="v590aclv6l.fsf@Phantom.newport.com" -->
<STRONG>Subject: </STRONG>Re: Kermit?<BR>
<STRONG>From: </STRONG>Peter Petrakis (<EM>ppetrakis@alphalinux.org</EM>)<BR>
<STRONG>Date: </STRONG>Tue May 25 1999 - 15:58:51 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#878">[ date ]</A>
<A HREF="index.html#878">[ thread ]</A>
<A HREF="subject.html#878">[ subject ]</A>
<A HREF="author.html#878">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0879.html">Larry Snyder: "Re: Specifications for Digital monitor"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0877.html">Dan O'Reilly: "Re: Kermit?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0871.html">Rui-Tao Dong: "Kermit?"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0886.html">Peter Rye: "Re: Kermit?"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0871.html">Peter Petrakis: "Re: Kermit?"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Have you tried using minicom yet?
<BR>
<P>Peter
<BR>
<P>Rui-Tao Dong wrote:
<BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; I have a not quite dead (floppyless and diskless) UDB and I am trying
</EM><BR>
<EM>&gt; to make it a dedicated firewall for my cable modem.  I need a terminal
</EM><BR>
<EM>&gt; program to talk to serial console.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Has anyone got Kermit working?  I got the (very old) rpm from
</EM><BR>
<EM>&gt; Columbia, but it crashes on connect.  I am having a hard time
</EM><BR>
<EM>&gt; compiling it.  Does anyone have an RPM?  Or has any suggestion on a
</EM><BR>
<EM>&gt; better terminal program?  I tried to roll my own, but without much luck.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; --
</EM><BR>
<EM>&gt; Regards,
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;                         Rui-Tao (x679)
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; /* Usage link /dev/cua0 */
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; #include &lt;stdio.h&gt;
</EM><BR>
<EM>&gt; #include &lt;fcntl.h&gt;
</EM><BR>
<EM>&gt; #include &lt;unistd.h&gt;
</EM><BR>
<EM>&gt; #include &lt;sys/types.h&gt;
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; #define BUFSIZE 1024
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; void copy_bytes(int in_fd, int out_fd)
</EM><BR>
<EM>&gt; {
</EM><BR>
<EM>&gt;   char buf[BUFSIZE];
</EM><BR>
<EM>&gt;   int rbytes;
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;   if ( (rbytes=read(in_fd, buf, BUFSIZE)) &gt; 0 )
</EM><BR>
<EM>&gt;     {
</EM><BR>
<EM>&gt;       int wbytes;
</EM><BR>
<EM>&gt;       char* buf_p=buf;
</EM><BR>
<EM>&gt;       fprintf(stderr, &quot;Reading %d bytes from %d.\n&quot;, rbytes, in_fd);
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;       while (buf_p &lt; buf+rbytes)
</EM><BR>
<EM>&gt;         {
</EM><BR>
<EM>&gt;           int wsize=rbytes+buf-buf_p;
</EM><BR>
<EM>&gt;           wbytes=write(out_fd, buf_p, wsize);
</EM><BR>
<EM>&gt;           fprintf(stderr, &quot;Writing %d bytes to %d.\n&quot;, wbytes, out_fd);
</EM><BR>
<EM>&gt;           buf_p += wbytes;
</EM><BR>
<EM>&gt;         }
</EM><BR>
<EM>&gt;       if (wbytes &lt; 0)
</EM><BR>
<EM>&gt;         {
</EM><BR>
<EM>&gt;           perror(&quot;write&quot;);
</EM><BR>
<EM>&gt;           exit(-1);
</EM><BR>
<EM>&gt;         }
</EM><BR>
<EM>&gt;     }
</EM><BR>
<EM>&gt;   else if (rbytes &lt; 0)
</EM><BR>
<EM>&gt;     {
</EM><BR>
<EM>&gt;       perror(&quot;read&quot;);
</EM><BR>
<EM>&gt;       exit(-1);
</EM><BR>
<EM>&gt;     }
</EM><BR>
<EM>&gt; }
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; int main(int argc, char** argv)
</EM><BR>
<EM>&gt; {
</EM><BR>
<EM>&gt;   int fd;
</EM><BR>
<EM>&gt;   fd_set read_set;
</EM><BR>
<EM>&gt;   /* Initialize the file descriptor set. */
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;   if (argc !=2)
</EM><BR>
<EM>&gt;     {
</EM><BR>
<EM>&gt;       fprintf(stderr, &quot;Using %s device-file.\n&quot;, argv[0]);
</EM><BR>
<EM>&gt;       return -1;
</EM><BR>
<EM>&gt;     }
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;   if ((fd=open(argv[1], O_RDWR)) &lt; 0)
</EM><BR>
<EM>&gt;     {
</EM><BR>
<EM>&gt;       perror(&quot;open&quot;);
</EM><BR>
<EM>&gt;       return -1;
</EM><BR>
<EM>&gt;     }
</EM><BR>
<EM>&gt;   FD_ZERO (&amp;read_set);
</EM><BR>
<EM>&gt;   FD_SET (fd, &amp;read_set);
</EM><BR>
<EM>&gt;   FD_SET (0, &amp;read_set);
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;   while (1)
</EM><BR>
<EM>&gt;     {
</EM><BR>
<EM>&gt;       if ( select(FD_SETSIZE, &amp;read_set, NULL, NULL, NULL) &lt; 0 )
</EM><BR>
<EM>&gt;         {
</EM><BR>
<EM>&gt;           perror(&quot;select&quot;);
</EM><BR>
<EM>&gt;           return -1;
</EM><BR>
<EM>&gt;         }
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;       if ( FD_ISSET(fd, &amp;read_set))
</EM><BR>
<EM>&gt;         {
</EM><BR>
<EM>&gt;           copy_bytes(fd, 1);
</EM><BR>
<EM>&gt;         }
</EM><BR>
<EM>&gt;       else if (FD_ISSET(0, &amp;read_set))
</EM><BR>
<EM>&gt;         {
</EM><BR>
<EM>&gt;           copy_bytes(0, fd);
</EM><BR>
<EM>&gt;         }
</EM><BR>
<EM>&gt;       else
</EM><BR>
<EM>&gt;         {
</EM><BR>
<EM>&gt;           return -1;
</EM><BR>
<EM>&gt;         }
</EM><BR>
<EM>&gt;     }
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;   close(fd);
</EM><BR>
<EM>&gt;   return 0;
</EM><BR>
<EM>&gt; }
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; --
</EM><BR>
<EM>&gt; To unsubscribe: send e-mail to axp-list-request@redhat.com with
</EM><BR>
<EM>&gt; 'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</EM><BR>
<P><PRE>
--
www.alphalinux.org
Peter Petrakis          Warrior/Engineer       ppetrakis@alphalinux.org
&quot;Oh my God! They killed Xena! You bastards!!&quot; 
&quot;&lt;BLAM!!&gt; Who the hell are you!? Name's Ash &lt;click clock&gt; Housewares...&quot;
<P>-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0879.html">Larry Snyder: "Re: Specifications for Digital monitor"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0877.html">Dan O'Reilly: "Re: Kermit?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0871.html">Rui-Tao Dong: "Kermit?"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0886.html">Peter Rye: "Re: Kermit?"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0871.html">Peter Petrakis: "Re: Kermit?"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Tue Jun 01 1999 - 09:56:27 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
