<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Kermit?</TITLE>
<META NAME="Author" CONTENT="Rui-Tao Dong (ruitao@home.com)">
<META NAME="Subject" CONTENT="Kermit?">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Kermit?</H1>
<HR>
<P>
<!-- received="Tue May 25 22:46:21 1999" -->
<!-- isoreceived="19990526054621" -->
<!-- sent="25 May 1999 14:02:26 -0700" -->
<!-- isosent="19990525210226" -->
<!-- name="Rui-Tao Dong" -->
<!-- email="ruitao@home.com" -->
<!-- subject="Kermit?" -->
<!-- id="v590aclv6l.fsf@Phantom.newport.com" -->
<STRONG>Subject: </STRONG>Kermit?<BR>
<STRONG>From: </STRONG>Rui-Tao Dong (<EM>ruitao@home.com</EM>)<BR>
<STRONG>Date: </STRONG>Tue May 25 1999 - 14:02:26 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#871">[ date ]</A>
<A HREF="index.html#871">[ thread ]</A>
<A HREF="subject.html#871">[ subject ]</A>
<A HREF="author.html#871">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0872.html">Uncle George: "Re: Adding more than 8 swap partitions"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0870.html">Michal Jaegermann: "Re: Adding more than 8 swap partitions"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0873.html">Michal Jaegermann: "Re: Kermit?"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
I have a not quite dead (floppyless and diskless) UDB and I am trying
<BR>
to make it a dedicated firewall for my cable modem.  I need a terminal 
<BR>
program to talk to serial console.
<BR>
<P>Has anyone got Kermit working?  I got the (very old) rpm from
<BR>
Columbia, but it crashes on connect.  I am having a hard time
<BR>
compiling it.  Does anyone have an RPM?  Or has any suggestion on a
<BR>
better terminal program?  I tried to roll my own, but without much luck.
<BR>
<P><PRE>
-- 
Regards,
<P>			Rui-Tao (x679)
<P>/* Usage link /dev/cua0 */
<P>#include &lt;stdio.h&gt;
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;
#include &lt;sys/types.h&gt;
<P>#define BUFSIZE 1024
<P>void copy_bytes(int in_fd, int out_fd)
{
  char buf[BUFSIZE];
  int rbytes;
  
  if ( (rbytes=read(in_fd, buf, BUFSIZE)) &gt; 0 ) 
    {
      int wbytes;
      char* buf_p=buf;
      fprintf(stderr, &quot;Reading %d bytes from %d.\n&quot;, rbytes, in_fd);
<P>      while (buf_p &lt; buf+rbytes)
	{
	  int wsize=rbytes+buf-buf_p;
	  wbytes=write(out_fd, buf_p, wsize);
	  fprintf(stderr, &quot;Writing %d bytes to %d.\n&quot;, wbytes, out_fd);
	  buf_p += wbytes;
	}
      if (wbytes &lt; 0)
	{
	  perror(&quot;write&quot;);
	  exit(-1);
	}
    } 
  else if (rbytes &lt; 0)
    {
      perror(&quot;read&quot;);
      exit(-1);
    }
}
<P>int main(int argc, char** argv)
{
  int fd;
  fd_set read_set;
  /* Initialize the file descriptor set. */
<P>  if (argc !=2)
    {
      fprintf(stderr, &quot;Using %s device-file.\n&quot;, argv[0]);
      return -1;
    }
<P>  if ((fd=open(argv[1], O_RDWR)) &lt; 0)
    {
      perror(&quot;open&quot;);
      return -1;
    }
  FD_ZERO (&amp;read_set);
  FD_SET (fd, &amp;read_set);
  FD_SET (0, &amp;read_set);
  
  while (1)
    {
      if ( select(FD_SETSIZE, &amp;read_set, NULL, NULL, NULL) &lt; 0 )
	{
	  perror(&quot;select&quot;);
	  return -1;
	}
<P>      if ( FD_ISSET(fd, &amp;read_set))
	{
	  copy_bytes(fd, 1);
	}
      else if (FD_ISSET(0, &amp;read_set))
	{
	  copy_bytes(0, fd);
	}
      else
	{
	  return -1;
	}
    }
  
  close(fd);
  return 0;
}
<P>-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0872.html">Uncle George: "Re: Adding more than 8 swap partitions"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0870.html">Michal Jaegermann: "Re: Adding more than 8 swap partitions"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0873.html">Michal Jaegermann: "Re: Kermit?"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Tue Jun 01 1999 - 09:56:27 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
