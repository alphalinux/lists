<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: wrong cycle frequency</TITLE>
<META NAME="Author" CONTENT="Ivan Kokshaysky (ink@jurassic.park.msu.ru)">
<META NAME="Subject" CONTENT="Re: wrong cycle frequency">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: wrong cycle frequency</H1>
<HR>
<P>
<!-- received="Sat May 19 02:55:35 1999" -->
<!-- isoreceived="19990519095535" -->
<!-- sent="Tue, 18 May 1999 23:59:57 +0400" -->
<!-- isosent="19990518195957" -->
<!-- name="Ivan Kokshaysky" -->
<!-- email="ink@jurassic.park.msu.ru" -->
<!-- subject="Re: wrong cycle frequency" -->
<!-- id="19990518235957.A936@jurassic.park.msu.ru" -->
<!-- inreplyto="19990517182922.B23869@snowball.ucd.ie" -->
<STRONG>Subject: </STRONG>Re: wrong cycle frequency<BR>
<STRONG>From: </STRONG>Ivan Kokshaysky (<EM>ink@jurassic.park.msu.ru</EM>)<BR>
<STRONG>Date: </STRONG>Tue May 18 1999 - 12:59:57 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#617">[ date ]</A>
<A HREF="index.html#617">[ thread ]</A>
<A HREF="subject.html#617">[ subject ]</A>
<A HREF="author.html#617">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0618.html">John Bigbooté: "A severe case of the warblers with my ZLXp-E2"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0616.html">Speedracer: "Star Office"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0551.html">Nikita Schmidt: "Re: wrong cycle frequency"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0551.html">Ivan Kokshaysky: "Re: wrong cycle frequency"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
On Mon, May 17, 1999 at 06:29:22PM +0100, Nikita Schmidt wrote:
<BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; The explanation I saw was incorrect cycle frequency in the PALcode
</EM><BR>
<EM>&gt; impure area on SX164, where MILO used to take it from.  The newest MILOs
</EM><BR>
<EM>&gt; from genie.ucd.ie do not trust that value and always count cycles in a one
</EM><BR>
<EM>&gt; second interval.
</EM><BR>
<EM>&gt; 
</EM><BR>
<P>It certainly makes things better, but unfortunately the problem still
<BR>
occurs from time to time :-\
<BR>
Now I'm pretty sure that it's hardware problem with real-time clock within
<BR>
the Cypress chip - I happened to see CMOS clock in AlphaBIOS setup running
<BR>
at nearly double speed right after the power-up.
<BR>
That's how I see the problem: power-up or reset affects badly the RTC,
<BR>
and it goes crazy; at that time AlphaBIOS (or whatever it is) counts CPU
<BR>
frequency by the same way MILO/kernel does (within 1 second interval,
<BR>
which is actually much shorter due to RTC failure) and stores bogus value
<BR>
into the PALcode impure area. When MILO boots (20-30 seconds after that),
<BR>
chances are good that RTC ran into normal state, and we'll get correct
<BR>
1 second interval. But sometimes RTC remains in a bad state (running too fast),
<BR>
and we're in trouble.
<BR>
<P>It's possible that earliest revision of Cypress chipset (the one on my
<BR>
board is rev. 0) is buggy. It would be interesting if someone who _never_
<BR>
experienced this problem with SX164 could confirm that his chipset revision
<BR>
is &gt;0 (&quot;grep Contaq /proc/pci&quot;).
<BR>
It's also possible that 32.768 KHz generator used in some SX164 boards
<BR>
is defective.
<BR>
<P>I hope resetting RTC divider before CPU frequency calculation would help
<BR>
(and I'll try it this week). If not, I'll end up with solderer and
<BR>
oscilloscope...
<BR>
<P>Ivan
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0618.html">John Bigbooté: "A severe case of the warblers with my ZLXp-E2"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0616.html">Speedracer: "Star Office"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0551.html">Nikita Schmidt: "Re: wrong cycle frequency"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0551.html">Ivan Kokshaysky: "Re: wrong cycle frequency"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Tue Jun 01 1999 - 09:56:24 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
