<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: RE: wrong cycle frequency</TITLE>
<META NAME="Author" CONTENT="Iso-H (jd@ts.ray.fi)">
<META NAME="Subject" CONTENT="RE: wrong cycle frequency">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>RE: wrong cycle frequency</H1>
<HR>
<P>
<!-- received="Mon May 17 11:39:56 1999" -->
<!-- isoreceived="19990517183956" -->
<!-- sent="Mon, 17 May 1999 13:47:53 +0300 (EET DST)" -->
<!-- isosent="19990517104753" -->
<!-- name="Iso-H" -->
<!-- email="jd@ts.ray.fi" -->
<!-- subject="RE: wrong cycle frequency" -->
<!-- id="Pine.LNX.3.96.990517132252.16368A-100000@linray.ts.ray.fi" -->
<!-- inreplyto="B8FAB28E6A3469ABC2256773007DBA36.007B28DEC2256773@ray.fi" -->
<STRONG>Subject: </STRONG>RE: wrong cycle frequency<BR>
<STRONG>From: </STRONG>Iso-H (<EM>jd@ts.ray.fi</EM>)<BR>
<STRONG>Date: </STRONG>Mon May 17 1999 - 03:47:53 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#526">[ date ]</A>
<A HREF="index.html#526">[ thread ]</A>
<A HREF="subject.html#526">[ subject ]</A>
<A HREF="author.html#526">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0527.html">Albrecht Jacobs: "Re: Where to find libraries."</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0525.html">Jean-Baptiste Vignaud: "2.3.x broken"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0542.html">Richard Henderson: "Re: wrong cycle frequency"</A>
<LI><STRONG>Maybe reply:</STRONG> <A HREF="0471.html">Iso-H: "RE: wrong cycle frequency"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
On Mon, 17 May 1999, Konrad Podloucky wrote:
<BR>
<P><EM>&gt; 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; On 15-May-99 Iso-H wrote:
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;  I have to reboot my SX164 several times before I get
</EM><BR>
<EM>&gt; &gt;  right cycle frequency; usually frequency is something
</EM><BR>
<EM>&gt; &gt;  between 350000000...533155104.
</EM><BR>
<EM>&gt; &gt;  I think the system time is generated based on this value, isn't it?
</EM><BR>
<EM>&gt; &gt;  &quot;Visible&quot; consequence about wrong value is that the system time runs
</EM><BR>
<EM>&gt; &gt;  too fast; one minute is about 45 seconds &quot;long&quot;.
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; Had (and sometimes still have) exactly the same problem with my SX.
</EM><BR>
<EM>&gt; One of the more annoying consequences was that I had to click like hell to 
</EM><BR>
<EM>&gt; make
</EM><BR>
<EM>&gt; a double-click!
</EM><BR>
<EM>&gt; 
</EM><BR>
<P>&nbsp;I desided to use fixed value for &quot;est_cycle_freq&quot; in function
<BR>
&nbsp;&quot;time_init&quot; to make sure &quot;right&quot; value. I just hope it won't 
<BR>
&nbsp;mess anything else.
<BR>
<P>&nbsp;btw. I think that this code won't work as it is meant to be
<BR>
&nbsp;if unsigned long variables are used!?
<BR>
<P><P>&nbsp;&nbsp;&nbsp;&nbsp;unsigned long cycle_freq, diff, one_percent;
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;cycle_freq = hwrpb-&gt;cycle_freq;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;one_percent = cycle_freq / 100;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;diff = cycle_freq - est_cycle_freq;
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;if (diff &lt; 0)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff = -diff;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;if (diff &gt; one_percent) {
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cycle_freq = est_cycle_freq;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;printk(&quot;HWRPB cycle frequency bogus.  Estimated %lu Hz\n&quot;,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cycle_freq);
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;else {
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;est_cycle_freq = 0;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;}
<BR>
<P><P><EM>&gt; &gt;  This behaviour didn't occure until I upgraded to RHL-5.2 and
</EM><BR>
<EM>&gt; &gt;  kernel 2.2.x; I am using 2.2.8 now.
</EM><BR>
<EM>&gt; &gt;  Could anybody suggest me how to fix this problem?
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; I upgraded my milo to the 2.0.35 version and now this behaviour almost 
</EM><BR>
<EM>&gt; never
</EM><BR>
<EM>&gt; showed up again.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Konrad
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; 
</EM><BR>
<P>Iso-H
<BR>
<P><PRE>
--
<P>-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0527.html">Albrecht Jacobs: "Re: Where to find libraries."</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0525.html">Jean-Baptiste Vignaud: "2.3.x broken"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0542.html">Richard Henderson: "Re: wrong cycle frequency"</A>
<LI><STRONG>Maybe reply:</STRONG> <A HREF="0471.html">Iso-H: "RE: wrong cycle frequency"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Tue Jun 01 1999 - 09:56:23 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
