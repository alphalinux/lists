<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: SMBFS kernel 2.2.0pre4 hang (maybe msdos fs too)</TITLE>
<META NAME="Author" CONTENT="Tom Holroyd (tomh@taz.ccs.fau.edu)">
<META NAME="Subject" CONTENT="SMBFS kernel 2.2.0pre4 hang (maybe msdos fs too)">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>SMBFS kernel 2.2.0pre4 hang (maybe msdos fs too)</H1>
<HR>
<P>
<!-- received="Tue Jan 05 10:27:39 1999 PST" -->
<!-- sent="Tue, 5 Jan 1999 19:26:59 +0900 (JST)" -->
<!-- name="Tom Holroyd" -->
<!-- email="tomh@taz.ccs.fau.edu" -->
<!-- subject="SMBFS kernel 2.2.0pre4 hang (maybe msdos fs too)" -->
<!-- id="Pine.LNX.3.96.990105185833.379A-100000@bhalpha1.nibh.go.jp" -->
<!-- inreplyto="" -->
<STRONG>Tom Holroyd</STRONG> (<A HREF="mailto:tomh@taz.ccs.fau.edu?subject=Re:%20SMBFS%20kernel%202.2.0pre4%20hang%20(maybe%20msdos%20fs%20too)"><EM>tomh@taz.ccs.fau.edu</EM></A>)<BR>
<EM>Tue, 5 Jan 1999 19:26:59 +0900 (JST)</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#235">[ date ]</A>
<A HREF="index.html#235">[ thread ]</A>
<A HREF="subject.html#235">[ subject ]</A>
<A HREF="author.html#235">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0236.html">Tom Holroyd: "reporting 2.2 kernel bugs"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0234.html">Feuer: "architecture"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0263.html">Michal Jaegermann: "2.2 changes (was: Re: SMBFS kernel 2.2.0pre4 hang (maybe msdos fs too))"</A>
</UL>
<HR>
<!-- body="start" -->
<P>
AlphaPC164LX kernel 2.2.0pre4 egcs-1.1.1 smbmount 2.0.0beta2
<BR>
<P>The postmark benchmark
<BR>
(<A HREF="http://www.netapp.com/technology/freeware/postmark">http://www.netapp.com/technology/freeware/postmark</A>)
<BR>
causes a kernel hang when used on an smbmounted share.
<BR>
<P>Details:
<BR>
<P>I have SMBFS configured (as a module), with the Win95 bug fixes enabled.
<BR>
I mount a share (that resides on an HP Samba server, Samba 1.9.16p11)
<BR>
using something like: smbmount //host/share password -c 'mount /home/dir'
<BR>
I run postmark on a subdirectory in that share (e.g. /home/dir/moo)
<BR>
The system hangs during postmark's file creation phase.  No messages.
<BR>
<P>Plenty of free memory, I'm not even running X.
<BR>
<P>Postmortem, it's created exactly 3 files, and the 3rd file is dated
<BR>
tomorrow(!) (the others are correct) and has only had 1k written.
<BR>
<P>(I've done this twice now, same result.)
<BR>
<P>Postmark creates N files in a row, quickly, and writes random garbage to
<BR>
them.  This could probably be duplicated by any quick create/write/close
<BR>
loop, but postmark is easy (it's only 1 .c file).
<BR>
<P>I'm not sure, but this may be related, in that it also produced a system
<BR>
hang.  I have an msdos filesystem mounted on a scsi drive, and I did an
<BR>
ls -lR -- while it was busy I pulled up a netscape menu and the system
<BR>
froze.  The msdos filesystem is also configured as a module..  Haven't
<BR>
been able to duplicate it though.  As I recall now I had a hang once on an
<BR>
earlier kernel (2.1.132?) by trying to do a filename-completion in a
<BR>
directory on that drive.
<BR>
<P>One thing more: /var/log/messages says it can't find the System.map file.
<BR>
It used to be able to find it in /usr/src/linux (where it is), or
<BR>
/lib/modules/*, where it also is.  Does it need to be in / now?
<BR>
<P>I'll do more testing tomorrow if anyone has a good idea as to what to try
<BR>
next.
<BR>
<P>Dr. Tom Holroyd
<BR>
I would dance and be merry,
<BR>
Life would be a ding-a-derry,
<BR>
If I only had a brain.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;-- The Scarecrow
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20SMBFS%20kernel%202.2.0pre4%20hang%20(maybe%20msdos%20fs%20too)">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20SMBFS%20kernel%202.2.0pre4%20hang%20(maybe%20msdos%20fs%20too)">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0236.html">Tom Holroyd: "reporting 2.2 kernel bugs"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0234.html">Feuer: "architecture"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0263.html">Michal Jaegermann: "2.2 changes (was: Re: SMBFS kernel 2.2.0pre4 hang (maybe msdos fs too))"</A>
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Sun Jan 24 1999 - 14:47:47 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
