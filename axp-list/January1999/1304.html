<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: TCP &amp; SIGIO &amp; SO_NOSPACE(sock_wmalloc() failu</TITLE>
<META NAME="Author" CONTENT="Uncle George (gatgul@voicenet.com)">
<META NAME="Subject" CONTENT="TCP &amp; SIGIO &amp; SO_NOSPACE(sock_wmalloc() failure)">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>TCP &amp; SIGIO &amp; SO_NOSPACE(sock_wmalloc() failure)</H1>
<HR>
<P>
<!-- received="Mon Jan 25 03:25:44 1999 PST" -->
<!-- sent="Sun, 24 Jan 1999 21:08:20 -0500" -->
<!-- name="Uncle George" -->
<!-- email="gatgul@voicenet.com" -->
<!-- subject="TCP &amp; SIGIO &amp; SO_NOSPACE(sock_wmalloc() failure)" -->
<!-- id="36ABD213.FE56A39D@voicenet.com" -->
<!-- inreplyto="m0ztjol-0007U1C@the-village.bc.nu" -->
<STRONG>Uncle George</STRONG> (<A HREF="mailto:gatgul@voicenet.com?subject=Re:%20TCP%20&amp;%20SIGIO%20&amp;%20SO_NOSPACE(sock_wmalloc()%20failure)"><EM>gatgul@voicenet.com</EM></A>)<BR>
<EM>Sun, 24 Jan 1999 21:08:20 -0500</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#1304">[ date ]</A>
<A HREF="index.html#1304">[ thread ]</A>
<A HREF="subject.html#1304">[ subject ]</A>
<A HREF="author.html#1304">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="1303.html">Tom Holroyd: "Re: samba compile problem on axp linux 2.1.130 (PR#11624) (fwd)"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Are u folks aware that you  wont get an EAGAIN/SIGIO sequence if there is no
<BR>
avail socket buffer space ? on an O_NONBLOCK socketed fd, if u writev too
<BR>
many characters ( approx 260k worth), u
<BR>
<P>1) get only a partial write ( ~~60k chars )
<BR>
2) Try to write the other chars on the next writev() gets you an EAGAIN
<BR>
error.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;Bec its NONBLOCKED, we sleep waiting for the SIGIO. ( or do other
<BR>
useless things till we get the SIGIO signal )
<BR>
3) We sleep forever waiting for a sigio that just aint comming.
<BR>
<P><P>It appears that there is code int the linux/net to handle the SO_NOSPACE
<BR>
flag that get sets when the error occures, but apparently just doesn't work
<BR>
the same way when the tcp I/O transmission is complete where i get the
<BR>
expected SIGIO.
<BR>
<P>Is this something simple to fix ( a missing reference to callback3() ), or
<BR>
is this a rewrite?
<BR>
gat
<BR>
This is linux 2.0.33 on alpha ( the last 2.0.xx kern that had an acceptable
<BR>
adaptec controller code! )
<BR>
<P><P><P><P><P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20TCP%20&amp;%20SIGIO%20&amp;%20SO_NOSPACE(sock_wmalloc()%20failure)">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20TCP%20&amp;%20SIGIO%20&amp;%20SO_NOSPACE(sock_wmalloc()%20failure)">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="1303.html">Tom Holroyd: "Re: samba compile problem on axp linux 2.1.130 (PR#11624) (fwd)"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Sun Jan 24 1999 - 20:00:34 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
