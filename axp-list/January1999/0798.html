<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: struct timeval problem</TITLE>
<META NAME="Author" CONTENT="Munagala V. S. Ramanath (ram@netcom.com)">
<META NAME="Subject" CONTENT="struct timeval problem">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>struct timeval problem</H1>
<HR>
<P>
<!-- received="Fri Jan 15 21:01:50 1999 PST" -->
<!-- sent="Fri, 15 Jan 1999 13:00:20 -0800 (PST)" -->
<!-- name="Munagala V. S. Ramanath" -->
<!-- email="ram@netcom.com" -->
<!-- subject="struct timeval problem" -->
<!-- id="199901152100.NAA21342@netcom11.netcom.com" -->
<!-- inreplyto="" -->
<STRONG>Munagala V. S. Ramanath</STRONG> (<A HREF="mailto:ram@netcom.com?subject=Re:%20struct%20timeval%20problem"><EM>ram@netcom.com</EM></A>)<BR>
<EM>Fri, 15 Jan 1999 13:00:20 -0800 (PST)</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#798">[ date ]</A>
<A HREF="index.html#798">[ thread ]</A>
<A HREF="subject.html#798">[ subject ]</A>
<A HREF="author.html#798">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0799.html">Peter Petrakis: "Don't trust rawhide? The get your egcs rpms here..."</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0797.html">Greg Lindahl: "Re: pure poison"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0802.html">Greg Lindahl: "Re: struct timeval problem"</A>
</UL>
<HR>
<!-- body="start" -->
<P>
Hi,
<BR>
<P>Just noticed a discrepancy in RH 5.2 in the way 'struct timeval' is
<BR>
defined in /usr/include/timebits.H:
<BR>
<P>struct timeval 
<BR>
&nbsp;&nbsp;{
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;int tv_sec;                 /* Seconds.  */
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;int tv_usec;                /* Microseconds.  */
<BR>
&nbsp;&nbsp;};
<BR>
<P>This seems incorrect since the man page for gettimeofday says:
<BR>
--------------------
<BR>
gettimeofday  and settimeofday can set the time as well as
<BR>
a timezone.  tv is a  timeval  struct,  as  specified   in
<BR>
/usr/include/sys/time.h:
<BR>
<P>struct timeval {
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;long tv_sec;        /* seconds */
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;long tv_usec;  /* microseconds */
<BR>
};
<BR>
--------------------
<BR>
<P>However, on RH 5.2 x86, the members are 'time_t' rather than 'int'.
<BR>
<P>This means that code that previously did this:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;gettimeofday( &amp;p, &amp;q ) ;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;s = ctime( &amp;p.tv_sec ) ;
<BR>
<P>now needs to do this:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;time_t tmp ;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;gettimeofday( &amp;p, &amp;q ) ;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;tmp = p.tv_sec ;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;s = ctime( &amp;tmp ) ;
<BR>
<P>Does anyone know if this is intentional or a bug ?  Thanks.
<BR>
<P>Ram
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20struct%20timeval%20problem">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20struct%20timeval%20problem">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0799.html">Peter Petrakis: "Don't trust rawhide? The get your egcs rpms here..."</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0797.html">Greg Lindahl: "Re: pure poison"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0802.html">Greg Lindahl: "Re: struct timeval problem"</A>
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Sun Jan 24 1999 - 14:47:50 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
