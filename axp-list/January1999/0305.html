<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: Problem with floating point exceptions</TITLE>
<META NAME="Author" CONTENT="John Connett (jrc@art.co.uk)">
<META NAME="Subject" CONTENT="Re: Problem with floating point exceptions">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Problem with floating point exceptions</H1>
<HR>
<P>
<!-- received="Thu Jan 07 10:20:55 1999 PST" -->
<!-- sent="Thu, 07 Jan 1999 10:19:51 +0000" -->
<!-- name="John Connett" -->
<!-- email="jrc@art.co.uk" -->
<!-- subject="Re: Problem with floating point exceptions" -->
<!-- id="36948A47.5DA8374@art.co.uk" -->
<!-- inreplyto="199901062323.QAA27622@ellpspace.math.ualberta.ca" -->
<STRONG>John Connett</STRONG> (<A HREF="mailto:jrc@art.co.uk?subject=Re:%20Problem%20with%20floating%20point%20exceptions"><EM>jrc@art.co.uk</EM></A>)<BR>
<EM>Thu, 07 Jan 1999 10:19:51 +0000</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#305">[ date ]</A>
<A HREF="index.html#305">[ thread ]</A>
<A HREF="subject.html#305">[ subject ]</A>
<A HREF="author.html#305">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0306.html">Alex de Joode: "Dual Boot (Linux/NT)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0304.html">Tom Holroyd: "Re: ISSUE: 2.2.0pre5 hang on AXP"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0295.html">Adam C. Powell, IV: "Re: Problem with floating point exceptions"</A>
</UL>
<HR>
<!-- body="start" -->
<P>
Michal Jaegermann wrote:
<BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Greg Lindahl wrote:
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; &gt; I get floating
</EM><BR>
<EM>&gt; &gt; &gt; point exceptions in sections of the code which evaluate exp(-x) for large
</EM><BR>
<EM>&gt; &gt; &gt; positive values of x.
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; FAQ. You need to use the -mieee flag in order to use denormalized
</EM><BR>
<EM>&gt; &gt; numbers at all.
</EM><BR>
<EM>&gt; ....
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; Note that -mieee will slow down your code by a factor of 2 or more.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; If you have only underflows and you want them silently converted
</EM><BR>
<EM>&gt; to zero you may install your private &quot;do-nothing&quot; signal handler
</EM><BR>
<EM>&gt; for FPE.  Note that this act the same way for **all** floating point
</EM><BR>
<EM>&gt; exceptions and this may be not what you really want.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;   Michal
</EM><BR>
<P>Another couple of things to be aware of: 
<BR>
<P>1) Even if you install a &quot;do-nothing&quot; signal handler the kernel will
<BR>
still do quite a bit of work when a SIGFPE occurs.  In the Red Hat
<BR>
version of 2.0.36 that includes a printk which writes a message to the
<BR>
console.  Running a simple program which has a tight loop generating
<BR>
SIGFPEs is an easy way to make a denial of service attack!  I have
<BR>
commented out the offending message from my kernel builds.  My opinion
<BR>
is that a detectable error in a user process should definitely not
<BR>
generate a console message.
<BR>
<P>2) Should you be tempted to try to block SIGFPEs using
<BR>
sigprocmask(SIG_BLOCK, ...) you will find that it doesn't work.  All
<BR>
SIGFPEs are forced to raise the signal.  I outlined a fix in a message
<BR>
sent to this list on 12 Nov 1998 and asked for comments (I didn't
<BR>
receive any).
<BR>
<P>I haven't looked at the 2.2.0pre? sources yet to see if these problems
<BR>
are still present.
<BR>
<PRE>
--
John Connett (<A HREF="mailto:jrc@art.co.uk?subject=Re:%20Problem%20with%20floating%20point%20exceptions">jrc@art.co.uk</A>)
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20Problem%20with%20floating%20point%20exceptions">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20Problem%20with%20floating%20point%20exceptions">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0306.html">Alex de Joode: "Dual Boot (Linux/NT)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0304.html">Tom Holroyd: "Re: ISSUE: 2.2.0pre5 hang on AXP"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0295.html">Adam C. Powell, IV: "Re: Problem with floating point exceptions"</A>
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Sun Jan 24 1999 - 14:47:47 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
