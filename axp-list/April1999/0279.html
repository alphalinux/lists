<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: gdb and core files revisited</TITLE>
<META NAME="Author" CONTENT="Jack Wathey (wathey@salk.edu)">
<META NAME="Subject" CONTENT="gdb and core files revisited">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>gdb and core files revisited</H1>
<HR>
<P>
<!-- received="Sat Apr 10 18:08:28 1999 PDT" -->
<!-- sent="Sat, 10 Apr 1999 11:08:10 -0700 (PDT)" -->
<!-- name="Jack Wathey" -->
<!-- email="wathey@salk.edu" -->
<!-- subject="gdb and core files revisited" -->
<!-- id="199904101808.LAA04983@helmholtz.salk.edu" -->
<!-- inreplyto="" -->
<STRONG>Jack Wathey</STRONG> (<A HREF="mailto:wathey@salk.edu?subject=Re:%20gdb%20and%20core%20files%20revisited"><EM>wathey@salk.edu</EM></A>)<BR>
<EM>Sat, 10 Apr 1999 11:08:10 -0700 (PDT)</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#279">[ date ]</A>
<A HREF="index.html#279">[ thread ]</A>
<A HREF="subject.html#279">[ subject ]</A>
<A HREF="author.html#279">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0280.html">Wes Bauske: "Re: gdb and core"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0278.html">Jack Wathey: "Re: XFree on RH5.1"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Dear fellow Alpha-Linux folks,
<BR>
<P>Back in January 1998, when I was using RedHat 4.2, I posted to this
<BR>
list a trivial C program to demonstrate that gdb did not understand
<BR>
an elf core file generated on an Alpha, although it worked fine on
<BR>
a Pentium machine.
<BR>
<P>I had hoped that by now some brilliant and benevolent soul would have
<BR>
fixed this, but after upgrading to RedHat 5.2 and a 2.2 kernel, I find
<BR>
that gdb is still broken in this way.  Yes, I know that gdb works if you
<BR>
run the crashing program from within gdb and wait for it to re-encounter
<BR>
the offending code, and this is how I've managed to survive for the last
<BR>
year.  But I write some fairly substantial stochastic simulations that
<BR>
run for days.  If a program like that crashes because of some insidious
<BR>
bug that chokes on a rare set of circumstances, after running for many
<BR>
hours or even days, then it is a major pain to rerun it for that length
<BR>
of time under gdb just to find out where the crash occurred.
<BR>
<P>Is it really asking too much to have a debugger that can read and
<BR>
understand a core file?
<BR>
<P>I've spent about 3 days digging through the internals of gdb, trying
<BR>
to fix this, but it is just beyond my meager brain.  Has anyone,
<BR>
anywhere (possibly Debian types?), managed to get gdb to work with
<BR>
a core file on an Alpha Linux machine running a 2.2 kernel?  If so,
<BR>
please tell me how.
<BR>
<P>If not, I'd be grateful for suggestions as to who (gdb maintainers,
<BR>
kernel developers, others?) is most likely to be able to fix this
<BR>
problem, so that I can make some kind of official bug report to them.
<BR>
<P>TIA,
<BR>
Jack
<BR>
<P><P>My little test program follows:
<BR>
<P>---------------------- start Makefile ------------------------------
<BR>
CFLAGS = -g
<BR>
crash:
<BR>
------------------------ end Makefile ------------------------------
<BR>
<P>---------------------- start crash.c -------------------------------
<BR>
main() {
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;int i;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;int *p_int = 0;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;i = *p_int;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;return( 0 );
<BR>
}
<BR>
------------------------ end crash.c -------------------------------
<BR>
<P>To run it, create the files Makefile and crash.c by snipping out the
<BR>
text as shown.  Then type &quot;make&quot;, and &quot;crash&quot;.  The program &quot;crash&quot;
<BR>
will do exactly that, dumping a core file in the process. [You may need
<BR>
first to do something like &quot;limit coredumpsize 10m&quot;, if your
<BR>
coredumpsize is limited to 0 by default.]
<BR>
<P>If I do this experiment on my Alpha and then run &quot;gdb crash core&quot;,
<BR>
I get this:
<BR>
<P>GNU gdb 4.17.0.4 with Linux/x86 hardware watchpoint and FPU support
<BR>
Copyright 1998 Free Software Foundation, Inc.
<BR>
GDB is free software, covered by the GNU General Public License, and you are
<BR>
welcome to change it and/or distribute copies of it under certain conditions.
<BR>
Type &quot;show copying&quot; to see the conditions.
<BR>
There is absolutely no warranty for GDB.  Type &quot;show warranty&quot; for details.
<BR>
This GDB was configured as &quot;alpha-redhat-linux&quot;...
<BR>
Core was generated by `crash'.
<BR>
Couldn't fetch registers from core file: File in wrong format
<BR>
Couldn't fetch register set 2 from core file: File in wrong format
<BR>
Reading symbols from /lib/libc.so.6.1...done.
<BR>
Reading symbols from /lib/ld-linux.so.2...done.
<BR>
Couldn't fetch registers from core file: File in wrong format
<BR>
Couldn't fetch register set 2 from core file: File in wrong format
<BR>
#0  0x0 in ?? ()
<BR>
(gdb)
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20gdb%20and%20core%20files%20revisited">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20gdb%20and%20core%20files%20revisited">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0280.html">Wes Bauske: "Re: gdb and core"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0278.html">Jack Wathey: "Re: XFree on RH5.1"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Sat Apr 10 1999 - 12:00:11 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
