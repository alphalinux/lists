<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: Installing</TITLE>
<META NAME="Author" CONTENT="Izaak Bozof (izaak.bozof@lexicon.ins.com)">
<META NAME="Subject" CONTENT="Re: Installing">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Installing</H1>
<HR>
<P>
<!-- received="Sat Apr 03 20:20:18 1999 PST" -->
<!-- sent="Sat, 03 Apr 1999 15:16:42 -0500" -->
<!-- name="Izaak Bozof" -->
<!-- email="izaak.bozof@lexicon.ins.com" -->
<!-- subject="Re: Installing" -->
<!-- id="4.1.19990403151533.009675e0@earthlink.net" -->
<!-- inreplyto="Pine.LNX.3.95.990402194442.10512A-100000@mail.btechnet.com " -->
<STRONG>Izaak Bozof</STRONG> (<A HREF="mailto:izaak.bozof@lexicon.ins.com?subject=Re:%20Installing"><EM>izaak.bozof@lexicon.ins.com</EM></A>)<BR>
<EM>Sat, 03 Apr 1999 15:16:42 -0500</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#92">[ date ]</A>
<A HREF="index.html#92">[ thread ]</A>
<A HREF="subject.html#92">[ subject ]</A>
<A HREF="author.html#92">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0091.html">Dave Gavin: "PCMCIA on a Multia with RH 5.2"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
I think Paul deserves a BIG round of applause for this writeup (if it is
<BR>
original).  
<BR>
<P>Paul, you want to put this in pdf form and publish it to gatekeeper.dec.com?
<BR>
<P>izaak
<BR>
<P>At 07:45 p 4/2/99 , Paul B. Brown wrote:
<BR>
<EM>&gt;To Install RedHat Linux 5.2 on a UDB
</EM><BR>
<EM>&gt;====================================
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;A. PRE-INSTALLATION SETUP
</EM><BR>
<EM>&gt;   ----------------------
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;1.  Get 5 MS-DOS formatted 3.5&quot; (1.44MB) diskettes
</EM><BR>
<EM>&gt;2.  Label diskette #1: UDB/Milo Boot Disk
</EM><BR>
<EM>&gt;3.  Label diskette #2: UDB/Noname Boot Disk
</EM><BR>
<EM>&gt;4.  Label diskette #3: UDB/Noname Root Disk
</EM><BR>
<EM>&gt;5.  Label diskette #4: UDB Firmware Update 4.3.3
</EM><BR>
<EM>&gt;6.  Label diskette #5: UDB Failsafe Loader
</EM><BR>
<EM>&gt;7.  Load the RedHat Linux 5.2 CD-ROM into another Linux box that has a CD
</EM><BR>
<EM>&gt;    Drive.
</EM><BR>
<EM>&gt;8.  mount -r -t iso9660 /dev/cdrom /mnt/cdrom
</EM><BR>
<EM>&gt;9.  Insert diskette #1 into the diskette drive of the other Linux box that
</EM><BR>
<EM>&gt;    the CD is mounted on.
</EM><BR>
<EM>&gt;10. mount -t msdos /dev/fd0 /mnt/floppy
</EM><BR>
<EM>&gt;11. cp /mnt/cdrom/milo/arc/linload.exe /mnt/floppy
</EM><BR>
<EM>&gt;12. cp /mnt/cdrom/milo/noname-udb/milo /mnt/floppy
</EM><BR>
<EM>&gt;13. umount /mnt/floppy
</EM><BR>
<EM>&gt;14. Remove diskette #1 from the drive.
</EM><BR>
<EM>&gt;15. Insert diskette #2 into the same drive.
</EM><BR>
<EM>&gt;16. cd /mnt/cdrom/images
</EM><BR>
<EM>&gt;17. dd if=noname.img of=/dev/fd0 bs=1440k
</EM><BR>
<EM>&gt;18. Remove diskette #2 from the drive.
</EM><BR>
<EM>&gt;19. Insert diskette #3 into the same drive.
</EM><BR>
<EM>&gt;20. dd if=ramdisk.img of=/dev/fd0 bs=1440k
</EM><BR>
<EM>&gt;21. Remove diskette #3 from the drive.
</EM><BR>
<EM>&gt;22. Insert diskette #4 into the same drive.
</EM><BR>
<EM>&gt;23. umount /mnt/cdrom
</EM><BR>
<EM>&gt;24. Remove the RedHat Linux 5.2 CD from the drive.
</EM><BR>
<EM>&gt;25. cd /tmp
</EM><BR>
<EM>&gt;26. mkdir udb
</EM><BR>
<EM>&gt;27. cd udb
</EM><BR>
<EM>&gt;28. Dial into your ISP
</EM><BR>
<EM>&gt;29. ftp ftp.digital.com
</EM><BR>
<EM>&gt;30.     ftp&gt; cd /pub/Digital/Alpha/firmware/interim/multia
</EM><BR>
<EM>&gt;31.     ftp&gt; get readme.txt
</EM><BR>
<EM>&gt;32.     ftp&gt; get udbfs138.img
</EM><BR>
<EM>&gt;33.     ftp&gt; get udbupd38.img
</EM><BR>
<EM>&gt;34.     ftp&gt; quit
</EM><BR>
<EM>&gt;35. Disconnect from the Internet
</EM><BR>
<EM>&gt;36. dd if=udbupd38.img of=/dev/fd0h1440 bs=10240
</EM><BR>
<EM>&gt;37. Remove diskette #4 from the drive.
</EM><BR>
<EM>&gt;38. Insert diskette #5 into the same drive.
</EM><BR>
<EM>&gt;39. dd if=udbfsl38.img of=/dev/fd0h1440 bs=10240
</EM><BR>
<EM>&gt;40. Remove diskette #5 from the drive.
</EM><BR>
<EM>&gt;41. Now read the readme.txt file you just downloaded and skip to section:
</EM><BR>
<EM>&gt;       Firmware Install/Update
</EM><BR>
<EM>&gt;42. Bring up your UDB for the first time and follow the directions in the
</EM><BR>
<EM>&gt;    readme.txt file.
</EM><BR>
<EM>&gt;43. Make sure you are now running version 4.3.3 of the firmware.  That is
</EM><BR>
<EM>&gt;    the latest and greatest.
</EM><BR>
<EM>&gt;44. Turn off your UDB.
</EM><BR>
<EM>&gt;45. Make sure a CD-ROM drive is attached to your UDB
</EM><BR>
<EM>&gt;46. Insert the RedHat Linux 5.2 CD into the CD-ROM drive.
</EM><BR>
<EM>&gt;47. Turn on your UDB and the CD-ROM drive.
</EM><BR>
<EM>&gt;48. You will come to a &quot;Boot Menu&quot;
</EM><BR>
<EM>&gt;49. Select &quot;Supplementary Menu...&quot;
</EM><BR>
<EM>&gt;50. Select &quot;Setup the System...&quot;
</EM><BR>
<EM>&gt;51. Select &quot;Manage Boot Selection Menu...&quot;
</EM><BR>
<EM>&gt;52. Select &quot;Add a Boot Selection...&quot;
</EM><BR>
<EM>&gt;53. Select &quot;Floppy Disk 0&quot; if that option is there.
</EM><BR>
<EM>&gt;    If not there then,
</EM><BR>
<EM>&gt;    53.1. Select &quot;New System Partition&quot;
</EM><BR>
<EM>&gt;    53.2. Select &quot;Floppy Disk&quot;
</EM><BR>
<EM>&gt;    53.3. The drive number to select is: 0
</EM><BR>
<EM>&gt;54. At the prompt: &quot;Enter the OS loader directory and name:&quot;, type:
</EM><BR>
<EM>&gt;    \linload.exe
</EM><BR>
<EM>&gt;55. Respond &quot;yes&quot; to the OS being on the same partition as the OS loader.
</EM><BR>
<EM>&gt;56. Enter &quot;\&quot; as the OS root directory.
</EM><BR>
<EM>&gt;57. Enter &quot;Linux&quot; as the name for the boot partition.
</EM><BR>
<EM>&gt;58. Select &quot;No&quot; when  asked if we want the debugger initialized at boot
</EM><BR>
<EM>&gt;    time.
</EM><BR>
<EM>&gt;59. We should now be back to the &quot;Boot Selection menu&quot;
</EM><BR>
<EM>&gt;60. Select &quot;Change a Boot Selection&quot;
</EM><BR>
<EM>&gt;61. Select &quot;Linux&quot; 
</EM><BR>
<EM>&gt;62. Using the up and down arrow keys to move, RETURN to select, and ESC to
</EM><BR>
<EM>&gt;    leave, make the setting look like:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;    LOADIDENTIFIER=Linux
</EM><BR>
<EM>&gt;    SYSTEMPARTITION=multi(0)disk(0)fdisk(0)
</EM><BR>
<EM>&gt;    OSLOADER=multi(0)disk(0)fdisk(0)\linload.exe
</EM><BR>
<EM>&gt;    OSLOADPARTITION=multi(0)disk(0)fdisk(0)
</EM><BR>
<EM>&gt;    OSLOADFILENAME=\milo
</EM><BR>
<EM>&gt;    OSLOADOPTIONS=
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;63. When finished, press ESC to back out to the &quot;Supplementary Menu&quot;
</EM><BR>
<EM>&gt;64. Save the changes.
</EM><BR>
<EM>&gt;63. Press ESC to back out to the &quot;Boot Menu&quot;
</EM><BR>
<EM>&gt;64. Insert diskette #1 into the UDB's diskette drive.
</EM><BR>
<EM>&gt;65. Select &quot;Boot Linux&quot;
</EM><BR>
<EM>&gt;66. The MILO&gt; prompt will eventually appear.
</EM><BR>
<EM>&gt;67. Remove diskette #1 from the drive.
</EM><BR>
<EM>&gt;68. Insert diskette #2 into the UDB's diskette drive.
</EM><BR>
<EM>&gt;69. At the MILO&gt; prompt, type:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;    boot fd0:vmlinux.gz root=/dev/fd0 load_ramdisk=1 prompt_ramdisk=1
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;70. Press RETURN and the system will begin the boot process.
</EM><BR>
<EM>&gt;71. After a short while, the system will prompt for diskette #3.
</EM><BR>
<EM>&gt;72. Remove diskette #2 from the drive.
</EM><BR>
<EM>&gt;73. Insert diskette #3 into the UDB's diskette drive and press RETURN.
</EM><BR>
<EM>&gt;74. In about a minute you should come up to:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;    &quot;Welcome to RedHat&quot;
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;B. INSTALLATION SETUP:
</EM><BR>
<EM>&gt;   ------------------
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;75. Pull out the RedHat Alpha/Linux 5.2 Users Manual and use it to help
</EM><BR>
<EM>&gt;    you load the system.  The sore spot here is partitioning the drive.
</EM><BR>
<EM>&gt;    If you don't know the number of heads, cylinders, and sectors for your
</EM><BR>
<EM>&gt;    SCSI drive, you will need to figure them out or you will get nowhere.
</EM><BR>
<EM>&gt;    At the end of this document there is a small C program that needs only
</EM><BR>
<EM>&gt;    the number of bytes of the formatted SCSI disk and it will give the
</EM><BR>
<EM>&gt;    user the head/cylinder/sector counts needed.  Once you are past the
</EM><BR>
<EM>&gt;    disk partitioning stage, the rest of the installation is magically
</EM><BR>
<EM>&gt;    simple.  Bear in mind what your intended use is for the machine or,
</EM><BR>
<EM>&gt;    like me, you will load a lot of superfluous rubbish you will never use.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;    I do suggest a disk partitioning of at least the following:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;    Partition   Device    Size in MBs      Filesystem Type       Mount
</EM><BR>
<EM>&gt;    ---------  ---------  -----------  -----------------------  -------
</EM><BR>
<EM>&gt;        1      /dev/sda1  2 MB         DOS 16-bit &lt;32M (id=4)    /dosc
</EM><BR>
<EM>&gt;        2      /dev/sda2  Same as RAM  Linux Swap      (id=82)
</EM><BR>
<EM>&gt;        3      /dev/sda3  &gt; 50 MB      Linux native    (id=83)   /
</EM><BR>
<EM>&gt;        4      /dev/sda4  Remainder    Linux native    (id=83)   /usr
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;    The reason for the first partition is to have linload.exe and milo on
</EM><BR>
<EM>&gt;    it's own partition.  I do this in leau of putting linload.exe and milo
</EM><BR>
<EM>&gt;    into flashROM.  You mess up flashROM, you will have a nice UDB paper
</EM><BR>
<EM>&gt;    weight.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;    NOTE: Do NOT set any partition as bootable.  This is not needed due to
</EM><BR>
<EM>&gt;          the way ARC works with linload.exe and milo.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;76. When the loading is complete and you can login to your new UDB as root.
</EM><BR>
<EM>&gt;77. Insert diskette #1 into the UDB's diskette drive.
</EM><BR>
<EM>&gt;78. dd if=/dev/fd0 of=/dev/sda1 bs=1440k
</EM><BR>
<EM>&gt;    - This copies linload.exe and milo to your 2 MB DOS partition.  It will
</EM><BR>
<EM>&gt;      also format 1,440k worth of the space for you, killing two bird with 
</EM><BR>
<EM>&gt;      one stone.
</EM><BR>
<EM>&gt;79. Remove diskette #1 from the drive.
</EM><BR>
<EM>&gt;80. Store all 5 diskettes in a safe place.
</EM><BR>
<EM>&gt;81. Edit /etc/fstab and insert the following lines at the end of the file:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;    /dev/sda1  /dos         msdos    defaults  1  2
</EM><BR>
<EM>&gt;    /dev/fd0   /mnt/floppy  msdos    noauto    1  2
</EM><BR>
<EM>&gt;    /dev/scd0  /mnt/cdrom   iso9660  noauto    1  2
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;    The file should already contain some if not all of the following:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;    /dev/sda2  swap         swap     defaults  0  0
</EM><BR>
<EM>&gt;    /dev/sda3  /            ext2     defaults  1  1
</EM><BR>
<EM>&gt;    /dev/sda4  /usr         ext2     defaults  1  2
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;82. Save and exit the file, /etc/fstab.
</EM><BR>
<EM>&gt;83. Shutdown the UDB: shutdown -h now
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;C. POST-INSTALLATION SETUP:
</EM><BR>
<EM>&gt;   -----------------------
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;84. Start the UDB.
</EM><BR>
<EM>&gt;85. You will come to a &quot;Boot Menu&quot;
</EM><BR>
<EM>&gt;86. Select &quot;Supplementary Menu...&quot;
</EM><BR>
<EM>&gt;87. Select &quot;Edit Environment Variables...&quot;
</EM><BR>
<EM>&gt;88. Using the up and down arrow keys to move, RETURN to select, and ESC to
</EM><BR>
<EM>&gt;    leave, make the setting look like:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;    CONSOLEIN=multi()key()keyboard()console()
</EM><BR>
<EM>&gt;    CONSOLEOUT=multi()video()monitor()console()
</EM><BR>
<EM>&gt;    FWSEARCHPATH=scsi(0)disk(0)rdisk(0)paritition(1)
</EM><BR>
<EM>&gt;    TIMEZONE=EST5EDT
</EM><BR>
<EM>&gt;    A:=multi(0)disk(0)fdisk(0)
</EM><BR>
<EM>&gt;    FLOPPY=1
</EM><BR>
<EM>&gt;    FLOPPY2=N
</EM><BR>
<EM>&gt;    KEYBOARDTYPE=0
</EM><BR>
<EM>&gt;    AUTOLOAD=YES
</EM><BR>
<EM>&gt;    COUNTDOWN=15
</EM><BR>
<EM>&gt;    LANG_ID=1
</EM><BR>
<EM>&gt;    ENABLEPCIPARITYCHECKING=FALSE
</EM><BR>
<EM>&gt;    LASTFIRMWAREREVISION=4.33
</EM><BR>
<EM>&gt;    DISABLEPCIPARITYCHECKING=FALSE
</EM><BR>
<EM>&gt;    OSLOADFILENAMENONAME.IMG=noname.img
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;    Some of these setting will vary depending on your setup.  TIMEZONE will
</EM><BR>
<EM>&gt;    change for obvious reasons.  You may have a second floppy drive so
</EM><BR>
<EM>&gt;    FLOPPY2 may be set to Y.  I like my COUNTDOWN to AUTOLOAD to be 15
</EM><BR>
<EM>&gt;    seconds.  You may want it set to some other delay or you may just turn
</EM><BR>
<EM>&gt;    AUTOLOAD to NO.  LANG_ID=1 means English.  This may not be good for you
</EM><BR>
<EM>&gt;    so . . . change it.  The last 2 entries, DISABLEPCIPARITYCHECKING and
</EM><BR>
<EM>&gt;    OSLOADFILENAMENONAME.IMG, may not even show up on your list.  If then
</EM><BR>
<EM>&gt;    don't, then don't mess with them.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;89.. When finished, press ESC to back out to the &quot;Supplementary Menu&quot;
</EM><BR>
<EM>&gt;90. Select &quot;Manage Boot Selection menu...&quot;
</EM><BR>
<EM>&gt;91. Select &quot;Change A Boot Selection...&quot;
</EM><BR>
<EM>&gt;92. Select &quot;Linux&quot;
</EM><BR>
<EM>&gt;93. Using the up and down arrow keys to move, RETURN to select, and ESC to
</EM><BR>
<EM>&gt;    leave, make the setting look like:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;    LOADIDENTIFIER=Linux
</EM><BR>
<EM>&gt;    SYSTEMPARTITION=scsi(0)disk(0)rdisk(0)partition(1)
</EM><BR>
<EM>&gt;    OSLOADER=scsi(0)disk(0)rdisk(0)partition(1)\linload.exe
</EM><BR>
<EM>&gt;    OSLOADPARTITION=scsi(0)disk(0)rdisk(0)partition(1)
</EM><BR>
<EM>&gt;    OSLOADFILENAME=\milo
</EM><BR>
<EM>&gt;    OSLOADOPTIONS= boot sda3:vmlinux.gz root /dev/sda3
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;94. When finished, press ESC to back out to the &quot;Boot Selections Menu...&quot;
</EM><BR>
<EM>&gt;95. Select &quot;Verify Boot Selections&quot;
</EM><BR>
<EM>&gt;    - If the screen winks out and back on and does nothing further then
</EM><BR>
<EM>&gt;      your setup has been checked and verified.
</EM><BR>
<EM>&gt;    - If there is a report of errors then go back to the two settings areas
</EM><BR>
<EM>&gt;      and try again until this option only flashes at you signifying all is
</EM><BR>
<EM>&gt;      well.
</EM><BR>
<EM>&gt;96. When the boot selection has been verified successfully, press ESC back
</EM><BR>
<EM>&gt;    to the &quot;Setup Menu&quot;
</EM><BR>
<EM>&gt;97. Select &quot;Supplementary Menu and Save Changes...&quot;
</EM><BR>
<EM>&gt;    - Make sure you save changes only when all is well and don't save
</EM><BR>
<EM>&gt;      changes if things went haywire!
</EM><BR>
<EM>&gt;98. At the Supplementary Menu, Select &quot;Boot Menu...&quot;
</EM><BR>
<EM>&gt;99. If all went well, at the Boot Menu, select &quot;Boot Linux&quot;
</EM><BR>
<EM>&gt;100. And now the fun begins . . . . :-)
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;-- CUT HERE --
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; #include &lt;stdio.h&gt;
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;/**************************************************************************
</EM><BR>
****
<BR>
<EM>&gt; *
</EM><BR>
<EM>&gt; * Source Code: calc_hcs.c
</EM><BR>
<EM>&gt; *
</EM><BR>
<EM>&gt; * compile/link statement: gcc -o calc_hcs calc_hcs.c
</EM><BR>
<EM>&gt; *
</EM><BR>
<EM>&gt; * Description: This program will calculate the heads/cylinders/sectors on
</EM><BR>
<EM>&gt; *              a Linux SCSI drive.  Simply Change the define statement
</EM><BR>
<EM>&gt; *              below, DISK_SIZE, specifying the size, in bytes, of the
</EM><BR>
<EM>&gt; *              formatted SCSI drive, compile it, run it, and your done!
</EM><BR>
<EM>&gt; *              Future version will need to be updated based on the info
</EM><BR>
<EM>&gt; *              given in the SCSI HOWTO and the Large Disks mini-HOWTO.
</EM><BR>
<EM>&gt; *
</EM><BR>
<EM>&gt; * History:
</EM><BR>
<EM>&gt; *
</EM><BR>
<EM>&gt; * Who          Date    Comment
</EM><BR>
<EM>&gt; * -----------  ------  ---------------------------------------------------
</EM><BR>
<EM>&gt; * Paul Brown   970511  Initial version 0.1b
</EM><BR>
<EM>&gt; *
</EM><BR>
<EM>&gt; ***************************************************************************
</EM><BR>
<EM>&gt;***/
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;/*
</EM><BR>
<EM>&gt; * Change this setting when you wish to calculate a new drive.  It should be
</EM><BR>
<EM>&gt; * the size of the formatted drive in bytes.
</EM><BR>
<EM>&gt; */
</EM><BR>
<EM>&gt;#define DISK_SIZE (long) 345090000           /* Maxtor 7345S - 342 MB */
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;/*
</EM><BR>
<EM>&gt; * Standard setting - DO NOT TOUCH
</EM><BR>
<EM>&gt; */
</EM><BR>
<EM>&gt;#define BYTES_PER_SECTOR (long) 512
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;/*
</EM><BR>
<EM>&gt; * These settings are right out of the SCSI HOWTO.  These are the max settings
</EM><BR>
<EM>&gt; * Linux will understand for SCSI drives.  With these settings you cannot have
</EM><BR>
<EM>&gt; * a SCSI drive more than 8 formatted Gigabytes in size.  Bummer!
</EM><BR>
<EM>&gt; */
</EM><BR>
<EM>&gt;#define MAX_HEADS     (long)  256
</EM><BR>
<EM>&gt;#define MAX_CYLINDERS (long) 1024
</EM><BR>
<EM>&gt;#define MAX_SECTORS   (long)   63
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;main() {
</EM><BR>
<EM>&gt;   long disk_size;
</EM><BR>
<EM>&gt;   long cur_guess;
</EM><BR>
<EM>&gt;   long heads;
</EM><BR>
<EM>&gt;   long cylinders;
</EM><BR>
<EM>&gt;   long sectors;
</EM><BR>
<EM>&gt;   long best_heads;
</EM><BR>
<EM>&gt;   long best_cylinders = (long) 0;
</EM><BR>
<EM>&gt;   long best_sectors = (long) 0;
</EM><BR>
<EM>&gt;   long best_guess = (long) 0;
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;   best_guess = disk_size = DISK_SIZE / BYTES_PER_SECTOR;
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;   for (heads = (long) 1; heads &lt;= MAX_HEADS; heads++) {
</EM><BR>
<EM>&gt;      for (cylinders = (long) 1; cylinders &lt;= MAX_CYLINDERS; cylinders++) {
</EM><BR>
<EM>&gt;         for (sectors = (long) 1; sectors &lt;= MAX_SECTORS; sectors++) {
</EM><BR>
<EM>&gt;            cur_guess = disk_size - (heads * cylinders * sectors);
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;            if (cur_guess &lt; (long) 0) break;
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;            if (cur_guess == (long) 0)
</EM><BR>
<EM>&gt;               printf(&quot;DIRECT HIT -&gt; %ld/%ld/%ld (heads/cylinders/sectors)\n&quot;,
</EM><BR>
<EM>&gt;                       heads, cylinders, sectors);
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;            if (cur_guess &lt; best_guess) {
</EM><BR>
<EM>&gt;               best_heads     = heads;
</EM><BR>
<EM>&gt;               best_cylinders = cylinders;
</EM><BR>
<EM>&gt;               best_sectors   = sectors;
</EM><BR>
<EM>&gt;               best_guess     = cur_guess;
</EM><BR>
<EM>&gt;            }
</EM><BR>
<EM>&gt;         }
</EM><BR>
<EM>&gt;      }
</EM><BR>
<EM>&gt;   }
</EM><BR>
<EM>&gt;/*
</EM><BR>
<EM>&gt; * I pick the first direct hit to be the best guess because I have a
</EM><BR>
preference
<BR>
<EM>&gt; * for the lowest number of heads.  Just a quirk of mine . . . . ;-&gt;
</EM><BR>
<EM>&gt; */
</EM><BR>
<EM>&gt;   printf(&quot;BEST GUESS -&gt; %ld/%ld/%ld (heads/cylinders/sectors)\n&quot;,
</EM><BR>
<EM>&gt;           best_heads, best_cylinders, best_sectors);
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;   exit(0);
</EM><BR>
<EM>&gt;}
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;-- CUT HERE --
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;[Paul B. Brown, Copyright 1999]
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;-- 
</EM><BR>
<EM>&gt;To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20Installing">axp-list-request@redhat.com</A> with
</EM><BR>
<EM>&gt;'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20Installing">axp-list@redhat.com</A>
</EM><BR>
<EM>&gt;
</EM><BR>
<P><P>_________________________________________________
<BR>
Izaak Bozof          Pager: mailto:<A HREF="mailto:page.izaak@iname.com?subject=Re:%20Installing">page.izaak@iname.com</A>    
<BR>
International Network Services
<BR>
<A HREF="http://www.ins.com">http://www.ins.com</A>                          
<BR>
_________________________________________________
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20Installing">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20Installing">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0091.html">Dave Gavin: "PCMCIA on a Multia with RH 5.2"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Sat Apr 03 1999 - 13:00:10 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
