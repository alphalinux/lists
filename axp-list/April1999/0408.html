<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: DS20 Assorted Difficulties</TITLE>
<META NAME="Author" CONTENT="Jay.Estabrook@digital.com (Jay.Estabrook@digital.com)">
<META NAME="Subject" CONTENT="Re: DS20 Assorted Difficulties">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: DS20 Assorted Difficulties</H1>
<HR>
<P>
<!-- received="Thu Apr 15 17:05:06 1999 PDT" -->
<!-- sent="Thu, 15 Apr 1999 13:15:03 -0400" -->
<!-- name="Jay.Estabrook@digital.com" -->
<!-- email="Jay.Estabrook@digital.com" -->
<!-- subject="Re: DS20 Assorted Difficulties" -->
<!-- id="199904151715.NAA12481@linux04.hlo.dec.com" -->
<!-- inreplyto="199904151421.KAA11679@adder.cs.Virginia.EDU" -->
<A HREF="mailto:Jay.Estabrook@digital.com?subject=Re:%20DS20%20Assorted%20Difficulties"><EM>Jay.Estabrook@digital.com</EM></A><BR>
<EM>Thu, 15 Apr 1999 13:15:03 -0400</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#408">[ date ]</A>
<A HREF="index.html#408">[ thread ]</A>
<A HREF="subject.html#408">[ subject ]</A>
<A HREF="author.html#408">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0407.html">Oleg Gusev: "SRM and FAT."</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
<EM>&gt;&gt;&gt; Greg Lindahl said:
</EM><BR>
<EM>&gt; &gt; &gt; *  Building a kernel from clean is about 2-3 minutes with -j 8. Much
</EM><BR>
<EM>&gt; &gt; &gt;    more than 8 and gmake looses it, emitting nonsense errors, etc.
</EM><BR>
<EM>&gt; &gt; 
</EM><BR>
<EM>&gt; &gt; I also would like to understand why the 2.2 kernels changed the way parallel
</EM><BR>
<EM>&gt; &gt; makes work, as the 2.0 kernels are very happy with just -j. Anyone know the
</EM><BR>
<EM>&gt; &gt; history behind this?
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Um, is this still broken after your patch? I would think that high
</EM><BR>
<EM>&gt; load would bring out the bug you zapped.
</EM><BR>
<P>No, no, that's not what I meant...
<BR>
<P>The 2.0 kernels did &quot;parallel make&quot; via breadth-then-depth; when dropping
<BR>
into a subdirectory, compile jobs would be spawned for all the files in that
<BR>
directory, and then wait for those to finish before going on to
<BR>
subdirectories or popping back up to do any siblings, etc, etc. So
<BR>
essentially the number of parallel compiles was limited to how many compiles
<BR>
were at a certain directory level, ie drivers/scsi would spawn off compiles
<BR>
for all the drivers configured plus the &quot;generic&quot; SCSI subsystem sources
<BR>
(like scsi.c and hosts.c).  This never got so big to cause problems; I like
<BR>
to run a pair of parallel makes in infinite loops to put a test load on a
<BR>
system.
<BR>
<P>Now, the 2.2 kernels changed to a depth-then-breadth technique (at least
<BR>
that's what it looks like to me), in which all directory levels are
<BR>
activated at the same time (unless limited by a max number of processes to
<BR>
spawn, ie -j 8), with one compile at each level. This results, with just -j
<BR>
and no max limit, in a veritable flood of processes/compiles starting up,
<BR>
and it seems to overwhelm some part of the system.
<BR>
<P>So, I ask again, anyone know why this was done, and does it adversely affect
<BR>
the INTELs as much as it does the ALPHAs, if just done with -j?
<BR>
<P>--Jay++
<BR>
<P>-----------------------------------------------------------------------------
<BR>
&nbsp;&nbsp;American Non Sequitur Society: we don't make sense, but we do like pizza...
<BR>
<P>Jay A Estabrook                            Alpha Motherboards - LINUX Project
<BR>
Compaq Computer Corp.                      (508) 841-3241 or (DTN) 237-3241
<BR>
334 South Street, Shrewsbury, MA 01545     <A HREF="mailto:Jay.Estabrook@digital.com?subject=Re:%20DS20%20Assorted%20Difficulties">Jay.Estabrook@digital.com</A>
<BR>
-----------------------------------------------------------------------------
<BR>
<P><P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20DS20%20Assorted%20Difficulties">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20DS20%20Assorted%20Difficulties">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0407.html">Oleg Gusev: "SRM and FAT."</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Thu Apr 15 1999 - 11:00:07 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
