<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: rtc and smp</TITLE>
<META NAME="Author" CONTENT="Ruediger Oertel (ro@suse.de)">
<META NAME="Subject" CONTENT="Re: rtc and smp">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: rtc and smp</H1>
<HR>
<P>
<!-- received="Wed Sep 29 22:29:27 1999" -->
<!-- isoreceived="19990930052927" -->
<!-- sent="Thu, 30 Sep 1999 00:17:50 +0200 (MEST)" -->
<!-- isosent="19990929221750" -->
<!-- name="Ruediger Oertel" -->
<!-- email="ro@suse.de" -->
<!-- subject="Re: rtc and smp" -->
<!-- id="Pine.LNX.4.10.9909300014430.30121-100000@fatou.suse.de" -->
<!-- inreplyto="Pine.LNX.4.10.9909291750270.4879-100000@talisman.mv.com" -->
<STRONG>Subject: </STRONG>Re: rtc and smp<BR>
<STRONG>From: </STRONG>Ruediger Oertel (<EM>ro@suse.de</EM>)<BR>
<STRONG>Date: </STRONG>Wed Sep 29 1999 - 15:17:50 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#474">[ date ]</A>
<A HREF="index.html#474">[ thread ]</A>
<A HREF="subject.html#474">[ subject ]</A>
<A HREF="author.html#474">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0475.html">Sebastian Moeller: "Re: Jensen boot question/problem"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0473.html">Rich Payne: "rtc and smp"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0473.html">Rich Payne: "rtc and smp"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0473.html">Ruediger Oertel: "Re: rtc and smp"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
On Wed, 29 Sep 1999, Rich Payne wrote:
<BR>
<P><EM>&gt; 
</EM><BR>
<EM>&gt; I've been working with 2.2.13pre14 on an SMP machine and came across
</EM><BR>
<EM>&gt; something rather strange. If I compile the kernel with Enhanced Real Time
</EM><BR>
<EM>&gt; clock support (config_rtc) then it 'seems' like nothing ever gets
</EM><BR>
<EM>&gt; scheduled on the 2nd cpu. I say 'seems' because I'm looking at tools like
</EM><BR>
<EM>&gt; top (which never shows &gt;50% cpu util) and gtop (which never shows work on
</EM><BR>
<EM>&gt; the 2nd cpu). Howver both CPUs are detected at boot and /proc/cpuinfo
</EM><BR>
<EM>&gt; reports 
</EM><BR>
[..]
<BR>
<EM>&gt; So, is this a kernel problem or are the userland tools failing? The only
</EM><BR>
<EM>&gt; other way I could thing of testing this would be to run some sort of
</EM><BR>
<EM>&gt; benchmark, get the time it took to run, then run it twice (both at the
</EM><BR>
<EM>&gt; same time that is) and see if the second time is 2x the original (or greater).
</EM><BR>
<EM>&gt; That should in theory tell me if the 2nd CPU is being used.
</EM><BR>
Yes, that one bit me, when I started on alpha-smp.
<BR>
The timer irq is used for the rtc, but only the normal timer-irq handler
<BR>
updates the data for /proc/stat.
<BR>
But I needed/wanted proc/rtc and since I never needed the irq-features
<BR>
of the rtc-driver I've been running the rtc-light-patches from
<BR>
genie.ucd.ie for more than half a year now without problems
<BR>
<P><EM>&gt; 
</EM><BR>
<EM>&gt; Anybody have any ideas on this? It's seems a little strange, especaially
</EM><BR>
<EM>&gt; when config_rtc says 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; &quot;If you run Linux on a multiprocessor machine and said Y to
</EM><BR>
<EM>&gt; &quot;Symmetric Multi Processing&quot; above, you should say Y here to read
</EM><BR>
<EM>&gt; and set the RTC clock in an SMP compatible fashion.&quot;
</EM><BR>
<P><PRE>
-- 
with kind regards (mit freundlichem Grinsen),
                                     Ruediger Oertel (ro@suse.de)
-----------------------------------------------------------------
Linux 2.2.12.SuSE (root@fatou) (gcc version egcs-2.91.66 ) #1 SMP
       Total of 2 processors activated (800.36 BogoMIPS)
<P>-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0475.html">Sebastian Moeller: "Re: Jensen boot question/problem"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0473.html">Rich Payne: "rtc and smp"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0473.html">Rich Payne: "rtc and smp"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0473.html">Ruediger Oertel: "Re: rtc and smp"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Mon Oct 04 1999 - 12:44:54 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
