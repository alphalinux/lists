<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: tbia() on DEC 3000 question</TITLE>
<META NAME="Author" CONTENT="Craig P Prescott (prescott@phys.ufl.edu)">
<META NAME="Subject" CONTENT="Re: tbia() on DEC 3000 question">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: tbia() on DEC 3000 question</H1>
<HR>
<P>
<!-- received="Mon Aug 16 13:01:09 1999" -->
<!-- isoreceived="19990816200109" -->
<!-- sent="Mon, 16 Aug 1999 06:16:09 -0400" -->
<!-- isosent="19990816101609" -->
<!-- name="Craig P Prescott" -->
<!-- email="prescott@phys.ufl.edu" -->
<!-- subject="Re: tbia() on DEC 3000 question" -->
<!-- id="199908161016.GAA07656@neptune.phys.ufl.edu" -->
<!-- inreplyto="19990816013744.A8840@twiddle.net" -->
<STRONG>Subject: </STRONG>Re: tbia() on DEC 3000 question<BR>
<STRONG>From: </STRONG>Craig P Prescott (<EM>prescott@phys.ufl.edu</EM>)<BR>
<STRONG>Date: </STRONG>Mon Aug 16 1999 - 03:16:09 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#377">[ date ]</A>
<A HREF="index.html#377">[ thread ]</A>
<A HREF="subject.html#377">[ subject ]</A>
<A HREF="author.html#377">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0378.html">Jemiolo, John: "RE: Dead in water on Jensen..."</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0376.html">Dolphin: "nmap again"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0373.html">Richard Henderson: "Re: tbia() on DEC 3000 question"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0391.html">Richard Henderson: "Re: tbia() on DEC 3000 question"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0373.html">Craig P Prescott: "Re: tbia() on DEC 3000 question"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Hi, Richard;
<BR>
<P>Thank you for the response and answers to my questions!  I will study
<BR>
the compiler output. 
<BR>
<P>re: my tbia() trouble...
<BR>
<P><EM>&gt; This doesn't make sense; __r16 is no longer used by the asm,
</EM><BR>
<EM>&gt; so the assignment should be optimized away, so $16 probably
</EM><BR>
<EM>&gt; now contains garbage.
</EM><BR>
<P>Whoops.  The original tbia() generated the line
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lda $16,-2
<BR>
<P>before the call_pal and what I had did not!  So indeed there was stale
<BR>
stuff in $16.  Ok, I am learning.
<BR>
<P>If I actually *use* __r16 : 
<BR>
<P>#define tbia()							\
<BR>
({								\
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;register unsigned long __r16 __asm__(&quot;$16&quot;) = -2;	\
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__asm__ __volatile__(					\
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&quot;call_pal 0x0033&quot;				\
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:						\
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&quot;r&quot; (__r16)					\
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&quot;$1&quot;, &quot;$16&quot;, &quot;$17&quot;, &quot;$22&quot;, &quot;$23&quot;, &quot;$24&quot;, &quot;$25&quot;);\
<BR>
})
<BR>
<P>something which makes more sense comes out:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lda $16,-2
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;call_pal 0x0033
<BR>
<P>and then I am back to the machine check in tbia():
<BR>
<P>?06 DBL MCHK
<BR>
&nbsp;&nbsp;PC= 00000000.00060401 PSL= 00000000.00000007
<BR>
<P>Sigh.
<BR>
<P>Since both tbia()s end up with the identical error, I guess tbia()
<BR>
is not the problem...
<BR>
<P>Thanks again,
<BR>
Craig
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0378.html">Jemiolo, John: "RE: Dead in water on Jensen..."</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0376.html">Dolphin: "nmap again"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0373.html">Richard Henderson: "Re: tbia() on DEC 3000 question"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0391.html">Richard Henderson: "Re: tbia() on DEC 3000 question"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0373.html">Craig P Prescott: "Re: tbia() on DEC 3000 question"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Tue Sep 07 1999 - 16:15:02 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
