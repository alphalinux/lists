<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: dump and restore in RH 6.0</TITLE>
<META NAME="Author" CONTENT="Jeff Johnson (jbj@redhat.com)">
<META NAME="Subject" CONTENT="Re: dump and restore in RH 6.0">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: dump and restore in RH 6.0</H1>
<HR>
<P>
<!-- received="Tue Aug 03 18:04:05 1999" -->
<!-- isoreceived="19990804010405" -->
<!-- sent="Tue, 03 Aug 1999 13:08:53 -0400" -->
<!-- isosent="19990803170853" -->
<!-- name="Jeff Johnson" -->
<!-- email="jbj@redhat.com" -->
<!-- subject="Re: dump and restore in RH 6.0" -->
<!-- id="37A72225.4E8932AC@redhat.com" -->
<!-- inreplyto="19990730095502.B3031@sws6.ctd.ornl.gov" -->
<STRONG>Subject: </STRONG>Re: dump and restore in RH 6.0<BR>
<STRONG>From: </STRONG>Jeff Johnson (<EM>jbj@redhat.com</EM>)<BR>
<STRONG>Date: </STRONG>Tue Aug 03 1999 - 10:08:53 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#19">[ date ]</A>
<A HREF="index.html#19">[ thread ]</A>
<A HREF="subject.html#19">[ subject ]</A>
<A HREF="author.html#19">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0020.html">Dan O'Reilly: "Re: FS: decalpha.com and Dec UDB (Multia)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0018.html">Alexander L. Belikoff: "Re: gcc 2.95"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Jim Simmons wrote:
<BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; I haven't had time to look into it, but I suspect the problem may be related
</EM><BR>
<EM>&gt; to the definition of time_t changing.  I seem to remember seeing things that
</EM><BR>
<EM>&gt; indicated problems with this for other things.  Basically, programs are
</EM><BR>
<EM>&gt; assuming the wrong size for time_t.  time_t is defined to be an unsigned
</EM><BR>
<EM>&gt; long, which on the alpha is 8 bytes.  I'd bet dump/restore are assuming
</EM><BR>
<EM>&gt; something is actually an int (4 bytes) when they shouldn't.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Jim
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; On Mon, Jul 26, 1999 at 06:29:01PM -0400, Alex Vorobiev wrote:
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;  well, i tried using an older version of dump, to no avail.  dump-0.3-17
</EM><BR>
<EM>&gt; &gt;  rpm does not install, apparently 'cause of the c lib incompatability
</EM><BR>
<EM>&gt; &gt;  (a guess).
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;  so, i tried recompiling dump-0.3 from scratch.  i also thought that
</EM><BR>
<EM>&gt; &gt;  e2fsprogs-devel is at fault, since dump/restore need to compile against
</EM><BR>
<EM>&gt; &gt;  it.  so, also rebuilt the older e2fsporgs-devel and here is what i got:
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;  dump version         e2fsprogs version       can read own dumps
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;  0.3-17                       1.12-2                  no
</EM><BR>
<EM>&gt; &gt;  0.3-17                       1.14-4                  no
</EM><BR>
<EM>&gt; &gt;  0.4b4-7                      1.12-2                  no
</EM><BR>
<EM>&gt; &gt;  0.4b4-7                      1.14-4                  no
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;  i am at a loss as to what could be the problem...
</EM><BR>
<EM>&gt; &gt;  the relevant RedHat bugs have been assigned in May, and haven't been
</EM><BR>
<EM>&gt; &gt;  updated since then.  i am guessing they are considered low priority.
</EM><BR>
<EM>&gt; &gt;  in the meantime, dump or restore or both (most likely) are broken on
</EM><BR>
<EM>&gt; &gt;  alpha.
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;  anyone has any ideas?
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;  &gt; same here.  i can dump successfully, but my alpha (alphaserver 1000,
</EM><BR>
<EM>&gt; &gt;  &gt; mikasa redhat 6.0) cannot read it's own tapes - &quot;Tape is not a dump
</EM><BR>
<EM>&gt; &gt;  &gt; tape&quot;.  It also fails to read i386/RH6.0 dump tapes with the same
</EM><BR>
<EM>&gt; &gt;  error
</EM><BR>
<EM>&gt; &gt;  &gt; message.
</EM><BR>
<EM>&gt; &gt;  &gt;
</EM><BR>
<EM>&gt; &gt;  &gt; my i686(PII)RH6.0 restore cannot read tapes made on the alpha
</EM><BR>
<EM>&gt; &gt;  described
</EM><BR>
<EM>&gt; &gt;  &gt; above, again with the same error message.
</EM><BR>
<EM>&gt; &gt;  &gt;
</EM><BR>
<EM>&gt; &gt;  &gt; looks like there is a problem with dump-0.4.x rpm on both alpha and
</EM><BR>
<EM>&gt; &gt;  &gt; sparc.  there are two opened bugs on redhat bugzilla:
</EM><BR>
<EM>&gt; &gt;  &gt;
</EM><BR>
<EM>&gt; &gt;  &gt; 2989  &quot;dump 0f - / | restore rf -&quot; fails
</EM><BR>
<EM>&gt; &gt;  &gt; 3190  RH6.0 fails to restore dumps made with RH5.2's dump
</EM><BR>
<EM>&gt; &gt;  &gt;
</EM><BR>
<EM>&gt; &gt;  &gt; that are being worked on, from what i can tell.  also, from one of the
</EM><BR>
<EM>&gt; &gt;  &gt; above bugs it follows that you can downgrade to dump-0.3.x, and that
</EM><BR>
<EM>&gt; &gt;  &gt; should work
</EM><BR>
<EM>&gt; &gt;  &gt;
</EM><BR>
<EM>&gt; &gt;  &gt; In article &lt;7mkv6b$c62$1@netnews.upenn.edu&gt;,
</EM><BR>
<EM>&gt; &gt;  &gt;   sluskyb@force.stwing.upenn.edu (Ben Slusky) wrote:
</EM><BR>
<EM>&gt; &gt;  &gt; &gt; Am I the only one having problems with dump and restore? Whenever
</EM><BR>
<EM>&gt; &gt;  &gt; &gt; I try to restore from a dump (even when the dump was to a file on
</EM><BR>
<EM>&gt; &gt;  &gt; disk)
</EM><BR>
<EM>&gt; &gt;  &gt; &gt; restore tells me 'Tape is not a dump tape'.
</EM><BR>
<EM>&gt; &gt;  &gt; &gt;
</EM><BR>
<EM>&gt; &gt;  &gt; &gt; I tried doing dumps to files on my Alpha and a friend's Pentium
</EM><BR>
<EM>&gt; &gt;  &gt; &gt; (both RH 6.0). Neither could restore the other's dumps, however, the
</EM><BR>
<EM>&gt; &gt;  &gt; &gt; Pentium could restore its own dumps. So I'm inclined to think that
</EM><BR>
<EM>&gt; &gt;  &gt; &gt; there's something seriously wrong with both /sbin/dump and
</EM><BR>
<EM>&gt; &gt;  &gt; /sbin/restore
</EM><BR>
<EM>&gt; &gt;  &gt; &gt; on my Alpha.
</EM><BR>
<EM>&gt; &gt;  &gt; &gt;
</EM><BR>
<EM>&gt; &gt;  &gt; &gt; Is it just my Alpha, or everybody's Alpha?
</EM><BR>
<EM>&gt; &gt;  &gt; &gt;
</EM><BR>
<EM>&gt; &gt;  &gt; &gt; BTW, 2.2.4-ac1
</EM><BR>
<EM>&gt; &gt;  &gt; &gt;
</EM><BR>
<P>I believe the worst problems have been fixed in dump-0.4b4-9
<BR>
available in Raw Hide (next release if not there already).
<BR>
At least one gentleman reports success at dumping and restoring
<BR>
on an alpha. He also said that he could restore an i386 dump
<BR>
on an alpha.
<BR>
<P>There will probably be an errata as soon as I can figger
<BR>
out what's going on with multi-volume dump/restore.
<BR>
<P>If you do try dump-0.4b4-9, please report any bugs/problems
<BR>
(or even successes) at <A HREF="http://developer.redhat.com/bugzilla">http://developer.redhat.com/bugzilla</A>
<BR>
so that the problems can be fixed.
<BR>
<P>73 de Jeff
<BR>
<P><PRE>
-- 
Jeff Johnson	ARS N3NPQ
jbj@redhat.com (jbj@jbj.org)
Chapel Hill, NC
<P>-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0020.html">Dan O'Reilly: "Re: FS: decalpha.com and Dec UDB (Multia)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0018.html">Alexander L. Belikoff: "Re: gcc 2.95"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Tue Sep 07 1999 - 16:14:58 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
