<!-- received="Sat Jan 10 15:40:07 1998 " -->
<!-- sent="Sat, 10 Jan 1998 15:45:37 -0500" -->
<!-- name="Dan Weeks" -->
<!-- email="danimal@blueskystudios.com" -->
<!-- subject="dlopen() bug on Linux/Alpha ( Was: Unidentified subject!)" -->
<!-- id="199801102045.PAA26203@harrison.blueskyprod.com" -->
<!-- inreplyto=" the subject.  Do not send it to axp-list@redhat.com
" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>dlopen() bug on Linux/Alpha ( Was: Unidentified subject!)</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>dlopen() bug on Linux/Alpha ( Was: Unidentified subject!)</h2>

<b>Dan Weeks</b> (<a href="mailto:danimal@blueskystudios.com"><i>danimal@blueskystudios.com</i></a>)<br>
<i>Sat, 10 Jan 1998 15:45:37 -0500</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#229">[ date ]</a><a href="index.html#229">[ thread ]</a><a href="subject.html#229">[ subject ]</a><a href="author.html#229">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0230.html">Stefan Traby: "Re: xanim, radius cinepak codec "problem""</a>
<li> <b>Previous message:</b> <a href="0228.html">Jeff Nguyen: "Re: g77 (again)"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0231.html">Stefan Traby: "Re: dlopen() bug on Linux/Alpha ( Was: Unidentified subject!)"</a>
<li> <b>Maybe reply:</b> <a href="0231.html">Stefan Traby: "Re: dlopen() bug on Linux/Alpha ( Was: Unidentified subject!)"</a>
<li> <b>Maybe reply:</b> <a href="0240.html">Richard Hadsell: "Re: dlopen() bug on Linux/Alpha ( Was: Unidentified subject!)"</a>
<!-- reply="end" -->
</ul>
<!-- body="start" -->
Let me make a correction to this.  When the dlopen call is used it<br>
does _not_ kill the executable, it only returns a null file handle.<br>
When we use the exact same code on an SGI the shared library is opened <br>
and everything works fine.<br>
<p>
-danimal<br>
<p>
Dan Weeks writes:<br>
<i> &gt; Hello:</i><br>
<i> &gt; </i><br>
<i> &gt; 	I am using Red Hat 5.0 on a 433 MHz Carrera computer running at</i><br>
<i> &gt; kernel level 2.0.32.  Currently I have the latest glibc (2.0.5c build</i><br>
<i> &gt; 13) rpm from Red Hat.  I have also built a new set of the glibc</i><br>
<i> &gt; libraries using these sources.  The only compiler that I have used for</i><br>
<i> &gt; both building the libraries and our code is egcs-1.0.1.</i><br>
<i> &gt; </i><br>
<i> &gt; 	The problem that we are running into is that when we attempt to</i><br>
<i> &gt; open a shared library (*.so) that we have compiled the dlopen() call</i><br>
<i> &gt; fails.  These shared libraries are dynamic procedures for a larger</i><br>
<i> &gt; program that we write in-house.  During the linking phase for the shared</i><br>
<i> &gt; library we use the options -shared and -ignore_unresolved so that any</i><br>
<i> &gt; symbols that are in the larger program will be passed over and an .so</i><br>
<i> &gt; will be produced (I'm not sure that -ignore_unresolved is supported on </i><br>
<i> &gt; Linux, here is its entry in the SGI man page:</i><br>
<i> &gt; </i><br>
<i> &gt;     -ignore_unresolved</i><br>
<i> &gt;           This option causes an executable or DSO to be produced and ld to</i><br>
<i> &gt;           exit with zero status even if there are unresolved symbols;</i><br>
<i> &gt;           resolution of these symbols will be completed by rld . If linking</i><br>
<i> &gt;           -call_shared, a list of the unresolved symbols will be output (as it</i><br>
<i> &gt;           always is for -call_shared).  If linking -shared, no such list will</i><br>
<i> &gt;           be output.  If linking -non_shared, this option is ignored (and</i><br>
<i> &gt;           -no_unresolved is used, as it always is for -non_shared).  This</i><br>
<i> &gt;           option is the default for -shared linking, but not for -call_shared</i><br>
<i> &gt;           or -non_shared.</i><br>
<i> &gt; </i><br>
<i> &gt; ).</i><br>
<i> &gt; </i><br>
<i> &gt; </i><br>
<i> &gt; I looked at the GNATS system at GNU but the only dlopen reference I</i><br>
<i> &gt; found was at</i><br>
<i> &gt; <a href="http://www-gnats.gnu.org:8080/cgi-bin/wwwgnats.pl/full/387">http://www-gnats.gnu.org:8080/cgi-bin/wwwgnats.pl/full/387</a> .  This</i><br>
<i> &gt; seems to be like the problem we are having, but I can't tell exactly.</i><br>
<i> &gt; I guess that what could be happening is that the shared library is</i><br>
<i> &gt; loaded, can't find symbols in the main program and dies, killing the</i><br>
<i> &gt; main process.</i><br>
<i> &gt; </i><br>
<i> &gt; I noticed that a glibc-2.0.6 was available on prep.ai.mit.edu but it</i><br>
<i> &gt; looks to not have a fix for dlopen in it.</i><br>
<i> &gt; </i><br>
<i> &gt; If anyone has any insight into this bug i would appreciate some</i><br>
<i> &gt; feedback.  Also, if a bug report at GNU is needed I will gladly submit </i><br>
<i> &gt; one.</i><br>
<i> &gt; </i><br>
<pre>
-- 
Dan Weeks &lt;<a href="mailto:danimal@blueskystudios.com">danimal@blueskystudios.com</a>&gt;
Blue Sky|VIFX <a href="http://www.blueskystudios.com/">http://www.blueskystudios.com/</a> http://www.vifx.com/
Harrison, New York 914/381.8400 - Los Angeles, California 310/822.8872
"Good, Bad, I'm the guy with the gun." - Ash
<p>
<pre>
-- 
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0230.html">Stefan Traby: "Re: xanim, radius cinepak codec "problem""</a>
<li> <b>Previous message:</b> <a href="0228.html">Jeff Nguyen: "Re: g77 (again)"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0231.html">Stefan Traby: "Re: dlopen() bug on Linux/Alpha ( Was: Unidentified subject!)"</a>
<li> <b>Maybe reply:</b> <a href="0231.html">Stefan Traby: "Re: dlopen() bug on Linux/Alpha ( Was: Unidentified subject!)"</a>
<li> <b>Maybe reply:</b> <a href="0240.html">Richard Hadsell: "Re: dlopen() bug on Linux/Alpha ( Was: Unidentified subject!)"</a>
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
