<!-- received="Sun Jan 18 16:43:12 1998 " -->
<!-- sent="Sun, 18 Jan 1998 22:32:49 +0100 (MET)" -->
<!-- name="Maciej W. Rozycki" -->
<!-- email="macro@ds2.pg.gda.pl" -->
<!-- subject="SRM console problem (kernel)" -->
<!-- id="199801180432.XAA10441@alpha1.estabrook.org" -->
<!-- inreplyto="ео	@ео	@request@redhat.com with
(" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>SRM console problem (kernel)</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>SRM console problem (kernel)</h2>

<b>Maciej W. Rozycki</b> (<a href="mailto:macro@ds2.pg.gda.pl"><i>macro@ds2.pg.gda.pl</i></a>)<br>
<i>Sun, 18 Jan 1998 22:32:49 +0100 (MET)</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#562">[ date ]</a><a href="index.html#562">[ thread ]</a><a href="subject.html#562">[ subject ]</a><a href="author.html#562">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0563.html">Hugo van der Kooij: "Re: EM86 kernel patch?"</a>
<li> <b>Previous message:</b> <a href="0561.html">Alessandro Mirone: "Re: EM86 kernel patch?"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0570.html">Andrew Whitcroft: "Re: SRM console problem (kernel)"</a>
<li> <b>Maybe reply:</b> <a href="0570.html">Andrew Whitcroft: "Re: SRM console problem (kernel)"</a>
<!-- reply="end" -->
</ul>
<!-- body="start" -->
Hi,<br>
<p>
 I don't know if anyone else experiences the following SRM console<br>
behaviour.<br>
<p>
 After shutting down the machine and switching to the console prompt, some<br>
commands work and some (particularly `boot' and `sh dev') do not,<br>
generating an exception instead and making the machine reboot, after quite<br>
an amount of register dumps. This happens with both 2.0.x and 2.1.x<br>
kernels.  With the release of 2.1.79, the `halt' and `reboot' procedures<br>
are finally implemented as they should be.  But now, both operations cause<br>
an exception and then a reboot (no possibility to get the console propmt<br>
without rebooting).<br>
<p>
 Here is an example log of events happening when a `reboot' is issued for<br>
Linux 2.1.79 (edited at "[...]" for briefness): <br>
<p>
<p>
halted CPU 0<br>
<p>
halt code = 5<br>
HALT instruction executed<br>
PC = fffffc0000312218<br>
<p>
CPU 0 booting<br>
<p>
<p>
exception context saved starting at 00116ED0<br>
<p>
GPRs:<br>
  0: 00000000 00052588  16: 00000000 00000001<br>
  1: 00000000 000F5A70  17: 00000000 00000000<br>
  2: 00000000 000D0B20  18: 00000000 00000000<br>
  3: 00000000 00000066  19: 00000000 00000014<br>
  4: 00000000 000BD258  20: 00000000 001190BE<br>
  5: 00000000 00006048  21: 00000000 6D8D00B4<br>
  6: 00000000 00000001  22: 00000000 000BCFB8<br>
  7: 00000000 000BCFB8  23: 00000000 0000001F<br>
  8: 00000000 00000000  24: 00008F00 00000000<br>
  9: 00000000 00000000  25: 00000000 00000001<br>
 10: 00000000 00000000  26: 00000000 000F4CA4<br>
 11: 00000000 00000000  27: 00000000 000F5A10<br>
 12: 00000000 00000000  28: 00000000 00000000<br>
 13: 00000000 00000000  29: 00000000 00117010<br>
 14: 00000000 00000000  30: 00000000 00117010<br>
 15: 00000000 00000000<br>
<p>
dump of active call frames:<br>
<p>
PC  =  000F4CA4<br>
PD  =  000D0B20<br>
FP  =  00117010<br>
SP  =  00116ED0<br>
<p>
R2 R3 R4 R5 R6 R7 R8 R9 R29 saved starting at 00117168<br>
<p>
R2  =  000F55C0<br>
R3  =  000229B0<br>
R4  =  00000048<br>
R5  =  0000001F<br>
R6  =  000BCFB8<br>
R7  =  00000000<br>
R8  =  00000000<br>
R9  =  00000000<br>
R29 =  00117300<br>
<p>
PC  =  000F5688<br>
PD  =  000D5F38<br>
FP  =  00117300<br>
SP  =  00117080<br>
<p>
R2 R29 saved starting at 00117308<br>
<p>
R2  =  000E0410<br>
R29 =  00117320<br>
<p>
PC  =  000A00FC<br>
PD  =  000E0410<br>
FP  =  00117320<br>
SP  =  001170A0<br>
<p>
R2 R3 R4 R5 R6 R29 saved starting at 00117328<br>
<p>
R2  =  000E04D0<br>
R3  =  0001DE80<br>
R4  =  00109820<br>
R5  =  0010A780<br>
R6  =  00000005<br>
R29 =  00117360<br>
<p>
PC  =  000A1870<br>
PD  =  000E04D0<br>
FP  =  00117360<br>
SP  =  001170E0<br>
<p>
R2 R3 R4 R29 saved starting at 00117368<br>
<p>
R2  =  000E0598<br>
R3  =  00000003<br>
R4  =  000390A8<br>
R29 =  00117390<br>
<p>
PC  =  000A1354<br>
PD  =  000E0598<br>
FP  =  00117390<br>
SP  =  00117110<br>
<p>
R2 R3 R4 R5 R29 saved starting at 00117398<br>
<p>
R2  =  000CDFC0<br>
R3  =  00000003<br>
R4  =  00108700<br>
R5  =  00108F60<br>
R29 =  001173D0<br>
<p>
PC  =  00044C90<br>
PD  =  000CDFC0<br>
FP  =  001173D0<br>
SP  =  00117150<br>
<p>
R2 R3 R4 R5 R6 R7 R8 R9 R29 saved starting at 001173D8<br>
<p>
R2  =  000D3140<br>
R3  =  00116280<br>
R4  =  00116450<br>
R5  =  00000000<br>
R6  =  00000000<br>
R7  =  00000000<br>
R8  =  00000000<br>
R9  =  00000000<br>
R29 =  00117430<br>
<p>
PC  =  0005F7E0<br>
PD  =  000D3140<br>
FP  =  00117430<br>
SP  =  001171B0<br>
<p>
R2 R3 R4 R29 saved starting at 00117438<br>
<p>
R2  =  00000000<br>
R3  =  00000000<br>
R4  =  00000000<br>
R29 =  00000000<br>
<p>
<p>
Avanti System Machine Check Through Vector 00000660<br>
logout frame address 0x6048 code 0x100000205<br>
<p>
IPRs:<br>
EXC_ADD:000000000006CE86  ICCSR:   000046F800000004  HIER:   0000000000000080<br>
HIRR:   0000000000000400  MM_CSR:  0000000000005010  DC_STAT:0000000000000003<br>
DC_ADDR:00000007FFFFFFFF  BIU_STAT:0000000000002041  BIU_ADD:0000000240002618<br>
FILL_SY:0000000000000000  FILL_ADD:0000000000011250  VA:     00000000000061D0<br>
EXC_SUM:000000000000942E  BC_TAG:  8010280002412450  <br>
  EDSR (Comanche): 6d8da140--&gt; <br>
  DCSR (    Epic): 801c085d--&gt; ,lost,nDEV<br>
  SEAR ( SysAddr): 00149c20<br>
  PEAR ( PciAddr): 02000100<br>
[...]<br>
ff.halt code = 5<br>
HALT instruction executed<br>
PC = f4afc           <br>
fe.fd.fc.fb.fa.f9.f8.breakpoint at PC f4c00 desired, XDELTA not loaded<br>
f7.f6.f5.<br>
ef.df.ee.ed.ec.f4.eb.....ea.e9.e8.e7.e6.e5.<br>
X6.2-165, built on Nov  4 1996 at 10:06:10<br>
<p>
CPU 0 booting<br>
<p>
<p>
Then the boot begins.<br>
<p>
 I can provide the full log and some other (including SRM configuration),<br>
if anyone could help resolving this problem.  I believe this is a result<br>
of some incorrect initialization at the hardware/CPU level.  DGUX performs<br>
properly on this machine with respect tho these issues.<br>
<p>
  Maciej<br>
<p>
<pre>
--
+  Maciej W. Rozycki, Technical University of Gdansk, Poland   +
+--------------------------------------------------------------+
+        e-mail: <a href="mailto:macro@ds2.pg.gda.pl">macro@ds2.pg.gda.pl</a>, PGP key available        +
<p>
<pre>
-- 
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0563.html">Hugo van der Kooij: "Re: EM86 kernel patch?"</a>
<li> <b>Previous message:</b> <a href="0561.html">Alessandro Mirone: "Re: EM86 kernel patch?"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0570.html">Andrew Whitcroft: "Re: SRM console problem (kernel)"</a>
<li> <b>Maybe reply:</b> <a href="0570.html">Andrew Whitcroft: "Re: SRM console problem (kernel)"</a>
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
