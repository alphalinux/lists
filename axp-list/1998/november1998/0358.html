<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Mailbox: Re: Alpha's floating point performance</TITLE>
<META NAME="Author" CONTENT="Mark Probst (schani@unix.cslab.tuwien.ac.at)">
<META NAME="Subject" CONTENT="Re: Alpha's floating point performance">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Alpha's floating point performance</H1>
<HR>
<P>
<!-- received="Thu Nov 19 18:38:09 1998 PST" -->
<!-- sent="Thu, 19 Nov 1998 10:33:02 +0000" -->
<!-- name="Mark Probst" -->
<!-- email="schani@unix.cslab.tuwien.ac.at" -->
<!-- subject="Re: Alpha's floating point performance" -->
<!-- id="19981119103302.C4987@obiwan.unix.cslab.tuwien.ac.at" -->
<!-- inreplyto="Pine.LNX.3.95.981118163616.25933I-100000@norad.dodds.net" -->
<STRONG>Mark Probst</STRONG> (<A HREF="mailto:schani@unix.cslab.tuwien.ac.at?subject=Re:%20Alpha's%20floating%20point%20performance"><EM>schani@unix.cslab.tuwien.ac.at</EM></A>)<BR>
<EM>Thu, 19 Nov 1998 10:33:02 +0000</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#358">[ date ]</A>
<A HREF="index.html#358">[ thread ]</A>
<A HREF="subject.html#358">[ subject ]</A>
<A HREF="author.html#358">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0359.html">Konrad Podloucky: "Re: Where's smbmount??"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0357.html">Erik Lindahl: "running X with a Diamond fire GL 1000pro"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
On Wed, Nov 18, 1998 at 04:41:40PM -0600, Bibek Sahu wrote:
<BR>
<EM>&gt; 	If you don't activate optimizations, it most certainly does push
</EM><BR>
<EM>&gt; the arguments onto the stack.  And inside the function it pushes all local
</EM><BR>
<EM>&gt; variables onto the stack.  But then, that's _without_ optimizations. ;-) 
</EM><BR>
<P>yes and no. i just tried it out (gcc -S test.c) and was surprised that
<BR>
the arguments are pushed on the stack by the called function, not by
<BR>
the caller. this means that argument passing is done the same way, namely
<BR>
through registers $16-$21, which, by the way, is a must because otherwise
<BR>
you could not link optimized and unoptimized code.
<BR>
<P>this is the source i compiled:
<BR>
<P><PRE>
---
long
c_func (long l)
{
  return l + 1;
}
<PRE>
---
<P>and this is the assembler output without optimizations, annotated by
my humble self:
<P><PRE>
---
        .globl c_func
        .ent c_func
c_func:
c_func..ng:
        lda $30,-32($30)         ; allocate stack frame
        .frame $15,32,$26,0
        stq $26,0($30)           ; push return adress
        stq $15,8($30)           ; push frame pointer
        .mask 0x4008000,-32
        bis $30,$30,$15          ; set frame pointer = stack pointer
        .prologue 0
        stq $16,16($15)          ; push argument on stack
        ldq $2,16($15)           ; load argument from stack
        addq $2,1,$1             ; add one to argument
        bis $1,$1,$0             ; store result in result register
        br $31,$33               ; jump to $33
$33:
        bis $15,$15,$30          ; set stack pointer = frame pointer
        ldq $26,0($30)           ; load return address from stack
        ldq $15,8($30)           ; load frame pointer from stack
        addq $30,32,$30          ; deallocate stack frame
        ret $31,($26),1          ; return from subroutine
        .end c_func
<PRE>
---
<P>this is the optimized version (-O2):
<P><PRE>
---
        .globl c_func
        .ent c_func
c_func:
c_func..ng:
        .frame $30,0,$26,0
        .prologue 0
        addq $16,1,$0            ; set result register = argument + 1
        ret $31,($26),1          ; return from subroutine
        .end c_func
--- 
<P>bye
schani
<P><PRE>
-- 
Mark Probst
Student, Programmer
<A HREF="http://www.unix.cslab.tuwien.ac.at/~schani/">http://www.unix.cslab.tuwien.ac.at/~schani/</A>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20Alpha's%20floating%20point%20performance">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20Alpha's%20floating%20point%20performance">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0359.html">Konrad Podloucky: "Re: Where's smbmount??"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0357.html">Erik Lindahl: "running X with a Diamond fire GL 1000pro"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Thu Nov 19 1998 - 15:20:46 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
