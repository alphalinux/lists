<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Mailbox: Re: IDE DMA driver for 164SX</TITLE>
<META NAME="Author" CONTENT="krebs@kar.dec.com (krebs@kar.dec.com)">
<META NAME="Subject" CONTENT="Re: IDE DMA driver for 164SX">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: IDE DMA driver for 164SX</H1>
<HR>
<P>
<!-- received="Fri Nov 13 08:15:43 1998 PST" -->
<!-- sent="Fri, 13 Nov 98 09:17:21 +0100" -->
<!-- name="krebs@kar.dec.com" -->
<!-- email="krebs@kar.dec.com" -->
<!-- subject="Re: IDE DMA driver for 164SX" -->
<!-- id="9811130817.AA25642@whopper.kar.dec.com" -->
<!-- inreplyto="Pine.LNX.3.96.981112161737.1136A-100000@grndhg.res.cmu.edu" -->
<A HREF="mailto:krebs@kar.dec.com?subject=Re:%20IDE%20DMA%20driver%20for%20164SX"><EM>krebs@kar.dec.com</EM></A><BR>
<EM>Fri, 13 Nov 98 09:17:21 +0100</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#8">[ date ]</A>
<A HREF="index.html#8">[ thread ]</A>
<A HREF="subject.html#8">[ subject ]</A>
<A HREF="author.html#8">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0009.html">Bob Taylor: "Buggy egcs-1.0.2-8 (Red Hat 5.1)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0007.html">Gerhard Schneider: "Re: Alpha performance/cost numbers?"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
<EM>&gt; Hmm.  I'm not sure I applied/configured the kernel patch correctly.  When
</EM><BR>
<EM>&gt; I run hdparm -Tt, I get:
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;  Timing buffer-cache reads:   32 MB in  0.36 seconds =89.58 MB/sec
</EM><BR>
<EM>&gt;  Timing buffered disk reads:  16 MB in  4.35 seconds = 3.67 MB/sec
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; And I got similiar numbers before I applied the patch (with kernel
</EM><BR>
<EM>&gt; 2.1.124).  Anyone have any idea what I'm doing wrong?
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; If it helps, here are a few lines of output from dmesg:
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;  CY82C693: IDE controller on PCI bus 00 dev 41
</EM><BR>
<EM>&gt;  CY82C693: not 100% native mode: will probe irqs later
</EM><BR>
<EM>&gt;      ide0: BM-DMA at 0x1000-0x1007, BIOS settings: hda:DMA, hdb:pio
</EM><BR>
<EM>&gt;      ide1: BM-DMA at 0x1008-0x100f, BIOS settings: hdc:DMA, hdd:pio
</EM><BR>
<EM>&gt;  hda: ST36451A, ATA DISK drive
</EM><BR>
<EM>&gt;  hdc: TOSHIBA CD-ROM XM-6102B, ATAPI CDROM drive
</EM><BR>
<EM>&gt;  ide2: ports already in use, skipping probe
</EM><BR>
<EM>&gt;  ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
</EM><BR>
<EM>&gt;  ide1 at 0x170-0x177,0x376 on irq 15
</EM><BR>
<EM>&gt;  hda: ST36451A, 6149MB w/448kB Cache, CHS=13328/15/63
</EM><BR>
<EM>&gt; 
</EM><BR>
<P>from what i see, it looks like the driver is working fine, and the results
<BR>
don't seem so bad, but was DMA enabled or not ?
<BR>
<P>cause without the patch installed, i never got DMA performances above 1.5 MB/s,
<BR>
so maybe you can try it again with the patch installed and without - and make
<BR>
sure DMA is enabled (or simply test both DMA and PIO).
<BR>
<P>by the way, I never used the patch on a kernel prior to 2.1.126 and at least
<BR>
with 2.1.126 and 2.1.127 it seems to work fine.
<BR>
<P>one other think how fast is your disk (do you have other results) and what 
<BR>
kinds of DMA does it support?
<BR>
<P>Andreas
<BR>
<P>&nbsp;
<BR>
<PRE>
-- 
_____________________________________________________________________________
<P>                               Andreas S. Krebs
<P>  Email mailto:<A HREF="mailto:krebs@kar.dec.com?subject=Re:%20IDE%20DMA%20driver%20for%20164SX">krebs@kar.dec.com</A>
_____________________________________________________________________________
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20IDE%20DMA%20driver%20for%20164SX">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20IDE%20DMA%20driver%20for%20164SX">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0009.html">Bob Taylor: "Buggy egcs-1.0.2-8 (Red Hat 5.1)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0007.html">Gerhard Schneider: "Re: Alpha performance/cost numbers?"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Tue Nov 17 1998 - 16:23:38 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
