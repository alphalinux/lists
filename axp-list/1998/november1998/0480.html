<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Mailbox: aboot question for the gurus</TITLE>
<META NAME="Author" CONTENT="Mike Larkin (brapp@jps.net)">
<META NAME="Subject" CONTENT="aboot question for the gurus">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>aboot question for the gurus</H1>
<HR>
<P>
<!-- received="Mon Nov 23 11:56:28 1998 PST" -->
<!-- sent="Mon, 23 Nov 1998 03:15:13 -0800" -->
<!-- name="Mike Larkin" -->
<!-- email="brapp@jps.net" -->
<!-- subject="aboot question for the gurus" -->
<!-- id="001f01be16d2$8b747140$02c809c0@arkham.brapp.com" -->
<!-- inreplyto="" -->
<STRONG>Mike Larkin</STRONG> (<A HREF="mailto:brapp@jps.net?subject=Re:%20aboot%20question%20for%20the%20gurus"><EM>brapp@jps.net</EM></A>)<BR>
<EM>Mon, 23 Nov 1998 03:15:13 -0800</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#480">[ date ]</A>
<A HREF="index.html#480">[ thread ]</A>
<A HREF="subject.html#480">[ subject ]</A>
<A HREF="author.html#480">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0479.html">krebs@kar.dec.com: "ZORAN ZR36120 base frame grabber ?"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Way back when, when I first installed RH 5.1 on my Avanti, I was forced to boot from floppy since the SRM doesn't allow booting from my BusLogic PCI scsi controller (Fast/Wide/Differential). I had no drives to connect to the internal NCR 53c810 bus, so I have been autobooting from diskette for several months now.  This method worked fine, as Linux recognizes the BusLogic controller once booted up.
<BR>
&nbsp;
<BR>
This weekend, I found an el-cheapo 200MB drive at a surplus shop for $5, so I picked it up and installed it just so that I could boot from the HD. I decided to partition the thing with a 30mb &quot;boot&quot; partition, offsetting it about 5-10mb into the drive as the docs said (who cares about waste), and the rest is just set up as an extra swap partition. (My machine hardly ever gets into swap anyway, so I'm not concerned about speed problems on this narrow drive).
<BR>
&nbsp;
<BR>
Here's where I ran into a snag. I remembered that the SRM/aboot expects a BSD-style disklabel, so I enabled BSD disklabel support and UFS support in my current kernel. I partitioned the drive using fdisk and selecting the BSD drivelabel option. Everything went smoothly, I mke2fs'ed the 30MB &quot;boot&quot; partition and all went without problems. Then, I used swriteboot and copied the kernel to the boot partition. No problems. 
<BR>
&nbsp;
<BR>
... But... Booting gives a &quot;UFS mount -- bad magic&quot; message at the aboot stage. Is this to mean that the &quot;boot&quot; partition I created has to be formatted UFS? 
<BR>
&nbsp;
<BR>
I read in the docs that aboot-0.5 (newest version) supports reading the vmlinux.gz file from an ext2 partition. How does one enable this functionality?
<BR>
Otherwise, I'm stuck, as I was unable to find any way to CREATE a UFS filesystem from inside Linux. I even went the extra 9 yards and booted a NetBSD floppy and made a UFS filesystem  on that partition, but was unable to copy anything into it from inside Linux. (bunch of errors when it went to write into it.. Mounted OK, but wouldn't write)
<BR>
&nbsp;
<BR>
I'm back to booting from floppy for now until some kind soul can shed some light on how to set it up.  (PS - I have  the newest aboot from the main site, I believe it's aboot-0.5-7 that I have.) It's not so bad booting from floppy, but it's tremendously slow, taking about 5 minutes to boot. Since Linux 2.1.129 is a little flaky, the machine tends to reboot itself a lot, and I would like faster turnaround time when it does, since it is an ipmasq firewall for my main machines.
<BR>
&nbsp;
<BR>
Thanks in advance to whomever can help.
<BR>
&nbsp;
<BR>
-ml
<BR>
<A HREF="mailto:tinomen@usa.net?subject=Re:%20aboot%20question%20for%20the%20gurus">tinomen@usa.net</A>
<BR>
<A HREF="mailto:brapp@jps.net?subject=Re:%20aboot%20question%20for%20the%20gurus">brapp@jps.net</A>
<BR>
<P><P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0479.html">krebs@kar.dec.com: "ZORAN ZR36120 base frame grabber ?"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Mon Nov 23 1998 - 04:34:14 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
