<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Mailbox: RE: Anyone else have problems with ip_masq and Alpha L</TITLE>
<META NAME="Author" CONTENT="Designer 7 (designer_7@hotmail.com)">
<META NAME="Subject" CONTENT="RE: Anyone else have problems with ip_masq and Alpha Linux kernel 2.0.35??">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>RE: Anyone else have problems with ip_masq and Alpha Linux kernel 2.0.35??</H1>
<HR>
<P>
<!-- received="Fri Nov 20 21:23:54 1998 PST" -->
<!-- sent="Fri, 20 Nov 1998 12:25:21 PST" -->
<!-- name="Designer 7" -->
<!-- email="designer_7@hotmail.com" -->
<!-- subject="RE: Anyone else have problems with ip_masq and Alpha Linux kernel 2.0.35??" -->
<!-- id="19981120202526.23311.qmail@hotmail.com" -->
<!-- inreplyto="Anyone else have problems with ip_masq and Alpha Linux kernel 2.0.35??" -->
<STRONG>Designer 7</STRONG> (<A HREF="mailto:designer_7@hotmail.com?subject=RE:%20Anyone%20else%20have%20problems%20with%20ip_masq%20and%20Alpha%20Linux%20kernel%202.0.35??"><EM>designer_7@hotmail.com</EM></A>)<BR>
<EM>Fri, 20 Nov 1998 12:25:21 PST</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#429">[ date ]</A>
<A HREF="index.html#429">[ thread ]</A>
<A HREF="subject.html#429">[ subject ]</A>
<A HREF="author.html#429">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0430.html">MoT: "Re: running X with a Diamond fire GL 1000pro"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0428.html">Chris Price: "Re: Dual CPU price/performancem"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0427.html">Chris Albertson: "Re: Dual CPU price/performancem"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0434.html">Bob Fahey: "RE: Anyone else have problems with ip_masq and Alpha Linux kernel 2.0.35??"</A>
</UL>
<HR>
<!-- body="start" -->
<P>
Hmmm,
<BR>
<P>This makes me wonder... if ipfwadm worked fine in RH5.0 and not in RH5.1 
<BR>
and RH5.2 (as stated in another response to my post) and the problem was 
<BR>
the u_int32_t type.... Does this mean that RedHat does everything from 
<BR>
scratch when they put together these distributions? I mean, if it was 
<BR>
fixed/working in 5.0 and you patched/modified the code base from 
<BR>
there.... you wouldn't have these problems... or was there enough 
<BR>
changes in the code that justified doing everything from the ground up?
<BR>
<P>The fact that RH5.2/Alpha didn't work out of the box (ramdisk.img and 
<BR>
miata milo problems + other minor things) and that it seems like some of 
<BR>
the code was never tested... worries me. I love what Redhat has done for 
<BR>
the linux community.... but I wish they would do a bit more thorough 
<BR>
testing.... I hope going commercial and the market place pressures don't 
<BR>
force them into releasing broken releases. That would be sad... I know 
<BR>
it's not an easy job to maintain distributions of a OS that is 
<BR>
cross-platform and constantly changing.... 
<BR>
<P>I was going to buy the RH5.2/Alpha CD... just to support RedHat... but 
<BR>
now that I know it'll be broken out of the box (at least for my miata 
<BR>
machine), I'll probably burn my own CD after fixing a few things up.... 
<BR>
just for my own archives. But I will probably buy the RH5.2/Intel CDs 
<BR>
anyway... I'm here to support you RedHat people, but please do more 
<BR>
thorough testing before you release. Also, if you don't have all the 
<BR>
platforms (variants of Alphas, or different hardware configs) I think 
<BR>
you should ask for volunteers to test before you package something 
<BR>
together for release. I know I would volunteer to test on my machines if 
<BR>
RedHat asked. Or even better, offer a free CD set to the qualified 
<BR>
volunteers that help you(Redhat) test the software before the release? 
<BR>
How's that for an idea?
<BR>
<P>By the way, to bob who replied below... how did you figure out what was 
<BR>
wrong with the code? Or did you read all of the code and stumbled on 
<BR>
that problem?
<BR>
<P><EM>&gt;&gt; Hello,
</EM><BR>
<EM>&gt;&gt; 
</EM><BR>
<EM>&gt;&gt; I'm getting a 'invalid argument' when I attempt to setup ip_masq. I 
</EM><BR>
read 
<BR>
<EM>&gt;&gt; somewhere that there might be a problem with the new Alpha kernel. 
</EM><BR>
Does 
<BR>
<EM>&gt;&gt; anyone else have more info?? 
</EM><BR>
<EM>&gt;&gt; 
</EM><BR>
<EM>&gt;&gt; I do have the correct options set when i compiled my kernel. But 
</EM><BR>
after a 
<BR>
<EM>&gt;&gt; reboot and trying the following..
</EM><BR>
<EM>&gt;&gt; 
</EM><BR>
<EM>&gt;&gt; ipfwadm -F -p deny
</EM><BR>
<EM>&gt;&gt; ipfwadm -F -a m -D 192.168.0.0/24 -S 0.0.0.0/0
</EM><BR>
<EM>&gt;&gt; 
</EM><BR>
<EM>&gt;&gt; and then I get the 'invalid argument' error. I've checked with 
</EM><BR>
several 
<BR>
<EM>&gt;&gt; postings that the syntax of the command is correct. 
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;GREAT question.  I spent about the last 3 days on my Alpha trying to
</EM><BR>
<EM>&gt;figure out the exact same problem.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;The problem is that, from what I can tell, one of the includes with
</EM><BR>
<EM>&gt;glibc 2.0.7 is incorrect, since it assumes you're running on a 32-bit
</EM><BR>
<EM>&gt;machine.  This problem still exists even in 2.0.7-29, and needs to be
</EM><BR>
<EM>&gt;fixed in the next release, IMHO.  Comments?
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;I changed /usr/include/netinet/ip_fw.h, and recompiled ipfwadm.  Now
</EM><BR>
<EM>&gt;it works just fine.  The change is in the struct ip_fw -- there are
</EM><BR>
<EM>&gt;2 arguments, fw_pcnt and fw_bcnt that are defined as u_int32_t.  If
</EM><BR>
<EM>&gt;you change these to long, and recompile ipfwadm, it should work fine.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;On the same note, when you set up masquerading, don't forget to change
</EM><BR>
<EM>&gt;/etc/sysconfig/network, setting FORWARD_IPV4 to true.  I didn't find
</EM><BR>
<EM>&gt;a reference to this in the IP-Masquerading HOWTO, but maybe it is
</EM><BR>
<EM>&gt;in some other documentation somewhere....
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;-bob fahey
</EM><BR>
<EM>&gt;(<A HREF="mailto:bob@invengen.com?subject=RE:%20Anyone%20else%20have%20problems%20with%20ip_masq%20and%20Alpha%20Linux%20kernel%202.0.35??">bob@invengen.com</A>)
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;-- 
</EM><BR>
<EM>&gt;To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=RE:%20Anyone%20else%20have%20problems%20with%20ip_masq%20and%20Alpha%20Linux%20kernel%202.0.35??">axp-list-request@redhat.com</A> with
</EM><BR>
<EM>&gt;'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=RE:%20Anyone%20else%20have%20problems%20with%20ip_masq%20and%20Alpha%20Linux%20kernel%202.0.35??">axp-list@redhat.com</A>
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;
</EM><BR>
<P><P><P>______________________________________________________
<BR>
Get Your Private, Free Email at <A HREF="http://www.hotmail.com">http://www.hotmail.com</A>
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=RE:%20Anyone%20else%20have%20problems%20with%20ip_masq%20and%20Alpha%20Linux%20kernel%202.0.35??">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=RE:%20Anyone%20else%20have%20problems%20with%20ip_masq%20and%20Alpha%20Linux%20kernel%202.0.35??">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0430.html">MoT: "Re: running X with a Diamond fire GL 1000pro"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0428.html">Chris Price: "Re: Dual CPU price/performancem"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0427.html">Chris Albertson: "Re: Dual CPU price/performancem"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0434.html">Bob Fahey: "RE: Anyone else have problems with ip_masq and Alpha Linux kernel 2.0.35??"</A>
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Fri Nov 20 1998 - 16:51:18 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
