<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: Floating point problems</TITLE>
<META NAME="Author" CONTENT="Richard Henderson (rth@cygnus.com)">
<META NAME="Subject" CONTENT="Re: Floating point problems">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Floating point problems</H1>
<HR>
<P>
<!-- received="Thu Dec 03 01:45:41 1998 PST" -->
<!-- sent="Wed, 2 Dec 1998 16:48:00 -0800" -->
<!-- name="Richard Henderson" -->
<!-- email="rth@cygnus.com" -->
<!-- subject="Re: Floating point problems" -->
<!-- id="19981202164800.G11351@dot.cygnus.com" -->
<!-- inreplyto="3662D099.2CA026FA@frankfurt.netsurf.de" -->
<STRONG>Richard Henderson</STRONG> (<A HREF="mailto:rth@cygnus.com?subject=Re:%20Floating%20point%20problems"><EM>rth@cygnus.com</EM></A>)<BR>
<EM>Wed, 2 Dec 1998 16:48:00 -0800</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#88">[ date ]</A>
<A HREF="index.html#88">[ thread ]</A>
<A HREF="subject.html#88">[ subject ]</A>
<A HREF="author.html#88">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0089.html">Richard Henderson: "Re: Floating point problems"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0087.html">Larry Snyder: "Re: Mozilla - 10/08/98 - anybody get it to build?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0085.html">Larry Snyder: "Mozilla - 10/08/98 - anybody get it to build?"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
On Mon, Nov 30, 1998 at 06:06:33PM +0100, Joachim Wesner wrote:
<BR>
<EM>&gt; Here the DEC documentation is a bit misleading, it seems I was wrong !
</EM><BR>
<EM>&gt; The fp ops have an additional qualifier /U that determines the underflow
</EM><BR>
<EM>&gt; behavior. HOWEVER, at a first look (what I had done till now,, it seems,
</EM><BR>
<EM>&gt; sorry), you only have two possibilities
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; - either you do not use /U, then the documentation says any fp op will
</EM><BR>
<EM>&gt; trap with all the above problems when a denormal is a result of the op
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; - or you use /U, then no trap will happen, but also, the denormal will
</EM><BR>
<EM>&gt; not be replaced by a true zero and the code will trap via 1) the next
</EM><BR>
<EM>&gt; time the result is used in further calculations.
</EM><BR>
<P>You are misreading.  The /u qualifier _enables_ underflow detection
<BR>
for the instruction.  To quote:
<BR>
<P>&nbsp;&nbsp;If an underflow occurs, a true zero is always stored in the result
<BR>
&nbsp;&nbsp;register, even if the proper IEEE result would have been -0.
<BR>
<P>&nbsp;&nbsp;If an underflow occurs and underflow traps are enabled by the 
<BR>
&nbsp;&nbsp;instruction, an underflow arithmetic trap is signaled.
<BR>
<P>So if you don't use /u, you'll never get underflow traps.
<BR>
<P><EM>&gt; I have the impression that might be the function routines that are not
</EM><BR>
<EM>&gt; written to NOT return denormals, for example exp of a large negative
</EM><BR>
<EM>&gt; number could return a denormal. This should be changed.
</EM><BR>
<P>Possibly. 
<BR>
<P>OTOH, I would think only if we can determine that the caller
<BR>
is not prepared for such a value.  I do not know how best to 
<BR>
do this though.
<BR>
<P><P>r~
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20Floating%20point%20problems">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20Floating%20point%20problems">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0089.html">Richard Henderson: "Re: Floating point problems"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0087.html">Larry Snyder: "Re: Mozilla - 10/08/98 - anybody get it to build?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0085.html">Larry Snyder: "Mozilla - 10/08/98 - anybody get it to build?"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Wed Dec 02 1998 - 17:53:08 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
