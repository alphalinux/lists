<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: constantly changing /etc/HOSTNAME file</TITLE>
<META NAME="Author" CONTENT="Tristan Colgate (colgate@spods.dcs.kcl.ac.uk)">
<META NAME="Subject" CONTENT="Re: constantly changing /etc/HOSTNAME file">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: constantly changing /etc/HOSTNAME file</H1>
<HR>
<P>
<!-- received="Sun Dec 27 23:22:19 1998 PST" -->
<!-- sent="Sun, 27 Dec 1998 23:24:54 +0000 (GMT)" -->
<!-- name="Tristan Colgate" -->
<!-- email="colgate@spods.dcs.kcl.ac.uk" -->
<!-- subject="Re: constantly changing /etc/HOSTNAME file" -->
<!-- id="Pine.LNX.3.93.981227232236.1379D-100000@zippy.spods.dcs.kcl.ac.uk" -->
<!-- inreplyto="19981227224122.3399.qmail@hotmail.com" -->
<STRONG>Tristan Colgate</STRONG> (<A HREF="mailto:colgate@spods.dcs.kcl.ac.uk?subject=Re:%20constantly%20changing%20/etc/HOSTNAME%20file"><EM>colgate@spods.dcs.kcl.ac.uk</EM></A>)<BR>
<EM>Sun, 27 Dec 1998 23:24:54 +0000 (GMT)</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#1097">[ date ]</A>
<A HREF="index.html#1097">[ thread ]</A>
<A HREF="subject.html#1097">[ subject ]</A>
<A HREF="author.html#1097">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="1098.html">Paul Tomblin: "Re: constantly changing /etc/HOSTNAME file"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="1096.html">Designer 7: "Re: constantly changing /etc/HOSTNAME file"</A>
<LI><STRONG>Maybe in reply to:</STRONG> <A HREF="1081.html">jmd: "constantly changing /etc/HOSTNAME file"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="1098.html">Paul Tomblin: "Re: constantly changing /etc/HOSTNAME file"</A>
</UL>
<HR>
<!-- body="start" -->
<P>
I know the dhcp client does alter the network file, but if you are just
<BR>
using ppp to connect to an isp dhcpcd doesnt come into play. The IP is
<BR>
negotiaited by the pppd itself.
<BR>
<P>I have to agree with you though, I cant see this being too hazardous.
<BR>
<P>Tristan 'Minty' Colgate
<BR>
<P>================================
<BR>
&lt;<A HREF="mailto:colgate@spods.dcs.kcl.ac.uk?subject=Re:%20constantly%20changing%20/etc/HOSTNAME%20file">colgate@spods.dcs.kcl.ac.uk</A>&gt;
<BR>
<P>PGP 5.0 key available on request
<BR>
================================
<BR>
'We are the music makers, the dreamers of the dream...'
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;-Willy Wonka
<BR>
<P><P>On Sun, 27 Dec 1998, Designer 7 wrote:
<BR>
<P><EM>&gt; Hey,
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Uh... unless I'm totally brain dead right now (too early in the 
</EM><BR>
<EM>&gt; morning)... I'm guessing you're using DHCP on ppp?(My assumption based 
</EM><BR>
<EM>&gt; on the fact that certain fields in 'network' are left empty.) If so, 
</EM><BR>
<EM>&gt; doesn't the DHCP protocol set all those values in 'network' for you? 
</EM><BR>
<EM>&gt; Hence the HOSTNAME changes from DHCP information gotten during logon, 
</EM><BR>
<EM>&gt; and hence, your network scripts find this and sets the HOSTNAME?
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Or how about this,... do a tail -f /etc/HOSTNAME or a watch -n 1 
</EM><BR>
<EM>&gt; /etc/HOSTNAME.... and watch exactly what happens as you logon to your 
</EM><BR>
<EM>&gt; ISP... then you'll know exactly what step of the ISP logon process is 
</EM><BR>
<EM>&gt; changing your HOSTNAME... 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; By the way, what's the big deal? Is this changing HOSTNAME screwing up 
</EM><BR>
<EM>&gt; some application that happens to use it?
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; &gt;  If the sequence of events is as you are describing them, it would 
</EM><BR>
<EM>&gt; appear
</EM><BR>
<EM>&gt; &gt;to be down to you ppp scripts. Are you using the default redhat setup 
</EM><BR>
<EM>&gt; of
</EM><BR>
<EM>&gt; &gt;have you installed anything else?
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;  You could, for instance, try Raines ppp scripts (check freshmeat.net 
</EM><BR>
<EM>&gt; for
</EM><BR>
<EM>&gt; &gt;the homepage). If the same thing still happens then something very odd
</EM><BR>
<EM>&gt; &gt;must be happening.
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;Tristan 'Minty' Colgate
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;================================
</EM><BR>
<EM>&gt; &gt;&lt;<A HREF="mailto:colgate@spods.dcs.kcl.ac.uk?subject=Re:%20constantly%20changing%20/etc/HOSTNAME%20file">colgate@spods.dcs.kcl.ac.uk</A>&gt;
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;PGP 5.0 key available on request
</EM><BR>
<EM>&gt; &gt;================================
</EM><BR>
<EM>&gt; &gt;'We are the music makers, the dreamers of the dream...'
</EM><BR>
<EM>&gt; &gt;    -Willy Wonka
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;On Sun, 27 Dec 1998, jmd wrote:
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;&gt; Michal Jaegermann wrote:
</EM><BR>
<EM>&gt; &gt;&gt; &gt; 
</EM><BR>
<EM>&gt; &gt;&gt; &gt; jmd wrote:
</EM><BR>
<EM>&gt; &gt;&gt; &gt; &gt;
</EM><BR>
<EM>&gt; &gt;&gt; &gt; &gt; Everytime I connect to my ISP something overwrites the 
</EM><BR>
<EM>&gt; /etc/HOSTNAME
</EM><BR>
<EM>&gt; &gt;&gt; &gt; &gt; file so that it reads a given address. (ie 
</EM><BR>
<EM>&gt; &quot;a021.pm3-1.nwk.infinet.com&quot;)
</EM><BR>
<EM>&gt; &gt;&gt; &gt; &gt; This change occurs with every login session as far as I can see, 
</EM><BR>
<EM>&gt; so a
</EM><BR>
<EM>&gt; &gt;&gt; &gt; &gt; revoot will reflect the last dynamic IP assigned.
</EM><BR>
<EM>&gt; &gt;&gt; &gt; 
</EM><BR>
<EM>&gt; &gt;&gt; &gt; Normally (i.e. in a standard startup used by Red Hat) 
</EM><BR>
<EM>&gt; /etc/rc.d/rc.sysinit
</EM><BR>
<EM>&gt; &gt;&gt; &gt; startup script sets hostname, and records the change in 
</EM><BR>
<EM>&gt; /etc/HOSTNAME,
</EM><BR>
<EM>&gt; &gt;&gt; &gt; using values specified in /etc/sysconfig/network file (unless 
</EM><BR>
<EM>&gt; NETWORKING
</EM><BR>
<EM>&gt; &gt;&gt; &gt; is set to &quot;no&quot;).  What actually is in /etc/HOSTNAME is not that 
</EM><BR>
<EM>&gt; important.
</EM><BR>
<EM>&gt; &gt;&gt; &gt; Even if you are using DHCP it is hard to imagine that your ISP is 
</EM><BR>
<EM>&gt; that
</EM><BR>
<EM>&gt; &gt;&gt; &gt; &quot;smart&quot; that it rewrites your sysconfig files. 
</EM><BR>
<EM>&gt; &gt;&gt; 
</EM><BR>
<EM>&gt; &gt;&gt; I don't think the ISP is writing to this file. I think there is
</EM><BR>
<EM>&gt; &gt;&gt; something internally wrong with my set up. 
</EM><BR>
<EM>&gt; &gt;&gt; 
</EM><BR>
<EM>&gt; &gt;&gt; I checked both files you referred to: 
</EM><BR>
<EM>&gt; &gt;&gt; 
</EM><BR>
<EM>&gt; &gt;&gt; /etc/sysconfig/network is:
</EM><BR>
<EM>&gt; &gt;&gt; 
</EM><BR>
<EM>&gt; &gt;&gt; NETWORKING=YES
</EM><BR>
<EM>&gt; &gt;&gt; FORWARD_IPV4=NO
</EM><BR>
<EM>&gt; &gt;&gt; HOSTNAME=localhost.localdomain
</EM><BR>
<EM>&gt; &gt;&gt; GATEWAYDEV=
</EM><BR>
<EM>&gt; &gt;&gt; GATEWAY=
</EM><BR>
<EM>&gt; &gt;&gt; 
</EM><BR>
<EM>&gt; &gt;&gt; /etc/rc.d/rc.sysinit includes the lines:
</EM><BR>
<EM>&gt; &gt;&gt; 
</EM><BR>
<EM>&gt; &gt;&gt; if [ -f /etc/sysconfig/network ]; then
</EM><BR>
<EM>&gt; &gt;&gt; 	. /etc/sysconfig/network
</EM><BR>
<EM>&gt; &gt;&gt; 
</EM><BR>
<EM>&gt; &gt;&gt; else
</EM><BR>
<EM>&gt; &gt;&gt; 	NETWORKING=no
</EM><BR>
<EM>&gt; &gt;&gt; 	HOSTNAME=localhost
</EM><BR>
<EM>&gt; &gt;&gt; 
</EM><BR>
<EM>&gt; &gt;&gt; This is what happens:
</EM><BR>
<EM>&gt; &gt;&gt; I boot clean with &quot;localhost.localdomain&quot; in my /etc/HOSTNAME file.
</EM><BR>
<EM>&gt; &gt;&gt; If I dial in to my ISP this file (etc/HOSTNAME) is changed as soon as 
</EM><BR>
<EM>&gt; I
</EM><BR>
<EM>&gt; &gt;&gt; am logged in the ISP and have been assigned an IP address. (example
</EM><BR>
<EM>&gt; &gt;&gt; a021.pm3-1.nwk.infinet.com)
</EM><BR>
<EM>&gt; &gt;&gt; Taking that example if I open /etc/HOSTNAME after I log in to the ISP
</EM><BR>
<EM>&gt; &gt;&gt; the file will read &quot;a021.pm3-1.nwk.infinet.com&quot; localhost.localdomain
</EM><BR>
<EM>&gt; &gt;&gt; will not be in this file.
</EM><BR>
<EM>&gt; &gt;&gt; 
</EM><BR>
<EM>&gt; &gt;&gt; If I open another terminal with ctl-alt-F2 then the login prompt will
</EM><BR>
<EM>&gt; &gt;&gt; be:
</EM><BR>
<EM>&gt; &gt;&gt; [&gt; &gt;&gt; [jmd@a021 jmd]$
</EM><BR>
<EM>&gt; &gt;&gt; 
</EM><BR>
<EM>&gt; &gt;&gt; I changed the permissions for /etc/HOSTNAME to 444 and it still wrote 
</EM><BR>
<EM>&gt; to
</EM><BR>
<EM>&gt; &gt;&gt; the file.
</EM><BR>
<EM>&gt; &gt;&gt; 
</EM><BR>
<EM>&gt; &gt;&gt; 
</EM><BR>
<EM>&gt; &gt;&gt; &gt;I think that something is missing here from your story.
</EM><BR>
<EM>&gt; &gt;&gt; &gt; 
</EM><BR>
<EM>&gt; &gt;&gt; &gt; BTW - your machine may have different names &quot;internally&quot; and 
</EM><BR>
<EM>&gt; &quot;outside&quot;.
</EM><BR>
<EM>&gt; &gt;&gt; &gt; This is normal.
</EM><BR>
<EM>&gt; &gt;&gt; &gt; 
</EM><BR>
<EM>&gt; &gt;&gt; &gt;   Michal
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; ______________________________________________________
</EM><BR>
<EM>&gt; Get Your Private, Free Email at <A HREF="http://www.hotmail.com">http://www.hotmail.com</A>
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; -- 
</EM><BR>
<EM>&gt; To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20constantly%20changing%20/etc/HOSTNAME%20file">axp-list-request@redhat.com</A> with
</EM><BR>
<EM>&gt; 'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20constantly%20changing%20/etc/HOSTNAME%20file">axp-list@redhat.com</A>
</EM><BR>
<EM>&gt; 
</EM><BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20constantly%20changing%20/etc/HOSTNAME%20file">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20constantly%20changing%20/etc/HOSTNAME%20file">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="1098.html">Paul Tomblin: "Re: constantly changing /etc/HOSTNAME file"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="1096.html">Designer 7: "Re: constantly changing /etc/HOSTNAME file"</A>
<LI><STRONG>Maybe in reply to:</STRONG> <A HREF="1081.html">jmd: "constantly changing /etc/HOSTNAME file"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="1098.html">Paul Tomblin: "Re: constantly changing /etc/HOSTNAME file"</A>
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Sun Dec 27 1998 - 16:00:15 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
