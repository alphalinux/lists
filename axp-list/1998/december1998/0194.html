<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: How do I find/fix unaligned accesses?</TITLE>
<META NAME="Author" CONTENT="Oscar Levi (elf@buici.com)">
<META NAME="Subject" CONTENT="Re: How do I find/fix unaligned accesses?">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: How do I find/fix unaligned accesses?</H1>
<HR>
<P>
<!-- received="Sat Dec 05 00:01:13 1998 PST" -->
<!-- sent="Fri, 4 Dec 1998 13:16:16 -0800" -->
<!-- name="Oscar Levi" -->
<!-- email="elf@buici.com" -->
<!-- subject="Re: How do I find/fix unaligned accesses?" -->
<!-- id="19981204131616.A24274@hazel.buici.com" -->
<!-- inreplyto="yv4lnkng3xw.fsf@tuxedo.applix.com" -->
<STRONG>Oscar Levi</STRONG> (<A HREF="mailto:elf@buici.com?subject=Re:%20How%20do%20I%20find/fix%20unaligned%20accesses?"><EM>elf@buici.com</EM></A>)<BR>
<EM>Fri, 4 Dec 1998 13:16:16 -0800</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#194">[ date ]</A>
<A HREF="index.html#194">[ thread ]</A>
<A HREF="subject.html#194">[ subject ]</A>
<A HREF="author.html#194">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0195.html">nbecker@fred.net: "Re: How do I find/fix unaligned accesses?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0193.html">Greg Johnson: "Re: Kernel 2.1.131 compiles but hangs..."</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0171.html">Tom Holroyd: "RE: Kernel 2.1.131 compiles but hangs..."</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0195.html">nbecker@fred.net: "Re: How do I find/fix unaligned accesses?"</A>
</UL>
<HR>
<!-- body="start" -->
<P>
On Fri, Dec 04, 1998 at 01:25:15PM -0500, Eric Ding wrote:
<BR>
<EM>&gt; Hi all,
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; I've read the FAQ about unaligned accesses on Alpha Linux.  My question is,
</EM><BR>
<EM>&gt; now that I've got a whole log full of errors about unaligned accesses, how
</EM><BR>
<EM>&gt; do I go about tracking down the actual place in the code that's causing the
</EM><BR>
<EM>&gt; problem?
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; I see, for example,
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;     axmain(521): unaligned trap at 0000000120472178: 000000011ffff2f4 2d 2
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; in /var/log/messages.  Now what?  Help me get Applixware for Linux/Alpha
</EM><BR>
<EM>&gt; out the door!  :)
</EM><BR>
<P>What you do is get the source, apply the appropriate patches, build it
<BR>
and use a command like this to find the symbol: 
<BR>
<P>&nbsp;&nbsp;nm program | sort | less
<BR>
<P>Once you have this, you know the name of the errant routine.  Then,
<BR>
you generate an assembly language listing of the file with that
<BR>
routine.
<BR>
<P>&nbsp;&nbsp;gcc ${CFLAGS} -S sourcefile.c
<BR>
<P>And generate an assembler listing file.
<BR>
<P>&nbsp;&nbsp;as -a sourcefile.s &gt; sourcefile.lst
<BR>
<P>Now, you have something.  Find the first address of the routine in the
<BR>
listing, call this value A1.  Take the base address of the symbol from
<BR>
the symbol output of nm, call this value A2, and the faulting address
<BR>
A3.  The address in the listing where the problem occurs is A2 - A3 +
<BR>
A1.  
<BR>
<P>Now, I've done this many times.  For some reason, I'm not getting the
<BR>
exact instruction where the fault occurs.  Last I checked, I was
<BR>
getting the instruction after it.  It is likely that my algorithm is
<BR>
wrong somewhere, but it gets you close.
<BR>
<P>You can also load the program into gdb and use 
<BR>
<P>&nbsp;&nbsp;disass *&lt;fault address&gt;
<BR>
<P>to get an assembly language listing of the problem instruction.
<BR>
<P>Cheers.
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20How%20do%20I%20find/fix%20unaligned%20accesses?">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20How%20do%20I%20find/fix%20unaligned%20accesses?">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0195.html">nbecker@fred.net: "Re: How do I find/fix unaligned accesses?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0193.html">Greg Johnson: "Re: Kernel 2.1.131 compiles but hangs..."</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0171.html">Tom Holroyd: "RE: Kernel 2.1.131 compiles but hangs..."</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0195.html">nbecker@fred.net: "Re: How do I find/fix unaligned accesses?"</A>
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Fri Dec 04 1998 - 21:04:14 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
