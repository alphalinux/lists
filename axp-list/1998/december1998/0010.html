<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: ipfwadm problem</TITLE>
<META NAME="Author" CONTENT="Rick van der Linde (h.r.vanderlinde@student.utwente.nl)">
<META NAME="Subject" CONTENT="Re: ipfwadm problem">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: ipfwadm problem</H1>
<HR>
<P>
<!-- received="Tue Dec 01 11:03:44 1998 PST" -->
<!-- sent="Tue, 1 Dec 1998 11:55:41 +0100" -->
<!-- name="Rick van der Linde" -->
<!-- email="h.r.vanderlinde@student.utwente.nl" -->
<!-- subject="Re: ipfwadm problem" -->
<!-- id="001e01be1d1a$d574a820$0101a8c0@buntium.riant.nl" -->
<!-- inreplyto="ipfwadm problem" -->
<STRONG>Rick van der Linde</STRONG> (<A HREF="mailto:h.r.vanderlinde@student.utwente.nl?subject=Re:%20ipfwadm%20problem"><EM>h.r.vanderlinde@student.utwente.nl</EM></A>)<BR>
<EM>Tue, 1 Dec 1998 11:55:41 +0100</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#10">[ date ]</A>
<A HREF="index.html#10">[ thread ]</A>
<A HREF="subject.html#10">[ subject ]</A>
<A HREF="author.html#10">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0009.html">Ben Kochie: "RE: something got fixed in 2.0.36??"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0003.html">Designer 7: "something got fixed in 2.0.36??"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
<EM>&gt;On Mon, 30 Nov 1998, Rich Payne wrote:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;&gt; Check your .config file after running make xconfig. Many people
</EM><BR>
<EM>&gt;&gt; have told me that make xconfig and make menuconfig will produce
</EM><BR>
<EM>&gt;&gt; 'broken' .config files. Maybe you could try just a regular make
</EM><BR>
<EM>&gt;&gt; config.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;Yes, make menuconfig and xconfig should be removed from the kernel (IMO);
</EM><BR>
<EM>&gt;they are broken and/or unmaintained and will produce bogus .config files.
</EM><BR>
<EM>&gt;I've never been burned with:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;   make config dep clean boot modules{,_install}
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;&gt; Ken Marin wrote:
</EM><BR>
<EM>&gt;&gt; &gt;
</EM><BR>
<EM>&gt;&gt; &gt; &gt;I'm running or trying to run an AS200 4/233 with RH5.1.  Everything is
</EM><BR>
<EM>&gt;&gt; &gt; &gt;working well except when I try to run any ipfwadm command I get this
</EM><BR>
<EM>&gt;&gt; &gt; same
</EM><BR>
<EM>&gt;&gt; &gt; &gt;error.  (new user)
</EM><BR>
<EM>&gt;&gt; &gt; &gt;
</EM><BR>
<EM>&gt;&gt; &gt; &gt;[&gt;&gt; &gt; &gt;[root@home /root]# ipfwadm -F -p deny
</EM><BR>
<EM>&gt;&gt; &gt; &gt;ipfwadm: setsockopt failed: Protocol not available
</EM><BR>
<EM>&gt;&gt; &gt; &gt;[&gt;&gt; &gt; &gt;[root@home /root]#
</EM><BR>
<EM>&gt;&gt; &gt;
</EM><BR>
<EM>&gt;&gt; &gt; I tried the old ipfwadm from 5.0 and the new fixed one.  It still won't
</EM><BR>
<EM>&gt;&gt; &gt; work.  Could it be that  it is not configured in the kernel?  I don't
</EM><BR>
know
<BR>
<EM>&gt;
</EM><BR>
<EM>&gt;This problem is not related to the RedHat-shipped-a-busted-ipfwadm problem;
</EM><BR>
<EM>&gt;in that case, you will get -EINVAL (&quot;Invalid argument&quot;) as a errno for
</EM><BR>
<EM>&gt;setsockopt() because the struct used to pass the ipfwadm command is broken
</EM><BR>
<EM>&gt;(too small) in glibc.  The error you are getting indicates that forwarding
</EM><BR>
<EM>&gt;was not compiled into your kernel.  Make sure you rebuild your kernel with
</EM><BR>
<EM>&gt;IP firewalling and forwarding, and then enable the forwarding by doing an:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;   echo 1 &gt; /proc/sys/net/ipv4/ip_forward
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;To make the change permanent, you edit your /etc/sysconfig/network and
</EM><BR>
<EM>&gt;change the line that says FORWARD_IPV4= to FORWARD_IPV4=yes.
</EM><BR>
<P><P>All right.. This problem will indeed be caused by the make xconfig command.
<BR>
Try to build it with the make config (not menuconfig or xconfig) However
<BR>
theres enough said abou this. After this you still might have had troubles.
<BR>
I
<BR>
compiled forwarding and masquerading into the kernel and tried to use
<BR>
the ipfwadm util comming with RedHat 5.1. This one gave a error. The one I
<BR>
gave some poeple. will work OK.
<BR>
<P>Rick
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20ipfwadm%20problem">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20ipfwadm%20problem">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0009.html">Ben Kochie: "RE: something got fixed in 2.0.36??"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0003.html">Designer 7: "something got fixed in 2.0.36??"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Tue Dec 01 1998 - 03:38:53 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
