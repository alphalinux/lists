<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: problem compiling util-linux-2.9</TITLE>
<META NAME="Author" CONTENT="Maciej W. Rozycki (macro@ds2.pg.gda.pl)">
<META NAME="Subject" CONTENT="Re: problem compiling util-linux-2.9">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: problem compiling util-linux-2.9</H1>
<HR>
<P>
<!-- received="Tue Dec 22 21:26:13 1998 PST" -->
<!-- sent="Tue, 22 Dec 1998 22:24:02 +0100 (MET)" -->
<!-- name="Maciej W. Rozycki" -->
<!-- email="macro@ds2.pg.gda.pl" -->
<!-- subject="Re: problem compiling util-linux-2.9" -->
<!-- id="Pine.GSO.3.96.981222221259.1821C-100000@delta.ds2.pg.gda.pl" -->
<!-- inreplyto="Pine.LNX.3.96.981222184130.3840A-100000@bhalpha1.nibh.go.jp" -->
<STRONG>Maciej W. Rozycki</STRONG> (<A HREF="mailto:macro@ds2.pg.gda.pl?subject=Re:%20problem%20compiling%20util-linux-2.9"><EM>macro@ds2.pg.gda.pl</EM></A>)<BR>
<EM>Tue, 22 Dec 1998 22:24:02 +0100 (MET)</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#998">[ date ]</A>
<A HREF="index.html#998">[ thread ]</A>
<A HREF="subject.html#998">[ subject ]</A>
<A HREF="author.html#998">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0997.html">Maurice Hilarius: "Re: Suggestions for a good graphic card"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
On Tue, 22 Dec 1998, Tom Holroyd wrote:
<BR>
<P><EM>&gt; Don't know if this is an alpha problem or not, but ran into it while
</EM><BR>
<EM>&gt; preparing for 2.1.132 (which requires util-linux-2.9 mount).
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; AlphaPC164LX kernel 2.1.131 egcs-1.1.1
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; In util-linux-2.9/sys-utils:
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; gcc -c -O3 -fomit-frame-pointer -I. -I../lib -Wall -DNCH=0
</EM><BR>
<EM>&gt;  -I/usr/include/slang  -DSBINDIR=\&quot;/sbin\&quot; -DUSRSBINDIR=\&quot;/usr/sbin\&quot; 
</EM><BR>
<EM>&gt;  -DLOGDIR=\&quot;/var/log\&quot; -DVARPATH=\&quot;/var\&quot; hwclock.c -o hwclock.o
</EM><BR>
<EM>&gt; In file included from /usr/include/asm/io.h:6,
</EM><BR>
<EM>&gt;                  from hwclock.c:109:
</EM><BR>
<EM>&gt; /usr/include/asm/machvec.h:56: parse error before `*'
</EM><BR>
<EM>&gt; /usr/include/asm/machvec.h:58: parse error before `*'
</EM><BR>
<EM>&gt; /usr/include/asm/machvec.h:60: parse error before `*'
</EM><BR>
<EM>&gt; /usr/include/asm/machvec.h:63: parse error before `value'
</EM><BR>
<EM>&gt; /usr/include/asm/machvec.h:65: parse error before `value'
</EM><BR>
<EM>&gt; /usr/include/asm/machvec.h:67: parse error before `value'
</EM><BR>
<EM>&gt; /usr/include/asm/machvec.h:80: parse error before `vector'
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; /usr/include/asm/machvec.h:56&amp;57 are:
</EM><BR>
<EM>&gt;         int (*hose_read_config_byte)(u8, u8, u8, u8 *value,
</EM><BR>
<EM>&gt;                                      struct linux_hose_info *);
</EM><BR>
<P>&nbsp;This seems to be a problem with Alpha/Linux kernel headers.  From what I
<BR>
see I conclude &lt;asm/machvec.h&gt; is a kernel only header file, which is of
<BR>
no use to userland.  But it is included indirectly by &lt;sys/io.h&gt;, which
<BR>
includes &lt;asm/io.h&gt;.
<BR>
<P>&nbsp;According to Linus' policy the best solution would be to remove the
<BR>
inclusion of &lt;asm/machvec.h&gt; from &lt;asm/io.h&gt;.  All kernel .c files that
<BR>
need &lt;asm/io.h&gt; should include &lt;asm/machvec.h&gt; themselves.
<BR>
<P>&nbsp;Alternatively 'struct alpha_machine_vector' could be declared only if
<BR>
__KERNEL__ were defined, but this looks ugly to me.
<BR>
<P>&nbsp;As a temporary solution for compiling util-linux, just add
<BR>
&quot;-D__ALPHA_MACHVEC_H&quot; to your CFLAGS.
<BR>
<P><PRE>
-- 
+  Maciej W. Rozycki, Technical University of Gdansk, Poland   +
+--------------------------------------------------------------+
+        e-mail: <A HREF="mailto:macro@ds2.pg.gda.pl?subject=Re:%20problem%20compiling%20util-linux-2.9">macro@ds2.pg.gda.pl</A>, PGP key available        +
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20problem%20compiling%20util-linux-2.9">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20problem%20compiling%20util-linux-2.9">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Previous message:</STRONG> <A HREF="0997.html">Maurice Hilarius: "Re: Suggestions for a good graphic card"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Tue Dec 22 1998 - 14:00:38 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
