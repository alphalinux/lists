<!-- received="Tue Jun 23 12:40:20 1998 " -->
<!-- sent="Tue, 23 Jun 1998 08:11:54 -0400" -->
<!-- name="Paul Tomblin" -->
<!-- email="ptomblin@xcski.com" -->
<!-- subject="Re: help on IP masquerading on AS4/200 w RH5.0 kernal v2.0.34" -->
<!-- id="199806231321.JAA27156@mail-out-1.tiac.net" -->
<!-- inreplyto="Pine.SUN.3.96.980622212438.28386A-100000@waltz" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Re: help on IP masquerading on AS4/200 w RH5.0 kernal v2.0.34</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Re: help on IP masquerading on AS4/200 w RH5.0 kernal v2.0.34</h2>

<b>Paul Tomblin</b> (<a href="mailto:ptomblin@xcski.com"><i>ptomblin@xcski.com</i></a>)<br>
<i>Tue, 23 Jun 1998 08:11:54 -0400</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#68">[ date ]</a><a href="index.html#68">[ thread ]</a><a href="subject.html#68">[ subject ]</a><a href="author.html#68">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0069.html">Chris Ingrassia: "Xsuse?"</a>
<li> <b>Previous message:</b> <a href="0067.html">Stephen J. Gaudet: "IBM &amp; Alpha, looks good!"</a>
<li> <b>In reply to:</b> <a href="0075.html">Felix von Leitner: "Re: Scheduler problem on Miata with 2.1.106"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0070.html">B. James Phillippe: "Re: help on IP masquerading on AS4/200 w RH5.0 kernal v2.0.34"</a>
<!-- reply="end" -->
</ul>
<!-- body="start" -->
Quoting Darren Kruger (<a href="mailto:darrenk@rahul.net">darrenk@rahul.net</a>):<br>
<i>&gt; I have been for some time trying to get IP masquerading working on my</i><br>
<i>&gt; alphastation.  I started playing with v4.2, but have upgraded in an effort</i><br>
<i>&gt; to recompile the kernal with all the correct options.  When i bring up a</i><br>
<i>&gt; ppp connection, I can not ping throught it, nor anything else.  I'm pretty</i><br>
<i>&gt; sure it's somewhere in my config, though i know not where.  </i><br>
<i>&gt; </i><br>
<i>&gt; can anyone give me some hints on where I'm going wrong?  thanks in</i><br>
<i>&gt; advance. </i><br>
<i>&gt; </i><br>
<i>&gt; my local network is 10.0.0.0/24, the alpha's eth0 interface has an ip</i><br>
<i>&gt; address of 10.0.0.113 (which i'm using as the gateway for my windoze 95</i><br>
<i>&gt; machine.)</i><br>
<i>&gt; </i><br>
<i>&gt; to enable masquerading, i'm running the following commands:</i><br>
<i>&gt; ipfwadm -F -p deny</i><br>
<i>&gt; ipfwadm -F -a -m -S 10.0.0.0/24 -D 0.0.0.0/0 -V 10.0.0.113</i><br>
<i>&gt; </i><br>
<i>&gt; in /etc/sysconfig/network i have the following line:</i><br>
<i>&gt; FORWARD_IPV4=true</i><br>
<i>&gt; </i><br>
<i>&gt; in my .config file, i have the following options:</i><br>
<i>&gt; CONFIG_FIREWALL=Y</i><br>
<i>&gt; CONFIG_NET_ALIAS=Y</i><br>
<i>&gt; CONFIG_INET=Y</i><br>
<i>&gt; CONFIG_IP_FORWARD=Y</i><br>
<i>&gt; CONFIG_IP_MULTICAST=Y</i><br>
<i>&gt; CONFIG_SYN_COOKIES=Y</i><br>
<i>&gt; CONFIG_IP_FIREWALL=Y</i><br>
<i>&gt; CONFIG_IP_FIREWALL_VERBOSE=Y</i><br>
<i>&gt; CONFIG_IP_MASQUERADE=Y</i><br>
<i>&gt;  </i><br>
<i>&gt; CONFIG_IP_MASQUERADE_ICMP=Y</i><br>
<i>&gt; CONFIG_IP_ALWAYS_DEFRAG=Y</i><br>
<i>&gt; CONFIG_IP_ACCT=Y</i><br>
<i>&gt; # CONFIG_IP_ROUTER is not set</i><br>
<i>&gt; CONFIG_NET_IPIP=M</i><br>
<i>&gt; CONFIG_IP_ALIAS=M</i><br>
<p>
This looks pretty much what I've got (except I'm using 192.168.1.0/24 as my<br>
source).<br>
<p>
You also need to set up your other machine so that it uses your linux box's<br>
ethernet ip (NOT the PPP ip, because it doesn't know it) as the default<br>
gateway.<br>
<p>
You said you can't ping through it.  Do you mean you can't ping from the other<br>
computer out through the linux box?  Have you tried pinging by number instead<br>
of by name?  It's quite probable that you don't have DNS set up right, that's<br>
what kills most people.  I run a named on my linux box so that the other<br>
machines on the network can get name service within the local network even<br>
when not connected.  So I have my other boxes list that as their primary DNS,<br>
and then list the DNSes that my ISP provides as secondaries.  Works pretty<br>
well - I just added a Windows 95 machine to the local network at home, and it<br>
worked pretty much right away.  (I had two linux boxen and a Mac on it before,<br>
and I'm adding another Mac as soon as the ethernet card comes)  The youngest<br>
daughter was thrilled when she started whining "I need to look up something on<br>
the web" when her mother was using the Mac and I was using the Linux box, and<br>
I just pointed to the Windows box and said "Internet Exploder".<br>
<p>
<pre>
-- 
Paul Tomblin, <a href="mailto:ptomblin@xcski.com">ptomblin@xcski.com</a>.
"It's just a cardboard model.  Fake security"
"Jeez, that's a first for Microsoft"
   - User Friendly
<p>
<pre>
-- 
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0069.html">Chris Ingrassia: "Xsuse?"</a>
<li> <b>Previous message:</b> <a href="0067.html">Stephen J. Gaudet: "IBM &amp; Alpha, looks good!"</a>
<li> <b>In reply to:</b> <a href="0075.html">Felix von Leitner: "Re: Scheduler problem on Miata with 2.1.106"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0070.html">B. James Phillippe: "Re: help on IP masquerading on AS4/200 w RH5.0 kernal v2.0.34"</a>
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
