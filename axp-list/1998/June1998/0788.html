<!-- received="Thu Jul  2 17:12:20 1998 " -->
<!-- sent="Sat, 23 May 98 15:23:06 -0700" -->
<!-- name="Mike \" -->
<!-- email="ford@omnicron.com" -->
<!-- subject="ld from binutils 2.9.1 dynamic output dumps core on Linux/Alpha" -->
<!-- id="199805231836.NAA00333@vulture.cs.rose-hulman.edu" -->
<!-- inreplyto=" the subject.  Do not send it to axp-list@redhat.com
" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>ld from binutils 2.9.1 dynamic output dumps core on Linux/Alpha</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>ld from binutils 2.9.1 dynamic output dumps core on Linux/Alpha</h2>

<b>Mike \</b> (<a href="mailto:ford@omnicron.com"><i>ford@omnicron.com</i></a>)<br>
<i>Sat, 23 May 98 15:23:06 -0700</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#788">[ date ]</a><a href="index.html#788">[ thread ]</a><a href="subject.html#788">[ subject ]</a><a href="author.html#788">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0789.html">Paul B. Brown: "2nd Ethernet Card in UDB"</a>
<li> <b>Previous message:</b> <a href="0787.html">Leslie F. Donaldson: "Sound Cards"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<!-- body="start" -->
I am trying to build binutils 2.9.1 under RedHat Linux 4.1 for alpha,<br>
using the stock gcc 2.7.2.1.<br>
<p>
The ld program is built sucessfully and when it is run it creates<br>
object files with apparent success, but the programs don't run, they<br>
dump core immediately.  If the program is statically linked (gcc<br>
-static) then it works, but dynamically linked programs created by<br>
2.9.1 ld dump core.<br>
<p>
I have also tried building these same binutils using gcc 2.8.1 with<br>
the same results.<br>
<p>
As a test, I compile and link a simple hello world program, first using<br>
/usr/bin/ld, then using binutils-2.9.1/ld/ld-new .  The same object files<br>
are being linked in either case, but the first one runs, and the second<br>
one dumps core.<br>
<p>
I can make the object files involved available to anyone if that helps<br>
understand this problem.<br>
<p>
					-=] Ford [=-<br>
<p>
"But everybody wants a rock		(In Real Life:  Mike Ditto)<br>
 to wind a piece of string around."	<a href="mailto:ford@omnicron.com">ford@omnicron.com</a><br>
 - They Might be Giants,		<a href="http://www.omnicron.com/~ford/ford.html">http://www.omnicron.com/~ford/ford.html</a><br>
   "We want a rock"<br>
<p>
<p>
ford@alpha2&gt; cd /usr/local/src/binutils*<br>
ford@alpha2&gt; pwd<br>
/usr/local/src/binutils-2.9.1<br>
ford@alpha2&gt; cd ld<br>
ford@alpha2&gt; cat h.c<br>
main(){puts("Hello world");}<br>
ford@alpha2&gt; gcc -O2 -c h.c<br>
ford@alpha2&gt; /usr/bin/ld --version<br>
ld version 2.7 (with BFD 2.7.0.2)<br>
ford@alpha2&gt; gcc --version<br>
2.7.2.1<br>
ford@alpha2&gt; ./ld-new --version<br>
GNU ld 2.9.1<br>
Copyright 1997 Free Software Foundation, Inc.<br>
This program is free software; you may redistribute it under the terms of<br>
the GNU General Public License.  This program has absolutely no warranty.<br>
  Supported emulations:<br>
   elf64alpha<br>
   alpha<br>
ford@alpha2&gt; gcc -v -o a.out.ld h.o<br>
Reading specs from /usr/lib/gcc-lib/alpha-linux/2.7.2.1/specs<br>
gcc version 2.7.2.1<br>
 ld -m elf64alpha -G 8 -O1 -dynamic-linker /lib/ld.so.1 -o a.out.ld /usr/lib/crt1.o /usr/lib/crti.o /usr/lib/crtbegin.o -L/usr/lib/gcc-lib/alpha-linux/2.7.2.1 h.o -lgcc -lc -lgcc /usr/lib/crtend.o /usr/lib/crtn.o<br>
ford@alpha2&gt; ./ld-new -m elf64alpha -G 8 -O1 -dynamic-linker /lib/ld.so.1 -o a.out.ld-new /usr/lib/crt1.o /usr/lib/crti.o /usr/lib/crtbegin.o -L/usr/lib/gcc-lib/alpha-linux/2.7.2.1 h.o -lgcc -lc -lgcc /usr/lib/crtend.o /usr/lib/crtn.o<br>
ford@alpha2&gt; ./a.out.ld<br>
Hello world<br>
ford@alpha2&gt; ./a.out.ld-new<br>
Segmentation fault (core dumped)<br>
ford@alpha2&gt; size a.out.*<br>
text	data	bss	dec	hex	filename<br>
544    	1957   	0      	2501   	9c5    	a.out.ld<br>
544    	1501   	0      	2045   	7fd    	a.out.ld-new<br>
ford@alpha2&gt; exit<br>
<p>
<pre>
-- 
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0789.html">Paul B. Brown: "2nd Ethernet Card in UDB"</a>
<li> <b>Previous message:</b> <a href="0787.html">Leslie F. Donaldson: "Sound Cards"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
