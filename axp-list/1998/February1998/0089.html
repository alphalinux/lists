<!-- received="Thu Feb 12 05:31:46 1998 " -->
<!-- sent="Thu, 12 Feb 1998 11:26:56 +0200 (EET)" -->
<!-- name="Hirsim{ki Mika" -->
<!-- email="mhi@alpha.cc.tut.fi" -->
<!-- subject="ISDN/Kernel 2.1.85" -->
<!-- id="199802120926.LAA10948@alpha.cc.tut.fi" -->
<!-- inreplyto="ео	@ео	@request@redh" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>ISDN/Kernel 2.1.85</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>ISDN/Kernel 2.1.85</h2>

<b>Hirsim{ki Mika</b> (<a href="mailto:mhi@alpha.cc.tut.fi"><i>mhi@alpha.cc.tut.fi</i></a>)<br>
<i>Thu, 12 Feb 1998 11:26:56 +0200 (EET)</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#89">[ date ]</a><a href="index.html#89">[ thread ]</a><a href="subject.html#89">[ subject ]</a><a href="author.html#89">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0090.html">Stefan Traby: "Re: Trouble with sockets while compiling Tcl 8.0"</a>
<li> <b>Previous message:</b> <a href="0088.html">Dr. Andreas S. Tomiak: "Re: Length of UID and GID in Alpha-Linux"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<!-- body="start" -->
I recently got a 2.1.85 kernel compiled and running<br>
in a 164LX box and my most serious problem so far <br>
has been (and still is) with the ISDN-support.<br>
<p>
I have a Teles 16.3 (ISA) ISDN-card and it worked<br>
fine in an intel-based linux box, so this really<br>
shouldn't be a hardware problem. <br>
<p>
If I compile 2.1.85 from unmodified sources, "make<br>
modules" will fail because of an internal compiler<br>
error number 6. Reducing optimization level from<br>
-O2 to -O1 seems to fix this problem, and the make<br>
finishes OK. <br>
<p>
A number of "pointer to int" warnings are given,<br>
though. Then, when I'm trying to "modprobe hisax",<br>
with isdn and all other related modules loaded<br>
and with proper io, irq and type set, I get a <br>
oops -1, and a message saying that kernel pager<br>
is somehow confused.<br>
<p>
I've traced the problem to a part of code found<br>
in fsm.c, hisax.h and isdnl2.c. There is a pointer:<br>
<p>
int *jumpmatrix;<br>
<p>
which, as far as I can understand, is used to store <br>
pointers to functions. These pointers are later <br>
recovered and called. Calling them (in FsmEvent(), <br>
in file fsm.c) is what trips the kernel pager and,<br>
frustratingly, leaves the hisax-module partially<br>
loaded ("uninitialized") so that it can't be removed <br>
with rmmod.  <br>
 <br>
Apparently storing functions' pointers into an int-<br>
sized array and calling them later is not very <br>
healthy. ;) So, how can I fix this? Changing the<br>
jumpmatrix into "long int *" didn't help. Loading<br>
this kind of module only froze the system.<br>
<p>
<pre>
--
Mika Hirsimaki
<p>
<p>
<p>
<pre>
-- 
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0090.html">Stefan Traby: "Re: Trouble with sockets while compiling Tcl 8.0"</a>
<li> <b>Previous message:</b> <a href="0088.html">Dr. Andreas S. Tomiak: "Re: Length of UID and GID in Alpha-Linux"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
