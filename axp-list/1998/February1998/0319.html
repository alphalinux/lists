<!-- received="Tue Feb 24 14:55:16 1998 " -->
<!-- sent="Sun, 22 Feb 1998 00:00:04 +0100 (MET)" -->
<!-- name="Hugo van der Kooij" -->
<!-- email="hvdkooij@caiw.nl" -->
<!-- subject="Red Hat Linux 5.0 kernel update (fwd)" -->
<!-- id="E0y6yIZ-0000cP-00@jma24.robinson.cam.ac.uk" -->
<!-- inreplyto=" the subject.  Do not send it to axp-list@re1" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Red Hat Linux 5.0 kernel update (fwd)</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Red Hat Linux 5.0 kernel update (fwd)</h2>

<b>Hugo van der Kooij</b> (<a href="mailto:hvdkooij@caiw.nl"><i>hvdkooij@caiw.nl</i></a>)<br>
<i>Sun, 22 Feb 1998 00:00:04 +0100 (MET)</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#319">[ date ]</a><a href="index.html#319">[ thread ]</a><a href="subject.html#319">[ subject ]</a><a href="author.html#319">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0320.html">Sheer Panic: "Re: Is this a debug message?"</a>
<li> <b>Previous message:</b> <a href="0318.html">john@apples.net: "Re: kernel 2.1.84 on 164sx board"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<!-- body="start" -->
  This message is in MIME format.  The first part should be readable text,<br>
  while the remaining parts are likely unreadable without MIME-aware tools.<br>
  Send mail to <a href="mailto:mime@docserver.cac.washington.edu">mime@docserver.cac.washington.edu</a> for more info.<br>
<p>
---1463811839-1520419001-888101718=:2647<br>
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII<br>
Content-ID: &lt;<a href="mailto:Pine.LNX.3.96.980221235531.2647E@hvdkooij.dyn.ml.org">Pine.LNX.3.96.980221235531.2647E@hvdkooij.dyn.ml.org</a>&gt;<br>
<p>
Enclosed the SGML version of the tekst in this message. If someone will<br>
put it up in the proper places it may help others as well.<br>
<p>
---------- Forwarded message ----------<br>
  Fixing Red Hat Linux 5.0 for the Alpha with a newer kernel<br>
  Hugo van der Kooij &lt;<a href="mailto:hvdkooij@caiw.nl">hvdkooij@caiw.nl</a>&gt;<br>
  Version 1.0; dated: Februari 21, 1998<br>
<p>
  In the process of trying to get C++ code compiling properly on a Red<br>
  Hat Linux 5.0 Alpha system I had lots of problems.  Eventually I<br>
  upgraded the system to a newer kernel and most problems were solved.<br>
  This document will give you a quick tour on how to to fix this yourself.<br>
  ______________________________________________________________________<br>
<p>
  1. Getting the proper kernel and fixes<br>
<p>
     1.1 Kernel<br>
     1.2 Alpha patches<br>
<p>
  2. Rolling your own kernel<br>
<p>
     2.1 Move over the old one<br>
     2.2 Install the new kernel<br>
     2.3 Patching the kernel<br>
     2.4 Cleaning up<br>
<p>
  3. Remarks<br>
<p>
  ______________________________________________________________________<br>
<p>
  1.  Getting the proper kernel and fixes<br>
<p>
  We need to get the newer kernel and the proper Alpha patches first.<br>
<p>
<p>
  1.1.  Kernel<br>
<p>
  We get the kernel sources from ftp.kernel.org and I used:<br>
  <a href="ftp://ftp.kernel.org/pub/linux/kernel/v2.0/linux-2.0.33.tar.bz2">ftp://ftp.kernel.org/pub/linux/kernel/v2.0/linux-2.0.33.tar.bz2</a><br>
<p>
  In case you don't have bzip2 you can use the larger gzip version:<br>
  <a href="ftp://ftp.kernel.org/pub/linux/kernel/v2.0/linux-2.0.33.tar.gz">ftp://ftp.kernel.org/pub/linux/kernel/v2.0/linux-2.0.33.tar.gz</a><br>
<p>
<p>
  1.2.  Alpha patches<br>
<p>
  We need a patch file from gatekeeper.dec.com for this kernel:<br>
  <a href="ftp://gatekeeper.dec.com/pub/DEC/Linux-Alpha/Kernels/alpha-patches-2.0.32-0.1.gz">ftp://gatekeeper.dec.com/pub/DEC/Linux-Alpha/Kernels/alpha-patches-2.0.32-0.1.gz</a><br>
<p>
  Do not be alarmed by the fact that it is suggested that the fix is for<br>
  the 2.0.32 kernel only. None of the affected files was changed from<br>
  2.0.32 to 2.0.33!<br>
<p>
  You may make a bookmark for the following URL as there is plenty of<br>
  stuff there: <a href="ftp://gatekeeper.dec.com/pub/DEC/Linux-Alpha/">ftp://gatekeeper.dec.com/pub/DEC/Linux-Alpha/</a><br>
<p>
<p>
  2.  Rolling your own kernel<br>
<p>
  2.1.  Move over the old one<br>
<p>
  We move over the old one by removing a symbolic link.<br>
<p>
       cd /usr/src/<br>
       rm linux<br>
<p>
<p>
  2.2.  Install the new kernel<br>
<p>
  We install the new kernel by unpacking the tar file<br>
<p>
  If you use the linux-2.0.33.tar.gz file you can do:<br>
<p>
       cd /usr/src<br>
       tar -xvzf linux-2.0.33.tar.gz<br>
<p>
<p>
  2.3.  Patching the kernel<br>
<p>
  Now we are going to apply that patch.<br>
<p>
  But before we do we have to make some extra links so the patch won't<br>
  hurt us.<br>
<p>
       cd /usr/src<br>
       ln -s linux old<br>
       ln -s linux new<br>
<p>
<p>
  Now those are in place we can patch the lot.<br>
<p>
       cd /usr/src<br>
       gzip -d &lt; alpha-patches-2.0.32-0.1.gz | patch -p0<br>
<p>
<p>
  And now we can remove those ackward links.<br>
<p>
       cd /usr/src<br>
       rm old<br>
       rm new<br>
<p>
<p>
  2.4.  Cleaning up<br>
<p>
  To clean up the lot we will make it clean properly.<br>
<p>
       cd /usr/src/linux<br>
       make distclean<br>
<p>
<p>
  And we store it under the proper kernel version with a decent link.<br>
<p>
       cd /usr/src<br>
       mv linux linux-2.0.33<br>
       ln -s linux-2.0.33 linux<br>
<p>
<p>
<p>
  3.  Remarks<br>
<p>
  Just some remarks to finish it off:<br>
<p>
<p>
  o  Don't try to run make menuconfig or make xconfig as these are<br>
     (partialy) broken. Always use make config to configure the kernel.<br>
<p>
  o  If you link /usr/src/linux to the old kernel (2.0.30) you will get<br>
     an awfull lot of problems with compiling gcc c++ code!<br>
<p>
  o  Remember to optimize your kernel for the machine.<br>
<p>
  o  And don't forget that although this worked fine for me and<br>
     apparantly for plenty of others it may not work for you.<br>
<p>
  o  I did test it quite extensively on a Digital Alpha XL 300 (Alpha-<br>
     XLT) so other system may not work as well with this procedure.<br>
<p>
  Enjoy, Hugo.<br>
<p>
<p>
	+------------------------+------------------------------+<br>
<i>	| Hugo van der Kooij     | <a href="mailto:Hugo.van.der.Kooij@caiw.nl">Hugo.van.der.Kooij@caiw.nl</a>   |</i><br>
<i>	| Oranje Nassaustraat 16 | <a href="http://www.caiw.nl/~hvdkooij">http://www.caiw.nl/~hvdkooij</a> |</i><br>
<i>	| 3155 VJ  Maasland      | (De man met de rode hoed)    |</i><br>
	+------------------------+------------------------------+<br>
    "Computers let you make more mistakes faster than any other invention in <br>
      human history, with the possible exception of handguns and tequila."<br>
		(Mitch Radcliffe)<br>
<p>
---1463811839-1520419001-888101718=:2647<br>
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII; NAME="RHL5kernel.sgml"<br>
Content-Transfer-Encoding: BASE64<br>
Content-ID: &lt;<a href="mailto:Pine.LNX.3.96.980221235518.2647B@hvdkooij.dyn.ml.org">Pine.LNX.3.96.980221235518.2647B@hvdkooij.dyn.ml.org</a>&gt;<br>
Content-Description: <br>
<p>
PCFkb2N0eXBlIGxpbnV4ZG9jIHN5c3RlbT4NCjxhcnRpY2xlPg0KDQo8dGl0<br>
bGU+Rml4aW5nIFJlZCBIYXQgTGludXggNS4wIGZvciB0aGUgQWxwaGEgd2l0<br>
aCBhIG5ld2VyIGtlcm5lbA0KDQo8YXV0aG9yPkh1Z28gdmFuIGRlciBLb29p<br>
ag0KJmx0OzxodG1sdXJsIHVybD0ibWFpbHRvOmh2ZGtvb2lqQGNhaXcubmwi<br>
IG5hbWU9Imh2ZGtvb2lqQGNhaXcubmwiPiZndDsNCg0KPGRhdGU+VmVyc2lv<br>
biAxLjA7IGRhdGVkOiBGZWJydWFyaSAyMSwgMTk5OA0KDQo8YWJzdHJhY3Q+<br>
DQpJbiB0aGUgcHJvY2VzcyBvZiB0cnlpbmcgdG8gZ2V0IEMrKyBjb2RlIGNv<br>
bXBpbGluZyBwcm9wZXJseSBvbiBhIFJlZCBIYXQgTGludXggNS4wIEFscGhh<br>
IHN5c3RlbSBJIGhhZCBsb3RzIG9mIHByb2JsZW1zLg0KRXZlbnR1YWxseSBJ<br>
IHVwZ3JhZGVkIHRoZSBzeXN0ZW0gdG8gYSBuZXdlciBrZXJuZWwgYW5kIG1v<br>
c3QgcHJvYmxlbXMgd2VyZSBzb2x2ZWQuDQpUaGlzIGRvY3VtZW50IHdpbGwg<br>
Z2l2ZSB5b3UgYSBxdWljayB0b3VyIG9uIHRvIHRvIGZpeCB0aGlzIHlvdXJz<br>
ZWxmLg0KPC9hYnN0cmFjdD4NCg0KPHRvYz4NCg0KPHNlY3Q+R2V0dGluZyB0<br>
aGUgcHJvcGVyIGtlcm5lbCBhbmQgZml4ZXMNCg0KPHA+DQpXZSBuZWVkIHRv<br>
IGdldCB0aGUgbmV3ZXIga2VybmVsIGFuZCB0aGUgcHJvcGVyIEFscGhhIHBh<br>
dGNoZXMgZmlyc3QuDQoNCjxzZWN0MT5LZXJuZWwNCg0KPHA+DQpXZSBnZXQg<br>
dGhlIGtlcm5lbCBzb3VyY2VzIGZyb20gZnRwLmtlcm5lbC5vcmcgYW5kIEkg<br>
dXNlZDoNCjxodG1sdXJsIHVybD0iZnRwOi8vZnRwLmtlcm5lbC5vcmcvcHVi<br>
L2xpbnV4L2tlcm5lbC92Mi4wL2xpbnV4LTIuMC4zMy50YXIuYnoyIg0KbmFt<br>
ZT0iZnRwOi8vZnRwLmtlcm5lbC5vcmcvcHViL2xpbnV4L2tlcm5lbC92Mi4w<br>
L2xpbnV4LTIuMC4zMy50YXIuYnoyIj4NCg0KSW4gY2FzZSB5b3UgZG9uJ3Qg<br>
aGF2ZSBiemlwMiB5b3UgY2FuIHVzZSB0aGUgbGFyZ2VyIGd6aXAgdmVyc2lv<br>
bjoNCjxodG1sdXJsIHVybD0iZnRwOi8vZnRwLmtlcm5lbC5vcmcvcHViL2xp<br>
bnV4L2tlcm5lbC92Mi4wL2xpbnV4LTIuMC4zMy50YXIuZ3oiDQpuYW1lPSJm<br>
dHA6Ly9mdHAua2VybmVsLm9yZy9wdWIvbGludXgva2VybmVsL3YyLjAvbGlu<br>
dXgtMi4wLjMzLnRhci5neiI+DQoNCjxzZWN0MT5BbHBoYSBwYXRjaGVzDQoN<br>
CjxwPg0KV2UgbmVlZCBhIHBhdGNoIGZpbGUgZnJvbSBnYXRla2VlcGVyLmRl<br>
Yy5jb20gZm9yIHRoaXMga2VybmVsOg0KPGh0bWx1cmwgdXJsPSJmdHA6Ly9n<br>
YXRla2VlcGVyLmRlYy5jb20vcHViL0RFQy9MaW51eC1BbHBoYS9LZXJuZWxz<br>
L2FscGhhLXBhdGNoZXMtMi4wLjMyLTAuMS5neiINCm5hbWU9ImZ0cDovL2dh<br>
dGVrZWVwZXIuZGVjLmNvbS9wdWIvREVDL0xpbnV4LUFscGhhL0tlcm5lbHMv<br>
YWxwaGEtcGF0Y2hlcy0yLjAuMzItMC4xLmd6Ij4NCg0KRG8gbm90IGJlIGFs<br>
YXJtZWQgYnkgdGhlIGZhY3QgdGhhdCBpdCBpcyBzdWdnZXN0ZWQgdGhhdCB0<br>
aGUgZml4IGlzIGZvciB0aGUgMi4wLjMyIGtlcm5lbCBvbmx5LiBOb25lIG9m<br>
IHRoZSBhZmZlY3RlZCBmaWxlcyB3ZXJlIGNoYW5nZWQgZnJvbSAyLjAuMzIg<br>
dG8gMi4wLjMzIQ0KDQpZb3UgbWF5IG1ha2UgYSBib29rbWFyayBmb3IgdGhl<br>
IGZvbGxvd2luZyBVUkwgYXMgdGhlcmUgaXMgcGxlbnR5IG9mIHN0dWZmIHRo<br>
ZXJlOg0KPGh0bWx1cmwgdXJsPSJmdHA6Ly9nYXRla2VlcGVyLmRlYy5jb20v<br>
cHViL0RFQy9MaW51eC1BbHBoYS8iDQpuYW1lPSJmdHA6Ly9nYXRla2VlcGVy<br>
LmRlYy5jb20vcHViL0RFQy9MaW51eC1BbHBoYS8iPg0KDQo8c2VjdD5Sb2xs<br>
aW5nIHlvdXIgb3duIGtlcm5lbA0KDQo8c2VjdDE+TW92ZSBvdmVyIHRoZSBv<br>
bGQgb25lDQoNCjxwPg0KV2UgbW92ZSBvdmVyIHRoZSBvbGQgb25lIGJ5IHJl<br>
bW92aW5nIGEgc3ltYm9saWMgbGluay4NCg0KPHRzY3JlZW4+PHZlcmI+DQpj<br>
ZCAvdXNyL3NyYy8NCnJtIGxpbnV4DQo8L3ZlcmI+PC90c2NyZWVuPg0KDQo8<br>
c2VjdDE+SW5zdGFsbCB0aGUgbmV3IGtlcm5lbA0KDQo8cD4NCldlIGluc3Rh<br>
bGwgdGhlIG5ldyBrZXJuZWwgYnkgdW5wYWNraW5nIHRoZSB0YXIgZmlsZQ0K<br>
DQpJZiB5b3UgdXNlIHRoZSA8dHQ+bGludXgtMi4wLjMzLnRhci5nejwvdHQ+<br>
IGZpbGUgeW91IGNhbiBkbzoNCg0KPHRzY3JlZW4+PHZlcmI+DQpjZCAvdXNy<br>
L3NyYw0KdGFyIC14dnpmIGxpbnV4LTIuMC4zMy50YXIuZ3oNCjwvdmVyYj48<br>
L3RzY3JlZW4+DQoNCg0KPHNlY3QxPlBhdGNoaW5nIHRoZSBrZXJuZWwNCg0K<br>
PHA+DQpOb3cgd2UgYXJlIGdvaW5nIHRvIGFwcGx5IHRoYXQgcGF0Y2guDQoN<br>
CkJ1dCBiZWZvcmUgd2UgZG8gd2UgaGF2ZSB0byBtYWtlIHNvbWUgZXh0cmEg<br>
bGlua3Mgc28gdGhlIHBhdGNoIHdvbid0IGh1cnQgdXMuDQoNCjx0c2NyZWVu<br>
Pjx2ZXJiPg0KY2QgL3Vzci9zcmMNCmxuIC1zIGxpbnV4IG9sZA0KbG4gLXMg<br>
bGludXggbmV3DQo8L3ZlcmI+PC90c2NyZWVuPg0KDQpOb3cgdGhvc2UgYXJl<br>
IGluIHBsYWNlIHdlIGNhbiBwYXRjaCB0aGUgbG90Lg0KDQo8dHNjcmVlbj48<br>
dmVyYj4NCmNkIC91c3Ivc3JjDQpnemlwIC1kIDwgYWxwaGEtcGF0Y2hlcy0y<br>
LjAuMzItMC4xLmd6IHwgcGF0Y2ggLXAwDQo8L3ZlcmI+PC90c2NyZWVuPg0K<br>
DQpBbmQgbm93IHdlIGNhbiByZW1vdmUgdGhvc2UgYWNrd2FyZCBsaW5rcy4N<br>
Cg0KPHRzY3JlZW4+PHZlcmI+DQpjZCAvdXNyL3NyYw0Kcm0gb2xkDQpybSBu<br>
ZXcNCjwvdmVyYj48L3RzY3JlZW4+DQoNCjxzZWN0MT5DbGVhbmluZyB1cA0K<br>
DQo8cD4NClRvIGNsZWFuIHVwIHRoZSBsb3Qgd2Ugd2lsbCBtYWtlIGl0IGNs<br>
ZWFuIHByb3Blcmx5Lg0KDQo8dHNjcmVlbj48dmVyYj4NCmNkIC91c3Ivc3Jj<br>
L2xpbnV4DQptYWtlIGRpc3RjbGVhbg0KPC92ZXJiPjwvdHNjcmVlbj4NCg0K<br>
QW5kIHdlIHN0b3JlIGl0IHVuZGVyIHRoZSBwcm9wZXIga2VybmVsIHZlcnNp<br>
b24gd2l0aCBhIGRlY2VudCBsaW5rLg0KDQo8dHNjcmVlbj48dmVyYj4NCmNk<br>
IC91c3Ivc3JjDQptdiBsaW51eCBsaW51eC0yLjAuMzMNCmxuIC1zIGxpbnV4<br>
LTIuMC4zMyBsaW51eA0KPC92ZXJiPjwvdHNjcmVlbj4NCg0KPHNlY3Q+UmVt<br>
YXJrcw0KDQo8cD4NCkp1c3Qgc29tZSByZW1hcmtzIHRvIGZpbmlzaCBpdCBv<br>
ZmY6DQoNCjxpdGVtaXplPg0KPGl0ZW0+RG9uJ3QgdHJ5IHRvIHJ1biA8dHQ+<br>
bWFrZSBtZW51Y29uZmlnPC90dD4gb3IgPHR0Pm1ha2UgeGNvbmZpZzwvdHQ+<br>
IGFzIHRoZXNlIGFyZSAocGFydGlhbHkpIGJyb2tlbi4gQWx3YXlzIHVzZSA8<br>
dHQ+bWFrZSBjb25maWc8L3R0PiB0byBjb25maWd1cmUgdGhlIGtlcm5lbC4N<br>
CjxpdGVtPklmIHlvdSBsaW5rIDx0dD4vdXNyL3NyYy9saW51eDwvdHQ+IHRv<br>
IHRoZSBvbGQga2VybmVsICgyLjAuMzApIHlvdSB3aWxsIGdldCBhbiBhd2Z1<br>
bGwgbG90IG9mIHByb2JsZW1zIHdpdGggY29tcGlsaW5nIGdjYyBjKysgY29k<br>
ZSENCjxpdGVtPlJlbWVtYmVyIHRvIG9wdGltaXplIHlvdXIga2VybmVsIGZv<br>
ciB0aGUgbWFjaGluZS4NCjxpdGVtPiBBbmQgZG9uJ3QgZm9yZ2V0IHRoYXQg<br>
YWx0aG91Z2ggdGhpcyB3b3JrZWQgZmluZSBmb3IgbWUgYW5kIGFwcGFyYW50<br>
bHkgZm9yIHBsZW50eSBvZiBvdGhlcnMgaXQgbWF5IG5vdCB3b3JrIGZvciB5<br>
b3UuDQo8aXRlbT5JIGRpZCB0ZXN0IGl0IHF1aXRlIGV4dGVuc2l2ZWx5IG9u<br>
IGEgRGlnaXRhbCBBbHBoYSBYTCAzMDAgKEFscGhhLVhMVCkgc28gb3RoZXIg<br>
c3lzdGVtIG1heSBub3Qgd29yayBhcyB3ZWxsIHdpdGggdGhpcyBwcm9jZWR1<br>
cmUuDQo8L2l0ZW1pemU+DQoNCkVuam95LA0KSHVnby4NCg0KPC9hcnRpY2xl<br>
Pg0K<br>
---1463811839-1520419001-888101718=:2647--<br>
<p>
<pre>
-- 
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0320.html">Sheer Panic: "Re: Is this a debug message?"</a>
<li> <b>Previous message:</b> <a href="0318.html">john@apples.net: "Re: kernel 2.1.84 on 164sx board"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
