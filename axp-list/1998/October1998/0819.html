<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>AXP-List Hypermail Archive: Re: ipfwadm problem</TITLE>
<META NAME="Author" CONTENT="B. James Phillippe (bryan@terran.org)">
<META NAME="Subject" CONTENT="Re: ipfwadm problem">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: ipfwadm problem</H1>
<HR>
<P>
<!-- received="Mon Nov 30 19:20:15 1998 AKST" -->
<!-- sent="Mon, 30 Nov 1998 20:19:54 -0800 (PST)" -->
<!-- name="B. James Phillippe" -->
<!-- email="bryan@terran.org" -->
<!-- subject="Re: ipfwadm problem" -->
<!-- id="Pine.LNX.4.04.9811302012280.4052-100000@earth.terran.org" -->
<!-- inreplyto="36635D2E.36CA7054@adam.cheshire.net" -->
<STRONG>B. James Phillippe</STRONG> (<A HREF="mailto:bryan@terran.org?subject=Re:%20ipfwadm%20problem"><EM>bryan@terran.org</EM></A>)<BR>
<EM>Mon, 30 Nov 1998 20:19:54 -0800 (PST)</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#819">[ date ]</A>
<A HREF="index.html#819">[ thread ]</A>
<A HREF="subject.html#819">[ subject ]</A>
<A HREF="author.html#819">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0820.html">Tom Holroyd: "samba compile problem on axp linux 2.1.130"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0818.html">B. James Phillippe: "Re: New kernel 2.1.130 problems?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0807.html">Designer 7: "New kernel 2.1.130 problems?"</A>
<!-- nextthread="start" -->
</UL>
<HR>
<!-- body="start" -->
<P>
On Mon, 30 Nov 1998, Rich Payne wrote:
<BR>
<P><EM>&gt; Check your .config file after running make xconfig. Many people
</EM><BR>
<EM>&gt; have told me that make xconfig and make menuconfig will produce
</EM><BR>
<EM>&gt; 'broken' .config files. Maybe you could try just a regular make
</EM><BR>
<EM>&gt; config.
</EM><BR>
<P>Yes, make menuconfig and xconfig should be removed from the kernel (IMO);
<BR>
they are broken and/or unmaintained and will produce bogus .config files.
<BR>
I've never been burned with:
<BR>
<P>&nbsp;&nbsp;&nbsp;make config dep clean boot modules{,_install}
<BR>
<P><EM>&gt; Ken Marin wrote:
</EM><BR>
<EM>&gt; &gt; 
</EM><BR>
<EM>&gt; &gt; &gt;I'm running or trying to run an AS200 4/233 with RH5.1.  Everything is
</EM><BR>
<EM>&gt; &gt; &gt;working well except when I try to run any ipfwadm command I get this
</EM><BR>
<EM>&gt; &gt; same
</EM><BR>
<EM>&gt; &gt; &gt;error.  (new user)
</EM><BR>
<EM>&gt; &gt; &gt;
</EM><BR>
<EM>&gt; &gt; &gt;[&gt; &gt; &gt;[root@home /root]# ipfwadm -F -p deny
</EM><BR>
<EM>&gt; &gt; &gt;ipfwadm: setsockopt failed: Protocol not available
</EM><BR>
<EM>&gt; &gt; &gt;[&gt; &gt; &gt;[root@home /root]#
</EM><BR>
<EM>&gt; &gt; 
</EM><BR>
<EM>&gt; &gt; I tried the old ipfwadm from 5.0 and the new fixed one.  It still won't
</EM><BR>
<EM>&gt; &gt; work.  Could it be that  it is not configured in the kernel?  I don't know
</EM><BR>
<P>This problem is not related to the RedHat-shipped-a-busted-ipfwadm problem;
<BR>
in that case, you will get -EINVAL (&quot;Invalid argument&quot;) as a errno for
<BR>
setsockopt() because the struct used to pass the ipfwadm command is broken
<BR>
(too small) in glibc.  The error you are getting indicates that forwarding
<BR>
was not compiled into your kernel.  Make sure you rebuild your kernel with
<BR>
IP firewalling and forwarding, and then enable the forwarding by doing an:
<BR>
<P>&nbsp;&nbsp;&nbsp;echo 1 &gt; /proc/sys/net/ipv4/ip_forward
<BR>
<P>To make the change permanent, you edit your /etc/sysconfig/network and
<BR>
change the line that says FORWARD_IPV4= to FORWARD_IPV4=yes.
<BR>
<P>cheers,
<BR>
-bp
<BR>
<PRE>
--
B. James Phillippe	. <A HREF="mailto:bryan@terran.org?subject=Re:%20ipfwadm%20problem">bryan@terran.org</A>
Linux Engineer/Admin	. <A HREF="http://www.terran.org/~bryan">http://www.terran.org/~bryan</A>
Member since 1.1.59	. finger:<A HREF="mailto:bryan@earth.terran.org?subject=Re:%20ipfwadm%20problem">bryan@earth.terran.org</A>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=Re:%20ipfwadm%20problem">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=Re:%20ipfwadm%20problem">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0820.html">Tom Holroyd: "samba compile problem on axp linux 2.1.130"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0818.html">B. James Phillippe: "Re: New kernel 2.1.130 problems?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0807.html">Designer 7: "New kernel 2.1.130 problems?"</A>
<!-- nextthread="start" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Mon Nov 30 1998 - 19:20:19 AKST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
