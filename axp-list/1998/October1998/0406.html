<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>AXP-List Hypermail Archive: RE: Anyone else have problems with</TITLE>
<META NAME="Author" CONTENT="Bob Fahey (bob@invengen.com)">
<META NAME="Subject" CONTENT="RE: Anyone else have problems with ip_masq and Alpha Linux kernel 2.0.35??">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>RE: Anyone else have problems with ip_masq and Alpha Linux kernel 2.0.35??</H1>
<HR>
<P>
<!-- received="Fri Nov 20 06:33:05 1998 AKST" -->
<!-- sent="Fri, 20 Nov 1998 10:29:03 -0500" -->
<!-- name="Bob Fahey" -->
<!-- email="bob@invengen.com" -->
<!-- subject="RE: Anyone else have problems with ip_masq and Alpha Linux kernel 2.0.35??" -->
<!-- id="000501be149a$8122c050$2578a8c0@themis.invengen.com" -->
<!-- inreplyto="19981120111846.28500.qmail@hotmail.com" -->
<STRONG>Bob Fahey</STRONG> (<A HREF="mailto:bob@invengen.com?subject=RE:%20Anyone%20else%20have%20problems%20with%20ip_masq%20and%20Alpha%20Linux%20kernel%202.0.35??"><EM>bob@invengen.com</EM></A>)<BR>
<EM>Fri, 20 Nov 1998 10:29:03 -0500</EM>
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#406">[ date ]</A>
<A HREF="index.html#406">[ thread ]</A>
<A HREF="subject.html#406">[ subject ]</A>
<A HREF="author.html#406">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0407.html">Nils Faerber: "Re: 3D cards on Alpha-RHL?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0405.html">Stefan Schroepfer: "Re: Writing portable Code for Glibc and 32/64 bit"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0400.html">y0000218@rzsrv2.rz.tu-bs.de: "Writing portable Code for Glibc and 32/64 bit"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0410.html">jhohertz@golden.net: "Re: Anyone else have problems with ip_masq and Alpha Linux kernel 2.0.35??"</A>
</UL>
<HR>
<!-- body="start" -->
<P>
<EM>&gt; Hello,
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; I'm getting a 'invalid argument' when I attempt to setup ip_masq. I read 
</EM><BR>
<EM>&gt; somewhere that there might be a problem with the new Alpha kernel. Does 
</EM><BR>
<EM>&gt; anyone else have more info?? 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; I do have the correct options set when i compiled my kernel. But after a 
</EM><BR>
<EM>&gt; reboot and trying the following..
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; ipfwadm -F -p deny
</EM><BR>
<EM>&gt; ipfwadm -F -a m -D 192.168.0.0/24 -S 0.0.0.0/0
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; and then I get the 'invalid argument' error. I've checked with several 
</EM><BR>
<EM>&gt; postings that the syntax of the command is correct. 
</EM><BR>
<P>GREAT question.  I spent about the last 3 days on my Alpha trying to
<BR>
figure out the exact same problem.
<BR>
<P>The problem is that, from what I can tell, one of the includes with
<BR>
glibc 2.0.7 is incorrect, since it assumes you're running on a 32-bit
<BR>
machine.  This problem still exists even in 2.0.7-29, and needs to be
<BR>
fixed in the next release, IMHO.  Comments?
<BR>
<P>I changed /usr/include/netinet/ip_fw.h, and recompiled ipfwadm.  Now
<BR>
it works just fine.  The change is in the struct ip_fw -- there are
<BR>
2 arguments, fw_pcnt and fw_bcnt that are defined as u_int32_t.  If
<BR>
you change these to long, and recompile ipfwadm, it should work fine.
<BR>
<P>On the same note, when you set up masquerading, don't forget to change
<BR>
/etc/sysconfig/network, setting FORWARD_IPV4 to true.  I didn't find
<BR>
a reference to this in the IP-Masquerading HOWTO, but maybe it is
<BR>
in some other documentation somewhere....
<BR>
<P>-bob fahey
<BR>
(<A HREF="mailto:bob@invengen.com?subject=RE:%20Anyone%20else%20have%20problems%20with%20ip_masq%20and%20Alpha%20Linux%20kernel%202.0.35??">bob@invengen.com</A>)
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to <A HREF="mailto:axp-list-request@redhat.com?subject=RE:%20Anyone%20else%20have%20problems%20with%20ip_masq%20and%20Alpha%20Linux%20kernel%202.0.35??">axp-list-request@redhat.com</A> with
'unsubscribe' as the subject.  Do not send it to <A HREF="mailto:axp-list@redhat.com?subject=RE:%20Anyone%20else%20have%20problems%20with%20ip_masq%20and%20Alpha%20Linux%20kernel%202.0.35??">axp-list@redhat.com</A>
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0407.html">Nils Faerber: "Re: 3D cards on Alpha-RHL?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0405.html">Stefan Schroepfer: "Re: Writing portable Code for Glibc and 32/64 bit"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0400.html">y0000218@rzsrv2.rz.tu-bs.de: "Writing portable Code for Glibc and 32/64 bit"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0410.html">jhohertz@golden.net: "Re: Anyone else have problems with ip_masq and Alpha Linux kernel 2.0.35??"</A>
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.landfield.com/hypermail/">hypermail 2.0b3</A> 
on <EM>Fri Nov 20 1998 - 06:33:07 AKST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
