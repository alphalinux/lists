<!-- received="Mon Oct  5 09:55:14 1998 " -->
<!-- sent="05 Oct 1998 07:51:05 -0500" -->
<!-- name="His Holiness the Reverend Doktor Xenophon Fenderson, the Carbon" -->
<!-- email="xenophon@irtnog.org" -->
<!-- subject="Re: SRM unplugged" -->
<!-- id="3618776C.75630B10@stest.ch" -->
<!-- inreplyto="Sun, 4 Oct 1998 21:57:36 -0700 (PDT)" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Re: SRM unplugged</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Re: SRM unplugged</h2>

<b>His Holiness the Reverend Doktor Xenophon Fenderson, the Carbon</b> (<a href="mailto:xenophon@irtnog.org"><i>xenophon@irtnog.org</i></a>)<br>
<i>05 Oct 1998 07:51:05 -0500</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#1225">[ date ]</a><a href="index.html#1225">[ thread ]</a><a href="subject.html#1225">[ subject ]</a><a href="author.html#1225">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="1226.html">Dan Morrill: "ZIP SCSI Support"</a>
<li> <b>Previous message:</b> <a href="1224.html">Henrik Ahlgren: "Re: Gnome 0.30 running on Alpha?"</a>
<li> <b>In reply to:</b> <a href="1217.html">B. James Phillippe: "SRM unplugged"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="1238.html">Jay.Estabrook@digital.com: "Re: SRM unplugged"</a>
<!-- reply="end" -->
</ul>
<!-- body="start" -->
<i>&gt;&gt;&gt;&gt;&gt; "BJP" == B James Phillippe &lt;<a href="mailto:bryan@terran.org">bryan@terran.org</a>&gt; writes:</i><br>
<p>
    BJP&gt; Hello folks, Does anyone know where I can get more<br>
    BJP&gt; information on the SRM console?<br>
<p>
Here's some information I compiled regarding SRM.  Note that I have<br>
an old version of the firmware (the 3.7 firmware CD, SRM v6.2); more<br>
recent versions of the monitor software have a few more features (such<br>
as pagination).<br>
<p>
(This is in TeXinfo format.  I started writing a FAQ a while back.)<br>
<p>
@section Using Digital's System Resources Monitor<br>
<p>
The System Resources Monitor (SRM) is the O/S loader for OpenVMS,<br>
Digital UNIX, NetBSD, and OpenBSD on the Alpha.  Linux can also be<br>
booted from SRM and uses the UNIX (OSF) PALcode when doing so.<br>
<p>
@menu<br>
* Installing SRM::      Installing or upgrading the firmware.<br>
* SRM Commands::        Commonly used commands.<br>
* SRM Variables::       Useful environment variables.<br>
* The Raw Boot Loader:: Using the kernel's `raw' bootstrap program.<br>
* Using Aboot::         Aboot is more advanced than the `raw' loader.<br>
* Netbooting Linux::    Bootstrapping Linux across a network.<br>
@end menu<br>
<p>
@node Installing SRM, SRM Commands, Using SRM, Using SRM<br>
@subsection Installing SRM<br>
<p>
If SRM is not installed on your machine and you want to use it, or if<br>
you need to upgrade your version of SRM (I hear version 6.3 is<br>
especially problematic), you'll need to get a copy of the latest<br>
firmware and install it on your machine.  The easiest way to go about<br>
doing this is to order the Alpha Systems Firmware Update CD-ROM (part<br>
number QZ003AA-E8).  You can also download firmware updates off the<br>
@uref{<a href="http://ftp.digital.com/pub/Digital/Alpha/firmware/readme.html">http://ftp.digital.com/pub/Digital/Alpha/firmware/readme.html</a>,Internet}.<br>
<p>
(Be certain to read through at least the first chapter of the firmware<br>
release notes.  On certain systems, e.g. the AlphaStation 400, you<br>
cannot install SRM from ARC; you must already have SRM installed.  Your<br>
release notes will tell you if this is the case.  It may also be that<br>
the firmware update process is different on your system.)<br>
<p>
If you have the firmware update CD, insert it into the CD-ROM drive.  If<br>
you already have SRM and are trying to upgrade, to start the update<br>
program enter the command @samp{BOOT @var{cdrom-drive}} at the SRM<br>
prompt and hit @key{RET}, replacing @var{cdrom-drive} with the<br>
appropriate device name.  E.g. if your CD-ROM drive is SCSI device 5,<br>
you would enter the command @samp{BOOT DKA5}.  SRM will proceed to load<br>
the firmware update program.  To start the update program from ARC or<br>
AlphaBIOS, restart the system.  From the main boot menu select<br>
``Supplementary menu'', then ``Install new firmware''.  ARC or AlphaBIOS<br>
will proceed to load the firmware update program.<br>
<p>
Once the firmware update program is loaded, do the following to install<br>
or update SRM:<br>
@enumerate<br>
@item Page through the README file or bypass it by typing @kbd{Ctrl-C}.<br>
At the end you will be prompted for the name of the firmware update<br>
image you wish to install.  You can hit @key{RET} to use the default<br>
firmware update program.<br>
<p>
@item Within the firmware update program, type @samp{UPDATE SRM} and hit<br>
@key{RET}.<br>
<p>
@item Now type @samp{VERIFY SRM} and hit @key{RET} to make certain the<br>
firmware was flashed correctly.<br>
<p>
@item Finally, type @samp{QUIT} and hit @key{RET} to exit the update<br>
program.<br>
<p>
@item You @emph{MUST} power the computer down.<br>
@end enumerate<br>
<p>
When you bring the system back up, it should start the new version of<br>
SRM.<br>
<p>
If your system comes with both ARC and SRM installed (e.g. the UDB, also<br>
known as the Multia), or if the newly updated system starts in ARC<br>
instead of SRM, you can switch from ARC to SRM in ARC's setup menu.<br>
<i>&gt;From the main boot menu select ``Supplementary menu'', then ``Set up the</i><br>
system'', and finally ``Switch to Digital UNIX or OpenVMS console''.<br>
When you hardware reset (or power down) your system, SRM will come up.<br>
To switch back to ARC from SRM, type @samp{SET OS_TYPE NT} and hit<br>
@key{RET} at the SRM prompt.  When switching between ARC and SRM, you<br>
may have problems with your system clock.  (@xref{Date Problems}.)<br>
<p>
@node SRM Commands, SRM Variables, Installing SRM, Using SRM<br>
@subsection SRM Commands<br>
<p>
@table @samp<br>
@item BOOT @var{device} [-FILE @var{filename}] [-FLAGS @var{options}]<br>
<p>
This is the all important boot command.  At the very least you must<br>
specify the @var{device} to boot from (a list of possible boot devices<br>
is given with the @samp{SHOW DEVICE} command).  If you are using the<br>
aboot loader, you must specify the @var{filename}, which would be of the<br>
form @var{partition-number}/@var{image-pathname}@footnote{The<br>
partition-number is unnecessary when booting from floppy disk or<br>
CD-ROM.}, e.g. if the fourth partition on the 0th SCSI disk is the root<br>
file system, you would use the command @samp{BOOT DKA0 -FILE<br>
4/vmlinux.gz}.  If you are using the raw boot loader, the @samp{-FILE}<br>
option may safely be omitted.<br>
<p>
Specifying kernel options is slightly more complicated.  Because Linux<br>
uses strings for boot options, you must enclose @var{options} in<br>
double-quotes, e.g. to specify the root file system to be<br>
@file{/dev/sda4} in the above boot command, you would use the command<br>
@samp{BOOT DKA0 -FILE 4/vmlinux.gz -FLAGS "root=/dev/sda4"}, or to boot<br>
this same system in single-user mode, use @samp{BOOT DKA0 -FILE<br>
4/vmlinux.gz -FLAGS "root=/dev/sda4 single"}.<br>
<p>
The SRM console on the Jensen will only allow 8 or 16 characters maximum<br>
in the option string, depending on boot mode.<br>
@file{linux/arch/alpha/kernel/setup.c} specifies the magic option<br>
@samp{INSTALL} (case is significant), which translates to<br>
@samp{root=/dev/fd0 load_ramdisk=1}.<br>
<p>
@item CLEAR @var{variable}<br>
<p>
This command erases @var{variable} from the environment.  @xref{SRM<br>
Variables}, for an incomplete list of environment variables.<br>
<p>
@item CLEAR PASSWORD<br>
<p>
This command clears the console password.  (You will be prompted for the<br>
console password.)<br>
<p>
@item DATE<br>
@itemx DATE @var{yyyymmddhhmm.ss}<br>
<p>
Show system date and time.  With optional argument, set the system<br>
clock.<br>
<p>
@item ICONFIG<br>
<p>
This is the menu interface to the @samp{ISACFG} command.  Use this to<br>
show and set ISA device configuration data.<br>
<p>
@item INIT<br>
This restarts SRM, resetting the hardware.<br>
<p>
@item LOGIN<br>
<p>
If the console is secure, you must log in before you can execute any<br>
other command.  @samp{LOGIN} will prompt you for the console password<br>
and unlock the console for you.<br>
<p>
@item SET @var{variable} @var{value}<br>
<p>
Set @var{variable} to @var{value} in the environment.  @xref{SRM<br>
Variables}, for an incomplete list of environment variables.<br>
<p>
@item SET PASSWORD<br>
<p>
This command sets the console password.  The password must be a minimum<br>
of 15 characters and a maximum of 30.<br>
<p>
@item SHOW<br>
@itemx SHOW @var{variable}<br>
<p>
Without an argument, lists all the environment variables and their<br>
values.  You can pause (resume) the display by typing @kbd{Ctrl-S}<br>
(@kbd{Ctrl-Q}).<br>
<p>
With an argument, lists @var{variable} and its value (if any).  You may<br>
use wild cards here, e.g. @samp{SHOW boot*} will list names and the<br>
values of all the variables whose names start with ``boot''.<br>
<p>
@xref{SRM Variables}, for an incomplete list of environment variables.<br>
<p>
@item SHOW CONFIG<br>
<p>
This gives a complete listing of the system configuration, including all<br>
PCI and configured ISA devices, firmware and PALcode revisions, the<br>
hardware memory configuration, and connected SCSI devices.<br>
<p>
@item SHOW DEVICE<br>
This lists all present bootable devices.<br>
<p>
@item SHOW MEMORY<br>
This lists the hardware memory configuration.<br>
<p>
@item SHOW PAL<br>
This displays the PALcode version numbers.<br>
<p>
@item SHOW VERSION<br>
This displays the SRM version number.<br>
@end table<br>
<p>
@node SRM Variables, The Raw Boot Loader, SRM Commands, Using SRM<br>
@subsection SRM Variables<br>
<p>
SRM environment variables are set with the @samp{SET} command, displayed<br>
with the @samp{SHOW} command, and erased with the @samp{CLEAR} command.<br>
@xref{SRM Commands}, for more details.<br>
<p>
@table @asis<br>
@item AUTO_ACTION<br>
<p>
This specifies what behavior to take when the system is powered on or<br>
the operating system reboots.  This may be set to one of @samp{BOOT},<br>
@samp{HALT}, or @samp{RESET}.  Setting this to @samp{BOOT} causes the<br>
system to boot using the default settings at power-on or hardware-reset.<br>
Setting this to @samp{HALT} causes the system to display the prompt<br>
instead.  I don't know what @samp{RESET} does.  On my system, this is<br>
set to @samp{BOOT}.<br>
<p>
@item BOOTDEF_DEV<br>
<p>
This specifies the default boot device.  Eventually, you will want to<br>
set this to the ID of the drive with the root file system on it.  On my<br>
system, the root file system is on the 1st SCSI disk, so I've set<br>
BOOTDEF_DEV to @samp{DKA1}.<br>
<p>
@item BOOT_FILE<br>
<p>
This specifies the default boot filename.  Eventually, you will want to<br>
set this to the kernel name, which follows the conventions outlined for<br>
the @samp{BOOT} command in @ref{SRM Commands}.  On my system, I'm using<br>
aboot, partition 4 is the root file system, the kernel is installed as<br>
@file{/vmlinux.gz}, so I've set BOOT_FILE to @samp{4/vmlinux.gz}.<br>
<p>
@item BOOT_OSFLAGS<br>
<p>
This specifies the default boot flags.  Setting this variable also<br>
follows the conventions for the @samp{BOOT} command as specified in<br>
@ref{SRM Commands}.  On my system, I pass the @samp{root} option to the<br>
kernel, so I've set this to @samp{"root=/dev/sdb4"}.<br>
<p>
@item BOOT_RESET<br>
<p>
I'm not really certain about what this does or how it interacts with<br>
the AUTO_ACTION variable.  It only has two values, @samp{ON} and<br>
@samp{OFF}, and is set to @samp{ON} on my system.<br>
<p>
@item CONSOLE<br>
<p>
This specifies which device is the system console.  @samp{GRAPHICS}<br>
instructs SRM to use the video display and keyboard; @samp{SERIAL}<br>
directs it to use the first serial port.  If a keyboard is not connected<br>
or a graphics display is not detected, SRM automatically temporarily<br>
switches the console to the first serial port.  This is set to<br>
@samp{GRAPHICS} on my system.<br>
<p>
@item EWA0_ARP_TRIES<br>
<p>
This specifies how many times to attempt a RARP-style address lookup<br>
before hard failing.  This is set to @samp{3} on my system.  SRM is<br>
capable of booting from the network, and I imagine that Ethernet's<br>
Address Resolution Protocol and the Reverse Address Resolution Protocol<br>
are used to obtain the Internet address of the host and of the BOOTP (or<br>
MOP) server.<br>
<p>
@item EWA0_MODE<br>
<p>
This specifies which Ethernet connector to use.  Valid settings are<br>
@samp{Twisted-Pair}, @samp{Full Duplex, Twisted-Pair}, @samp{AUI},<br>
@samp{BNC}, @samp{Fast}, @samp{FastFD} (full duplex), and<br>
@samp{Auto-Negotiate}.  I've set this to @samp{Twisted-Pair} on my<br>
system; the default is @samp{Auto-Negotiate}.<br>
<p>
@item EWA0_PROTOCOLS<br>
<p>
This specifies which protocol to use when attempting to boot from the<br>
network.  @samp{MOP} and @samp{BOOTP} are available.  I describe booting<br>
via MOP in @ref{Netbooting Linux}.  This is set to @samp{MOP} on my<br>
system, although I do not (and never have) boot my Alpha from the<br>
network.<br>
<p>
@item OS_TYPE<br>
<p>
This specifies the default operating system type.  If you are booting<br>
Linux or MILO through SRM, this needs to be set to either @samp{UNIX} or<br>
@samp{OSF} (although it probably doesn't matter, I guess).  If you are<br>
using ARC to start MILO (and then Linux), this needs to be set to<br>
@samp{NT}.  Other valid settings for this variable are @samp{VMS} and<br>
@samp{OpenVMS}.  This is set to @samp{UNIX} on my system (as I use SRM<br>
to boot Linux).<br>
@end table<br>
<p>
<pre>
-- 
Rev. Dr. Xenophon Fenderson, the Carbon(d)ated, KSC, DEATH, SubGenius, mhm21x16
Pope, Patron Saint of All Things Plastic fnord, and Salted Litter of r.g.s.b
"Abraham came not to sacrifice, but to know once and for all whether this God
was a god to be trusted and obeyed. No other test would do." (Fall of Hyperion)
<p>
<pre>
-- 
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="1226.html">Dan Morrill: "ZIP SCSI Support"</a>
<li> <b>Previous message:</b> <a href="1224.html">Henrik Ahlgren: "Re: Gnome 0.30 running on Alpha?"</a>
<li> <b>In reply to:</b> <a href="1217.html">B. James Phillippe: "SRM unplugged"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="1238.html">Jay.Estabrook@digital.com: "Re: SRM unplugged"</a>
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
