<!-- received="Wed Dec 10 13:10:12 1997 " -->
<!-- sent="Wed, 10 Dec 97 12:54:43 -0500" -->
<!-- name="Jerry Feldman" -->
<!-- email="gaf@zk3.dec.com" -->
<!-- subject="Re: Ieee on linux/alpha" -->
<!-- id="9712101754.AA26889@sauron.zk3.dec.com" -->
<!-- inreplyto="m2n2i99tgs.fsf@blinky.bfr.co.il" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Re: Ieee on linux/alpha</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Re: Ieee on linux/alpha</h2>

<b>Jerry Feldman</b> (<a href="mailto:gaf@zk3.dec.com"><i>gaf@zk3.dec.com</i></a>)<br>
<i>Wed, 10 Dec 97 12:54:43 -0500</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#352">[ date ]</a><a href="index.html#352">[ thread ]</a><a href="subject.html#352">[ subject ]</a><a href="author.html#352">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0353.html">khan@fbi003.informatik.fh-hamburg.de: "Re: Ieee on linux/alpha"</a>
<li> <b>Previous message:</b> <a href="0351.html">Craig Burley: "Re: Upgrade"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<!-- body="start" -->
<i>&gt; Uncle George &lt;<a href="mailto:gatgul@voicenet.com">gatgul@voicenet.com</a>&gt; writes:</i><br>
<i>&gt; </i><br>
<i>&gt; &gt; i get the same results.</i><br>
<i>&gt; &gt; </i><br>
<i>&gt; &gt; it looks like the conversion of double to int is not being handled correctly - namely</i><br>
<i>&gt; &gt; the conversion ( cvttq /c ?)  instruction does not have the /s ( software trap</i><br>
<i>&gt; &gt; emulator ) enabled, nor is there a trap instruction after the machine instruction.</i><br>
<i>&gt; &gt; </i><br>
<i>&gt; &gt; this seems to be a compiler bug.</i><br>
Harvey J. Stein &lt;<a href="mailto:hjstein@bfr.co.il">hjstein@bfr.co.il</a>&gt; wrote:<br>
<i>&gt; If it's a compiler bug, then it's also present in egcs-1.0.  I just</i><br>
<i>&gt; tested it with egcs, and divide by zero throws a SIGFPE with &amp; without</i><br>
<i>&gt; -mieee, even though I call ieee_set_fp_control(0) before dividing by</i><br>
<i>&gt; zero.</i><br>
I would probably agree here that not having the /s modifier in the cvttq instruction would be a bug if the program is compiled with the ieee option. <br>
The trap instruction (eg. trapb) is not always necessary. In the alpha, floating point instructions are followed by a "trap shadow". Essentially, if the floating point instruction causes an exception, the exception is raised several instructions beyond the instruction actually causing the exception. The trapb (trap barrier) effectively causes the processor to wait until all currently pipelined instructions complete. If a compiler places a trapb after each fp instruction, it would guarantee the fp code would be slow. In the newest alpha chips, the trap shadow could possibly contain over 100 instructions. The trap shadow rules are listed in the Alpha Architecture manual. The exception handler has to walk back until it finds the trap causing instruction. <br>
+--------------------------------------------------------------------+<br>
Jerry Feldman            Digital Unix Development Environment<br>
Digital Equipment Corp.  (work)gaf@zk3.dec.com (home)gaf@mediaone.net<br>
110 Spitbrook Rd.        Mailstop: ZKO3-2/W17<br>
Nashua, NH 03062-9987    (603)884-2970, DTN:264-2970<br>
+--------------------------------------------------------------------+<br>
 <br>
<p>
<pre>
-- 
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0353.html">khan@fbi003.informatik.fh-hamburg.de: "Re: Ieee on linux/alpha"</a>
<li> <b>Previous message:</b> <a href="0351.html">Craig Burley: "Re: Upgrade"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
