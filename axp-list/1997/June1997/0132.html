<!-- received="Tue Jun  3 10:19:59 1997 " -->
<!-- sent="Tue, 3 Jun 1997 07:14:09 -0700" -->
<!-- name="David Mosberger-Tang" -->
<!-- email="davidm@azstarnet.com" -->
<!-- subject="Re: GDB patch" -->
<!-- id="199706031414.HAA30021@panda.mosberger" -->
<!-- inreplyto="Pine.LNX.3.95.970603093721.14220A-100000@naphta.mb.jhu.edu" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Re: GDB patch</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Re: GDB patch</h2>

<b>David Mosberger-Tang</b> (<a href="mailto:davidm@azstarnet.com"><i>davidm@azstarnet.com</i></a>)<br>
<i>Tue, 3 Jun 1997 07:14:09 -0700</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#132">[ date ]</a><a href="index.html#132">[ thread ]</a><a href="subject.html#132">[ subject ]</a><a href="author.html#132">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0133.html">Przemek Klosowski: "Re: Using a remote X-Server"</a>
<li> <b>Previous message:</b> <a href="0131.html">John Banghart: "INN experts?"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0137.html">Jeff Odom: "Re: GDB patch"</a>
<li> <b>Reply:</b> <a href="0137.html">Jeff Odom: "Re: GDB patch"</a>
<!-- reply="end" -->
</ul>
<!-- body="start" -->
<i>&gt;&gt;&gt;&gt;&gt; On Tue, 3 Jun 1997 09:42:47 -0400 (EDT), Jeff Odom &lt;<a href="mailto:zeus@jhu.edu">zeus@jhu.edu</a>&gt; said:</i><br>
<p>
  Jeff&gt; I've posted a message to the axp mailing list, but I also<br>
  Jeff&gt; wanted to make sure you knew about this. Single-stepping over<br>
  Jeff&gt; malloc() calls seems to crash gdb under alpha.  The problem<br>
  Jeff&gt; seems to come from one of your patches,<br>
<p>
  Jeff&gt; +   * mdebugread.c (parse_symbol): When we find a malloc() symbol with<br>
  Jeff&gt; +     return type VOID, assume no debugging info is available for that<br>
  Jeff&gt; +     object file and patch the return value into VOID *.  Otherwise,<br>
  Jeff&gt; +     operations requiring an implicit call to malloc() will fail.<br>
<p>
  Jeff&gt; where t-&gt;pointer_type for a "void" t is NULL.  Removing the<br>
  Jeff&gt; patch seems to work, but I'm still not convinced that I've<br>
  Jeff&gt; done the right thing.  Obviously you patched the code for a<br>
  Jeff&gt; good reason, and either the problem has been fixed ealier up<br>
  Jeff&gt; the line, or it's been broken further elsewhere.<br>
<p>
  Jeff&gt; Any comments/suggestions?<br>
<p>
I'm don't know why it fails, but the reason I made that patch is so you<br>
can do stuff like:<br>
<p>
	gdb&gt; p printf("Hello World\n")<br>
<p>
(passing the "Hello World\n" string constant causes gdb to implicitly<br>
call malloc()).  It certainly used to work with ECOFF.  With ELF, I<br>
probably always had debug info available while working on these<br>
things, si I never noticed. In other words, it's quite possible that<br>
the problem got introduced during the ELF-&gt;ECOFF switch.<br>
<p>
	--david<br>
<p>
<pre>
--
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0133.html">Przemek Klosowski: "Re: Using a remote X-Server"</a>
<li> <b>Previous message:</b> <a href="0131.html">John Banghart: "INN experts?"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0137.html">Jeff Odom: "Re: GDB patch"</a>
<li> <b>Reply:</b> <a href="0137.html">Jeff Odom: "Re: GDB patch"</a>
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
