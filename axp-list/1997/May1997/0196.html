<!-- received="Tue May  6 12:02:52 1997 " -->
<!-- sent="Tue, 6 May 1997 16:47:42 +0100 (BST)" -->
<!-- name="T. S. Horsnell" -->
<!-- email="tsh@mrc-lmb.cam.ac.uk" -->
<!-- subject="Re: Help! f2c suddenly broken." -->
<!-- id="9705061547.AA15302@alf2.mrc-lmb.cam.ac.uk" -->
<!-- inreplyto="9705061416.AA35090@hellfire.dusers.drexel.edu" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Re: Help! f2c suddenly broken.</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Re: Help! f2c suddenly broken.</h2>

<b>T. S. Horsnell</b> (<a href="mailto:tsh@mrc-lmb.cam.ac.uk"><i>tsh@mrc-lmb.cam.ac.uk</i></a>)<br>
<i>Tue, 6 May 1997 16:47:42 +0100 (BST)</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#196">[ date ]</a><a href="index.html#196">[ thread ]</a><a href="subject.html#196">[ subject ]</a><a href="author.html#196">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0197.html">Mark Hamstra: "Re: Maddog's talk in Dallas"</a>
<li> <b>Previous message:</b> <a href="0195.html">Brian Lund: "16bpp with a s3trio64v+"</a>
<li> <b>In reply to:</b> <a href="0190.html">J: "Help! f2c suddenly broken."</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<!-- body="start" -->
It works for me provided I install the f2c-libs before the f2c.<br>
Otherwise it fails at run-time with:<br>
libf2c.so.0: cannot open shared object file: No such file or directory<br>
<p>
It works in either case if I link -static.<br>
<p>
I have:<br>
<p>
f2c-libs-19960205-6<br>
f2c-19960205-6<br>
gcc-2.7.2.1-2<br>
gcc-c++-2.7.2.1-2<br>
glibc-0.961212-3<br>
glibc-devel-0.961212-3<br>
glibc-static-0.961212-3<br>
<p>
They installed straight out of the box.<br>
<p>
Hope this helps.<br>
--Terry Horsnell.<br>
<p>
<p>
<p>
<p>
<i>&gt;</i><br>
<i>&gt;Help! I suddenly find that I can't compile any fortran programs with f2c.</i><br>
<i>&gt;I'm using RedHat 4.1, with all the updates available as of last week installed.</i><br>
<i>&gt;It used to work, but now any fortran program I try to compile gets a</i><br>
<i>&gt;segmentation fault at startup. For example, the following program</i><br>
<i>&gt;</i><br>
<i>&gt;      PROGRAM SMTEST</i><br>
<i>&gt;      DO 10 I=1, 10</i><br>
<i>&gt;         PRINT *, 'Hello World #', I</i><br>
<i>&gt;10    CONTINUE</i><br>
<i>&gt;      END</i><br>
<i>&gt;</i><br>
<i>&gt;compiled with</i><br>
<i>&gt;</i><br>
<i>&gt;f2c smtest.f</i><br>
<i>&gt;gcc -ggdb -o smtest smtest.c -lf2c</i><br>
<i>&gt;</i><br>
<i>&gt;when run under gdb gives</i><br>
<i>&gt;</i><br>
<i>&gt;(gdb) run</i><br>
<i>&gt;Starting program: /usr/home/sundiver/ftest/smtest </i><br>
<i>&gt;Program received signal SIGSEGV, Segmentation fault.</i><br>
<i>&gt;0x15555674ee8 in t_putc ()</i><br>
<i>&gt;(gdb) bt</i><br>
<i>&gt;#0  0x15555674ee8 in t_putc ()</i><br>
<i>&gt;#1  0x1555567523c in lwrt_A ()</i><br>
<i>&gt;#2  0x1555567594c in l_write ()</i><br>
<i>&gt;#3  0x1555566f670 in do_lio ()</i><br>
<i>&gt;#4  0x120000898 in MAIN__ () at smtest.c:28</i><br>
<i>&gt;#5  0x15555675bf8 in main ()</i><br>
<i>&gt;(gdb) </i><br>
<i>&gt;</i><br>
<i>&gt;</i><br>
<i>&gt;I reinstalled the following packages,</i><br>
<i>&gt;</i><br>
<i>&gt;gcc-2.7.2.1-2.alpha.rpm       </i><br>
<i>&gt;gcc-objc-2.7.2.1-2.alpha.rpm</i><br>
<i>&gt;gcc-c++-2.7.2.1-2.alpha.rpm</i><br>
<i>&gt;glibc-profile-0.961212-3.alpha.rpm</i><br>
<i>&gt;glibc-devel-0.961212-3.alpha.rpm    </i><br>
<i>&gt;glibc-static-0.961212-3.alpha.rpm</i><br>
<i>&gt;glibc-info-0.961212-3.alpha.rpm</i><br>
<i>&gt;glibc-0.961212-4.alpha.rpm</i><br>
<i>&gt;f2c-19960205-6.axp.rpm   </i><br>
<i>&gt;f2c-libs-19960205-6.axp.rpm </i><br>
<i>&gt;</i><br>
<i>&gt;but no go. Things are still broken.</i><br>
<i>&gt;</i><br>
<i>&gt;I also tried recompiling the f2c source RPMs. It doesn't build 'out of the box'</i><br>
<i>&gt;though. One of the I77 header files defines X to be 4, and then X is used</i><br>
<i>&gt;as the name of a stucture member in stdlib.h. Changing the order in which</i><br>
<i>&gt;the headers are included fixes things, but I would think that the source RPM</i><br>
<i>&gt;should compile without modification. Can anyone confirm that the f2c source</i><br>
<i>&gt;RPM is broken, or do I maybe have something wrong with my installation.</i><br>
<i>&gt;Even after fixing this and getting f2c to compile, I still have the same </i><br>
<i>&gt;problem as above.</i><br>
<i>&gt;</i><br>
<i>&gt;This leads me thing that maybe my header files are screwed up somehow, but</i><br>
<i>&gt;I would think reinstalling the above packages would have fixed that.</i><br>
<i>&gt;</i><br>
<i>&gt;Does anyone have any suggestions? I'm kind of desperate here. I need a fortran</i><br>
<i>&gt;compiler. I suppose I could try reinstalling linux, but, unfortunately, I </i><br>
<i>&gt;really don't have the time for that. It took me a few days to get things set</i><br>
<i>&gt;up right the last time I did the install.</i><br>
<i>&gt;</i><br>
<i>&gt;Note that I don't seem to have any problems with c or c++ programs, so gcc</i><br>
<i>&gt;itself seems to be working ok.</i><br>
<i>&gt;</i><br>
<i>&gt;Any help or suggestions would be greatly appreciated. Thanks.</i><br>
<i>&gt;</i><br>
<i>&gt;- J</i><br>
<i>&gt;</i><br>
<i>&gt;--</i><br>
<i>&gt;To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with</i><br>
<i>&gt;'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a></i><br>
<i>&gt;</i><br>
<i>&gt;</i><br>
<p>
<pre>
--
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0197.html">Mark Hamstra: "Re: Maddog's talk in Dallas"</a>
<li> <b>Previous message:</b> <a href="0195.html">Brian Lund: "16bpp with a s3trio64v+"</a>
<li> <b>In reply to:</b> <a href="0190.html">J: "Help! f2c suddenly broken."</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
