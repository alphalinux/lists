<!-- received="Tue May 13 22:17:08 1997 " -->
<!-- sent="Tue, 13 May 1997 20:10:48 -0600" -->
<!-- name="Richard Holmes" -->
<!-- email="holmes@novak.lanl.gov" -->
<!-- subject="gdb problem" -->
<!-- id="199705140210.UAA08801@novak.lanl.gov" -->
<!-- inreplyto="ео	@ео	@requ" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>gdb problem</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>gdb problem</h2>

<b>Richard Holmes</b> (<a href="mailto:holmes@novak.lanl.gov"><i>holmes@novak.lanl.gov</i></a>)<br>
<i>Tue, 13 May 1997 20:10:48 -0600</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#448">[ date ]</a><a href="index.html#448">[ thread ]</a><a href="subject.html#448">[ subject ]</a><a href="author.html#448">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0449.html">Alpha Linux: "UDB power supply"</a>
<li> <b>Previous message:</b> <a href="0447.html">Shen Chang: "Re: tga server"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0469.html">Richard Holmes: "Re: gdb problem"</a>
<li> <b>Maybe reply:</b> <a href="0469.html">Richard Holmes: "Re: gdb problem"</a>
<!-- reply="end" -->
</ul>
<!-- body="start" -->
Hello,<br>
<p>
I have a problem with gdb that perhaps someone can solve.  <br>
<p>
I compiled the following code with gcc 2.7.2.1 using the -g flag<br>
<p>
<p>
#include &lt;stdio.h&gt;<br>
double f();<br>
<p>
int	main(void)<br>
{<br>
double	x;<br>
<p>
	x = f();<br>
<p>
	printf("x = %lf\n", x);<br>
}<br>
<p>
double	f()<br>
{<br>
	return 1.0;<br>
}<br>
<p>
<p>
It will print the proper value , 1.0000, if I run it.  If, however,<br>
I use gdb I can get some strange behavior.  I have a typescript at the<br>
end of the message that shows all the gory details, but basically<br>
what I did was put breakpoints on the "x = f();" and "printf ... " lines.<br>
If I run to the first breakpoint, use the continue command to execute<br>
the function and let it stop at the second breakpoint.  If I print x<br>
I get 1, as I should.  However, if intead of using continue to get<br>
through the function I use next I get garbage when I print x.<br>
<p>
Any idea what might be happening?  I'm using gdb 4.16 that came from<br>
the gdb-4.16-6.axp.rpm RPM.  I'm running it on an Alpha PC164 using<br>
the 2.0.27 kernel.  <br>
<p>
<p>
Thanks,<br>
Rich<br>
<p>
<p>
Script started on Tue May 13 19:54:26 1997<br>
nancy 267&gt; gdb a.out<br>
GDB is free software and you are welcome to distribute copies of it<br>
 under certain conditions; type "show copying" to see the conditions<br>
There is absolutely no warranty for GDB; type "show warranty" for details.<br>
GDB 4.16 (alpha-unknown-linux), Copyright 1996 Free Software Foundation, Inc...<br>
(gdb) l 1,16<br>
1	#include &lt;stdio.h&gt;<br>
2	double f();<br>
3	<br>
4	int	main(void)<br>
5	{<br>
6	double	x;<br>
7	<br>
8		x = f();<br>
9	<br>
10		printf("x = %lf\n", x);<br>
11	}<br>
12	<br>
13	double	f()<br>
14	{<br>
15		return 1.0;<br>
16	}<br>
(gdb) break 8<br>
Breakpoint 1 at 0x1200008f8: file test.c, line 8.<br>
(gdb) break 10<br>
Breakpoint 2 at 0x120000910: file test.c, line 10.<br>
(gdb) r<br>
Starting program: /home/holmes/test/a.out <br>
<p>
Breakpoint 1, main () at test.c:8<br>
8		x = f();<br>
(gdb) next<br>
10		printf("x = %lf\n", x);<br>
(gdb) p x<br>
$1 = -2.8638903918474961e+250<br>
(gdb) r<br>
The program being debugged has been started already.<br>
Start it from the beginning? (y or n) y<br>
Starting program: /home/holmes/test/a.out <br>
<p>
Breakpoint 1, main () at test.c:8<br>
8		x = f();<br>
(gdb) c<br>
Continuing.<br>
<p>
Breakpoint 2, main () at test.c:10<br>
10		printf("x = %lf\n", x);<br>
(gdb) p x<br>
$2 = 1<br>
(gdb) quit<br>
The program is running.  Quit anyway (and kill it)? (y or n) y<br>
nancy 268&gt; exit<br>
<p>
Script done on Tue May 13 19:55:42 1997<br>
<p>
---------------------------------------<br>
Richard Holmes<br>
Los Alamos National Laboratory<br>
Group XTA  <br>
MS B220<br>
Los Alamos, NM  87545<br>
(505) 667-3598<br>
<a href="mailto:holmes@lanl.gov">holmes@lanl.gov</a><br>
<p>
<pre>
--
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0449.html">Alpha Linux: "UDB power supply"</a>
<li> <b>Previous message:</b> <a href="0447.html">Shen Chang: "Re: tga server"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0469.html">Richard Holmes: "Re: gdb problem"</a>
<li> <b>Maybe reply:</b> <a href="0469.html">Richard Holmes: "Re: gdb problem"</a>
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
