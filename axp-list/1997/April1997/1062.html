<!-- received="Thu Apr 24 18:38:44 1997 " -->
<!-- sent="Thu, 24 Apr 97 23:59:35 +0200" -->
<!-- name="Toon Moene" -->
<!-- email="toon@moene.indiv.nluug.nl" -->
<!-- subject="Re: g77 experience (now with comment on NDP f77)" -->
<!-- id="9704242159.AA25013@moene.indiv.nluug.nl" -->
<!-- inreplyto="g77 experience (now with comment on NDP f77)" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Re: g77 experience (now with comment on NDP f77)</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Re: g77 experience (now with comment on NDP f77)</h2>

<b>Toon Moene</b> (<a href="mailto:toon@moene.indiv.nluug.nl"><i>toon@moene.indiv.nluug.nl</i></a>)<br>
<i>Thu, 24 Apr 97 23:59:35 +0200</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#1062">[ date ]</a><a href="index.html#1062">[ thread ]</a><a href="subject.html#1062">[ subject ]</a><a href="author.html#1062">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="1063.html">Uncle George: "Re: Req. for info: Enorex Ultra PC Linux compatibility"</a>
<li> <b>Previous message:</b> <a href="1061.html">jestabro@amt.tay1.dec.com: "Re: can't init network (on PWS433a 21x4x)"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<!-- body="start" -->
Harold Youngren wrote:<br>
<p>
<i>&gt;  First, the only posted timings I have seen only involve</i><br>
<i>&gt;  the DEC C and gcc, not f2c/gcc and f77.  The bottom line</i><br>
<i>&gt;  here is that a native Fortran compiler can optimize far</i><br>
<i>&gt;  better than a C compiler and you see this in the</i><br>
<i>&gt;  comparisons of f2c/cc and f77 on any platform with a good</i><br>
<i>&gt;  native fortran compiler.</i><br>
<p>
First of all, the correct comparison is between g77 and DEC f77 (or  <br>
f90).  Granted, it is not easy to build g77 on an ELF Alpha Linux  <br>
system (due to the fact that the author only has an old ECOFF  <br>
system).<br>
<p>
<i>&gt;  I just chose the LINPACK as a standard of comparison</i><br>
<i>&gt;  (this LINPACK was the undoctored benchmark from standard</i><br>
<i>&gt;  net sources, like ORNL, with the sizes increased to</i><br>
<i>&gt;  400/401 to get reliable timing) because everybody could</i><br>
<i>&gt;  get it.  The difference between DEC f77/f90 and f2c/gcc</i><br>
<i>&gt;  is really 2x-3x for most any of the "real-life" fortran</i><br>
<i>&gt;  codes that I have worked with, including big 3D Euler</i><br>
<i>&gt;  and NS codes.  When you crank up the optimization on the</i><br>
<i>&gt;  DEC compiler and play with the loop unrolling you get a</i><br>
<i>&gt;  big speedup.</i><br>
<p>
Note that on my system, for some codes, I get a 2 fold speedup  <br>
between g77 and f2c/gcc.  The difference is mainly the default  <br>
optimisations g77 will perform vs. the default for f2c/gcc (i.e.,  <br>
g77 -O2 != f2c/gcc -O2).<br>
<p>
Also note that you don't have "to play with loop unrolling" with  <br>
Digital's Fortran compiler - it will do that from optimisation level  <br>
-O3 onwards, no questions asked (-O4 is the default optimisation,  <br>
i.e. that what you get when you specify no particular optimisation  <br>
on the command line).<br>
<p>
g77 (and gcc) require an explicit -funroll-loops to do loop  <br>
unrolling (the rational here is that this will increase code size  <br>
and hence shouldn't be done "automatically").<br>
<p>
[ .... KAP discussion elided ..... ]<br>
<p>
<i>&gt;&gt;On the other hand if your codes are not of a LINPACK type then</i><br>
<i>&gt;&gt;people using f2c/gcc do not seem to fare too badly. :-)</i><br>
<p>
<i>&gt;  This is misleading.  You can't just brush off the speed</i><br>
<i>&gt;  differences between f2c/gcc and DEC f77 to the libraries</i><br>
<i>&gt;  either as most simple math operations such as these</i><br>
<i>&gt;  matrix/vector operations don't make library calls for</i><br>
<i>&gt;  anything in the main loops, this is just simple code</i><br>
<i>&gt;  optimization and scheduling.  The optimized BLAS would</i><br>
<i>&gt;  give big speedups for only the calls to the libraries</i><br>
<i>&gt;  which would be pretty good for codes which are written</i><br>
<i>&gt;  specifically around the BLAS but would not help the code</i><br>
<i>&gt;  that doesn't involve the BLAS calls.</i><br>
<p>
Concur with that.<br>
<p>
<pre>
--
Toon Moene (<a href="mailto:toon@moene.indiv.nluug.nl">mailto:toon@moene.indiv.nluug.nl</a>)
Saturnushof 14, 3738 XG  Maartensdijk, The Netherlands
Phone: +31 346 214290; Fax: +31 346 214286
g77 Support: <a href="mailto:fortran@gnu.ai.mit.edu;">mailto:fortran@gnu.ai.mit.edu;</a> NWP:  
<a href="http://www.knmi.nl/hirlam">http://www.knmi.nl/hirlam</a>
<p>
<pre>
--
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="1063.html">Uncle George: "Re: Req. for info: Enorex Ultra PC Linux compatibility"</a>
<li> <b>Previous message:</b> <a href="1061.html">jestabro@amt.tay1.dec.com: "Re: can't init network (on PWS433a 21x4x)"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
