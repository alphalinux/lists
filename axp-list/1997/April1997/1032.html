<!-- received="Thu Apr 24 08:06:06 1997 " -->
<!-- sent="Thu, 24 Apr 97 07:57:19 -0400" -->
<!-- name="Harold H.Youngren" -->
<!-- email="guppy@maine.com" -->
<!-- subject="Re: g77 experience (now with comment on NDP f77)" -->
<!-- id="9704241157.AA00276@maine.com" -->
<!-- inreplyto="g77 experience (now with comment on NDP f77)" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Re: g77 experience (now with comment on NDP f77)</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Re: g77 experience (now with comment on NDP f77)</h2>

<b>Harold H.Youngren</b> (<a href="mailto:guppy@maine.com"><i>guppy@maine.com</i></a>)<br>
<i>Thu, 24 Apr 97 07:57:19 -0400</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#1032">[ date ]</a><a href="index.html#1032">[ thread ]</a><a href="subject.html#1032">[ subject ]</a><a href="author.html#1032">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="1033.html">Ben Scott: "Re: Help!run Netscape in Linux/alpha"</a>
<li> <b>Previous message:</b> <a href="1031.html">Uncle George: "Re: Req. for info: Enorex Ultra PC Linux compatibility"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<!-- body="start" -->
Michal Jaegermann responded with:<br>
<p>
<i>&gt;&gt; </i><br>
<p>
<i>&gt;&gt; The fortran situation under Linux/Alpha is pretty bleak, that is why I run  </i><br>
DEC  <br>
<p>
<i>&gt;&gt; OSF and the DEC f77/f90 for my work.  If you use f2c/gcc you can expect to  </i><br>
get  <br>
<p>
<i>&gt;&gt; about 40 MFLOPS out of a LINPACK benchmark (that runs at 140 MFLOPS on DEC  </i><br>
<p>
<i>&gt;&gt; f77!).</i><br>
<p>
<i>&gt;I would strongly suspect that you see in these numbers not so</i><br>
<i>&gt;a difference in compilers but an essential difference in libraries.</i><br>
<i>&gt;Posted timings when really compilers were involved did not show up</i><br>
<i>&gt;such dramatic differences even if DEC compiler was faster (something</i><br>
<i>&gt;of an order of 10-15 %, which is still hard to disregard).</i><br>
<p>
First, the only posted timings I have seen only involve the DEC C and gcc, not  <br>
f2c/gcc and f77.  The bottom line here is that a native Fortran compiler can  <br>
optimize far better than a C compiler and you see this in the comparisons of  <br>
f2c/cc and f77 on any platform with a good native fortran compiler.<br>
<p>
I just chose the LINPACK as a standard of comparison (this LINPACK was the  <br>
undoctored benchmark from standard net sources, like ORNL, with the sizes  <br>
increased to 400/401 to get reliable timing) because everybody could get it.   <br>
The difference between DEC f77/f90 and f2c/gcc is really 2x-3x for most any of  <br>
the "real-life" fortran codes that I have worked with, including big 3D Euler  <br>
and NS codes.  When you crank up the optimization on the DEC compiler and play  <br>
with the loop unrolling you get a big speedup.  You can get more if you put the  <br>
source through a source optimizer like KAP, here I am guided by discussions  <br>
with Microway's Steve Fried who has worked with KAP alot, I don't have it.  I  <br>
understand that the DEC DXML was tuned up to its extreme speeds using KAP and  <br>
lots and lots of comparison runs varying tuning parameters.<br>
<p>
This fortran speedup is much greater than the speed differences between DEC C  <br>
and gcc, most of the time DEC C will be faster (for example I have an LU  <br>
decomposition benchmark that gets 40 MFLOPS or so with f2c/gcc which gets 65  <br>
MFLOPS with f2c/DEC C.  On the other hand Mesa runs roughly 5% faster when  <br>
compiled with gcc2.7.2 rather than DEC C.  Go figure.<br>
<p>
<i>&gt;As a corollary to the above I would not expect miracles until higly</i><br>
<i>&gt;optimized BLAS libraries will be available for GNU compilers.</i><br>
<i>&gt;At some moment there was a talk that maybe Linux users will get</i><br>
<i>&gt;an access to binaries of some DEC math libraries, not necessarily</i><br>
<i>&gt;for free, but somehow things failed to materialize.</i><br>
<p>
<i>&gt;On the other hand if your codes are not of a LINPACK type then</i><br>
<i>&gt;people using f2c/gcc do not seem to fare too badly. :-)</i><br>
<p>
This is misleading.  You can't just brush off the speed differences between  <br>
f2c/gcc and DEC f77 to the libraries either as most simple math operations such  <br>
as these matrix/vector operations don't make library calls for anything in the  <br>
main loops, this is just simple code optimization and scheduling.  The  <br>
optimized BLAS would give big speedups for only the calls to the libraries  <br>
which would be pretty good for codes which are written specifically around the  <br>
BLAS but would not help the code that doesn't involve the BLAS calls.   <br>
<p>
<p>
Regards,<br>
Hal Y. <br>
<p>
<pre>
--
<p>
*************************************************************
* Harold Youngren   ----&gt; Internet: <a href="mailto:guppy@maine.com">guppy@maine.com</a>         *
* 129 Pitt St,                  or: <a href="mailto:guppy@netcom.com">guppy@netcom.com</a>        *
* Portland, ME  04103     AeroCraft Consulting              *
* Home: (207)871-0552     Aeronautical Consulting, Analysis,*
* Fax:  (207)871-1034     Design, CFD software              *
*************************************************************
<p>
 
<p>
<pre>
--
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="1033.html">Ben Scott: "Re: Help!run Netscape in Linux/alpha"</a>
<li> <b>Previous message:</b> <a href="1031.html">Uncle George: "Re: Req. for info: Enorex Ultra PC Linux compatibility"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
