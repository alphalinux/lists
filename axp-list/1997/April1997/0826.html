<!-- received="Sat Apr 19 21:18:00 1997 " -->
<!-- sent="Sat, 19 Apr 1997 19:14:24 -0600 (MDT)" -->
<!-- name="Michal Jaegermann" -->
<!-- email="michal@ellpspace.math.ualberta.ca" -->
<!-- subject="binaries of ef2progs-1.09 for Alpha" -->
<!-- id="199704200114.TAA00886@ellpspace.math.ualberta.ca" -->
<!-- inreplyto="ео	@ео	@request@redhat.com with
(" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>binaries of ef2progs-1.09 for Alpha</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>binaries of ef2progs-1.09 for Alpha</h2>

<b>Michal Jaegermann</b> (<a href="mailto:michal@ellpspace.math.ualberta.ca"><i>michal@ellpspace.math.ualberta.ca</i></a>)<br>
<i>Sat, 19 Apr 1997 19:14:24 -0600 (MDT)</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#826">[ date ]</a><a href="index.html#826">[ thread ]</a><a href="subject.html#826">[ subject ]</a><a href="author.html#826">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0827.html">H.J. Lu: "Re: autofs"</a>
<li> <b>Previous message:</b> <a href="0825.html">Dennis Pantazis: "Mice was RE: serial ports"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0832.html">Ximenes: "Re: binaries of ef2progs-1.09 for Alpha"</a>
<li> <b>Reply:</b> <a href="0832.html">Ximenes: "Re: binaries of ef2progs-1.09 for Alpha"</a>
<li> <b>Reply:</b> <a href="0861.html">Theodore Y. Ts'o: "Re: binaries of ef2progs-1.09 for Alpha"</a>
<li> <b>Reply:</b> <a href="0966.html">Theodore Y. Ts'o: "Re: binaries of ef2progs-1.09 for Alpha"</a>
<!-- reply="end" -->
</ul>
<!-- body="start" -->
I just left on ftp.redhat.com, in pub/Icoming, two archives of<br>
binaries for Linux/Alpha (as Incoming is unlistable and it is up<br>
to Red Hat to move them somewhere where they can be reached):<br>
<p>
e2fsprogs-1.09-0.alpha.rpm<br>
e2fsprogs-devel-1.09-0.alpha.rpm<br>
<p>
These programs are recompiled from the latest 1.09 relase of e2fsprogs<br>
by Theodore Y. Ts'o (<a href="mailto:tytso@mit.edu">tytso@mit.edu</a>).  They pass all 39 tests mandated<br>
by 'make check'.  Sources can be found, as usual, on tsx-11.mit.edu in<br>
linux/packages/ext2fs.<br>
<p>
There is one small problem, though.  I do not know if my headers on<br>
Alpha are in a sorry state, or this is more general (if you know<br>
please tell me).  I could not recompile these programs until I did the<br>
following modification in sources (which do not look right, but were<br>
necessary):<br>
<p>
diff -ur orig/e2fsprogs-1.09/e2fsck/ehandler.c e2fsprogs-1.09/e2fsck/ehandler.c<br>
--- orig/e2fsprogs-1.09/e2fsck/ehandler.c	Wed Oct 25 19:18:05 1995<br>
+++ e2fsprogs-1.09/e2fsck/ehandler.c	Sat Apr 19 16:58:31 1997<br>
@@ -15,7 +15,7 @@<br>
 #include "e2fsck.h"<br>
 <br>
 #include &lt;sys/time.h&gt;<br>
-#include &lt;sys/resource.h&gt;<br>
+#include &lt;linux/resource.h&gt;<br>
 <br>
 static const char *operation;<br>
 <br>
diff -ur orig/e2fsprogs-1.09/e2fsck/util.c e2fsprogs-1.09/e2fsck/util.c<br>
--- orig/e2fsprogs-1.09/e2fsck/util.c	Fri Mar  7 11:33:41 1997<br>
+++ e2fsprogs-1.09/e2fsck/util.c	Sat Apr 19 16:58:20 1997<br>
@@ -18,7 +18,7 @@<br>
 #include "e2fsck.h"<br>
 <br>
 #include &lt;sys/time.h&gt;<br>
-#include &lt;sys/resource.h&gt;<br>
+#include &lt;linux/resource.h&gt;<br>
 <br>
 const char * fix_msg[2] = { "IGNORED", "FIXED" };<br>
 <br>
@@ -174,6 +174,7 @@<br>
 	exit(FSCK_UNCORRECTED);<br>
 }<br>
 <br>
+# define RUSAGE_SELF __KERNEL_RUSAGE_SELF<br>
 void init_resource_track(struct resource_track *track)<br>
 {<br>
 #ifdef HAVE_GETRUSAGE<br>
<p>
I also had to do this change in my headers:<br>
<p>
--- /usr/include/linux/time.h~	Sat Dec 21 17:58:47 1996<br>
+++ /usr/include/linux/time.h	Sat Apr 19 16:27:35 1997<br>
@@ -9,6 +9,7 @@<br>
 #define	__KERNEL_ITIMER_VIRTUAL	1<br>
 #define	__KERNEL_ITIMER_PROF	2<br>
 <br>
+#ifndef _SYS_TIME_H<br>
 struct timeval {<br>
 	int	tv_sec;		/* seconds */<br>
 	int	tv_usec;	/* microseconds */<br>
@@ -23,6 +24,7 @@<br>
 	struct	timeval it_interval;	/* timer interval */<br>
 	struct	timeval it_value;	/* current value */<br>
 };<br>
+#endif<br>
 <br>
 #ifdef __KERNEL__<br>
 void do_gettimeofday(struct timeval *tv);<br>
<p>
Otherwise 'timeval' and two other structures were getting a double<br>
definition and gcc was barfing on me.<br>
<p>
I also know why I dislike a way of compiling with a help of rpm<br>
(if somebody knows more reasonable way to create packages I am all<br>
ears).  If something will go wrong and has to be fixed then rpm<br>
starts everything from scracth and its first action is to clobber<br>
your modified sources with an old copy from .tar.gz file. Big sigh!<br>
Anybody know some way to restart this process in the middle?<br>
<p>
Beyond that things seem to be peachy. :-) In particular I just "yanked<br>
a cord" on Alpha system with a freshly installed new fsck to see if it<br>
will recover.  It did. :-) "Unaligned access" warnings are gone, as<br>
far as I can tell, but checks seemed to be on a slow side despite<br>
Ted's comments in sources which seem to indicate that this should not<br>
be the case anymore.<br>
<p>
  Enjoy,<br>
  Michal<br>
<p>
<pre>
--
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0827.html">H.J. Lu: "Re: autofs"</a>
<li> <b>Previous message:</b> <a href="0825.html">Dennis Pantazis: "Mice was RE: serial ports"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0832.html">Ximenes: "Re: binaries of ef2progs-1.09 for Alpha"</a>
<li> <b>Reply:</b> <a href="0832.html">Ximenes: "Re: binaries of ef2progs-1.09 for Alpha"</a>
<li> <b>Reply:</b> <a href="0861.html">Theodore Y. Ts'o: "Re: binaries of ef2progs-1.09 for Alpha"</a>
<li> <b>Reply:</b> <a href="0966.html">Theodore Y. Ts'o: "Re: binaries of ef2progs-1.09 for Alpha"</a>
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
