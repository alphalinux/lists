<!-- received="Mon Sep 29 10:48:21 1997 " -->
<!-- sent="Mon, 29 Sep 97 19:51:44 +0200" -->
<!-- name="Toon Moene" -->
<!-- email="toon@moene.indiv.nluug.nl" -->
<!-- subject="Re: Profiling still broken?" -->
<!-- id="9709291751.AA16877@moene.indiv.nluug.nl" -->
<!-- inreplyto="Profiling still broken?" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Re: Profiling still broken?</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Re: Profiling still broken?</h2>

<b>Toon Moene</b> (<a href="mailto:toon@moene.indiv.nluug.nl"><i>toon@moene.indiv.nluug.nl</i></a>)<br>
<i>Mon, 29 Sep 97 19:51:44 +0200</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#582">[ date ]</a><a href="index.html#582">[ thread ]</a><a href="subject.html#582">[ subject ]</a><a href="author.html#582">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0583.html">Michael W. Chalkley: "Memory type for Cabriolet and some general questions?"</a>
<li> <b>Previous message:</b> <a href="0581.html">Toon Moene: "Re: g77-0.5.21 on UDB - how to debug it ?"</a>
<li> <b>Maybe in reply to:</b> <a href="0577.html">Harvey J. Stein: "Profiling still broken?"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0597.html">Toon Moene: "Re: Profiling still broken?"</a>
<!-- reply="end" -->
</ul>
<!-- body="start" -->
Harvey,<br>
<p>
<i>&gt;  Is profiling working now?  I saw various discussions in</i><br>
<i>&gt;  the axp-list archive about broken profiling, but they</i><br>
<i>&gt;  seemed to be fairly old and have been resolved.  None</i><br>
<i>&gt;  the less, I'm still having trouble using profiling.</i><br>
<i>&gt;</i><br>
<i>&gt;  Basically, if I compile with -pg then the program</i><br>
<i>&gt;  segfaults in __i333_set_fp_control.  If I compile with</i><br>
<i>&gt;  -p then the program runs but gprof can't process the</i><br>
<i>&gt;  profiling file, and I don't seem to have a prof program.</i><br>
<p>
<i>&gt;  This is with gcc-2.7.2.1-2b, which is rpm 2.7.2.1-2 +</i><br>
<i>&gt;  Richard Henderson's recently distributed patch,</i><br>
<i>&gt;  glibc-0.961212-5, and kernel-source-2.0.30-3.  I.e. - a</i><br>
<i>&gt;  fairly straight forward RedHat 4.2 + the recent gcc patch.</i><br>
<p>
Well, I don't know for sure, because I don't know what's in "the  <br>
recent gcc patch", but there is (still) a problem in gcc with  <br>
respect to profiling.  The symptom is that C code with nested  <br>
functions (of which glibc seems to use a lot) has a fairly good  <br>
chance of dying with a segmentation violation.<br>
<p>
For instance, g77-0.5.21 has a change in the code of  <br>
profile_function in final.c that fixes this in gcc-2.7.2.3, so  <br>
apparently all publicly available gcc's have this bug.<br>
<p>
The problem is that the static chain pointer has to be saved around  <br>
the calls of mcount that profiling inserts.<br>
<p>
HTH,<br>
Toon.<br>
<p>
<pre>
--
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0583.html">Michael W. Chalkley: "Memory type for Cabriolet and some general questions?"</a>
<li> <b>Previous message:</b> <a href="0581.html">Toon Moene: "Re: g77-0.5.21 on UDB - how to debug it ?"</a>
<li> <b>Maybe in reply to:</b> <a href="0577.html">Harvey J. Stein: "Profiling still broken?"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0597.html">Toon Moene: "Re: Profiling still broken?"</a>
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
