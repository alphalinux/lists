<!-- received="Thu Jul 31 13:48:31 1997 " -->
<!-- sent="Thu, 31 Jul 1997 13:45:41 -0400 (EDT)" -->
<!-- name="Alvin Starr" -->
<!-- email="alvin@iplink.net" -->
<!-- subject="Re: isapnptools" -->
<!-- id="199707311545.LAA18338@mailrelay.tiac.net" -->
<!-- inreplyto="19970731090734.18139@maroon.scd.ucar.edu" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Re: isapnptools</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Re: isapnptools</h2>

<b>Alvin Starr</b> (<a href="mailto:alvin@iplink.net"><i>alvin@iplink.net</i></a>)<br>
<i>Thu, 31 Jul 1997 13:45:41 -0400 (EDT)</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#712">[ date ]</a><a href="index.html#712">[ thread ]</a><a href="subject.html#712">[ subject ]</a><a href="author.html#712">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0713.html">Ryan Kirkpatrick: "Rescue disks for Linux/Alpha..."</a>
<li> <b>Previous message:</b> <a href="0711.html">J. Aaron Holmes: "NOVICE Q: hd hashing."</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<!-- body="start" -->
On Thu, 31 Jul 1997, Craig Ruff wrote:<br>
<p>
<i>&gt; </i><br>
<i>&gt; I'd like to see your patches for isapnp!  Thanks.</i><br>
<i>&gt; -- </i><br>
Here are the patches as applied to 1.11<br>
<p>
<p>
Alvin Starr                   ||   voice: (416)493-3325<br>
Interlink Connectivity        ||   fax:   (416)493-7974<br>
<a href="mailto:alvin@iplink.net">alvin@iplink.net</a>              ||<br>
Index: isapnptools/Makefile<br>
diff -c isapnptools/Makefile:1.1.1.2 isapnptools/Makefile:1.4<br>
*** isapnptools/Makefile:1.1.1.2	Thu Jul 31 11:50:37 1997<br>
--- isapnptools/Makefile	Thu Jul 31 13:39:13 1997<br>
***************<br>
*** 36,42 ****<br>
  #                the code will ignore these defines if it detects<br>
  #                glibc 2.0 or later.<br>
  #<br>
! PNPFLAGS += -DREALTIME -DNEEDSETSCHEDULER -DNEEDNANOSLEEP<br>
  #<br>
  # Set this if cross-compiling for DOS using djgpp<br>
  #<br>
--- 36,42 ----<br>
  #                the code will ignore these defines if it detects<br>
  #                glibc 2.0 or later.<br>
  #<br>
! PNPFLAGS += -DYY_SKIP_YYWRAP #-DREALTIME -DNEEDSETSCHEDULER -DNEEDNANOSLEEP<br>
  #<br>
  # Set this if cross-compiling for DOS using djgpp<br>
  #<br>
Index: isapnptools/isapnp.8<br>
diff -c isapnptools/isapnp.8:1.1.1.1 isapnptools/isapnp.8:1.3<br>
*** isapnptools/isapnp.8:1.1.1.1	Thu Jul 31 11:45:10 1997<br>
--- isapnptools/isapnp.8	Thu Jul 31 12:08:09 1997<br>
***************<br>
*** 2,8 ****<br>
  .\" This program is distributed according to the Gnu General Public License.<br>
  .\" See the file COPYING in the isapnptools source distribution.<br>
  .\"<br>
! .\" $Id: isapnp.8,v 1.1.1.1 1997/07/31 15:45:10 alvin Exp $<br>
  .\"<br>
  .TH ISAPNP 8 "14 Jan 1997" "isapnptools"<br>
  .SH NAME<br>
--- 2,8 ----<br>
  .\" This program is distributed according to the Gnu General Public License.<br>
  .\" See the file COPYING in the isapnptools source distribution.<br>
  .\"<br>
! .\" $Id: isapnp.8,v 1.3 1997/07/31 16:08:09 alvin Exp $<br>
  .\"<br>
  .TH ISAPNP 8 "14 Jan 1997" "isapnptools"<br>
  .SH NAME<br>
Index: isapnptools/isapnp.conf.5<br>
diff -c isapnptools/isapnp.conf.5:1.1.1.2 isapnptools/isapnp.conf.5:1.3<br>
*** isapnptools/isapnp.conf.5:1.1.1.2	Thu Jul 31 11:50:43 1997<br>
--- isapnptools/isapnp.conf.5	Thu Jul 31 12:08:11 1997<br>
***************<br>
*** 2,8 ****<br>
  .\" This program is distributed according to the Gnu General Public License.<br>
  .\" See the file COPYING in the isapnptools source distribution.<br>
  .\"<br>
! .\" $Id: isapnp.conf.5,v 1.1.1.2 1997/07/31 15:50:43 alvin Exp $<br>
  .\"<br>
  .TH ISAPNP.CONF 5 "10 Jun 1997" "isapnptools"<br>
  .SH NAME<br>
--- 2,8 ----<br>
  .\" This program is distributed according to the Gnu General Public License.<br>
  .\" See the file COPYING in the isapnptools source distribution.<br>
  .\"<br>
! .\" $Id: isapnp.conf.5,v 1.3 1997/07/31 16:08:11 alvin Exp $<br>
  .\"<br>
  .TH ISAPNP.CONF 5 "10 Jun 1997" "isapnptools"<br>
  .SH NAME<br>
Index: isapnptools/isapnp.y<br>
diff -c isapnptools/isapnp.y:1.1.1.2 isapnptools/isapnp.y:1.4<br>
*** isapnptools/isapnp.y:1.1.1.2	Thu Jul 31 11:50:40 1997<br>
--- isapnptools/isapnp.y	Thu Jul 31 13:39:14 1997<br>
***************<br>
*** 24,30 ****<br>
  <br>
  #include "pnp.h"<br>
  <br>
! static char rcsid[] = "$Id: isapnp.y,v 1.1.1.2 1997/07/31 15:50:40 alvin Exp $";<br>
  <br>
  #ifdef REALTIME<br>
  /*<br>
--- 24,30 ----<br>
  <br>
  #include "pnp.h"<br>
  <br>
! static char rcsid[] = "$Id: isapnp.y,v 1.4 1997/07/31 17:39:14 alvin Exp $";<br>
  <br>
  #ifdef REALTIME<br>
  /*<br>
***************<br>
*** 197,202 ****<br>
--- 197,206 ----<br>
  void yy_flex_free(void *ptr){(void)free(ptr);}<br>
  #endif /* _OS2_ */<br>
  <br>
+ #ifdef __alpha__<br>
+ unsigned _ioperm(unsigned port, daddr_t a, unsigned b);<br>
+ #endif<br>
+ <br>
  #ifdef __DJGPP__<br>
  unsigned ioperm(unsigned port, unsigned a, unsigned b){return(0);}<br>
  unsigned iopl(unsigned port){return(0);}<br>
***************<br>
*** 1096,1107 ****<br>
--- 1100,1115 ----<br>
  		exit(1);<br>
  	}<br>
  	/* Have to get unrestricted access to io ports, as WRITE_DATA port &gt; 0x3ff */<br>
+ #ifndef __alpha__<br>
  	if(iopl(3) &lt; 0)<br>
  	{	<br>
  		perror("Unable to get io permission for WRITE_DATA");<br>
  		ioperm(ADDRESS_ADDR, 1, 0);<br>
  		exit(1);<br>
  	}<br>
+ #else<br>
+ 	_ioperm (0, 0x10000, 1);<br>
+ #endif<br>
  	retval = 0;<br>
  	yyin = fopen(argv[1], "r");<br>
  	yylex();<br>
Index: isapnptools/pnpdump.8<br>
diff -c isapnptools/pnpdump.8:1.1.1.2 isapnptools/pnpdump.8:1.3<br>
*** isapnptools/pnpdump.8:1.1.1.2	Thu Jul 31 11:50:44 1997<br>
--- isapnptools/pnpdump.8	Thu Jul 31 12:08:13 1997<br>
***************<br>
*** 2,8 ****<br>
  .\" This program is distributed according to the Gnu General Public License.<br>
  .\" See the file COPYING in the isapnptools source distribution.<br>
  .\"<br>
! .\" $Id: pnpdump.8,v 1.1.1.2 1997/07/31 15:50:44 alvin Exp $<br>
  .\"<br>
  .TH PNPDUMP 8 "14 Jul 1997" "isapnptools"<br>
  .SH NAME<br>
--- 2,8 ----<br>
  .\" This program is distributed according to the Gnu General Public License.<br>
  .\" See the file COPYING in the isapnptools source distribution.<br>
  .\"<br>
! .\" $Id: pnpdump.8,v 1.3 1997/07/31 16:08:13 alvin Exp $<br>
  .\"<br>
  .TH PNPDUMP 8 "14 Jul 1997" "isapnptools"<br>
  .SH NAME<br>
Index: isapnptools/pnpdump.c<br>
diff -c isapnptools/pnpdump.c:1.1.1.2 isapnptools/pnpdump.c:1.4<br>
*** isapnptools/pnpdump.c:1.1.1.2	Thu Jul 31 11:50:41 1997<br>
--- isapnptools/pnpdump.c	Thu Jul 31 13:39:15 1997<br>
***************<br>
*** 29,35 ****<br>
  #define TMP_LEN 16<br>
  #define LARGE_LEN 65536<br>
  <br>
! static char rcsid[] = "$Id: pnpdump.c,v 1.1.1.2 1997/07/31 15:50:41 alvin Exp $";<br>
  <br>
  #ifdef REALTIME<br>
  /*<br>
--- 29,35 ----<br>
  #define TMP_LEN 16<br>
  #define LARGE_LEN 65536<br>
  <br>
! static char rcsid[] = "$Id: pnpdump.c,v 1.4 1997/07/31 17:39:15 alvin Exp $";<br>
  <br>
  #ifdef REALTIME<br>
  /*<br>
***************<br>
*** 108,113 ****<br>
--- 108,117 ----<br>
  unsigned usleep(unsigned wait){return(_sleep2((wait+990)/1000));}<br>
  #endif /* _OS2_ */<br>
  <br>
+ #ifdef __alpha__<br>
+ unsigned _ioperm(unsigned port, daddr_t a, unsigned b);<br>
+ #endif <br>
+ <br>
  #ifdef __DJGPP__<br>
  unsigned ioperm(unsigned port, unsigned a, unsigned b){return(0);}<br>
  unsigned iopl(unsigned port){return(0);}<br>
***************<br>
*** 187,197 ****<br>
--- 191,206 ----<br>
       * Have to get unrestricted access to io ports, as WRITE_DATA port &gt;<br>
       * 0x3ff<br>
       */<br>
+ #ifndef __alpha__<br>
      if(iopl(3) &lt; 0)<br>
      {<br>
  	perror("Unable to get io permission for WRITE_DATA");<br>
  	exit(1);<br>
      }<br>
+ #else<br>
+ 	_ioperm (0, 0x10000, 1);<br>
+ #endif<br>
+ <br>
  #ifdef REALTIME<br>
      setroundrobin();<br>
  #endif /* REALTIME */<br>
<p>
<p>
<pre>
--
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0713.html">Ryan Kirkpatrick: "Rescue disks for Linux/Alpha..."</a>
<li> <b>Previous message:</b> <a href="0711.html">J. Aaron Holmes: "NOVICE Q: hd hashing."</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
