<!-- received="Mon Jul 21 19:43:54 1997 " -->
<!-- sent="Mon, 21 Jul 1997 20:07:15 -0400" -->
<!-- name="Uncle George" -->
<!-- email="gatgul@voicenet.com" -->
<!-- subject="gdb/linux/alpha/malloc not happy" -->
<!-- id="19970721162253.46394@hoohoo.ncsa.uiuc.edu" -->
<!-- inreplyto="ео	@ео	@request@redhat.com with
(" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>gdb/linux/alpha/malloc not happy</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>gdb/linux/alpha/malloc not happy</h2>

<b>Uncle George</b> (<a href="mailto:gatgul@voicenet.com"><i>gatgul@voicenet.com</i></a>)<br>
<i>Mon, 21 Jul 1997 20:07:15 -0400</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#504">[ date ]</a><a href="index.html#504">[ thread ]</a><a href="subject.html#504">[ subject ]</a><a href="author.html#504">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0505.html">Ka'Plaagh: "LX164"</a>
<li> <b>Previous message:</b> <a href="0503.html">Christopher E. Brown: "UDB, where to buy?"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0506.html">wsb@VNET.IBM.COM: "Re: gdb/linux/alpha/malloc not happy"</a>
<li> <b>Maybe reply:</b> <a href="0506.html">wsb@VNET.IBM.COM: "Re: gdb/linux/alpha/malloc not happy"</a>
<!-- reply="end" -->
</ul>
<!-- body="start" -->
Message-ID: &lt;<a href="mailto:33D3F766.4BBD@voicenet.com">33D3F766.4BBD@voicenet.com</a>&gt;<br>
Date: Mon, 21 Jul 1997 19:57:26 -0400<br>
From: Uncle George &lt;<a href="mailto:gatgul@voicenet.com">gatgul@voicenet.com</a>&gt;<br>
Reply-To: <a href="mailto:gatgul@voicenet.com">gatgul@voicenet.com</a><br>
Organization: sloppy, at best<br>
X-Mailer: Mozilla 3.01Gold (WinNT; I)<br>
MIME-Version: 1.0<br>
To: <a href="mailto:davidm@azstarnet.com">davidm@azstarnet.com</a><br>
CC: <a href="mailto:linux-axp@redhat.com">linux-axp@redhat.com</a><br>
Subject: gdb/linux/alpha/malloc not happy<br>
Content-Type: text/plain; charset=us-ascii<br>
Content-Transfer-Encoding: 7bit<br>
<p>
Hi,<br>
This particular piece of code from mdebugread.c seems to break the<br>
"where" functionality on my linux/alpha/elf ( linux 2.0.27 ). Generally<br>
it goes core when the <br>
 t = t-&gt;pointer_type; is used - pointer_type seems to contain 0x0<br>
Took the piece out, and can print stack traces with "malloc" in it.<br>
<p>
Any Comment????? gdb is 4-16 ( from redhat 4.2/alpha/srms )<br>
<p>
----------------mdebugread.c @ ~ line 840 -------------<br>
      else<br>
	{<br>
	  t = parse_type (cur_fd, ax, sh-&gt;index + 1, 0, bigend, name);<br>
#if gb<br>
	  if (STREQ(name, "malloc") &amp;&amp; t-&gt;code == TYPE_CODE_VOID)<br>
	    {<br>
	      /* I don't know why, but, at least under Linux/Alpha,<br>
		 when linking against a malloc without debugging<br>
		 symbols, its read as a function returning void---this<br>
		 is bad because it means we cannot call functions with<br>
		 string arguments interactively; i.e., "call<br>
		 printf("howdy\n")" would fail with the error message<br>
		 "program has no memory available".  To avoid this, we<br>
		 patch up the type and make it void*<br>
		 instead. (<a href="mailto:davidm@azstarnet.com">davidm@azstarnet.com</a>)<br>
		 */<br>
	      t = t-&gt;pointer_type;<br>
	    }<br>
#endif<br>
	}<br>
      b = top_stack-&gt;cur_block;<br>
<p>
<pre>
-- 
Uncle George ( aka G. Baeslack )
<a href="http://www.voicenet.com/~gatgul">http://www.voicenet.com/~gatgul</a>
<p>
<pre>
--
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0505.html">Ka'Plaagh: "LX164"</a>
<li> <b>Previous message:</b> <a href="0503.html">Christopher E. Brown: "UDB, where to buy?"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0506.html">wsb@VNET.IBM.COM: "Re: gdb/linux/alpha/malloc not happy"</a>
<li> <b>Maybe reply:</b> <a href="0506.html">wsb@VNET.IBM.COM: "Re: gdb/linux/alpha/malloc not happy"</a>
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
