<!-- received="Mon Mar 25 12:25:38 1996 " -->
<!-- sent="Mon, 25 Mar 1996 12:25:38 -0700" -->
<!-- name="David Mosberger-Tang" -->
<!-- email="davidm@AZStarNet.com" -->
<!-- subject="mpeg sources" -->
<!-- id="199603251925.MAA22564@koala.azstarnet.com" -->
<!-- inreplyto="" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>mpeg sources</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>mpeg sources</h2>

<b>David Mosberger-Tang</b> (<a href="mailto:davidm@AZStarNet.com"><i>davidm@AZStarNet.com</i></a>)<br>
<i>Mon, 25 Mar 1996 12:25:38 -0700</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#238">[ date ]</a><a href="index.html#238">[ thread ]</a><a href="subject.html#238">[ subject ]</a><a href="author.html#238">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0239.html">David Mosberger-Tang: "gcc-2.7.1 bug"</a>
<li> <b>Previous message:</b> <a href="0237.html">Marc Heinzmann: "Milo for AS 200"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0249.html">Richard Henderson: "Re: mpeg sources"</a>
<li> <b>Reply:</b> <a href="0249.html">Richard Henderson: "Re: mpeg sources"</a>
<li> <b>Maybe reply:</b> <a href="0252.html">David Mosberger-Tang: "Re: mpeg sources"</a>
<!-- reply="end" -->
</ul>
<!-- body="start" -->
Just uploaded a tar ball containing a version of (Linux) mpeg_play<br>
that does somewhat better on the Alpha than the regular code.  It's<br>
all in:<br>
<p>
 <a href="ftp://ftp.azstarnet.com/~axplinux/pub/linux/misc/axpsrc-mpeg_play-2.3.tar.gz">ftp://ftp.azstarnet.com/~axplinux/pub/linux/misc/axpsrc-mpeg_play-2.3.tar.gz</a><br>
<p>
The results I've collected so far are listed below.  The numbers<br>
reported is based on the output when invoking mpeg_play with the<br>
command:<br>
<p>
	mpeg_play -dither none -framerate 0 -quality QUAL RedsNightmare.mpg<br>
<p>
where QUAL is either "off" or "on" (as far as I can tell, there is no<br>
visible difference, but the latter is supposed to do strict MPEG<br>
decoding).  If you want RedsNightmare.mpg: it is all over the net.<br>
Just run archie and you should have no problems finding it.  One place<br>
that has it is: <a href="http://b62074.student.cwru.edu/mpgofun.htm">http://b62074.student.cwru.edu/mpgofun.htm</a>.<br>
<p>
				rate in frames/second:<br>
<p>
quality:			off	on<br>
--------------------------	----	----<br>
Noname/166MHz, regular:		10.0	n/a<br>
Noname/166MHz, optimized:	22.9	21.1	(128KB, 20ns 2nd-level cache)<br>
P90/100:			23.1	n/a<br>
P133:				32.0	n/a<br>
Cabriolet/275MHz, regular:	35.6	n/a<br>
Cabriolet/275MHz, optimized:	74.8	72.8<br>
<p>
The reason things go faster is that I optimized the macro-block<br>
reconstruction code to operate on 8 bytes at a time in parallel (as<br>
much as possible), thus making full use of the 64 bit ALU.  Also,<br>
replacing integer division by a floating point multiply with the<br>
inverse achieved substantial reductions.  The code that does the<br>
Huffman decoding could be improved a lot, but I haven't had time to do<br>
that.  Oh, yes, this does mean that GNU libc and a new gcc will be<br>
able to profile optimized code properly (but please don't ask me when<br>
glibc will become available; all I can say is: we're working on it).<br>
<p>
You'll notice that things will go a lot slower when actually<br>
displaying something (i.e., without "-dither none").  E.g., on a<br>
275MHz Cabrio with a #9 GXE 64 PCI running in 16 bpp mode, I get about<br>
25 frames/second.  But this depends a lot on the particular graphics<br>
card in use.  Also, I didn't spend any time optimizing the dithering<br>
code.  There is a lot of potential for improvements there.<br>
<p>
Could somebody fill in the numbers for an EB164?  I surely would love<br>
to know.  When doing the measurements, just be sure you have enough<br>
memory so that the entire video stays cached (RedsNightmare is about<br>
3MB).<br>
<p>
Enjoy,<br>
	--david<br>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0239.html">David Mosberger-Tang: "gcc-2.7.1 bug"</a>
<li> <b>Previous message:</b> <a href="0237.html">Marc Heinzmann: "Milo for AS 200"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0249.html">Richard Henderson: "Re: mpeg sources"</a>
<li> <b>Reply:</b> <a href="0249.html">Richard Henderson: "Re: mpeg sources"</a>
<li> <b>Maybe reply:</b> <a href="0252.html">David Mosberger-Tang: "Re: mpeg sources"</a>
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
