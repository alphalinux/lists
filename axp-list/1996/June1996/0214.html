<!-- received="Tue Jun 18 14:24:19 1996 " -->
<!-- sent="Tue, 18 Jun 1996 14:24:19 +0200" -->
<!-- name="Martin Ostermann" -->
<!-- email="ost@comnets.rwth-aachen.de" -->
<!-- subject="Re: ioperm() and iopl()" -->
<!-- id="199606181224.OAA15059@fozzy.comnets.rwth-aachen.de" -->
<!-- inreplyto="ioperm() and iopl()" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Re: ioperm() and iopl()</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Re: ioperm() and iopl()</h2>

<b>Martin Ostermann</b> (<a href="mailto:ost@comnets.rwth-aachen.de"><i>ost@comnets.rwth-aachen.de</i></a>)<br>
<i>Tue, 18 Jun 1996 14:24:19 +0200</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#214">[ date ]</a><a href="index.html#214">[ thread ]</a><a href="subject.html#214">[ subject ]</a><a href="author.html#214">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0215.html">Linda Dodd: "Re: from ECOFF to ELF"</a>
<li> <b>Previous message:</b> <a href="0213.html">Ka'plaagh  18-Jun-1996 0948 +0100: "New Milo sources (2.0.0)"</a>
<li> <b>Maybe in reply to:</b> <a href="0191.html">Martin Ostermann: "ioperm() and iopl()"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0216.html">David Mosberger-Tang: "Re: ioperm() and iopl()"</a>
<!-- reply="end" -->
</ul>
<!-- body="start" -->
<i>&gt;&gt;&gt;&gt;&gt; In article &lt;<a href="mailto:Pine.LNX.3.91.960617095451.2573H-100000@elroy.redhat.com">Pine.LNX.3.91.960617095451.2573H-100000@elroy.redhat.com</a>&gt;, Erik Troan &lt;ewt@redhat.com&gt; writes:</i><br>
<p>
<i>&gt;&gt; When I use iopl() in an app, I'll get an runtime error, somewhat like</i><br>
<i>&gt;&gt; "Couldn't determine system type -- Maybe /etc/alpha_io_system symlink</i><br>
<i>&gt;&gt; is missing". Well, it is missing, but where is it supposed to point</i><br>
<i>&gt;&gt; to? I don't have libc sources hanging around to look it up, so it</i><br>
<i>&gt;&gt; would be neat if somebody could help me.</i><br>
<p>
<i>&gt; That's broken. By default, it looks in /proc/cpuinfo. What does yours</i><br>
<i>&gt; say?</i><br>
<p>
Well, it contains a line like<br>
<p>
	system type             : Jensen<br>
<p>
as David suggested below.<br>
<p>
<p>
<i>&gt;&gt;&gt;&gt;&gt; In article &lt;<a href="mailto:199606171639.JAA27270@koala.azstarnet.com">199606171639.JAA27270@koala.azstarnet.com</a>&gt;, David Mosberger-Tang &lt;davidm@AZStarNet.com&gt; writes:</i><br>
<p>
<i>&gt; Not particularly useful, is it? ;-) In other words: ioperm() and</i><br>
<i>&gt; iopl() are non-portable and should be avoided whenever possible.  It</i><br>
<i>&gt; just so happens that the Alpha PCs have an I/O system that looks</i><br>
<i>&gt; identical to an x86 PC, which makes it easy to implement a meaningful</i><br>
<i>&gt; iopl() and ioperm() in user-level.</i><br>
<p>
Ok, so I have to do some calculations were ports are located in sparse<br>
memory by myself, but that shouldn't be a problem.<br>
<p>
Martin&gt; When I use iopl() in an app, I'll get an runtime error,<br>
Martin&gt; somewhat like "Couldn't determine system type -- Maybe<br>
Martin&gt; /etc/alpha_io_system symlink is missing". Well, it is<br>
Martin&gt; missing, but where is it supposed to point to? I don't have<br>
Martin&gt; libc sources hanging around to look it up, so it would be<br>
Martin&gt; neat if somebody could help me.<br>
<p>
<i>&gt; What does "cat /proc/cpuinfo" show?  I think you have a Jensen, so</i><br>
<i>&gt; there should be a line like this:</i><br>
<p>
<i>&gt; 	system type             : Jensen</i><br>
<p>
<i>&gt; If not, you can force the right system type with:</i><br>
<p>
<i>&gt; 	ln -s Jensen /etc/alpha_io_system</i><br>
<p>
Hmm, /proc/cpuinfo is available and contains such a line. I<br>
nevertheless made the link (You really meant this: a link pointing to<br>
a (possibly nonexisting) file name Jensen? -- not a file containing a<br>
line "Jensen?") and the message disappeared. However, iopl() returns<br>
non-zero, which indicates failure, and I still get segmentation faults<br>
upon using the ports. <br>
<p>
This was just for the record, I'll next try to allocate those ports<br>
via normal memeory.<br>
<p>
Thanks to both of you for your answers, Martin<br>
<p>
<pre>
-- 
Martin Ostermann                | <a href="mailto:ost@comnets.rwth-aachen.de">mailto:ost@comnets.rwth-aachen.de</a>
Communication Networks          | <a href="http://www.comnets.rwth-aachen.de/~ost">http://www.comnets.rwth-aachen.de/~ost</a>
Aachen University of Technology | phoneto:++49/241/807917
Germany                         | faxto:++49/241/8890378
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0215.html">Linda Dodd: "Re: from ECOFF to ELF"</a>
<li> <b>Previous message:</b> <a href="0213.html">Ka'plaagh  18-Jun-1996 0948 +0100: "New Milo sources (2.0.0)"</a>
<li> <b>Maybe in reply to:</b> <a href="0191.html">Martin Ostermann: "ioperm() and iopl()"</a>
<!-- nextthread="start" -->
<li> <b>Next in thread:</b> <a href="0216.html">David Mosberger-Tang: "Re: ioperm() and iopl()"</a>
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
