<!-- received="Wed Feb  7 13:22:44 1996 " -->
<!-- sent="Wed, 7 Feb 96 13:22:44 -0800" -->
<!-- name="David Paul Zimmerman" -->
<!-- email="dpz@apple.com" -->
<!-- subject="Re: Sound v.s. Ethernet on AlphaStation 250? (fwd)" -->
<!-- id="9602072122.AA28018@alink-gw.apple.com" -->
<!-- inreplyto="Sound v.s. Ethernet on AlphaStation 250? (fwd)" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Re: Sound v.s. Ethernet on AlphaStation 250? (fwd)</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Re: Sound v.s. Ethernet on AlphaStation 250? (fwd)</h2>

<b>David Paul Zimmerman</b> (<a href="mailto:dpz@apple.com"><i>dpz@apple.com</i></a>)<br>
<i>Wed, 7 Feb 96 13:22:44 -0800</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#44">[ date ]</a><a href="index.html#44">[ thread ]</a><a href="subject.html#44">[ subject ]</a><a href="author.html#44">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0045.html">Erik Troan: "Re: Sound v.s. Ethernet on AlphaStation 250? (fwd)"</a>
<li> <b>Previous message:</b> <a href="0043.html">Jay Estabrook - Alpha Migration Tools - LINUX Project: "Re: Sound v.s. Ethernet on AlphaStation 250? (fwd)"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<!-- body="start" -->
<i>&gt;You should be able to switch over to the ARC console and not blow away</i><br>
<i>&gt;anything. However, booting via ARC normally requires having a small (2Mb)</i><br>
<i>&gt;partition to hold the MILO and linload executables in, a bit of a bother</i><br>
<i>&gt;when compared to SRM/aboot. That said, MILO has been enhanced recently to</i><br>
<i>&gt;allow boots from off the CDROM for CD distribution installs, which I think</i><br>
<i>&gt;neither SRM nor aboot support?</i><br>
<p>
Actually, I did hedge my bets and created the system with a floppy-size <br>
(1.5MB) /dev/sda1 :-)  I'm just not using it right now.  I don't see why <br>
SRM wouldn't allow me to boot from CDROM, though -- I would think it <br>
would be something like "boot dka400" (just as I was able to boot from <br>
floppy with "boot dva0").<br>
<p>
<i>&gt;It could be that the SRM console is assigning the IRQs it wants, regardless</i><br>
<i>&gt;of the slots things appear in.</i><br>
<i>&gt;</i><br>
<i>&gt;Do a "cat /proc/pci" to ensure that the IRQ's are what you expect, and that</i><br>
<i>&gt;there aren't any other conflicts, if you haven't already. Also, what does</i><br>
<i>&gt;"cat /proc/interrupts" say? Does it agree with "ifconfig"?</i><br>
<p>
I've been cross-checking against all of that... it's all always checked <br>
out just fine.  Here's the current state:<br>
<p>
root@gala# cat /proc/pci<br>
PCI devices found:<br>
  Bus  0, device  13, function  0:<br>
    Ethernet controller: DEC DC21041 (rev 17).<br>
      Medium devsel.  Fast back-to-back capable.  IRQ 15.  Master <br>
Capable.  Latency=255.<br>
      I/O at 0x10000.<br>
      Non-prefetchable 32 bit memory at 0x9000000.<br>
  Bus  0, device  12, function  0:<br>
    Display controller: DEC DC21030 (rev 3).<br>
      Medium devsel.  Fast back-to-back capable.  Master Capable.  <br>
Latency=255.<br>
      Prefetchable 32 bit memory at 0x10000000.<br>
  Bus  0, device  11, function  0:<br>
    Ethernet controller: DEC DC21040 (rev 35).<br>
      Medium devsel.  Fast back-to-back capable.  IRQ 10.  Master <br>
Capable.  Latency=255.<br>
      I/O at 0x10400.<br>
      Non-prefetchable 32 bit memory at 0x21000000.<br>
  Bus  0, device   7, function  0:<br>
    Non-VGA device: Intel 82378IB (rev 132).<br>
      Medium devsel.  Master Capable.  No bursts.<br>
  Bus  0, device   6, function  0:<br>
    SCSI storage controller: NCR 53c810 (rev 2).<br>
      Medium devsel.  IRQ 11.  Master Capable.  Latency=255.<br>
      I/O at 0x10800.<br>
      Non-prefetchable 32 bit memory at 0x29000000.<br>
root@gala# cat /proc/interrupts<br>
 1:      234   keyboard<br>
10:   534093   DE435 (eth1)<br>
11:    15094 + 53c7,8xx<br>
15:        0   DE435 (eth0)<br>
root@gala# ifconfig<br>
lo        Link encap:Local Loopback<br>
          inet addr:127.0.0.1  Bcast:127.255.255.255  Mask:255.0.0.0<br>
          UP BROADCAST LOOPBACK RUNNING  MTU:2000  Metric:1<br>
          RX packets:45516 errors:0 dropped:0 overruns:0<br>
          TX packets:45516 errors:0 dropped:0 overruns:0<br>
<p>
eth0      Link encap:10Mbps Ethernet  HWaddr 00:00:F8:00:B1:44<br>
          inet addr:17.128.124.34  Bcast:17.128.127.255  <br>
Mask:255.255.252.0<br>
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1<br>
          RX packets:0 errors:0 dropped:0 overruns:0<br>
          TX packets:41 errors:9 dropped:0 overruns:9<br>
          Interrupt:15<br>
<p>
eth1      Link encap:10Mbps Ethernet  HWaddr 08:00:2B:E7:57:AD<br>
          inet addr:17.128.120.34  Bcast:17.128.123.255  <br>
Mask:255.255.252.0<br>
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1<br>
          RX packets:267149 errors:0 dropped:0 overruns:0<br>
          TX packets:267202 errors:5 dropped:0 overruns:5<br>
          Interrupt:10 Base address:0x400<br>
<p>
root@gala#<br>
<p>
This is running a test kernel where I moved IRQ 10 to the head of the IRQ <br>
table in bios32.c, followed by IRQ 15, IRQ 9, and IRQ 11.  Normally I'll <br>
have IRQ 15 first, followed by 10, 9, and 11, where all I'm doing is <br>
swapping 9 and 10.  For more humor value, here's my boot sequence as <br>
reported by dmesg:<br>
<p>
root@gala# dmesg<br>
Console: 16 point font, 400 scans<br>
Console: colour TGA 80x25, 1 virtual console (max 63)<br>
Alpha PCI BIOS32 revision 0.03<br>
Probing PCI hardware.<br>
bios32 WARNING: slot 12, function 0 requests  134217728B of contiguous <br>
address  space---do<br>
n't use sparse memory  accesses on this device!!<br>
Calibrating delay loop.. ok - 265.81 BogoMIPS<br>
Memory: 126888k available<br>
Swansea University Computer Society NET3.033 for Linux 1.3.50<br>
NET3: Unix domain sockets 0.10 BETA for Linux NET3.033.<br>
Swansea University Computer Society TCP/IP for NET3.033<br>
IP Protocols: IGMP, ICMP, UDP, TCP<br>
Appletalk 0.14 for Linux NET3.032<br>
VFS: Diskquotas version dquot_5.6.0 initialized<br>
Linux version 1.3.57 (<a href="mailto:root@gala.apple.com">root@gala.apple.com</a>) (gcc version 2.7.1) #8 Wed Feb <br>
7 00:32:27 PST 1<br>
996<br>
Serial driver version 4.11 with no serial options enabled<br>
tty00 at 0x03f8 (irq = 4) is a 16550A<br>
tty01 at 0x02f8 (irq = 3) is a 16550A<br>
lp0 at 0x03bc, (polling)<br>
PS/2 auxiliary pointing device detected -- driver installed.<br>
Floppy drive(s): fd0 is 2.88M<br>
Started kswapd v$Revision: 1.1 $<br>
FDC 0 is a National Semiconductor PC87306<br>
scsi-ncr53c7,8xx : at PCI bus 0, device 6,  function 0<br>
scsi-ncr53c7,8xx : NCR53c810 at memory 0x29000000, io 0x10800, irq 11<br>
scsi0 : burst length 2<br>
scsi0 : reset ccf to 3 from 0<br>
scsi0 : NCR code relocated to 0x47fcc68c (virt 0xfffffc0007fcc68c)<br>
scsi0 : test 1 started<br>
scsi0 : NCR53c{7,8}xx (rel 17)<br>
scsi : 1 host.<br>
scsi0 : target 0 accepting period 100ns offset 8 10.00MHz FAST SCSI-II<br>
scsi0 : setting target 0 to period 100ns offset 8 10.00MHz FAST SCSI-II<br>
  Vendor: DEC       Model: RZ28M    (C) DEC  Rev: 0568<br>
  Type:   Direct-Access                      ANSI SCSI revision: 02<br>
Detected scsi disk sda at scsi0, channel 0, id 0, lun 0<br>
scsi0 : target 1 accepting period 100ns offset 8 10.00MHz FAST SCSI-II<br>
scsi0 : setting target 1 to period 100ns offset 8 10.00MHz FAST SCSI-II<br>
  Vendor: DEC       Model: RZ26N    (C) DEC  Rev: 0466<br>
  Type:   Direct-Access                      ANSI SCSI revision: 02<br>
Detected scsi disk sdb at scsi0, channel 0, id 1, lun 0<br>
scsi0 : target 4 accepting period 236ns offset 8 4.23MHz synchronous SCSI<br>
scsi0 : setting target 4 to period 248ns offset 8 4.03MHz synchronous SCSI<br>
  Vendor: DEC       Model: RRD45   (C) DEC   Rev: 1645<br>
  Type:   CD-ROM                             ANSI SCSI revision: 02<br>
Detected scsi CD-ROM sr0 at scsi0, channel 0, id 4, lun 0<br>
scsi : detected 1 SCSI cdrom 2 SCSI disks total.<br>
SCSI Hardware sector size is 512 bytes on device sda<br>
SCSI Hardware sector size is 512 bytes on device sdb<br>
eth0: DE435 at 10000 (PCI bus 0, device 13), h/w address <br>
00:00:f8:00:b1:44,<br>
      and requires IRQ15 (not probed).<br>
de4x5.c:v0.32 6/26/95 <a href="mailto:davies@wanton.lkg.dec.com">davies@wanton.lkg.dec.com</a><br>
eth1: DE435 at 10400 (PCI bus 0, device 11), h/w address <br>
08:00:2b:e7:57:ad,<br>
      and requires IRQ10 (not probed).<br>
de4x5.c:v0.32 6/26/95 <a href="mailto:davies@wanton.lkg.dec.com">davies@wanton.lkg.dec.com</a><br>
eth1: region already allocated at 0x0000.<br>
eth1: region already allocated at 0x0400.<br>
Partition check:<br>
  sda: sda1 sda2 sda3 sda4<br>
  sdb: sdb1 sdb2 sdb3 sdb4 sdb5<br>
VFS: Mounted root (ext2 filesystem) readonly.<br>
Adding Swap: 262936k swap-space<br>
Adding Swap: 131256k swap-space<br>
[EXT II FS 0.5b, 95/08/09, bs=1024, fs=1024, gc=8, bpg=8192, ipg=2056, <br>
mo=fffffc00003455ad<br>
<i>]</i><br>
eth0: Searching for media... media is TP.<br>
eth1: Searching for media... media is TP.<br>
root@gala#<br>
<p>
<i>&gt;Also, in re: the "flood ping" results from your later mail, is there any</i><br>
<i>&gt;chance that eth0 has not been "routed"? Can't imagine why the interface</i><br>
<i>&gt;doesn't show the outgoing ping messages in the count, although if it's not</i><br>
<i>&gt;interrupting, perhaps it doesn't count them as sent? I dunno... :-(</i><br>
<p>
That's the first thing I thought of, but things look OK on that front:<br>
<p>
root@gala# netstat -r -n<br>
Kernel routing table<br>
Destination     Gateway         Genmask         Flags Metric Ref Use    <br>
Iface<br>
17.128.124.0    0.0.0.0         255.255.252.0   U     0      0        4 <br>
eth0<br>
17.128.120.0    0.0.0.0         255.255.252.0   U     0      0       14 <br>
eth1<br>
127.0.0.0       0.0.0.0         255.0.0.0       U     0      0        5 lo<br>
0.0.0.0         17.128.120.1    0.0.0.0         UG    1      0       29 <br>
eth1<br>
root@gala# netstat -i -n<br>
Kernel Interface table<br>
Iface   MTU Met  RX-OK RX-ERR RX-DRP RX-OVR  TX-OK TX-ERR TX-DRP TX-OVR <br>
Flags<br>
lo     2000   0  45516      0      0      0  45516      0      0      0 <br>
BLRU<br>
eth0   1500   0      0      0      0      0     41      9      0      9 <br>
BRU<br>
eth1   1500   0 267186      0      0      0 267239      5      0      5 <br>
BRU<br>
root@gala#<br>
<p>
<i>&gt;The 530 is for the CS chip, the 388 is the standard for the OPL FM syth</i><br>
<i>&gt;chip, I believe. I don't know why it talks about *2* DMA channels; usually</i><br>
<i>&gt;if there are 2, one is 8-bit, the other 16, but 0 and 1 are 8-bit; maybe one</i><br>
<i>&gt;for the OPL as well? Dunno...  And, yeah, if it seems to want DMA 0, go with</i><br>
<i>&gt;it...</i><br>
<p>
Luckily I've got a 2nd A250 as a test station once I deal with the <br>
Ethernet thing :-)  I just noticed that an appendix in the A250 manual <br>
indicates that I/O addr 0388-038B is for "Sound card MIDI".  Funny... all <br>
the sound card seems to have is standard audio miniplugs.<br>
<p>
dp<br>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0045.html">Erik Troan: "Re: Sound v.s. Ethernet on AlphaStation 250? (fwd)"</a>
<li> <b>Previous message:</b> <a href="0043.html">Jay Estabrook - Alpha Migration Tools - LINUX Project: "Re: Sound v.s. Ethernet on AlphaStation 250? (fwd)"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
