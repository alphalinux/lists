<!-- received="Mon Aug 12 12:23:58 1996 " -->
<!-- sent="Mon, 12 Aug 1996 13:55:46 +0200 (CEST)" -->
<!-- name="Wim van Dorst" -->
<!-- email="baron@clifton.hobby.nl" -->
<!-- subject="Patch: Toshiba SCSI CD-ROMs on Linux/Alpha" -->
<!-- id="m0upvb0-0003BoC@clifton.hobby.nl" -->
<!-- inreplyto="mail -s unsubscribe axp-list-request@redhat.1" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Patch: Toshiba SCSI CD-ROMs on Linux/Alpha</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Patch: Toshiba SCSI CD-ROMs on Linux/Alpha</h2>

<b>Wim van Dorst</b> (<a href="mailto:baron@clifton.hobby.nl"><i>baron@clifton.hobby.nl</i></a>)<br>
<i>Mon, 12 Aug 1996 13:55:46 +0200 (CEST)</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#312">[ date ]</a><a href="index.html#312">[ thread ]</a><a href="subject.html#312">[ subject ]</a><a href="author.html#312">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0313.html">Peter Cullmann: "Error from X-server ?"</a>
<li> <b>Previous message:</b> <a href="0311.html">Leo Krachler: "Re: Memory-Modules"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<!-- body="start" -->
Hello *,<br>
<p>
Recently I acquired a PhotoCD with more than one session<br>
on it.  Up till then I had ignored the photocd error<br>
message that I always had while mounting any CD-ROM, since <br>
mounting did go fine, the message nonwithstanding.<br>
<p>
FYI: HW/SW: Toshiba XM3701B SCSI CD-ROM on a NoName<br>
     Alpha with Linux/Alpha from Red Hat 3.0.3. Linux <br>
     versions 1.3.* up to 2.0.12.<br>
<p>
After browsing the code, and asking on the Redhat-AXP<br>
mailing list (thanks David M-T), I thought I'd give it<br>
a try, with (unexpected) success.<br>
<p>
The following, appended patch does:<br>
- better emulation of memory segmentation: get_fs/set_fs stuff<br>
  (I hope I got _all_ initializations right)<br>
- adaptation of SCSI CD-ROM driver (sr): long != 4 bytes on Alpha<br>
- adaptation of scsi-ioctl to be more consistent (high level<br>
  functions to give "unsigned char" when low level function<br>
  expects so, en visa versa).<br>
<p>
On my system this patch, applied to 2.0.12, results in <br>
- no error messages any more about Toshiba ioctls<br>
- properly mounting of _multisession_ CD-ROMs, too<br>
<p>
Would all owners of the appropriate hardware (i.e. Toshiba<br>
SCSI CD-ROMs on Alphas) please test this, and comment on<br>
it? Would it be allright for me to ask Linus to include<br>
this in the kernel source tree?<br>
<p>
Met vriendelijke groeten, Wim van Dorst<br>
--------------------------------------------------------------------<br>
Blue Baron = Wim van Dorst, Voice (+31) 33 4676365, (+31) 35 5242319<br>
(-:      <a href="mailto:baron@clifton.hobby.nl">baron@clifton.hobby.nl</a>       WvD@Chem.AkzoNobel.nl      :-)<br>
--------------------------------------------------------------------<br>
<p>
begin 664 axptosh-diff.gz<br>
M'XL("%`6#S(``V%X&lt;'1O&lt;V@M9&amp;EF9@#%6&gt;%RVD@2_@U/T;&gt;IVY,`@21D;&amp;"=<br>
MQ`&amp;&lt;]26V4X:MVBK'I9*E`506$BL)V[F&lt;W_VZ9R0A`0+GMO9.E4)63_&lt;W/=T]<br>
M/3T=QYU.05F!$H+G^JOGEA7:\Y;E+&gt;=6ZX&amp;%/O-:RS"P610U;&lt;'1?'IT]G%5<br>
M%44YC%6Y#'PX6\U`TT%3&gt;ZK6,]J@=;N=:KU&gt;?]U$!0BMI[=[&gt;E=`O'\/BF8&lt;<br>
M-SI0I]&lt;QO']?A&lt;I2&gt;1NCW"I:PBG@;W]-&gt;^`T:&gt;5'[LQG#GB!/Y/!GKN&gt;$\66<br>
M_9!CG7K6+$)FK5^MI[2(S1;,CY'Z:71S-?IL#L&gt;)Q&amp;*AO+4#/V;/-*HB]:4*<br>
M56&gt;/T1&gt;+ENN[&lt;9FUL^'=9LZ&amp;*^,5&amp;F&lt;9@F:0?8UV[ZASP+YKV0W#&amp;KWV2&lt;ZP<br>
M;9T;%E^I86&gt;.^6AY4O1D+9&lt;L-)&lt;STW'#6TW5VW&lt;RV=5G3\OX/H1??H&amp;V+L._<br>
M83E#+\9&lt;Z,O9QY$IS":3T4@%,[:BAR99EHN=0@*P/5[P1G&amp;HQ"EK)A%/)G&gt;P<br>
MN;1F#%DOKBXFYGAR-OA$O%Y@.&gt;:7P0?IYP(TZ;GM0R=T'UD8M2([&lt;OF/Z09V<br>
M[!4&lt;6&lt;J3\V8I3V6R8O#/E0&gt;@@Z[UM':OW=WETG*`HE_;1D\_SOFU&lt;X0.K8L7<br>
M^14-$[LVN&amp;A##F#:P6)A^8XT)LPA&gt;W1M!C6'/3;@,7`=J-VOIE,6RE7X7@5Z<br>
M[+D50@V0W*\J&amp;&lt;%&gt;.+&gt;:?H&lt;.(U*VY0IC4`!`JNGZ?4'CDP\6/LX'X\'2CQ-Z<br>
M$2A8VH'#^F)A)\&lt;-3&lt;65B3&lt;MC3\UF,P9KC)&lt;V?$J9!#/K1B&gt;&amp;%CX]]**(L2*<br>
MYL'*HW00/*"!'U@O%&lt;T@A#A$CA5;W\4JH5;A-O,]YO&lt;+I&amp;`5%VC9FG'%\`9^<br>
M#9X8&gt;@[0R-_@_EO,(J[+BC29!IRS692E66]34R(Q,T).@9UCJ29;@QSV1W4J<br>
M04FU2VS5$G]PM7"KS5AL(DPH207-:C(D&lt;90("E7S`E`J`G704.[`W@SW[,EP<br>
MSUX,=QU;N]/J?D',J&lt;&gt;%P\K0CQLG4!&lt;OD5-#7-F#1*G+'(X^_/81?HHPL\Z#<br>
M.+"='MD?KD8#H"C_ZO]$MGK#?%PWBB[8(F*QA"9IJ`U#Q3&amp;E4I.*AUM-QF$9<br>
MK8N'TK.*GH96C6(_0A#P@WCN^K-FLYDZK@2@KLD&lt;0.OT.0`F!PB9S7#MG)H$<br>
M#`+4"P"XM!]48+?\Z^&gt;'"H6T&gt;L?9*3$(@B8(:CLEZ()PKXK4870,GCJ2-_&gt;,<br>
MT#-D?ZQ8A!L_6#!PW(CR).Z'!:9,=+3D1N#&amp;8,'O9\I@".\:*(?)XFG.0LHX<br>
M5AA'F&amp;X8&gt;!9!8#5#0N]DH&gt;F/^J]T7)C'Z*&gt;V34UC)':9AL&amp;"J\&amp;C5?@Y9R;[<br>
MN)\0N)G:_;U&gt;+-!ETFJ?SS:X$QTW%&gt;2.3S3:&gt;O(@E&amp;]D&lt;J1*2M=3I5\APST?<br>
MVCB2E@/9@2GQ/P?#Z/;RXNKZ1G)]W&amp;S*6]&lt;,\&lt;R3[YH./P')M95*@C\&gt;C"_,<br>
MB^O!Y+,Y'ET-S&lt;'UY&gt;79U;!!^4E4-U.0&lt;+:_H7UE/"9YC)UT&amp;ET,,?[B$49(<br>
M]R&amp;S'OID%!0A'TW=,$H.8IA:KA&lt;UR*5.X/\C!MOR/,X4,2PV'0A\)D+IA::,<br>
MS&amp;&gt;++QW-RWU+SM5%7"U&lt;?],NHO8E7NVNI75J%/\EPW_'C8&lt;@.&amp;LYB+X?1$]!<br>
MIJ&amp;%.ZD$I+T?I"U`ZN7+D3;6D^DODUCI`J2-%60:&lt;[%2E:4-G3,=&gt;0S@;'%`<br>
M52UJ6QL,,5(&amp;8WJ?WYQ=CL;(C@R%;SY/&amp;CU"FH)'!$J"IIP"BGSX?#WX9%Z?<br>
MGX]'DR2#=;L-3&lt;/P$F\&gt;7R*)^&lt;&amp;3B"!,<a href="mailto:4W2T.@P7$7^CI/M7I">4W2T.@P7$7^CI/M7I</a>"%-[^?3R^7U<br>
M&lt;$1[9#Q*R3SU:NF7&lt;9?(_&amp;4Y1X"_/KOD-:ZG&amp;K]"3DO9C=&gt;QZ__WC'2DJPWM<br>
M".K\?;S.20=J$B?`,QOC,0NES&lt;*$,'9%%3_CRR,++&lt;)/!RH-:`:LH/CQD$3J<br>
M'OFD/DCGV`R^SZ/!)#_&amp;CSE)HVNJ(&gt;&lt;'LF!4DBV'.?84?J:A#I7)&amp;P_JBO4+<br>
M5@!8*T-'^8#*0G)WXJJV&lt;CBWT$YJD),M(([#&gt;!G-:VWZ*,?A2DH\V\OP#A%/<br>
M-.B!*FR7&gt;$10"&gt;OWLP:HP+R(;&gt;!H:J8/QNVF:??NO[RC,B^)0[P,9^?.5-.9<br>
M?WAS"H_6\QY]A?#:Y?6\RU^Y6&gt;MYELW0J%0.!\,6`(^)@W.+D"'?IO&amp;!DV[A<br>
M'?;]CNFW%Y^/K*)$V;.M+H_'+3*&amp;S`X5M&amp;VWEU@@R2M_/F$2S,%L25/MRI@&amp;<br>
MO[\=&amp;=WD_I;E/#I9Q1$=N?]BTBXUY#X%2;3$R^,2)(OW4F)WP?#B^U_&gt;"/[\<br>
MC4ZU=]VH5/M_=:,[/'_N1G&lt;S.AN:D^M!&gt;HD[N4LQ$D)7$`QU1VO`]6UOY;"6<br>
M%2T4T0=-&amp;LQ!V)SG;O1[^7(M@[U\E?/0A2%6F[H.ZG%/UWLJ;Q\&lt;;;0/]H-L<br>
MM1*.C'4KH=VE[BS^I@&lt;WMU7!T\"[IOTM&lt;L@BK4&amp;_O#(JCB7=5.K,O5#[$]XX<br>
M;.KB/8-W3'&amp;7?('O(-JDBP6FE^&lt;I/;::/0W($;6,^%54J=2DQRM0HG0!&gt;S(&gt;<br>
M`V)_17617_S;^%#R'_7U1];XY1(O&gt;;7QQA389KX%+%'L\DIX&amp;C+&amp;&amp;\+2Q_,O<br>
M:6_Z-9&amp;3&amp;.E`W&amp;1&lt;&gt;Z,FXZJ,K1BN@D?0CZCE=&amp;0D+:?#,;.&amp;V(B8;D_--_0U<br>
MK:%A]N)OO&gt;"`S("@KHF_C4&lt;W1-+0GDK6)/9HJ!@SW):11`E-KBK?T4TABU&gt;A<br>
MSZO\EVH]!4SXY(IDK\(0-2[\KXJ\9HP$XW,)YRF.R.3D0THYJ5+\%I4HI7*E<br>
ME,TE\72&lt;3%Q$&gt;K0\OJPDL'C&amp;IYQEGHTO\?CX&gt;#FZFIB_TO[[#W^Z^)]E&amp;P``<br>
`<br>
end<br>
--------------------------------------------------------------------<br>
Blue Baron = Wim van Dorst, Voice (+31) 33 4676365, (+31) 35 5242319<br>
(-:      <a href="mailto:baron@clifton.hobby.nl">baron@clifton.hobby.nl</a>       WvD@Chem.AkzoNobel.nl      :-)<br>
--------------------------------------------------------------------<br>
<p>
<pre>
--
To unsubscribe: mail -s unsubscribe <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> &lt; /dev/null
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0313.html">Peter Cullmann: "Error from X-server ?"</a>
<li> <b>Previous message:</b> <a href="0311.html">Leo Krachler: "Re: Memory-Modules"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
