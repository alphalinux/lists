<!-- received="Thu Aug 15 19:15:17 1996 " -->
<!-- sent="Thu, 15 Aug 1996 19:14:58 -0400 (EDT)" -->
<!-- name="Joshua M. Thompson" -->
<!-- email="invid@optera.com" -->
<!-- subject="UDB Ethernet problem, part 2" -->
<!-- id="199608152141.PAA04049@karlsberg.usask.ca" -->
<!-- inreplyto="mail -s unsubscribe axp-list1" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>UDB Ethernet problem, part 2</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>UDB Ethernet problem, part 2</h2>

<b>Joshua M. Thompson</b> (<a href="mailto:invid@optera.com"><i>invid@optera.com</i></a>)<br>
<i>Thu, 15 Aug 1996 19:14:58 -0400 (EDT)</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#435">[ date ]</a><a href="index.html#435">[ thread ]</a><a href="subject.html#435">[ subject ]</a><a href="author.html#435">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0436.html">Tim Waugh: "Re: UDB: Problems with fdisk"</a>
<li> <b>Previous message:</b> <a href="0434.html">Lee Burnside: "2.0 kernel upgrade"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<!-- body="start" -->
(I'm sending this to linux-net as well now, because this is a _very_ <br>
strange networking problem)<br>
<p>
Quick recap: DEC Alpha Universal Desktop box, running RedHat 3.0.3 but <br>
with kernel 2.0.12 with DE4x5 driver (also used to run 2.0.11 with Tulip <br>
driver, with same results). The problem is that at random times, my <br>
Ethernet connection (UTP) goes "dead".<br>
<p>
The last time this happened, I did some experimentation and discovered <br>
some interesting facts about this problem :<br>
<p>
1. The cabling seems OK. The hub carrier light is on, and the DEC senses <br>
the carrier on its end as well (because if I unplug the cable, then I get <br>
the "media is unconnected!" message). Generally if I do this plug/unplug <br>
thing enough it will start working again, at which point no amount of <br>
tugging on cables will make it go away (ie, no loose cables are evident).<br>
<p>
2. If I "ping -f" a host that is still in the ARP table, I see activity <br>
lights on teh UDB's hub port and on the hub port for the destination <br>
machine. This means packets _are_ going out, and packets _are_ coming <br>
back, but the DEC is either ignoring them or not seeing them. Eventually <br>
my ARP entries time out so this stops working.<br>
<p>
3. Occasionally a packet or two DOES get through, and I'll get a packet <br>
or two back from a ping (plus refreshed ARP entries).<br>
<p>
and now...the part that baffles me...<br>
<p>
4. If I leave a ping running (not ping -f, just plain ping) and then <br>
start doing the plug/unplug thing with the Ethernet cable, then when it <br>
_does_ start working I get _all_ my ping respones. The first 10 or 20 <br>
have ping times on the order of tens of seconds (10,000s of ms).  To me <br>
this seems to indicate the DEC _did_ receive all those packets, but it <br>
just buffered them until something I did "unclogged" it. If it weren't <br>
for this strange behavior I would just go with the assumption that my DEC <br>
is broken.<br>
<p>
Unfortunately I don't have the necessary tools (or knowledge) to snoop <br>
the Ethernet to see what's going on beyond what I've described here. I'm <br>
thinking maybe there is a receive buffer problem of some sort, either on <br>
the Ethernet hardware itself or in the networking code somewhere. I'm <br>
including my kernel configuration below so you can see what my driver <br>
setup looks like. If anybody has _any_ ideas I'd love to hear them, <br>
because I'm about to pull my hair out with this one!<br>
<p>
#<br>
# Automatically generated make config: don't edit<br>
#<br>
<p>
#<br>
# Code maturity level options<br>
#<br>
CONFIG_EXPERIMENTAL=y<br>
<p>
#<br>
# Loadable module support<br>
#<br>
CONFIG_MODULES=y<br>
CONFIG_MODVERSIONS=y<br>
# CONFIG_KERNELD is not set<br>
<p>
#<br>
# General setup<br>
#<br>
CONFIG_NATIVE=y<br>
# CONFIG_ALPHA_AVANTI is not set<br>
# CONFIG_ALPHA_XL is not set<br>
# CONFIG_ALPHA_XLT is not set<br>
# CONFIG_ALPHA_CABRIOLET is not set<br>
# CONFIG_ALPHA_EB66 is not set<br>
# CONFIG_ALPHA_EB66P is not set<br>
# CONFIG_ALPHA_EB64P is not set<br>
# CONFIG_ALPHA_EB164 is not set<br>
# CONFIG_ALPHA_PC164 is not set<br>
# CONFIG_ALPHA_JENSEN is not set<br>
CONFIG_ALPHA_NONAME=y<br>
# CONFIG_ALPHA_MIKASA is not set<br>
# CONFIG_ALPHA_ALCOR is not set<br>
# CONFIG_ALPHA_P2K is not set<br>
CONFIG_PCI=y<br>
CONFIG_ALPHA_LCA=y<br>
CONFIG_ALPHA_NEED_ROUNDING_EMULATION=y<br>
# CONFIG_SERIAL_ECHO is not set<br>
CONFIG_TGA_CONSOLE=y<br>
CONFIG_PCI_OPTIMIZE=y<br>
CONFIG_NET=y<br>
CONFIG_SYSVIPC=y<br>
CONFIG_BINFMT_AOUT=y<br>
CONFIG_BINFMT_ELF=y<br>
<p>
#<br>
# Floppy, IDE, and other block devices<br>
#<br>
CONFIG_BLK_DEV_FD=y<br>
# CONFIG_BLK_DEV_IDE is not set<br>
<p>
#<br>
# Please see Documentation/ide.txt for help/info on IDE drives<br>
#<br>
# CONFIG_BLK_DEV_HD_ONLY is not set<br>
<p>
#<br>
# Additional Block Devices<br>
#<br>
CONFIG_BLK_DEV_LOOP=y<br>
CONFIG_BLK_DEV_MD=y<br>
CONFIG_MD_LINEAR=y<br>
CONFIG_MD_STRIPED=y<br>
CONFIG_BLK_DEV_RAM=y<br>
# CONFIG_BLK_DEV_INITRD is not set<br>
# CONFIG_BLK_DEV_XD is not set<br>
# CONFIG_BLK_DEV_HD is not set<br>
<p>
#<br>
# Networking options<br>
#<br>
# CONFIG_FIREWALL is not set<br>
CONFIG_NET_ALIAS=y<br>
CONFIG_INET=y<br>
CONFIG_IP_FORWARD=y<br>
CONFIG_IP_MULTICAST=y<br>
# CONFIG_IP_ACCT is not set<br>
CONFIG_IP_ROUTER=y<br>
CONFIG_NET_IPIP=m<br>
CONFIG_IP_MROUTE=y<br>
CONFIG_IP_ALIAS=y<br>
<p>
#<br>
# (it is safe to leave these untouched)<br>
#<br>
# CONFIG_INET_PCTCP is not set<br>
# CONFIG_INET_RARP is not set<br>
# CONFIG_NO_PATH_MTU_DISCOVERY is not set<br>
CONFIG_IP_NOSR=y<br>
CONFIG_SKB_LARGE=y<br>
<p>
#<br>
#  <br>
#<br>
CONFIG_IPX=m<br>
CONFIG_IPX_INTERN=y<br>
CONFIG_ATALK=m<br>
# CONFIG_AX25 is not set<br>
# CONFIG_BRIDGE is not set<br>
# CONFIG_NETLINK is not set<br>
<p>
#<br>
# SCSI support<br>
#<br>
CONFIG_SCSI=y<br>
<p>
#<br>
# SCSI support type (disk, tape, CD-ROM)<br>
#<br>
CONFIG_BLK_DEV_SD=y<br>
CONFIG_CHR_DEV_ST=y<br>
CONFIG_BLK_DEV_SR=y<br>
CONFIG_CHR_DEV_SG=y<br>
<p>
#<br>
# Some SCSI devices (e.g. CD jukebox) support multiple LUNs<br>
#<br>
# CONFIG_SCSI_MULTI_LUN is not set<br>
CONFIG_SCSI_CONSTANTS=y<br>
<p>
#<br>
# SCSI low-level drivers<br>
#<br>
# CONFIG_SCSI_7000FASST is not set<br>
# CONFIG_SCSI_AHA152X is not set<br>
# CONFIG_SCSI_AHA1542 is not set<br>
# CONFIG_SCSI_AHA1740 is not set<br>
# CONFIG_SCSI_AIC7XXX is not set<br>
# CONFIG_SCSI_ADVANSYS is not set<br>
# CONFIG_SCSI_IN2000 is not set<br>
# CONFIG_SCSI_AM53C974 is not set<br>
# CONFIG_SCSI_BUSLOGIC is not set<br>
# CONFIG_SCSI_DTC3280 is not set<br>
# CONFIG_SCSI_EATA is not set<br>
# CONFIG_SCSI_EATA_DMA is not set<br>
# CONFIG_SCSI_EATA_PIO is not set<br>
# CONFIG_SCSI_FUTURE_DOMAIN is not set<br>
# CONFIG_SCSI_GENERIC_NCR5380 is not set<br>
# CONFIG_SCSI_NCR53C406A is not set<br>
CONFIG_SCSI_NCR53C7xx=y<br>
# CONFIG_SCSI_NCR53C7xx_sync is not set<br>
# CONFIG_SCSI_NCR53C7xx_FAST is not set<br>
# CONFIG_SCSI_NCR53C7xx_DISCONNECT is not set<br>
# CONFIG_SCSI_PPA is not set<br>
# CONFIG_SCSI_PAS16 is not set<br>
# CONFIG_SCSI_QLOGIC_FAS is not set<br>
# CONFIG_SCSI_QLOGIC_ISP is not set<br>
# CONFIG_SCSI_SEAGATE is not set<br>
# CONFIG_SCSI_T128 is not set<br>
# CONFIG_SCSI_U14_34F is not set<br>
# CONFIG_SCSI_ULTRASTOR is not set<br>
<p>
#<br>
# Network device support<br>
#<br>
CONFIG_NETDEVICES=y<br>
CONFIG_DUMMY=m<br>
CONFIG_EQUALIZER=m<br>
# CONFIG_DLCI is not set<br>
CONFIG_PLIP=m<br>
CONFIG_PPP=y<br>
<p>
#<br>
# CCP compressors for PPP are only built as modules.<br>
#<br>
CONFIG_SLIP=m<br>
CONFIG_SLIP_COMPRESSED=y<br>
# CONFIG_SLIP_SMART is not set<br>
# CONFIG_SLIP_MODE_SLIP6 is not set<br>
# CONFIG_NET_RADIO is not set<br>
CONFIG_NET_ETHERNET=y<br>
# CONFIG_NET_VENDOR_3COM is not set<br>
# CONFIG_LANCE is not set<br>
# CONFIG_NET_VENDOR_SMC is not set<br>
# CONFIG_NET_ISA is not set<br>
CONFIG_NET_EISA=y<br>
# CONFIG_AC3200 is not set<br>
# CONFIG_APRICOT is not set<br>
CONFIG_DE4X5=y<br>
# CONFIG_DEC_ELCP is not set<br>
# CONFIG_DGRS is not set<br>
# CONFIG_ZNET is not set<br>
# CONFIG_NET_POCKET is not set<br>
# CONFIG_TR is not set<br>
# CONFIG_ARCNET is not set<br>
<p>
#<br>
# ISDN subsystem<br>
#<br>
# CONFIG_ISDN is not set<br>
<p>
#<br>
# CD-ROM drivers (not for SCSI or IDE/ATAPI drives)<br>
#<br>
# CONFIG_CD_NO_IDESCSI is not set<br>
<p>
#<br>
# Filesystems<br>
#<br>
CONFIG_QUOTA=y<br>
# CONFIG_LOCK_MANDATORY is not set<br>
CONFIG_MINIX_FS=y<br>
# CONFIG_EXT_FS is not set<br>
CONFIG_EXT2_FS=y<br>
CONFIG_XIA_FS=y<br>
CONFIG_FAT_FS=y<br>
CONFIG_MSDOS_FS=y<br>
CONFIG_VFAT_FS=y<br>
CONFIG_UMSDOS_FS=y<br>
CONFIG_PROC_FS=y<br>
CONFIG_NFS_FS=y<br>
# CONFIG_ROOT_NFS is not set<br>
CONFIG_SMB_FS=y<br>
CONFIG_SMB_LONG=y<br>
CONFIG_NCP_FS=m<br>
CONFIG_ISO9660_FS=y<br>
# CONFIG_HPFS_FS is not set<br>
# CONFIG_SYSV_FS is not set<br>
# CONFIG_AFFS_FS is not set<br>
# CONFIG_UFS_FS is not set<br>
<p>
#<br>
# Character devices<br>
#<br>
CONFIG_SERIAL=y<br>
# CONFIG_DIGI is not set<br>
# CONFIG_CYCLADES is not set<br>
# CONFIG_STALDRV is not set<br>
# CONFIG_RISCOM8 is not set<br>
CONFIG_PRINTER=y<br>
CONFIG_MOUSE=y<br>
# CONFIG_ATIXL_BUSMOUSE is not set<br>
# CONFIG_BUSMOUSE is not set<br>
# CONFIG_MS_BUSMOUSE is not set<br>
CONFIG_PSMOUSE=y<br>
# CONFIG_82C710_MOUSE is not set<br>
# CONFIG_UMISC is not set<br>
# CONFIG_QIC02_TAPE is not set<br>
# CONFIG_FTAPE is not set<br>
# CONFIG_APM is not set<br>
# CONFIG_WATCHDOG is not set<br>
CONFIG_RTC=y<br>
<p>
#<br>
# Sound<br>
#<br>
CONFIG_SOUND=y<br>
# CONFIG_PAS is not set<br>
# CONFIG_SB is not set<br>
# CONFIG_ADLIB is not set<br>
# CONFIG_GUS is not set<br>
# CONFIG_MPU401 is not set<br>
# CONFIG_UART6850 is not set<br>
# CONFIG_PSS is not set<br>
# CONFIG_GUS16 is not set<br>
# CONFIG_GUSMAX is not set<br>
CONFIG_MSS=y<br>
# CONFIG_SSCAPE is not set<br>
# CONFIG_TRIX is not set<br>
# CONFIG_MAD16 is not set<br>
# CONFIG_CS4232 is not set<br>
# CONFIG_MAUI is not set<br>
CONFIG_AUDIO=y<br>
# CONFIG_MIDI is not set<br>
# CONFIG_YM3812 is not set<br>
MSS_BASE=530<br>
MSS_IRQ=9<br>
MSS_DMA=3<br>
DSP_BUFFSIZE=65536<br>
# CONFIG_LOWLEVEL_SOUND is not set<br>
<p>
#<br>
# Kernel hacking<br>
#<br>
# CONFIG_PROFILE is not set<br>
<p>
<pre>
-- 
<a href="mailto:invid@optera.com">invid@optera.com</a>             | We are Grey
<a href="http://www.optera.com/~invid">http://www.optera.com/~invid</a> | We stand between the Candle and the Star
                             | Between the Darkness and the Light
<p>
<pre>
--
To unsubscribe: mail -s unsubscribe <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> &lt; /dev/null
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0436.html">Tim Waugh: "Re: UDB: Problems with fdisk"</a>
<li> <b>Previous message:</b> <a href="0434.html">Lee Burnside: "2.0 kernel upgrade"</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
