<!-- received="Tue Nov 12 12:50:29 1996 " -->
<!-- sent="Tue, 12 Nov 1996 10:47:23 -0700 (MST)" -->
<!-- name="Michal Jaegermann" -->
<!-- email="michal@ellpspace.math.ualberta.ca" -->
<!-- subject="Re: AXP Kernel howto..." -->
<!-- id="199611121747.KAA01831@ellpspace.math.ualberta.ca" -->
<!-- inreplyto="199611121004.DAA21055@uffenham.isu.edu" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Re: AXP Kernel howto...</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Re: AXP Kernel howto...</h2>

<b>Michal Jaegermann</b> (<a href="mailto:michal@ellpspace.math.ualberta.ca"><i>michal@ellpspace.math.ualberta.ca</i></a>)<br>
<i>Tue, 12 Nov 1996 10:47:23 -0700 (MST)</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#577">[ date ]</a><a href="index.html#577">[ thread ]</a><a href="subject.html#577">[ subject ]</a><a href="author.html#577">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0578.html">dave madden: "Re: Redhat 4.0 install pronlem on UDB"</a>
<li> <b>Previous message:</b> <a href="0576.html">Alan Wood: "RE: installing MILO on UDB, RedHat 2.018"</a>
<li> <b>In reply to:</b> <a href="0554.html">Scott Serr: "AXP Kernel howto..."</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<!-- body="start" -->
<i>&gt; </i><br>
<i>&gt; </i><br>
<i>&gt; Assuming that I know how to compile a kernel etc...  How do I get</i><br>
<i>&gt; to 2.0.25 from 2.0.18?</i><br>
<p>
You collect all intermediary patches in one directory, other then<br>
kernel sources, and you type 'sh /usr/src/linux/scripts/patch-kernel'.<br>
That is it, but it assumes that what you patch is located in<br>
/usr/src/linux.  See below.<br>
<p>
If 'axp-diffs' were applied you have first to 'unpatch' your sources,<br>
with 'patch -R', or kernel 'upgrade patches' will not apply cleanly.<br>
<p>
<i>&gt; Do I need axp-diffs?</i><br>
<p>
With current kernels:<br>
  - if you compile for ELF and glibc axp-diffs are required<br>
  - if you compile of ECOFF and libc (RH 3.0.3) then you should NOT use<br>
    them<br>
There are differences in a layout of certain structures from 2.0.18 on<br>
but, contrary to what you may here on this list from time to time, kernel<br>
compiles cleanly without axp-patches.<br>
<p>
<i>&gt; Where do I get them if I do?</i><br>
<p>
Same place as always.  ftp.azstarnet.com<br>
<p>
<i>&gt; Do I have to use the patches?</i><br>
<p>
That is the sane way to do that.<br>
<p>
<i>&gt; I rather keep the</i><br>
<i>&gt; 2.0.18 kernel source prestine so RPM doesn't freak out.</i><br>
<p>
RPM will freak out in any case as compilation of a kernel assumes that<br>
sources are in /usr/src/linux (there are ways around it, but if you have<br>
ask all these questions do not even think about it).  If you want to<br>
keep 2.0.18 tree as a reference point rename /usr/src/linux into<br>
/usr/src/linux-2.0.18, do 'cp -a /usr/src/linux-2.0.18 /usr/src/linux-2.0.25'<br>
and 'ln -sf /usr/src/linux-2.0.25 /usr/src/linux' before you start<br>
patching.<br>
<p>
BTW - you are pointing into a MAJOR weakness in the whole RPM story.<br>
In that respect a many years old 'package' model by NeXT is unbeatable.<br>
If you are doing an upgrade then in every place when required you will<br>
get a dialog which says roughly "Whoa! You made some changes here.<br>
Should I overwrite with my version anyway or leave it alone?" and an<br>
upgrade program pays attention to your answers.<br>
<p>
<i>&gt; (I've spent 2 hours looking for this information, but couldn't find it)</i><br>
<p>
Obviously you are looking in wrong places.<br>
<p>
<i>&gt; PS- I've tried with a brand new 2.0.25 directory with no "axp-diffs"</i><br>
<i>&gt; and I have /usr/src/linux pointing to it, but I get this error</i><br>
<i>&gt; when I make menuconfig:</i><br>
<i>&gt; </i><br>
<i>&gt; rm -f include/asm</i><br>
<i>&gt; ( cd include ; ln -sf asm-i386 asm)</i><br>
<p>
You forgot to change architecture in a top Makefile from i386 to alpha.<br>
This is all what is required but configure program is not smart enough<br>
to do that by itself.  If you would use patches starting from yours<br>
2.0.18 tree, or its copy, then you would not trip on this small detail<br>
(not mentioning the time to get these many megabytes of new sources;<br>
big fun if you doing that over a modem).<br>
<p>
  Michal<br>
<p>
<pre>
--
To unsubscribe: send e-mail to <a href="mailto:axp-list-request@redhat.com">axp-list-request@redhat.com</a> with
'unsubscribe' as the subject.  Do not send it to <a href="mailto:axp-list@redhat.com">axp-list@redhat.com</a>
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0578.html">dave madden: "Re: Redhat 4.0 install pronlem on UDB"</a>
<li> <b>Previous message:</b> <a href="0576.html">Alan Wood: "RE: installing MILO on UDB, RedHat 2.018"</a>
<li> <b>In reply to:</b> <a href="0554.html">Scott Serr: "AXP Kernel howto..."</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
