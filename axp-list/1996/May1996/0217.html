<!-- received="Tue May 14 00:30:25 1996 " -->
<!-- sent="Tue, 14 May 1996 00:30:25 +0100" -->
<!-- name="Stephen C. Tweedie" -->
<!-- email="sct@dcs.ed.ac.uk" -->
<!-- subject="Re: MILO on Multia: environment corruption?" -->
<!-- id="199605132330.AAA00359@dax.dcs.ed.ac.uk" -->
<!-- inreplyto="4n1p86$t3m@gap.cco.caltech.edu" -->
<HTML><HEAD><META NAME="htdig-email" CONTENT="webmaster@redhat.com"><TITLE>Re: MILO on Multia: environment corruption?</TITLE>
</HEAD>
<BODY TEXT="#000000" BGCOLOR="#ececec"  LINK="#3333cc" VLINK="#666666"><h2>Re: MILO on Multia: environment corruption?</h2>

<b>Stephen C. Tweedie</b> (<a href="mailto:sct@dcs.ed.ac.uk"><i>sct@dcs.ed.ac.uk</i></a>)<br>
<i>Tue, 14 May 1996 00:30:25 +0100</i>
<p>
<ul>
<li> <b>Messages sorted by:</b> <a href="date.html#217">[ date ]</a><a href="index.html#217">[ thread ]</a><a href="subject.html#217">[ subject ]</a><a href="author.html#217">[ author ]</a>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0218.html">Stephen C. Tweedie: "Re: sys_lseek() broken for alpha"</a>
<li> <b>Previous message:</b> <a href="0216.html">David Mosberger-Tang: "Re: Redhat/axp "devel-tree""</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<!-- body="start" -->
Hi,<br>
<p>
On 11 May 1996 10:13:26 GMT, <a href="mailto:egnor@ugcs.caltech.edu">egnor@ugcs.caltech.edu</a> (Dan Egnor) said:<br>
<p>
<i>&gt; Hello,</i><br>
<i>&gt; We've just got our new UDB (aka Multia) system in.  It came with Linux</i><br>
<i>&gt; preinstalled, but we've been trying to set up MILO etc. to our liking.</i><br>
<p>
<i>&gt; After some difficulties, we have Linux 1.3.100 booting from MILO 1.3.95</i><br>
<i>&gt; (built with Linux 1.3.100).  As per various recommendations we're using</i><br>
<i>&gt; the ARC firmware installed on our system.</i><br>
<p>
Good choice.<br>
<p>
<i>&gt; However, MILO's environment variables appear to be corrupted by the ARC</i><br>
<i>&gt; firmware's settings and vice versa.  In particular, when we run the MILO</i><br>
<i>&gt; "resetenv" command, the variables are cleared but the next time ARC is</i><br>
<i>&gt; booted it complains about corrupted NVRAM and all the settings must be</i><br>
<i>&gt; reset.</i><br>
<p>
Yes.  This is no problem on some of the other AXP platforms where<br>
separate nvram areas are available, but on the Multia, MILO and the<br>
ARC can't both use the same space for their environment variables<br>
without getting each other hopelessly confused.  I think that the MILO<br>
vars are really only useful if you burn MILO into flash and don't<br>
bother with the ARC.<br>
<p>
<i>&gt; It seems to us like MILO and ARC are both trying to use the same area of</i><br>
<i>&gt; NVRAM for settings, but incompatibly.</i><br>
<p>
Precisely. :(<br>
<p>
<i>&gt; Any ideas?</i><br>
<p>
Sure.  Avoid using MILO environment variables.<br>
<p>
Fortunately, you can make it work quite well without using MILO vars.<br>
If you set up an environment variable OSLOADOPTIONS in the ARC boot<br>
option for MILO, then that variable's contents will be executed as a<br>
command line by MILO when it starts up.  I've set mine to contain the<br>
value "boot sda2:vmlinux.gz", so that the ARC autoboot will also<br>
autolaunch MILO's boot cycle and get linux running without any<br>
operator intervention.  Which is just as well, since the machine is<br>
currently running headless...<br>
<p>
Check the docs, all this is from memory -- I may have misspelled the<br>
options, but the technique itself should work.<br>
<p>
Cheers,<br>
 Stephen.<br>
<pre>
--
Stephen Tweedie &lt;<a href="mailto:sct@dcs.ed.ac.uk">sct@dcs.ed.ac.uk</a>&gt;
Department of Computer Science, Edinburgh University, Scotland.
</pre>
<!-- body="end" -->
<p>
<ul>
<!-- next="start" -->
<li> <b>Next message:</b> <a href="0218.html">Stephen C. Tweedie: "Re: sys_lseek() broken for alpha"</a>
<li> <b>Previous message:</b> <a href="0216.html">David Mosberger-Tang: "Re: Redhat/axp "devel-tree""</a>
<!-- nextthread="start" -->
<!-- reply="end" -->
</ul>
<br clear=all>
<hr>
<center>
<a href="mailto:webmaster@redhat.com"   target="">Feedback</a> | 
<a href="http://www.redhat.com/products/"   target="">Store</a> | 
<a href="http://www.redhat.com/news/"   target="">News</a> | 
<a href="http://www.redhat.com/support/"   target="">Support</a> | 
<a href="http://www.redhat.com/support/docs/errata.html"   target="">Product Errata</a> | 
<a href="http://www.redhat.com/redhat/"   target="">About Us</a> | 
<a href="http://www.redhat.com/linux-info/"   target="">Linux Info</a> | 
<a href="http://www.redhat.com/search/"   target="">Search</a> | 
<a href="http://www.redhat.com/jumplist.phtml"   target="">JumpWords</a>
<br>
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=n"  _top target="_top">No Frames</a> | 
<a href="http://www.redhat.com/cgi-bin/frames.phtml?fr=y"  _top target="_top">Show Frames</a>
</center>
<p align=center>
Copyright &copy; 1995-1997 Red Hat Software. <a href="http://www.redhat.com/redhat/website.html#legal"   target="">Legal notices</a>
</p>
</BODY></HTML>
