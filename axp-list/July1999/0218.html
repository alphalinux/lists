<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: an evil memcpy() optimizer bug! (egcs-1.1.2, alph</TITLE>
<META NAME="Author" CONTENT="Dave Mason (dmason@sarg.Ryerson.CA)">
<META NAME="Subject" CONTENT="Re: an evil memcpy() optimizer bug! (egcs-1.1.2, alphaev6, linux)">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: an evil memcpy() optimizer bug! (egcs-1.1.2, alphaev6, linux)</H1>
<HR>
<P>
<!-- received="Tue Jul 13 13:23:56 1999" -->
<!-- isoreceived="19990713202356" -->
<!-- sent="Tue, 13 Jul 1999 07:52:16 -0400" -->
<!-- isosent="19990713115216" -->
<!-- name="Dave Mason" -->
<!-- email="dmason@sarg.Ryerson.CA" -->
<!-- subject="Re: an evil memcpy() optimizer bug! (egcs-1.1.2, alphaev6, linux)" -->
<!-- id="199907131152.HAA31220@sarg.Ryerson.CA" -->
<!-- inreplyto="378B1F63.1AEACAB0@frankfurt.netsurf.de" -->
<STRONG>Subject: </STRONG>Re: an evil memcpy() optimizer bug! (egcs-1.1.2, alphaev6, linux)<BR>
<STRONG>From: </STRONG>Dave Mason (<EM>dmason@sarg.Ryerson.CA</EM>)<BR>
<STRONG>Date: </STRONG>Tue Jul 13 1999 - 04:52:16 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#218">[ date ]</A>
<A HREF="index.html#218">[ thread ]</A>
<A HREF="subject.html#218">[ subject ]</A>
<A HREF="author.html#218">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0219.html">furio ercolessi: "Re: Stable Kernel for Alpha"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0217.html">Gavin Woodhatch: "Stable Kernel for Alpha"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0216.html">Joachim Wesner: "Re: an evil memcpy() optimizer bug! (egcs-1.1.2, alphaev6, linux)"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0220.html">Phil Carmody: "Re: an evil memcpy() optimizer bug! (egcs-1.1.2, alphaev6, linux)"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0216.html">Dave Mason: "Re: an evil memcpy() optimizer bug! (egcs-1.1.2, alphaev6, linux)"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
<EM>&gt;&gt;&gt;&gt;&gt; On Tue, 13 Jul 1999 13:13:39 +0200, Joachim Wesner &lt;Joachim.Wesner@frankfurt.netsurf.de&gt; said:
</EM><BR>
<P><EM>&gt; The operator &amp; can only be applied to variables and vector elements
</EM><BR>
<EM>&gt; ...&lt;snip&gt;... Also, taking the adress of a variable of memory class
</EM><BR>
<EM>&gt; register is illegal !
</EM><BR>
<P><P><EM>&gt; Maybe this has been changed in ISO C ?? Then, sorry for my
</EM><BR>
<EM>&gt; ignorance.
</EM><BR>
<P>int foo(double x, int y) {
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... &amp;x ... &amp;y
<BR>
<P>is all legal.
<BR>
<P>int foo(register double x,register int y) {
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;... &amp;x ... &amp;y
<BR>
<P>isn't!
<BR>
<P>So don't worry.  C is a screwed up language in lots of ways, but this
<BR>
isn't one of them!  Unfortunately optimization of these special cases,
<BR>
while sometimes important for performance, can create subtle bugs in
<BR>
the compiler.  That was what happened here.  In the ``good old days''
<BR>
on PDP11s, VAXen, and i386s, parameters were all in memory, so this
<BR>
was easy to get right (but they were bog slow!).  Passing parameters
<BR>
in registers is a good thing, but compiler writers just need to be
<BR>
more clever and careful.
<BR>
<P>../Dave
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0219.html">furio ercolessi: "Re: Stable Kernel for Alpha"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0217.html">Gavin Woodhatch: "Stable Kernel for Alpha"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0216.html">Joachim Wesner: "Re: an evil memcpy() optimizer bug! (egcs-1.1.2, alphaev6, linux)"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0220.html">Phil Carmody: "Re: an evil memcpy() optimizer bug! (egcs-1.1.2, alphaev6, linux)"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0216.html">Dave Mason: "Re: an evil memcpy() optimizer bug! (egcs-1.1.2, alphaev6, linux)"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Sun Aug 01 1999 - 06:12:35 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
