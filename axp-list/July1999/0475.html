<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: Linux Install on AlphaServer 4X00 5/400 21164 400</TITLE>
<META NAME="Author" CONTENT="Peter Rival (frival@zk3.dec.com)">
<META NAME="Subject" CONTENT="Re: Linux Install on AlphaServer 4X00 5/400 21164 400MHz">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: Linux Install on AlphaServer 4X00 5/400 21164 400MHz</H1>
<HR>
<P>
<!-- received="Fri Jul 23 19:09:32 1999" -->
<!-- isoreceived="19990724020932" -->
<!-- sent="Fri, 23 Jul 1999 15:01:06 -0400" -->
<!-- isosent="19990723190106" -->
<!-- name="Peter Rival" -->
<!-- email="frival@zk3.dec.com" -->
<!-- subject="Re: Linux Install on AlphaServer 4X00 5/400 21164 400MHz" -->
<!-- id="3798BBF2.55869243@zk3.dec.com" -->
<!-- inreplyto="C98EB92F42B9D11197EA0000F806268E02A63A6F@pkoexc4.pko.dec.com" -->
<STRONG>Subject: </STRONG>Re: Linux Install on AlphaServer 4X00 5/400 21164 400MHz<BR>
<STRONG>From: </STRONG>Peter Rival (<EM>frival@zk3.dec.com</EM>)<BR>
<STRONG>Date: </STRONG>Fri Jul 23 1999 - 12:01:06 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#475">[ date ]</A>
<A HREF="index.html#475">[ thread ]</A>
<A HREF="subject.html#475">[ subject ]</A>
<A HREF="author.html#475">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0476.html">Greg Lindahl: "Re: Linux Install on AlphaServer 4X00 5/400 21164 400MHz"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0474.html">izaak bozof: "Re: poor AHA-2940UW performance under Linux/Alpha?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0468.html">Jemiolo, John: "RE: Linux Install on AlphaServer 4X00 5/400 21164 400MHz"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0476.html">Greg Lindahl: "Re: Linux Install on AlphaServer 4X00 5/400 21164 400MHz"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0468.html">Peter Rival: "Re: Linux Install on AlphaServer 4X00 5/400 21164 400MHz"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Um...if it were this easy, maybe someone can inform me as to why it's not like
<BR>
this by default.  According to what you have written the use of this type of
<BR>
config would neither require manual intervention on the part of the user, nor
<BR>
(if implemented correctly) break should someone upgrade kernels without
<BR>
thinking.
<BR>
<P>Greg Lindahl apparently had reported this problem a while ago (according to
<BR>
another email).  Does this mean that RedHat is going to fix this problem at
<BR>
least in some way for 6.1?  I'm being hopeful here - right now I have a CD that
<BR>
is completely useless to me if I'm trying to install a rawhide over serial
<BR>
console, and the fix does not break anything.  Correct me if I'm wrong here...
<BR>
<P>&nbsp;- Pete (who's not a happy camper because he is using 2.3.10 for benchmark work
<BR>
and loop devices don't compile yet...)
<BR>
<P>&quot;Jemiolo, John&quot; wrote:
<BR>
<P><EM>&gt; If you read serial-console.txt in the Documentation dir of the 2.2.* kernel
</EM><BR>
<EM>&gt; source tree. it explains that you have to remove /dev/console and /dev/tty0.
</EM><BR>
<EM>&gt; Then create new devices using
</EM><BR>
<EM>&gt; mknod -m 622 console  c 5 1
</EM><BR>
<EM>&gt; and
</EM><BR>
<EM>&gt; mknod -m 622 tty0 c 4 0     (yes tty0 not ttyS0 )
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Then, when serial console is configured into the kernel, If a graphics
</EM><BR>
<EM>&gt; controller is present it will be used as The console device. If No graphics
</EM><BR>
<EM>&gt; console is found, it will automatically fail over to the serial port.  There
</EM><BR>
<EM>&gt; is no need to create any links for ttyS0.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; I use this feature all the time in my 2.2 kernels...
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; JJ
</EM><BR>
<EM>&gt; &gt; ----------
</EM><BR>
<EM>&gt; &gt; From:         Rival, Frank
</EM><BR>
<EM>&gt; &gt; Reply To:     axp-list@redhat.com
</EM><BR>
<EM>&gt; &gt; Sent:         Friday, July 23, 1999 12:57 PM
</EM><BR>
<EM>&gt; &gt; To:   axp-list@redhat.com
</EM><BR>
<EM>&gt; &gt; Subject:      Re: Linux Install on AlphaServer 4X00 5/400 21164 400MHz
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; Peter Rival wrote:
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; &lt;snip&gt;
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;         if (open(&quot;/dev/console&quot;, O_RDWR, 0) &lt; 0)
</EM><BR>
<EM>&gt; &gt;                 printk(&quot;Warning: unable to open an initial console.\n&quot;);
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;         (void) dup(0);
</EM><BR>
<EM>&gt; &gt;         (void) dup(0);
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; ....
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; My guess is that yes, the install kernel never intended to support serial
</EM><BR>
<EM>&gt; &gt; console.  I'd call that an oversight if that's the case, but one that
</EM><BR>
<EM>&gt; &gt; probably wouldn't happen again.  We'll see what happens - this shouldn't
</EM><BR>
<EM>&gt; &gt; take too long...
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; Well, that part was correct - it didn't take too long at all.  The above
</EM><BR>
<EM>&gt; &gt; code is what's breaking.  The interesting thing is what appears to be the
</EM><BR>
<EM>&gt; &gt; cause - the devices used on the RH 6.0 CD.  It _appears_ that to save
</EM><BR>
<EM>&gt; &gt; space, /dev/console used the device number pairing (4,0) meant for tty0,
</EM><BR>
<EM>&gt; &gt; instead of that which is normally used (5,1).
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; Does anyone who understands this code path a bit better than I know why I
</EM><BR>
<EM>&gt; &gt; can get through this section of booting if all I do is change
</EM><BR>
<EM>&gt; &gt; &quot;/dev/console&quot; to &quot;/dev/ttyS0&quot;?  Yeah, it chokes shortly thereafter, but
</EM><BR>
<EM>&gt; &gt; this says something (I think).  Anyway, here's the error that I'm up to
</EM><BR>
<EM>&gt; &gt; now (I'm using 2.3.10, as it's the latest stable kernel I have that
</EM><BR>
<EM>&gt; &gt; actually builds)...
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; VFS: Mounted root (iso9660 filesystem) readonly.
</EM><BR>
<EM>&gt; &gt; Freeing unused kernel memory: 112k freed
</EM><BR>
<EM>&gt; &gt; hello
</EM><BR>
<EM>&gt; &gt; Red Hat install init version 1.1 starting
</EM><BR>
<EM>&gt; &gt; mounting /proc filesystem... done
</EM><BR>
<EM>&gt; &gt; opening /proc/cmdline... done
</EM><BR>
<EM>&gt; &gt; checking command line arguments...
</EM><BR>
<EM>&gt; &gt;  unknown option 'console=ttyS0'!done
</EM><BR>
<EM>&gt; &gt; checking for NFS root filesystem...no
</EM><BR>
<EM>&gt; &gt; trying to remount root filesystem read write... done
</EM><BR>
<EM>&gt; &gt; checking for writeable /tmp... no (probably a CD rooted install)
</EM><BR>
<EM>&gt; &gt; mke2fs 1.14, 9-Jkmod: failed to exec /sbin/modprobe -s -k char-major-4,
</EM><BR>
<EM>&gt; &gt; errno =
</EM><BR>
<EM>&gt; &gt; an-1999 for EXT2 FS 0.5b, 95/08/09
</EM><BR>
<EM>&gt; &gt; Linux ext2 filesystem format
</EM><BR>
<EM>&gt; &gt; Filesystem label=
</EM><BR>
<EM>&gt; &gt; 80 inodes, 300 blocks
</EM><BR>
<EM>&gt; &gt; 15 blocks (5.00%) reserved for the super user
</EM><BR>
<EM>&gt; &gt; First data block=1
</EM><BR>
<EM>&gt; &gt; Block size=1024 (log=0)
</EM><BR>
<EM>&gt; &gt; Fragment size=1024 (log=0)
</EM><BR>
<EM>&gt; &gt; 1 block group
</EM><BR>
<EM>&gt; &gt; 8192 blocks per group, 8192 fragments per group
</EM><BR>
<EM>&gt; &gt; 80 inodes per group
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; Writing inode tables: done
</EM><BR>
<EM>&gt; &gt; Writing superblocks and filesystem accounting information: done
</EM><BR>
<EM>&gt; &gt; creating 300k of ramdisk space... done
</EM><BR>
<EM>&gt; &gt; mounting /tmp from ramdisk... done
</EM><BR>
<EM>&gt; &gt; couldn't open /dev/tty4 for syslog -- still using /tmp/syslog
</EM><BR>
<EM>&gt; &gt; running install...
</EM><BR>
<EM>&gt; &gt; failed to open /dev/tty1failed.
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; I can't recover from this.
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; I've attached an extracted .config - maybe someone can smack me around and
</EM><BR>
<EM>&gt; &gt; show me what I'm missing.  I'm hoping that someone just says &quot;Oh, just
</EM><BR>
<EM>&gt; &gt; make /dev/console have the correct major/minor, create a /dev/tty0, and
</EM><BR>
<EM>&gt; &gt; walk away&quot; or something like that.  Even if I have to burn a CD again to
</EM><BR>
<EM>&gt; &gt; get this to work, I'll be happy...
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;  - Pete
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; --
</EM><BR>
<EM>&gt; To unsubscribe: send e-mail to axp-list-request@redhat.com with
</EM><BR>
<EM>&gt; 'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</EM><BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0476.html">Greg Lindahl: "Re: Linux Install on AlphaServer 4X00 5/400 21164 400MHz"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0474.html">izaak bozof: "Re: poor AHA-2940UW performance under Linux/Alpha?"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0468.html">Jemiolo, John: "RE: Linux Install on AlphaServer 4X00 5/400 21164 400MHz"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0476.html">Greg Lindahl: "Re: Linux Install on AlphaServer 4X00 5/400 21164 400MHz"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0468.html">Peter Rival: "Re: Linux Install on AlphaServer 4X00 5/400 21164 400MHz"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Sun Aug 01 1999 - 06:12:36 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
