<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: files &gt;4gig [WAS Adding more than 8 swap partition</TITLE>
<META NAME="Author" CONTENT="Uncle George (gatgul@voicenet.com)">
<META NAME="Subject" CONTENT="files &gt;4gig [WAS Adding more than 8 swap partitions]">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>files &gt;4gig [WAS Adding more than 8 swap partitions]</H1>
<HR>
<P>
<!-- received="Sat Jun 05 04:19:50 1999" -->
<!-- isoreceived="19990605111950" -->
<!-- sent="Fri, 04 Jun 1999 19:45:12 -0400" -->
<!-- isosent="19990604234512" -->
<!-- name="Uncle George" -->
<!-- email="gatgul@voicenet.com" -->
<!-- subject="files &gt;4gig [WAS Adding more than 8 swap partitions]" -->
<!-- id="37586508.6CA0E9B5@voicenet.com" -->
<!-- inreplyto="374B1D98.C57BACFB@voicenet.com" -->
<STRONG>Subject: </STRONG>files >4gig [WAS Adding more than 8 swap partitions]<BR>
<STRONG>From: </STRONG>Uncle George (<EM>gatgul@voicenet.com</EM>)<BR>
<STRONG>Date: </STRONG>Fri Jun 04 1999 - 16:45:12 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#96">[ date ]</A>
<A HREF="index.html#96">[ thread ]</A>
<A HREF="subject.html#96">[ subject ]</A>
<A HREF="author.html#96">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0097.html">Wes Bauske: "Re: files &gt;4gig [WAS Adding more than 8 swap partitions]"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0095.html">Paul Jakma: "RE: ??? PAM_pwdb and user nobody ???"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0097.html">Wes Bauske: "Re: files &gt;4gig [WAS Adding more than 8 swap partitions]"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
So I created  a 17 gig file using Linux 2.2.9 &amp; a file in /tmp.  Interestingly
<BR>
enough at 17 gig I get an error 22 ( still have space &amp; inodes available ) .
<BR>
YOU ALSO NOW HAVE A CORRUPT / BUSTED-SUPER-BLOCK in the partition.
<BR>
fsck wants to use an alternate superblock, and suggests using 8192(?), which
<BR>
doesn't work. :-\
<BR>
this is the little pgm used to create the 17gig sparse file.
<BR>
So I guess its not a 2/4gig boundary problem anymore.
<BR>
gat
<BR>
<P>BTW it may be that fsck cant handle it ( redhat 5.0 vintage ), but I dunno at the
<BR>
moment :( It just at reboot time, i always force a fsck. Removeing the 17gig file
<BR>
didn't help :-(
<BR>
<P><P>Pgm used:
<BR>
#include &lt;stdio.h&gt;
<BR>
#include &lt;errno.h&gt;
<BR>
#include &lt;fcntl.h&gt;
<BR>
#include &lt;unistd.h&gt;
<BR>
/********************  BE CAREFULL ******************************/
<BR>
/* This can kill the superblock on the partition the file is written on */
<BR>
/* Which may not be recoverable                 gat 6/5/99      */
<BR>
/******************** BE CAREFULL *******************************/
<BR>
<P>main()
<BR>
{
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long    l,r;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int     e, w;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int     fd;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fd = open(&quot;c&quot;,O_RDWR|O_CREAT|O_TRUNC);
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for ( l=0; l &lt; 64000000000L; l+=1000000) {
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r = lseek(fd, l, 0);
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;w = write(fd,&quot;a&quot;,1);
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fprintf(stderr,&quot;r=%lx, w=%d, l=%ld\n&quot;, r,w,l);
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<BR>
}
<BR>
<P><P>Uncle George wrote:
<BR>
<P><EM>&gt; Gee, looks like 15gig.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Ok, is this a feature of 2.2.x ? right ? or on on a diff os?
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Wes Bauske wrote:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; &gt; Uncle George wrote:
</EM><BR>
<EM>&gt; &gt; &gt;
</EM><BR>
<EM>&gt; &gt; &gt; I dont know what u mean by &quot;capable&quot;, but partition size may be &gt;2gig ( at
</EM><BR>
<EM>&gt; &gt; &gt; the time I had only a 4 gig drive ), but file size was still 2gig.  This was
</EM><BR>
<EM>&gt; &gt; &gt; with a 2.0linux on a redhat 4.0 compilation CD for the alpha.
</EM><BR>
<EM>&gt; &gt; &gt; Discussions since then about this limitation, only suggested that it was
</EM><BR>
<EM>&gt; &gt; &gt; possible to do, but not yet done so. After ALL why hold back?
</EM><BR>
<EM>&gt; &gt; &gt; Now u say its always been here ? I'd like to believe u, but my empirical
</EM><BR>
<EM>&gt; &gt; &gt; experience says thats just  not true.
</EM><BR>
<EM>&gt; &gt; &gt;
</EM><BR>
<EM>&gt; &gt; &gt; ANYBODY out there can create a file &gt;2gig on linux/alpha ?
</EM><BR>
<EM>&gt; &gt; &gt; gat
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; Sure.
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; -rw-r--r--   1 wsb      pds      15039538080 May 16 23:01 junk
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; Just having troubles lseek()'ing into it past 2GB. Still
</EM><BR>
<EM>&gt; &gt; testing though so hopefully I can determine if it's
</EM><BR>
<EM>&gt; &gt; something I did wrong, or glibc/kernel.
</EM><BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0097.html">Wes Bauske: "Re: files &gt;4gig [WAS Adding more than 8 swap partitions]"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0095.html">Paul Jakma: "RE: ??? PAM_pwdb and user nobody ???"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0097.html">Wes Bauske: "Re: files &gt;4gig [WAS Adding more than 8 swap partitions]"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Wed Jun 30 1999 - 19:27:25 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
