<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: fork: Cannot allocate memory</TITLE>
<META NAME="Author" CONTENT="furio ercolessi (furio@spin.it)">
<META NAME="Subject" CONTENT="Re: fork: Cannot allocate memory">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: fork: Cannot allocate memory</H1>
<HR>
<P>
<!-- received="Thu Jun 10 12:07:08 1999" -->
<!-- isoreceived="19990610190708" -->
<!-- sent="Thu Jun 10 12:07:08 1999" -->
<!-- isosent="19990610190708" -->
<!-- name="furio ercolessi" -->
<!-- email="furio@spin.it" -->
<!-- subject="Re: fork: Cannot allocate memory" -->
<!-- id="199906101059.MAA17652@noc.spin.it" -->
<!-- inreplyto="199906092344.TAA02585@ra.lexis-nexis.com" -->
<STRONG>Subject: </STRONG>Re: fork: Cannot allocate memory<BR>
<STRONG>From: </STRONG>furio ercolessi (<EM>furio@spin.it</EM>)<BR>
<STRONG>Date: </STRONG>Thu Jun 10 1999 - 12:07:08 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#170">[ date ]</A>
<A HREF="index.html#170">[ thread ]</A>
<A HREF="subject.html#170">[ subject ]</A>
<A HREF="author.html#170">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0171.html">Flavio Pescuma: "2.2.9 hangs after Entering SMP mode"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0169.html">designer seven: "Re: Nvidia 3D cards"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0166.html">Larry Snyder: "Re: fork: Cannot allocate memory"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0176.html">Stefan Boresch: "Re: fork: Cannot allocate memory"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0166.html">furio ercolessi: "Re: fork: Cannot allocate memory"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
<EM>&gt; 
</EM><BR>
<EM>&gt; Just a thought....
</EM><BR>
<EM>&gt; I assume squid is running as root, and maybe banging against a memory/
</EM><BR>
<EM>&gt; user limitation.
</EM><BR>
<EM>&gt; Can squid run as non-root? (maybe nobody....)?  If so, it'd probably
</EM><BR>
<EM>&gt; be better security-wise, anyway.
</EM><BR>
<EM>&gt; Are other (non-root) users experiencing the same problem?  It doesn't
</EM><BR>
<EM>&gt; look like you're running out of proc-table or overall ram.
</EM><BR>
<P>Squid is running on its own UID, and it is rather quiet from the
<BR>
point of view of process creation.
<BR>
The problem affects all users, including root.
<BR>
I do not think I have any memory/user limitation.
<BR>
I now tried to bump the max no. of tasks to 4096, just to see if
<BR>
it makes a difference; the syndrome takes a few hours or days to develop.
<BR>
<P>furio ercolessi
<BR>
<P>PS for Maurice: no, we have definitely trashed that SCSI adapter brand...
<BR>
<P><P><EM>&gt; furio ercolessi &lt;furio@spin.it&gt; wrote:
</EM><BR>
<EM>&gt; &gt; Hi all,
</EM><BR>
<EM>&gt; &gt; 
</EM><BR>
<EM>&gt; &gt; I am at a loss to understand why my system (LX, 2.2.7) from time to time
</EM><BR>
<EM>&gt; &gt; is now refusing to start new processes:
</EM><BR>
<EM>&gt; &gt; 
</EM><BR>
<EM>&gt; &gt; -------------------------------------------------
</EM><BR>
<EM>&gt; &gt; # man ps
</EM><BR>
<EM>&gt; &gt; Formatting page, please wait...
</EM><BR>
<EM>&gt; &gt; sh: fork: Cannot allocate memory
</EM><BR>
<EM>&gt; &gt; sh: fork: Cannot allocate memory
</EM><BR>
<EM>&gt; &gt; Error executing formatting or display command.
</EM><BR>
<EM>&gt; &gt; [...]
</EM><BR>
<EM>&gt; &gt; # free
</EM><BR>
<EM>&gt; &gt;              total       used       free     shared    buffers     cached
</EM><BR>
<EM>&gt; &gt; Mem:        516720     510696       6024      71416     214536      97896
</EM><BR>
<EM>&gt; &gt; -/+ buffers/cache:     198264     318456
</EM><BR>
<EM>&gt; &gt; Swap:       262136       2280     259856
</EM><BR>
<EM>&gt; &gt; -------------------------------------------------
</EM><BR>
<EM>&gt; &gt; 
</EM><BR>
<EM>&gt; &gt; Plenty of memory is available (even if of course the system should
</EM><BR>
<EM>&gt; &gt; have to get rid of a few buffers).  The number of processes now
</EM><BR>
<EM>&gt; &gt; is less than 100, while NR_TASKS is 512 and MAX_TASKS_PER_USER 256.
</EM><BR>
<EM>&gt; &gt; 
</EM><BR>
<EM>&gt; &gt; This syndrome started since when I started running squid on the
</EM><BR>
<EM>&gt; &gt; system; but the squid process is around 100MB.
</EM><BR>
<EM>&gt; &gt; Any ideas?
</EM><BR>
<EM>&gt; &gt; 
</EM><BR>
<EM>&gt; &gt; Thanks
</EM><BR>
<EM>&gt; &gt; 
</EM><BR>
<EM>&gt; &gt; furio ercolessi
</EM><BR>
<EM>&gt; &gt; Spin - Trieste (Italy)
</EM><BR>
<EM>&gt; &gt; 
</EM><BR>
<EM>&gt; &gt; -- 
</EM><BR>
<EM>&gt; &gt; To unsubscribe: send e-mail to axp-list-request@redhat.com with
</EM><BR>
<EM>&gt; &gt; 'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; -- 
</EM><BR>
<EM>&gt; To unsubscribe: send e-mail to axp-list-request@redhat.com with
</EM><BR>
<EM>&gt; 'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; 
</EM><BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0171.html">Flavio Pescuma: "2.2.9 hangs after Entering SMP mode"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0169.html">designer seven: "Re: Nvidia 3D cards"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0166.html">Larry Snyder: "Re: fork: Cannot allocate memory"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0176.html">Stefan Boresch: "Re: fork: Cannot allocate memory"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0166.html">furio ercolessi: "Re: fork: Cannot allocate memory"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Wed Jun 30 1999 - 19:27:25 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
