<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: RE: framebuffer and ggi</TITLE>
<META NAME="Author" CONTENT="Vignaud Jean-Baptiste (jbv@club-internet.fr)">
<META NAME="Subject" CONTENT="RE: framebuffer and ggi">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>RE: framebuffer and ggi</H1>
<HR>
<P>
<!-- received="Mon Jun 21 22:51:41 1999" -->
<!-- isoreceived="19990622055141" -->
<!-- sent="Mon, 21 Jun 1999 08:56:01 +0200" -->
<!-- isosent="19990621065601" -->
<!-- name="Vignaud Jean-Baptiste" -->
<!-- email="jbv@club-internet.fr" -->
<!-- subject="RE: framebuffer and ggi" -->
<!-- id="000601bebbb3$1f81e860$cc000001@PC_VIGNAUD.xandmail.com" -->
<!-- inreplyto="376A8FC0.AACA215D@nist.gov" -->
<STRONG>Subject: </STRONG>RE: framebuffer and ggi<BR>
<STRONG>From: </STRONG>Vignaud Jean-Baptiste (<EM>jbv@club-internet.fr</EM>)<BR>
<STRONG>Date: </STRONG>Sun Jun 20 1999 - 23:56:01 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#437">[ date ]</A>
<A HREF="index.html#437">[ thread ]</A>
<A HREF="subject.html#437">[ subject ]</A>
<A HREF="author.html#437">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0438.html">James Livingston: "RE: Milo for dp264 ?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0436.html">Uncle George: "Re: [off-topic] stop bashing!"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0395.html">Adam C. Powell, IV: "Re: framebuffer and ggi"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0575.html">Quant-X Alpha Linux Support: "Re: framebuffer and ggi"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0395.html">Vignaud Jean-Baptiste: "RE: framebuffer and ggi"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; I first compiled the matroxfb in module mode, and after a modprobe the
</EM><BR>
<EM>&gt; &gt; screen goes covered by stranges pixels, the box was frozen, only a hard
</EM><BR>
<EM>&gt; &gt; reset unlock it.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Did you set a mode for the fb to start in?  For example,
</EM><BR>
<EM>&gt; &quot;modprobe matroxfb
</EM><BR>
<EM>&gt; vesa=0x318&quot; (this works with insmod, but I'm not sure about modprobe).
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; &gt; I'v compiled it in the kernel and added video:vesa:0x318. This time the
</EM><BR>
<EM>&gt; &gt; kernel booted correctly, and cat /proc/fb gives me '0 MATROX VGA'.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Really?  That's interesting, because it sounds like you're using
</EM><BR>
<EM>&gt; the vesafb
</EM><BR>
<EM>&gt; and not matroxfb.  The equivalent to use matroxfb would be
</EM><BR>
<EM>&gt; &quot;video=matroxfb:vesa:0x118&quot;.  Nonetheless, two interesting points:
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;    * vesafb works on SX/matrox
</EM><BR>
<EM>&gt;    * it boots in graphic mode
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; matroxfb hangs for me on LX when trying to boot in any graphic
</EM><BR>
<EM>&gt; mode, but boots
</EM><BR>
<EM>&gt; fine in text mode, then I switch mode later using fbset.
</EM><BR>
<EM>&gt;
</EM><BR>
I made a mistake while reporting this, it is true that you cannot boot in
<BR>
grafic mode, and
<BR>
the command passed to the kernel include the &quot;matrox:&quot;.
<BR>
<P><EM>&gt; &gt; Any trie to use fbset results in an error like SETMODE something (dont
</EM><BR>
<EM>&gt; &gt; remember the exact error code)
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Are you using &quot;-accel true&quot; with fbset as is suggested in the
</EM><BR>
<EM>&gt; FAQ?  This also
</EM><BR>
<EM>&gt; could be a vesafb/matroxfb issue...
</EM><BR>
<EM>&gt;
</EM><BR>
I'v compiled the fbset version included in libggi pack, and this worked fine
<BR>
on my SX.
<BR>
<P><EM>&gt; &gt; I'v downloaded the latest version of ggi (degas snapshot of
</EM><BR>
<EM>&gt; yesterday) and
</EM><BR>
<EM>&gt; &gt; compiled libggi with kgi and fbcon support.
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; All tries to run a demo result in the same error than with fbset.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; I don't know of any analogy to fbset's -accel in ggi, so I'd guess again
</EM><BR>
<EM>&gt; vesafb/matroxfb.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; &gt; I' compiled the kgicon module (after fixing a 'register' problem in
</EM><BR>
<EM>&gt; &gt; &lt;asm/current.h&gt; changing &quot;register struct task_struct *current
</EM><BR>
<EM>&gt; &gt; __asm__(&quot;$8&quot;);&quot; to &quot;struct task_struct *current __asm__(&quot;$8&quot;);&quot;
</EM><BR>
<EM>&gt; maybe this
</EM><BR>
<EM>&gt; &gt; was not the correct way to fix the error...), i'v compiled the
</EM><BR>
<EM>&gt; utils part of
</EM><BR>
<EM>&gt; &gt; the kgicon, instaled the two .o in
</EM><BR>
<EM>&gt; &gt; /lib/modules/.../video done a depmod -a and modprobe kgicon
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; this results in a kernel 'oops':
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; I thought I heard a rumor that kgicon was no longer supported...
</EM><BR>
<EM>&gt;
</EM><BR>
<P><P><EM>&gt; &gt; Can someone give me an example of fbset parameter to change the
</EM><BR>
<EM>&gt; mode of the
</EM><BR>
<EM>&gt; &gt; matroxfb...
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; I use: fbset 1280x1024-60 -depth 24 -accel true
</EM><BR>
<EM>&gt;
</EM><BR>
Ok, this worked...
<BR>
<P>I'll try to look at the matroxfb &lt;-&gt; pyxis interaction because i think this
<BR>
is the problem...
<BR>
<P>Thanx.
<BR>
<P>Jean-Baptiste
<BR>
<P><PRE>
-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0438.html">James Livingston: "RE: Milo for dp264 ?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0436.html">Uncle George: "Re: [off-topic] stop bashing!"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0395.html">Adam C. Powell, IV: "Re: framebuffer and ggi"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0575.html">Quant-X Alpha Linux Support: "Re: framebuffer and ggi"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0395.html">Vignaud Jean-Baptiste: "RE: framebuffer and ggi"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Wed Jun 30 1999 - 19:27:27 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
