<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>axp-list: Re: files &gt;4gig -- 2.2.9 is corrupting disk!</TITLE>
<META NAME="Author" CONTENT="Uncle George (gatgul@voicenet.com)">
<META NAME="Subject" CONTENT="Re: files &gt;4gig -- 2.2.9 is corrupting disk!">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: files &gt;4gig -- 2.2.9 is corrupting disk!</H1>
<HR>
<P>
<!-- received="Sun Jun 06 11:46:22 1999" -->
<!-- isoreceived="19990606184622" -->
<!-- sent="Sun, 06 Jun 1999 06:12:20 -0400" -->
<!-- isosent="19990606101220" -->
<!-- name="Uncle George" -->
<!-- email="gatgul@voicenet.com" -->
<!-- subject="Re: files &gt;4gig -- 2.2.9 is corrupting disk!" -->
<!-- id="375A4984.A3CD7A48@voicenet.com" -->
<!-- inreplyto="19990605132923.A95@bug.ucw.cz" -->
<STRONG>Subject: </STRONG>Re: files >4gig -- 2.2.9 is corrupting disk!<BR>
<STRONG>From: </STRONG>Uncle George (<EM>gatgul@voicenet.com</EM>)<BR>
<STRONG>Date: </STRONG>Sun Jun 06 1999 - 03:12:20 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#106">[ date ]</A>
<A HREF="index.html#106">[ thread ]</A>
<A HREF="subject.html#106">[ subject ]</A>
<A HREF="author.html#106">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0107.html">Gavin: "mysql troubles with text , tinytext etc fields"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0105.html">Dave Gilbert: "Patches:IBM Data explorer on Alpha"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
If ur corruption is the bogus 'mode' of the file,  than that is not true.
<BR>
If ur fsck ( e2fcsk) fails, then u need to upgrade ( ie to the one from RH 6.0
<BR>
sources).
<BR>
gat
<BR>
Pavel Machek wrote:
<BR>
<P><EM>&gt; Hi!
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; &gt; So I created  a 17 gig file using Linux 2.2.9 &amp; a file in /tmp.  Interestingly
</EM><BR>
<EM>&gt; &gt; enough at 17 gig I get an error 22 ( still have space &amp; inodes
</EM><BR>
<EM>&gt; &gt; available ) .
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; Reproduced on my 2.2.9/i386. Program does something different than it
</EM><BR>
<EM>&gt; claims to (due to limited ranges of ints etc), but causes
</EM><BR>
<EM>&gt; corruption. When I did ls -l c after run I saw rwx-----T or something
</EM><BR>
<EM>&gt; this crazy. I tried it twice, worked both times.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; If you don't want to trash your harddisk, be sure to sync; killall
</EM><BR>
<EM>&gt; bdflush; sync; run test; look what it caused and then _POWER OFF
</EM><BR>
<EM>&gt; WITHOUT SYNCING_.
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; &gt; #include &lt;stdio.h&gt;
</EM><BR>
<EM>&gt; &gt; #include &lt;errno.h&gt;
</EM><BR>
<EM>&gt; &gt; #include &lt;fcntl.h&gt;
</EM><BR>
<EM>&gt; &gt; #include &lt;unistd.h&gt;
</EM><BR>
<EM>&gt; &gt; /********************  BE CAREFULL ******************************/
</EM><BR>
<EM>&gt; &gt; /* This can kill the superblock on the partition the file is written on */
</EM><BR>
<EM>&gt; &gt; /* Which may not be recoverable                 gat 6/5/99      */
</EM><BR>
<EM>&gt; &gt; /******************** BE CAREFULL *******************************/
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt; main()
</EM><BR>
<EM>&gt; &gt; {
</EM><BR>
<EM>&gt; &gt;         long    l,r;
</EM><BR>
<EM>&gt; &gt;         int     e, w;
</EM><BR>
<EM>&gt; &gt;         int     fd;
</EM><BR>
<EM>&gt; &gt;         fd = open(&quot;c&quot;,O_RDWR|O_CREAT|O_TRUNC);
</EM><BR>
<EM>&gt; &gt;
</EM><BR>
<EM>&gt; &gt;         for ( l=0; l &lt; 64000000000L; l+=1000000) {
</EM><BR>
<EM>&gt; &gt;             r = lseek(fd, l, 0);
</EM><BR>
<EM>&gt; &gt;             w = write(fd,&quot;a&quot;,1);
</EM><BR>
<EM>&gt; &gt;             fprintf(stderr,&quot;r=%lx, w=%d, l=%ld\n&quot;, r,w,l);
</EM><BR>
<EM>&gt; &gt;         }
</EM><BR>
<EM>&gt; &gt; }
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; --
</EM><BR>
<EM>&gt; I'm really pavel@ucw.cz. Look at <A HREF="http://195.113.31.123/~pavel.">http://195.113.31.123/~pavel.</A>  Pavel
</EM><BR>
<EM>&gt; Hi! I'm a .signature virus! Copy me into your ~/.signature, please!
</EM><BR>
<P><P><PRE>
-- 
To unsubscribe: send e-mail to axp-list-request@redhat.com with
'unsubscribe' as the subject.  Do not send it to axp-list@redhat.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0107.html">Gavin: "mysql troubles with text , tinytext etc fields"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0105.html">Dave Gilbert: "Patches:IBM Data explorer on Alpha"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Wed Jun 30 1999 - 19:27:25 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
