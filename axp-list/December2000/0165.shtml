<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN"> 
     <HTML> 
     <HEAD> 
     <TITLE>Axp-List Archive</TITLE> 
     <LINK REV="made" HREF="mailto:mailto-address"> 
     <HEAD> 
     <BODY BGCOLOR="#DC9D33" TEXT="#000000" LINK="#DD0000" ALINK="#CC0000" VLINK="#CC0000">
		<CENTER>  <!--#exec cgi="/cgi-bin/banmat1.cgi"--></CENTER>

     <H1 ALIGN=CENTER>Axp-List Archive<BR> Re: 32-bit binaries (howto?)</H1> 
	
<!-- received="Thu Dec 14 20:01:52 2000" -->
<!-- isoreceived="20001215040152" -->
<!-- sent="Thu, 14 Dec 2000 16:38:48 +0000 (GMT)" -->
<!-- isosent="20001214163848" -->
<!-- name="reig@dcs.gla.ac.uk" -->
<!-- email="reig@dcs.gla.ac.uk" -->
<!-- subject="Re: 32-bit binaries (howto?)" -->
<!-- id="200012141638.QAA27608@crab.dcs.gla.ac.uk" -->
<!-- inreplyto="000401c065e8$c17bada0$e418fea9@hptilap.hpti.com" -->
<STRONG>Subject: </STRONG>Re: 32-bit binaries (howto?)<BR>
<EM>reig@dcs.gla.ac.uk</EM><BR>
<STRONG>Date: </STRONG>Thu Dec 14 08:38:48 2000
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.shtml#165">[ date ]</A>
<A HREF="index.shtml#165">[ thread ]</A>
<A HREF="subject.shtml#165">[ subject ]</A>
<A HREF="author.shtml#165">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0166.shtml">Michal Jaegermann: "Re: Avanti maxes out..."</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0164.shtml">Greg Lindahl: "RE: 32-bit binaries (howto?)"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0164.shtml">Greg Lindahl: "RE: 32-bit binaries (howto?)"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0164.shtml">reig@dcs.gla.ac.uk: "Re: 32-bit binaries (howto?)"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Greg Lindahl wrote:
<BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; &gt; OK, I've linked my program with gcc -Wl,-taso ... and yet I'm seeing
</EM><BR>
<EM>&gt; &gt; addresses larger than 2^32 with gdb:
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Are you running a version of glibc recent enough to not stomp on your 32-bit
</EM><BR>
<EM>&gt; configuration? The previous messages that you were quoting a while back
</EM><BR>
<EM>&gt; explains how to use strace to look for this problem, and what call to add to
</EM><BR>
<EM>&gt; your program to fix it, at startup.
</EM><BR>
<P>I now have more information about the possible cause of this. The
<BR>
program uses mmap, and I need to make sure that mmap only allocates in
<BR>
the low 32-bits of the address space.  I have the following #ifdef for
<BR>
Alpha/osf1.
<BR>
<P>[The calls will be like mmap(MMAP_ADDR, ......)]
<BR>
<P>#if (defined(HOST_ALPHA32) &amp;&amp; (defined(OPSYS_OSF1) || defined(OPSYS_DUNIX)))
<BR>
&nbsp;&nbsp;/* To insure that mmap returns a 32-bit address, we need to specify 
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a non-zero address to mmap().  The address 0x2000000 is the location
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of the text segment, which is a good minimum value since the C stack 
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lives just below this address and mmap will find regions above it.
<BR>
&nbsp;&nbsp;&nbsp;*/
<BR>
#  define MMAP_ADDR     (caddr_t)0x2000000
<BR>
#else
<BR>
#  define MMAP_ADDR     0
<BR>
#endif
<BR>
<P>[We are passing -T 2000000 to cc on alpha osf1/dunix]
<BR>
<P>If I tentatively use the same value for alpha linux, I do not core
<BR>
dump at the same point I did a few hours ago (I get other problems
<BR>
unrelated to this). However, does anyone know of a sensible address
<BR>
for the first argument of mmap on alpha linux if I want to allocate in
<BR>
the lower 32 bits? That is, what is the default memory layout (text,
<BR>
stack, etc)?
<BR>
<P>Thanks in advance
<BR>
<P>Fermin
<BR>
<P><P><P><P><P>_______________________________________________
<BR>
Axp-list mailing list
<BR>
Axp-list@redhat.com
<BR>
https://listman.redhat.com/mailman/listinfo/axp-list
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0166.shtml">Michal Jaegermann: "Re: Avanti maxes out..."</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0164.shtml">Greg Lindahl: "RE: 32-bit binaries (howto?)"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0164.shtml">Greg Lindahl: "RE: 32-bit binaries (howto?)"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0164.shtml">reig@dcs.gla.ac.uk: "Re: 32-bit binaries (howto?)"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR> 
     <P> 
     <SMALL> 
     <EM> 
     This archive was generated by  <A HREF="http://www.landfield.com/hypermail">hypermail version 2a22 </A> on Tue Jan  2 07:48:32 2001 PST <BR>
	Send any problems or questions about this archive to <A HREF="mailto:webmaster@alphalinux.org">webmaster@alphalinux.org</A>. 
     </EM> 
     </SMALL> 
     </BODY> 
     </HTML> 
