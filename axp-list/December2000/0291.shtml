<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN"> 
     <HTML> 
     <HEAD> 
     <TITLE>Axp-List Archive</TITLE> 
     <LINK REV="made" HREF="mailto:mailto-address"> 
     <HEAD> 
     <BODY BGCOLOR="#DC9D33" TEXT="#000000" LINK="#DD0000" ALINK="#CC0000" VLINK="#CC0000">
		<CENTER>  <!--#exec cgi="/cgi-bin/banmat1.cgi"--></CENTER>

     <H1 ALIGN=CENTER>Axp-List Archive<BR> Re: QLogicFC problems with 2.4.x?</H1> 
	
<!-- received="Wed Dec 20 18:35:24 2000" -->
<!-- isoreceived="20001221023524" -->
<!-- sent="Tue, 19 Dec 2000 13:17:30 -0500" -->
<!-- isosent="20001219181730" -->
<!-- name="Peter Rival" -->
<!-- email="frival@zk3.dec.com" -->
<!-- subject="Re: QLogicFC problems with 2.4.x?" -->
<!-- id="3A3FA63A.801@zk3.dec.com" -->
<!-- inreplyto="3A3E8096.3010606@zk3.dec.com" -->
<STRONG>Subject: </STRONG>Re: QLogicFC problems with 2.4.x?<BR>
<STRONG>From: </STRONG>Peter Rival (<EM>frival@zk3.dec.com</EM>)<BR>
<STRONG>Date: </STRONG>Tue Dec 19 10:17:30 2000
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.shtml#291">[ date ]</A>
<A HREF="index.shtml#291">[ thread ]</A>
<A HREF="subject.shtml#291">[ subject ]</A>
<A HREF="author.shtml#291">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0292.shtml">Peter Petrakis: "RE: SRM help"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0290.shtml">Jemiolo, John: "RE: booting to cdrom on alphastation 200"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0260.shtml">Peter Rival: "QLogicFC problems with 2.4.x?"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0260.shtml">Peter Rival: "Re: QLogicFC problems with 2.4.x?"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
This is just to let everyone know that, thanks to Craig Ruff, I now have 
<BR>
qlogicfc working under 2.4.11 on my ES40 and GS80.  The secret is to set 
<BR>
CONNECTION_PREFERENCE to P2P_ONLY instead of LOOP_ONLY, and to build it 
<BR>
in to the kernel instead of as a module.  My problem now is that the 
<BR>
GS80 oopses when I try to mke2fs the second stripe set on the HSG80.  
<BR>
This _only_ happens on the second mke2fs, not the first.  Screen dump is 
<BR>
as follows:
<BR>
<P>#mke2fs /dev/sde2
<BR>
....
<BR>
Writing inode tables: done
<BR>
Writing superblocks and filesystem accounting information: pci_map_sg 
<BR>
failed: could not allocate dma page tables
<BR>
pci_map_sg failed: could not allocate dma page tables
<BR>
pci_map_sg failed: could not allocate dma page tables
<BR>
pci_map_sg failed: could not allocate dma page tables
<BR>
pci_map_sg failed: could not allocate dma page tables
<BR>
pci_map_sg failed: could not allocate dma page tables
<BR>
pci_map_sg failed: could not allocate dma page tables
<BR>
pci_map_sg failed: could not allocate dma page tables
<BR>
Unable to handle kernel paging request at virtual address 003ffc00001a0000
<BR>
....
<BR>
I've inlined the ksymoops output below.  I still haven't gotten the 
<BR>
qla2x00 driver working... kinda strange...  I'll also be trying Matthew 
<BR>
Jacob's driver as soon as I get the chance.  Thanks for all the 
<BR>
suggestions everyone!
<BR>
<P>&nbsp;&nbsp;- Pete
<BR>
<P>ksymoops 0.7c on alpha 2.4.0-test11.  Options used
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;-V (default)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;-k /proc/ksyms (default)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;-l /proc/modules (default)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;-o /lib/modules/2.4.0-test11/ (default)
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;-m /usr/tmp/System.map (specified)
<BR>
<P>No modules in ksyms, skipping objects
<BR>
Warning (read_lsmod): no symbols in lsmod, is /proc/modules a valid 
<BR>
lsmod file?
<BR>
Unable to handle kernel paging request at virtual address 003ffc00001a0000
<BR>
CPU 0 swapper(0): Oops 1
<BR>
pc = [&lt;fffffc000081ca40&gt;]  ra = [&lt;fffffc000081d4a4&gt;]  ps = 0007
<BR>
Using defaults from ksymoops -t elf64-alpha -a alpha
<BR>
Warning (Oops_read): Code line not seen, dumping what data is available
<BR>
<P><EM> &gt;&gt;PC;  fffffc000081ca40 &lt;iommu_arena_free+20/40&gt;   &lt;=====
</EM><BR>
<P>gp = fffffc0000ab9460  sp = fffffc0000a1bd98
<BR>
Code: fffffc0043f209a1 fffffc0042220642 fffffc00e4200008 
<BR>
fffffc002fe00000 fffffc0047ff041f fffffc002fe00000 fffffc00b7e20000 
<BR>
fffffc0040603403
<BR>
<P>Code;  fffffc000081ca40 &lt;iommu_arena_free+20/40&gt;
<BR>
<P>0000000000000000 &lt;_PC&gt;:
<BR>
Code; fffffc000081ca40 &lt;iommu_arena_free+20/40&gt;
<BR>
0: a1 09 f2 43 cmplt zero,a2,t0
<BR>
Code; fffffc000081ca44 &lt;iommu_arena_free+24/40&gt;
<BR>
4: 00 fc ff ff bgt zero,fffffffffffff008 &lt;_PC+0xfffffffffffff008&gt; 
<BR>
fffffc000081ba48 &lt;smp_call_function+108/140&gt;
<BR>
Code; fffffc000081ca48 &lt;iommu_arena_free+28/40&gt;
<BR>
8: 42 06 22 42 s8addq a1,t1,t1
<BR>
Code; fffffc000081ca4c &lt;iommu_arena_free+2c/40&gt;
<BR>
c: 00 fc ff ff bgt zero,fffffffffffff010 &lt;_PC+0xfffffffffffff010&gt; 
<BR>
fffffc000081ba50 &lt;smp_call_function+110/140&gt;
<BR>
Code; fffffc000081ca50 &lt;iommu_arena_free+30/40&gt;
<BR>
10: 08 00 20 e4 beq t0,34 &lt;_PC+0x34&gt; fffffc000081ca74 
<BR>
&lt;pci_map_single+14/1a0&gt;
<BR>
Code; fffffc000081ca54 &lt;iommu_arena_free+34/40&gt;
<BR>
14: 00 fc ff ff bgt zero,fffffffffffff018 &lt;_PC+0xfffffffffffff018&gt; 
<BR>
fffffc000081ba58 &lt;smp_call_function+118/140&gt;
<BR>
Code; fffffc000081ca58 &lt;iommu_arena_free+38/40&gt;
<BR>
18: 00 00 e0 2f unop
<BR>
Code; fffffc000081ca5c &lt;iommu_arena_free+3c/40&gt;
<BR>
1c: 00 fc ff ff bgt zero,fffffffffffff020 &lt;_PC+0xfffffffffffff020&gt; 
<BR>
fffffc000081ba60 &lt;smp_call_function+120/140&gt;
<BR>
Code; fffffc000081ca60 &lt;pci_map_single+0/1a0&gt;
<BR>
20: 1f 04 ff 47 nop
<BR>
<P>Code;  fffffc000081ca64 &lt;pci_map_single+4/1a0&gt;
<BR>
&nbsp;&nbsp;24:   00 fc ff ff       bgt  zero,fffffffffffff028 
<BR>
&lt;_PC+0xfffffffffffff028&gt; fffffc000081ba68 &lt;smp_call_function+128/140&gt;
<BR>
Code;  fffffc000081ca68 &lt;pci_map_single+8/1a0&gt;
<BR>
&nbsp;&nbsp;28:   00 00 e0 2f       unop
<BR>
Code;  fffffc000081ca6c &lt;pci_map_single+c/1a0&gt;
<BR>
&nbsp;&nbsp;2c:   00 fc ff ff       bgt  zero,fffffffffffff030 
<BR>
&lt;_PC+0xfffffffffffff030&gt; fffffc000081ba70 &lt;smp_call_function+130/140&gt;
<BR>
Code;  fffffc000081ca70 &lt;pci_map_single+10/1a0&gt;
<BR>
&nbsp;&nbsp;30:   00 00 e2 b7       stq  zero,0(t1)
<BR>
Code;  fffffc000081ca74 &lt;pci_map_single+14/1a0&gt;
<BR>
&nbsp;&nbsp;34:   00 fc ff ff       bgt  zero,fffffffffffff038 
<BR>
&lt;_PC+0xfffffffffffff038&gt; fffffc000081ba78 &lt;smp_call_function+138/140&gt;
<BR>
Code;  fffffc000081ca78 &lt;pci_map_single+18/1a0&gt;
<BR>
&nbsp;&nbsp;38:   03 34 60 40       addq t2,0x1,t2
<BR>
Code;  fffffc000081ca7c &lt;pci_map_single+1c/1a0&gt;
<BR>
&nbsp;&nbsp;3c:   00 fc ff ff       bgt  zero,fffffffffffff040 
<BR>
&lt;_PC+0xfffffffffffff040&gt; fffffc000081ba80 &lt;ipi_imb+0/20&gt;
<BR>
<P>Aiee, killing interrupt handler
<BR>
Kernel panic: Attempted to kill the idle task!
<BR>
<P>2 warnings issued.  Results may not be reliable.
<BR>
<P>Peter Rival wrote:
<BR>
<P><EM>&gt; Hi,
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;   I was just lent a QLogic ISP2200 FC adapter and have been having a  
</EM><BR>
<EM>&gt; bear of a time trying to get it to work on my Alpha ES40 and GS80.  
</EM><BR>
<EM>&gt; I've  tried both the qlogicfc (with standard kernel) and qla2x00 (from 
</EM><BR>
<EM>&gt; QLogic  and Compaq) driver both built-in and as modules but neither of 
</EM><BR>
<EM>&gt; them are  working.  Has anyone had success with later (I'm using 
</EM><BR>
<EM>&gt; 2.4.0-test11) 2.4  kernels and the QLogic FC adapter?  I'm currently 
</EM><BR>
<EM>&gt; plugged into a Brocade  switch (Plaides I, I believe) which is also 
</EM><BR>
<EM>&gt; attached to two pair of  HSG80 FC RAID controllers.  AFAIK, the 2200 
</EM><BR>
<EM>&gt; is supposed to work with an  FC fabric, so this should work, right?  
</EM><BR>
<EM>&gt; Can anyone offer any  assistance?  Thanks!
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; - Pete
</EM><BR>
<EM>&gt; 
</EM><BR>
<P><P><P>_______________________________________________
<BR>
Axp-list mailing list
<BR>
Axp-list@redhat.com
<BR>
https://listman.redhat.com/mailman/listinfo/axp-list
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0292.shtml">Peter Petrakis: "RE: SRM help"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0290.shtml">Jemiolo, John: "RE: booting to cdrom on alphastation 200"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0260.shtml">Peter Rival: "QLogicFC problems with 2.4.x?"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0260.shtml">Peter Rival: "Re: QLogicFC problems with 2.4.x?"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR> 
     <P> 
     <SMALL> 
     <EM> 
     This archive was generated by  <A HREF="http://www.landfield.com/hypermail">hypermail version 2a22 </A> on Tue Jan  2 07:48:32 2001 PST <BR>
	Send any problems or questions about this archive to <A HREF="mailto:webmaster@alphalinux.org">webmaster@alphalinux.org</A>. 
     </EM> 
     </SMALL> 
     </BODY> 
     </HTML> 
