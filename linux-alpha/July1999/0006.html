<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Linux Alpha List: Kernel 2.2.5 and ping problem</TITLE>
<META NAME="Author" CONTENT="Brian Candler (B.Candler@pobox.com)">
<META NAME="Subject" CONTENT="Kernel 2.2.5 and ping problem">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Kernel 2.2.5 and ping problem</H1>
<HR>
<P>
<!-- received="Wed Jul 07 23:15:39 1999" -->
<!-- isoreceived="19990708061539" -->
<!-- sent="Wed, 7 Jul 1999 16:04:37 +0100" -->
<!-- isosent="19990707150437" -->
<!-- name="Brian Candler" -->
<!-- email="B.Candler@pobox.com" -->
<!-- subject="Kernel 2.2.5 and ping problem" -->
<!-- id="19990707160437.C1906@linnet.org" -->
<STRONG>Subject: </STRONG>Kernel 2.2.5 and ping problem<BR>
<STRONG>From: </STRONG>Brian Candler (<EM>B.Candler@pobox.com</EM>)<BR>
<STRONG>Date: </STRONG>Wed Jul 07 1999 - 08:04:37 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#6">[ date ]</A>
<A HREF="index.html#6">[ thread ]</A>
<A HREF="subject.html#6">[ subject ]</A>
<A HREF="author.html#6">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0007.html">Michael Tibor: "Re: Kernel 2.2.5 and ping problem"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0005.html">Adam C. Powell, IV: "Re: Questions from an Alpha beginner"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0007.html">Michael Tibor: "Re: Kernel 2.2.5 and ping problem"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Yesterday I upgraded my DEC Multia to RedHat 6.0 + current patches (kernel
<BR>
2.2.5-22)
<BR>
<P>Now I see data corruption with pings, and at the same time syslog entries
<BR>
about unaligned traps (but otherwise the machine does appear to be working
<BR>
normally - e.g. I can log into it with ssh). Examples attached below.
<BR>
<P>Even more strangely, if I try to strace the ping, it dumps core.
<BR>
<P>Is this a well-known problem? Would upgrading to a later kernel version fix
<BR>
it? Or is this a bug in 'ping' in netkit-base-0.10-29 ?
<BR>
<P>Please can you cc: me on any reply, as I'm not a member of this list.
<BR>
<P>Thanks,
<BR>
<P>Brian Candler.
<BR>
<P>--- 8&lt; ------------------------------------------------------------------
<BR>
# ping 10.0.1.3
<BR>
PING 10.0.1.3 (10.0.1.3): 56 data bytes
<BR>
64 bytes from 10.0.1.3: icmp_seq=0 ttl=64 time=4.3 ms
<BR>
wrong data byte #8 should be 0x8 but was 0x4e
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c d e f 10 11 12 13 14 15 16 17 18 19 1a 1b 1c 1d 1e 1f 20 21 22 23 24 25 26 27 28 29 2a 2b 
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2c 2d 2e 2f 0 0 0 0 0 0 0 0 0 0 0 0 
<BR>
64 bytes from 10.0.1.3: icmp_seq=1 ttl=64 time=1.9 ms
<BR>
wrong data byte #8 should be 0x8 but was 0x0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;c d e f 10 11 12 13 14 15 16 17 18 19 1a 1b 1c 1d 1e 1f 20 21 22 23 24 25 26 27 28 29 2a 2b 
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2c 2d 2e 2f 0 0 0 0 0 0 0 0 0 0 0 0 
<BR>
<P>--- 10.0.1.3 ping statistics ---
<BR>
2 packets transmitted, 2 packets received, 0% packet loss
<BR>
round-trip min/avg/max = 1.9/3.1/4.3 ms
<BR>
<P># tail -4 /var/log/messages
<BR>
Jul  7 16:01:03 frogmella kernel: ping(2803): unaligned trap at 0000000120002b04: 0000000120117324 29 1 
<BR>
Jul  7 16:01:03 frogmella kernel: ping(2803): unaligned trap at 0000000120002b2c: 000000012011731c 29 2 
<BR>
Jul  7 16:01:04 frogmella kernel: ping(2803): unaligned trap at 0000000120002b04: 0000000120117324 29 1 
<BR>
Jul  7 16:01:04 frogmella kernel: ping(2803): unaligned trap at 0000000120002b2c: 000000012011731c 29 2 
<BR>
<P>&lt;&lt; These addresses do not appear in /boot/System.map, which runs from
<BR>
fffffc0000300000 to fffffc000057cf90 &gt;&gt;
<BR>
<P># strace ping 10.0.1.3
<BR>
&lt;&lt; snip some stuff &gt;&gt;
<BR>
mmap(0, 4831834512, PROT_WRITE|0x1000, 0xc /* MAP_??? */|MAP_FIXED|MAP_NORESERVE|MAP_GROWSDOWN|MAP_DENYWRITE|MAP_EXECUTABLE|0x1ffe8ac0, 4, 0) = 0x2000001c000
<BR>
ioctl(1, TCGETS, {B38400 opost isig icanon echo ...}) = 0
<BR>
write(1, &quot;PING 10.0.1.3 (10.0.1.3): 56 dat&quot;..., 40PING 10.0.1.3 (10.0.1.3): 56 data bytes
<BR>
) = 40
<BR>
Segmentation fault (core dumped)
<BR>
<P># gdb -c core
<BR>
&lt;&lt; snip copyright &gt;&gt;
<BR>
This GDB was configured as &quot;alpha-redhat-linux&quot;.
<BR>
Core was generated by `strace ping 10.0.1.3'.
<BR>
Program terminated with signal 11, Segmentation fault.
<BR>
<P>warning: Hit heuristic-fence-post without finding
<BR>
<P>warning: enclosing function for address 0x120006e18
<BR>
This warning occurs if you are debugging a function without any symbols
<BR>
(for example, in a stripped executable).  In that case, you may wish to
<BR>
increase the size of the search with the `set heuristic-fence-post' command.
<BR>
<P>Otherwise, you told GDB there was a function where there isn't one, or
<BR>
(more likely) you have encountered a bug in GDB.
<BR>
#0  0x120006e18 in ?? ()
<BR>
(gdb) 
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0007.html">Michael Tibor: "Re: Kernel 2.2.5 and ping problem"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0005.html">Adam C. Powell, IV: "Re: Questions from an Alpha beginner"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0007.html">Michael Tibor: "Re: Kernel 2.2.5 and ping problem"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Sun Aug 01 1999 - 06:12:39 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
