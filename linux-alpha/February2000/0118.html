<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Linux Alpha List: Re: 2.3.43 alpha broken with &gt;2g of ram</TITLE>
<META NAME="Author" CONTENT="Peter Rival (frival@zk3.dec.com)">
<META NAME="Subject" CONTENT="Re: 2.3.43 alpha broken with &gt;2g of ram">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: 2.3.43 alpha broken with &gt;2g of ram</H1>
<HR>
<P>
<!-- received="Sat Feb 12 01:34:08 2000" -->
<!-- isoreceived="20000212093408" -->
<!-- sent="Fri, 11 Feb 2000 16:20:35 -0500" -->
<!-- isosent="20000211212035" -->
<!-- name="Peter Rival" -->
<!-- email="frival@zk3.dec.com" -->
<!-- subject="Re: 2.3.43 alpha broken with &gt;2g of ram" -->
<!-- id="38A47D23.14BC5A0E@zk3.dec.com" -->
<!-- inreplyto="Pine.LNX.4.21.0002102338520.2380-100000@alpha.random" -->
<STRONG>Subject: </STRONG>Re: 2.3.43 alpha broken with >2g of ram<BR>
<STRONG>From: </STRONG>Peter Rival (<EM>frival@zk3.dec.com</EM>)<BR>
<STRONG>Date: </STRONG>Fri Feb 11 2000 - 13:20:35 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#118">[ date ]</A>
<A HREF="index.html#118">[ thread ]</A>
<A HREF="subject.html#118">[ subject ]</A>
<A HREF="author.html#118">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0119.html">Peter Rival: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0117.html">Andrea Arcangeli: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0107.html">Andrea Arcangeli: "2.3.43 alpha broken with &gt;2g of ram"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0121.html">Richard Henderson: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0107.html">Peter Rival: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
I backed out the below change (just out of curiosity) from 2.3.42+Richard's
<BR>
patches, and the ES40 booted up to the point where it tries to open
<BR>
/dev/console (just after freeing the initmem, having succeeded in scanning
<BR>
all the SCSI cards).  I'm sure there are other problems lurking that cause it
<BR>
to hang there, but who knows.  Richard - Jay had mentioned that the
<BR>
translated base address on the third window is set to zero when the comments
<BR>
say it should be 1GB, and I noticed the same for the fourth window which
<BR>
should be at 2GB - does this mean anything?
<BR>
<P>Also, I'm going to give it a whirl on a 4GB rawhide with the core_mcpcia.c
<BR>
from 2.3.43 and I'll let everyone know if that works, otherwise I'll have to
<BR>
hope someone can figure out the flush_tlb_pgtables linking problem so we can
<BR>
continue work with 2.3.43.  (_Still_ don't know enough about how we set up
<BR>
some of these things to make a difference sometimes...most discouraging...)
<BR>
<P>&nbsp;- Pete
<BR>
<P>Andrea Arcangeli wrote:
<BR>
&lt;snip&gt;
<BR>
<P><EM>&gt;
</EM><BR>
<EM>&gt; @@ -225,15 +232,8 @@
</EM><BR>
<EM>&gt;                         max_low_pfn = end;
</EM><BR>
<EM>&gt;         }
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt; -       /* Enforce maximum of 2GB even if there is more.  Blah.  */
</EM><BR>
<EM>&gt; -       if (max_low_pfn &gt; PFN_MAX)
</EM><BR>
<EM>&gt; -               max_low_pfn = PFN_MAX;
</EM><BR>
<EM>&gt; -       printk(&quot;max_low_pfn %ld\n&quot;, max_low_pfn);
</EM><BR>
<EM>&gt; -
</EM><BR>
<EM>&gt;         /* Find the end of the kernel memory.  */
</EM><BR>
<EM>&gt;         start_pfn = PFN_UP(virt_to_phys(_end));
</EM><BR>
<EM>&gt; -       printk(&quot;_end %p, start_pfn %ld\n&quot;, _end, start_pfn);
</EM><BR>
<EM>&gt; -
</EM><BR>
<EM>&gt;         bootmap_start = -1;
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;   try_again:
</EM><BR>
<EM>&gt;
</EM><BR>
<P>&lt;snip&gt;
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0119.html">Peter Rival: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0117.html">Andrea Arcangeli: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0107.html">Andrea Arcangeli: "2.3.43 alpha broken with &gt;2g of ram"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0121.html">Richard Henderson: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0107.html">Peter Rival: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Wed Mar 01 2000 - 06:26:28 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
