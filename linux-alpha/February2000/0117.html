<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Linux Alpha List: Re: 2.3.43 alpha broken with &gt;2g of ram</TITLE>
<META NAME="Author" CONTENT="Andrea Arcangeli (andrea@suse.de)">
<META NAME="Subject" CONTENT="Re: 2.3.43 alpha broken with &gt;2g of ram">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: 2.3.43 alpha broken with &gt;2g of ram</H1>
<HR>
<P>
<!-- received="Sat Feb 12 01:05:23 2000" -->
<!-- isoreceived="20000212090523" -->
<!-- sent="Fri, 11 Feb 2000 23:12:22 +0100 (CET)" -->
<!-- isosent="20000211221222" -->
<!-- name="Andrea Arcangeli" -->
<!-- email="andrea@suse.de" -->
<!-- subject="Re: 2.3.43 alpha broken with &gt;2g of ram" -->
<!-- id="Pine.LNX.4.21.0002112258200.2625-100000@alpha.random" -->
<!-- inreplyto="20000211132533.A28252@cygnus.com" -->
<STRONG>Subject: </STRONG>Re: 2.3.43 alpha broken with >2g of ram<BR>
<STRONG>From: </STRONG>Andrea Arcangeli (<EM>andrea@suse.de</EM>)<BR>
<STRONG>Date: </STRONG>Fri Feb 11 2000 - 14:12:22 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#117">[ date ]</A>
<A HREF="index.html#117">[ thread ]</A>
<A HREF="subject.html#117">[ subject ]</A>
<A HREF="author.html#117">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0118.html">Peter Rival: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0116.html">Jan-Benedict Glaw: "IRQ for TIMER and RTC"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0121.html">Richard Henderson: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0123.html">Richard Henderson: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0121.html">Andrea Arcangeli: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
On Fri, 11 Feb 2000, Richard Henderson wrote:
<BR>
<P><EM>&gt;Don't bother.  I didn't finish rawhide.
</EM><BR>
<P>Richard at this alpha breakpoint I think we can as well merge my SMP irq
<BR>
rewrite before 2.4.0 (that allows PCI irq to scale all over the CPUs in
<BR>
SMP and that make the irq code SMP safe).
<BR>
<P>andrea@alpha:~ &gt; cat /proc/interrupts 
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CPU0       CPU1       TRY0       TRY1       
<BR>
&nbsp;&nbsp;1:     112800          0     112800          0          XT-PIC   keyboard
<BR>
&nbsp;&nbsp;2:          0          0          0          0          XT-PIC   cascade
<BR>
&nbsp;&nbsp;8:   29063124          0   29063124          0             RTC  +timer
<BR>
&nbsp;12:     362593          0     362593          0          XT-PIC   PS/2 Mouse
<BR>
&nbsp;27:     247873     187199     427009     427898         TSUNAMI   eth0
<BR>
&nbsp;46:      44693      23916      68481      68537         TSUNAMI   sym53c8xx
<BR>
&nbsp;47:         29          8         37         37         TSUNAMI   sym53c8xx
<BR>
LOC:   29063125   29062986 
<BR>
<P>My rewrite is necessary if we want to scale with more than one CPU and
<BR>
more than one NIC and it fixes a few bugs in the alpha irq code.
<BR>
<P>My irq breakage in arch/alpha/kernel is shown explicitly by the code that
<BR>
doesn't compile and fixing the 7 not yet uptodate platforms is not a pain
<BR>
and can be done based on the previous code. The design is the same of x86.
<BR>
I only run my machine with my irq scaling code applyed and I _never_ had
<BR>
one problem. I know you had problems with irq probing but unless I get
<BR>
more details and bugreports I can't certainly fix that since I can't
<BR>
reproduce anything of strange here.
<BR>
<P>The alpha SMP irq patch I run all the time against 2.3.42 is here:
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<A HREF="ftp://ftp.*.kernel.org/pub/linux/kernel/people/andrea/patches/v2.3/2.3.42/alpha-irq-4.gz">ftp://ftp.*.kernel.org/pub/linux/kernel/people/andrea/patches/v2.3/2.3.42/alpha-irq-4.gz</A>
<BR>
<P>I checked it generates two silly (trivially fixable) rejects on the top of
<BR>
2.3.43. I'll produce anyway soon a 2.3.43 version (as soon as I'll run
<BR>
2.3.43 on alpha ;).
<BR>
<P>Comments?
<BR>
<P>Andrea
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0118.html">Peter Rival: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0116.html">Jan-Benedict Glaw: "IRQ for TIMER and RTC"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0121.html">Richard Henderson: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0123.html">Richard Henderson: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0121.html">Andrea Arcangeli: "Re: 2.3.43 alpha broken with &gt;2g of ram"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Wed Mar 01 2000 - 06:26:28 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
