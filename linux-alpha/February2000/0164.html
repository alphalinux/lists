<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Linux Alpha List: wrong strspn in alpha md_compile (fwd)</TITLE>
<META NAME="Author" CONTENT="Andrea Arcangeli (andrea@suse.de)">
<META NAME="Subject" CONTENT="wrong strspn in alpha md_compile (fwd)">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>wrong strspn in alpha md_compile (fwd)</H1>
<HR>
<P>
<!-- received="Sat Feb 26 17:41:27 2000" -->
<!-- isoreceived="20000227014127" -->
<!-- sent="Sat, 26 Feb 2000 16:21:29 +0100 (CET)" -->
<!-- isosent="20000226152129" -->
<!-- name="Andrea Arcangeli" -->
<!-- email="andrea@suse.de" -->
<!-- subject="wrong strspn in alpha md_compile (fwd)" -->
<!-- id="Pine.LNX.4.21.0002261620580.15305-100000@alpha.random" -->
<STRONG>Subject: </STRONG>wrong strspn in alpha md_compile (fwd)<BR>
<STRONG>From: </STRONG>Andrea Arcangeli (<EM>andrea@suse.de</EM>)<BR>
<STRONG>Date: </STRONG>Sat Feb 26 2000 - 07:21:29 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#164">[ date ]</A>
<A HREF="index.html#164">[ thread ]</A>
<A HREF="subject.html#164">[ subject ]</A>
<A HREF="author.html#164">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0165.html">Andrea Arcangeli: "wh64 (slow)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0163.html">Manfred Spraul: "Re: [BUG] (alpha) kernel thread panics due to stale PTBR settings in  2.3.47"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Just in case somebody had my same troubles...
<BR>
<P>Andrea
<BR>
<P>---------- Forwarded message ----------
<BR>
Date: Sat, 26 Feb 2000 16:15:28 +0100 (CET)
<BR>
From: Andrea Arcangeli &lt;andrea@suse.de&gt;
<BR>
To: bug-gnu-utils@gnu.org
<BR>
Subject: wrong strspn in alpha md_compile
<BR>
<P>This patch fixes a bug in the strspn pattern that was harming me. 6 is
<BR>
present in wh64 and 19 are present in some palxx opcode. The sh64 is
<BR>
alomost harmless since the source doesn't compile. The palxx opcodes
<BR>
instead was miscompiled as pal.
<BR>
<P>--- binutils-2.9.1.0.25/gas/config/tc-alpha.c.~1~	Wed Apr 21 23:44:17 1999
<BR>
+++ binutils-2.9.1.0.25/gas/config/tc-alpha.c	Sat Feb 26 16:07:57 2000
<BR>
@@ -817,7 +817,7 @@
<BR>
&nbsp;&nbsp;&nbsp;int ntok, opnamelen, trunclen;
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;/* split off the opcode */
<BR>
-  opnamelen = strspn (str, &quot;abcdefghijklmnopqrstuvwxyz_/48&quot;);
<BR>
+  opnamelen = strspn (str, &quot;abcdefghijklmnopqrstuvwxyz_/48619&quot;);
<BR>
&nbsp;&nbsp;&nbsp;trunclen = (opnamelen &lt; sizeof (opname) - 1
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;? opnamelen
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: sizeof (opname) - 1);
<BR>
<P>Andrea
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0165.html">Andrea Arcangeli: "wh64 (slow)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0163.html">Manfred Spraul: "Re: [BUG] (alpha) kernel thread panics due to stale PTBR settings in  2.3.47"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Wed Mar 01 2000 - 06:26:28 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
