<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Linux Alpha List: tulip driver</TITLE>
<META NAME="Author" CONTENT="Michael McKernan (mck@tivoli.mv.com)">
<META NAME="Subject" CONTENT="tulip driver">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>tulip driver</H1>
<HR>
<P>
<!-- received="Sun Nov 07 19:06:23 1999" -->
<!-- isoreceived="19991108030623" -->
<!-- sent="Sun, 07 Nov 1999 12:56:50 -0500" -->
<!-- isosent="19991107175650" -->
<!-- name="Michael McKernan" -->
<!-- email="mck@tivoli.mv.com" -->
<!-- subject="tulip driver" -->
<!-- id="199911071756.MAA27091@tivoli.mv.com" -->
<STRONG>Subject: </STRONG>tulip driver<BR>
<STRONG>From: </STRONG>Michael McKernan (<EM>mck@tivoli.mv.com</EM>)<BR>
<STRONG>Date: </STRONG>Sun Nov 07 1999 - 09:56:50 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#5">[ date ]</A>
<A HREF="index.html#5">[ thread ]</A>
<A HREF="subject.html#5">[ subject ]</A>
<A HREF="author.html#5">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0006.html">Brian Pomerantz: "Re: tulip driver"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0004.html">Alexander V. Lukyanov: "Re: Linux console on 164SX Alpha"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0006.html">Brian Pomerantz: "Re: tulip driver"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Hi,
<BR>
<P>I am completely new to alpha linux and no network expert, so please
<BR>
forgive me if any of this is too naive.  Perhaps it is so well known
<BR>
that it never shows up in the archives or in many deja vu searches.
<BR>
<P>I'll describe the problem momentarily, but the thing on the top of my
<BR>
stack right now is my unsuccessful effort to try to replace the tulip
<BR>
driver with the most current one.  I am unable to compile the driver
<BR>
because of what appears to be a bug in the kernel (2.2.5 and
<BR>
2.2.12).  FWIW, I am running RH6.0 on a miata.  Here's what I get.
<BR>
<P>In file included from /usr/include/asm/semaphore.h:11,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from /usr/include/linux/fs.h:161,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from /usr/include/linux/capability.h:13,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from /usr/include/linux/binfmts.h:5,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from /usr/include/linux/sched.h:8,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;from tulip.c:118:
<BR>
usr/include/asm/current.h:4: global register variable follows a function
<BR>
definition
<BR>
usr/include/asm/current.h:4: warning: call-clobbered register used
<BR>
for global register variable
<BR>
<P>Has noone compiled a tulip driver for these kernels?  Since the
<BR>
tulip.c in the kernel sources apparently leads to to a current.h
<BR>
which is identical, it seems that redhat can.  How'd they do that?
<BR>
<P>Now the original problem.  I tried to setup networking as closely as
<BR>
possible to what I have on an Intel RH6.1 box (which also uses a
<BR>
tulip card) to get a very simple home network.  The Intel box seems
<BR>
to get along well with a win95 box that I use to pay the bills. I can
<BR>
see activity at the hub from the alpha, which is apparently arp
<BR>
who-has requests, but nothing else in the network hears anything nor
<BR>
can the alpha hear anyone else. Pinging the host under its network
<BR>
name works ok.  It's quite possible that I have overlooked something,
<BR>
and I'd very much appreciate a hint if that's the case.
<BR>
<P>Many thanks,
<BR>
<P>Mike
<BR>
<P><P><P>This is what I have.
<BR>
<P>/etc/sysconfig/networks/scripts/ifcfg-eth0
<BR>
<P>DEVICE=eth0
<BR>
BOOTPROTO=static
<BR>
IPADDR=192.168.0.2
<BR>
NETMASK=255.255.255.0
<BR>
GATEWAY=192.168.0.2
<BR>
NS1=192.168.0.1
<BR>
HOSTNAME=dagmar.local.net
<BR>
DOMAIN=local.net
<BR>
<P>/etc/sysconfig/network
<BR>
<P>NETWORKING=yes
<BR>
FORWARD_IPV4=no
<BR>
HOSTNAME=dagmar.local.net
<BR>
DOMAINNAME=local.net
<BR>
GATEWAY=
<BR>
GATEWAYDEV=
<BR>
<P>/etc/hosts
<BR>
<P>127.0.0.1		localhost localhost.localdomain
<BR>
198.168.0.1		tivoli.local.net	tivoli
<BR>
192.168.0.2		dagmar.local.net	dagmar
<BR>
198.168.0.3		win.local.net		win
<BR>
<P>/etc/resolv.conf
<BR>
<P>search local.net
<BR>
nameserver 192.168.0.1
<BR>
<P>ifconfig eth0
<BR>
<P>eth0      Link encap:Ethernet  HWaddr 00:00:F8:75:DD:7A  
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;inet addr:192.168.0.2  Bcast:192.168.0.255  Mask:255.255.255.0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RX packets:0 errors:1245 dropped:0 overruns:0 frame:0
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TX packets:0 errors:44035 dropped:0 overruns:0 carrier:132105
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;collisions:0 txqueuelen:100 
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Interrupt:24 Base address:0x8000 
<BR>
<P>cat /proc/pci
<BR>
<P>PCI devices found:
<BR>
&nbsp;&nbsp;Bus  0, device   3, function  0:
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Ethernet controller: DEC DC21142 (rev 48).
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Medium devsel.  Fast back-to-back capable.  IRQ 24.  Master Capable.  
<BR>
Latency=32.  Min Gnt=20.Max Lat=40.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I/O at 0x8000 [0x8001].
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Non-prefetchable 32 bit memory at 0x9000000 [0x9000000].
<BR>
<P>tulip-diag ee
<BR>
<P>system type: Miata
<BR>
system vari: 0
<BR>
cpu model: EV56
<BR>
ioperm: turn_on 1 io.base 0
<BR>
ioperm: mmap of len 0x200000  returned 0x2000034e000
<BR>
ioperm: mprotect returned 0
<BR>
tulip-diag.c:v1.19 10/2/99 Donald Becker (becker@cesdis.gsfc.nasa.gov)
<BR>
Index #1: Found a Digital DS21143 Tulip adapter at 0x8000.
<BR>
&nbsp;Port selection is 100mbps-SYM/PCS 100baseTx scrambler, half-duplex.
<BR>
&nbsp;Transmit started, Receive started, half-duplex.
<BR>
&nbsp;&nbsp;The Rx process state is 'Waiting for packets'.
<BR>
&nbsp;&nbsp;The Tx process state is 'Idle'.
<BR>
&nbsp;&nbsp;The transmit threshold is 128.
<BR>
&nbsp;&nbsp;The NWay status register is 000020c6.
<BR>
EEPROM size is 6.
<BR>
PCI Subsystem IDs, vendor 0000, device 0000.
<BR>
CardBus Information Structure at offset 00000000.
<BR>
Ethernet MAC Station Address 00:00:F8:75:DD:7A.
<BR>
EEPROM transceiver/media description for the Digital DS21143 Tulip chip.
<BR>
Leaf node at offset 30, default media type 0800 (Autosense).
<BR>
&nbsp;5 transceiver description blocks:
<BR>
&nbsp;&nbsp;Media 10baseT, block type 2, length 6.
<BR>
&nbsp;&nbsp;&nbsp;Serial transceiver for 10baseT (media type 0).
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;GP pin direction 08ff  GP pin data 00f0.
<BR>
&nbsp;&nbsp;Media 10baseT-Full Duplex, block type 2, length 6.
<BR>
&nbsp;&nbsp;&nbsp;Serial transceiver for 10baseT-Full Duplex (media type 4).
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;GP pin direction 08ff  GP pin data 00f0.
<BR>
&nbsp;&nbsp;Media 10base2, block type 2, length 6.
<BR>
&nbsp;&nbsp;&nbsp;Serial transceiver for 10base2 (media type 1).
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;GP pin direction 08ff  GP pin data 00f0.
<BR>
&nbsp;&nbsp;Media AUI, block type 2, length 6.
<BR>
&nbsp;&nbsp;&nbsp;Serial transceiver for AUI (media type 2).
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;GP pin direction 08ff  GP pin data 00f0.
<BR>
&nbsp;&nbsp;Media MII, block type 3, length 17.
<BR>
&nbsp;&nbsp;&nbsp;MII interface PHY 0 (media type 11).
<BR>
&nbsp;&nbsp;&nbsp;21143 MII initialization sequence is 2 words: 08ff 00f0.
<BR>
&nbsp;&nbsp;&nbsp;21143 MII reset sequence is 0 words:.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Media capabilities are 7800, advertising 01e1.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;Full-duplex map 5000, Threshold map 1800.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;No MII interrupt.
<BR>
EEPROM contents:
<BR>
&nbsp;&nbsp;0000 0000 0000 0000 0000 0000 0000 0000
<BR>
&nbsp;&nbsp;0000 0103 0000 75f8 7add 1e00 0000 0800
<BR>
&nbsp;&nbsp;8605 0002 08ff 00f0 0286 ff04 f008 8600
<BR>
&nbsp;&nbsp;0102 08ff 00f0 0286 ff02 f008 9100 0003
<BR>
&nbsp;&nbsp;ff02 f008 0000 7800 01e0 5000 1800 0000
<BR>
&nbsp;&nbsp;0000 0000 0000 0000 0000 0000 0000 0000
<BR>
&nbsp;&nbsp;0000 0000 0000 0000 0000 0000 0000 0000
<BR>
&nbsp;&nbsp;0000 0000 0000 0000 0000 0000 0000 ca0d
<BR>
&nbsp;ID block CRC 0xe3 (vs. 00).
<BR>
&nbsp;&nbsp;Full contents CRC 0xca0d (read as 0xca0d).
<BR>
&nbsp;MII PHY found at address 5, status 0x786f.
<BR>
&nbsp;MII PHY #5 transceiver registers:
<BR>
&nbsp;&nbsp;&nbsp;3100 786f 2000 5c01 01e1 40a1 0001 0000
<BR>
&nbsp;&nbsp;&nbsp;0000 0000 0000 0000 0000 0000 0000 0000
<BR>
&nbsp;&nbsp;&nbsp;0000 0000 0000 0000 0000 0000 0001 8060
<BR>
&nbsp;&nbsp;&nbsp;8020 0c25 0000 1800 a3b9 0082 0405 001d.
<BR>
&nbsp;&nbsp;Internal autonegotiation state is 'Ability detect'.
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0006.html">Brian Pomerantz: "Re: tulip driver"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0004.html">Alexander V. Lukyanov: "Re: Linux console on 164SX Alpha"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0006.html">Brian Pomerantz: "Re: tulip driver"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Wed Dec 01 1999 - 06:08:10 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
