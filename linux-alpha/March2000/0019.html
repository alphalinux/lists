<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Linux Alpha List: Re: DP-264 ,BSD-Dislabels and SWAP-problems</TITLE>
<META NAME="Author" CONTENT="Rich Payne (rdp@talisman.alphalinux.org)">
<META NAME="Subject" CONTENT="Re: DP-264 ,BSD-Dislabels and SWAP-problems">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: DP-264 ,BSD-Dislabels and SWAP-problems</H1>
<HR>
<P>
<!-- received="Wed Mar 08 21:00:19 2000" -->
<!-- isoreceived="20000309050019" -->
<!-- sent="Wed, 8 Mar 2000 12:27:53 -0500 (EST)" -->
<!-- isosent="20000308172753" -->
<!-- name="Rich Payne" -->
<!-- email="rdp@talisman.alphalinux.org" -->
<!-- subject="Re: DP-264 ,BSD-Dislabels and SWAP-problems" -->
<!-- id="Pine.LNX.4.10.10003081226060.29710-100000@talisman.mv.com" -->
<!-- inreplyto="200003081804.TAA08197@nis.hofr.at" -->
<STRONG>Subject: </STRONG>Re: DP-264 ,BSD-Dislabels and SWAP-problems<BR>
<STRONG>From: </STRONG>Rich Payne (<EM>rdp@talisman.alphalinux.org</EM>)<BR>
<STRONG>Date: </STRONG>Wed Mar 08 2000 - 09:27:53 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#19">[ date ]</A>
<A HREF="index.html#19">[ thread ]</A>
<A HREF="subject.html#19">[ subject ]</A>
<A HREF="author.html#19">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0020.html">Brian Pomerantz: "SCSI reset"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0018.html">Der Herr Hofrat: "DP-264 ,BSD-Dislabels and SWAP-problems"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0018.html">Der Herr Hofrat: "DP-264 ,BSD-Dislabels and SWAP-problems"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0018.html">Rich Payne: "Re: DP-264 ,BSD-Dislabels and SWAP-problems"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
This doesn't answer your question, but why did you create 4 swap spaces on
<BR>
the same disk? You're not going to get any better performance by this,
<BR>
you might do better to create one 512Meg swap partition (I can't remember
<BR>
what the swap partition size limitation is with 2.2 on Alpha, but if I
<BR>
remember correctly it's a lot bigger than 512 Meg).
<BR>
<P>--rdp
<BR>
<P>On Wed, 8 Mar 2000, Der Herr Hofrat wrote:
<BR>
<P><EM>&gt; 
</EM><BR>
<EM>&gt; HI !
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Kernel      : 2.3.34 
</EM><BR>
<EM>&gt; HW-Platform : DP-264 (Tsunami)
</EM><BR>
<EM>&gt; RAM         : 1GB
</EM><BR>
<EM>&gt; SWAP        : 512MB (4 x 128MB)
</EM><BR>
<EM>&gt; OS-Version  : SuSE 6.3-AXP
</EM><BR>
<EM>&gt; Compileropts: SMP, DP-264, BSD-Disklabels (also tryed using Generic-Alpha)
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;  I configured 4 swap partitions of 128MB each it shows 512MB RAM 
</EM><BR>
<EM>&gt;  if I look at /proc/meminfo all seems ok , 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;         total:    used:    free:  shared: buffers:  cached:
</EM><BR>
<EM>&gt; Mem:  1044414464 971636736 72777728        0   507904 33415168
</EM><BR>
<EM>&gt; Swap: 568295424   262144 568033280
</EM><BR>
<EM>&gt; MemTotal:   1019936 kB
</EM><BR>
<EM>&gt; MemFree:      71072 kB
</EM><BR>
<EM>&gt; MemShared:        0 kB
</EM><BR>
<EM>&gt; Buffers:        496 kB
</EM><BR>
<EM>&gt; Cached:       32632 kB
</EM><BR>
<EM>&gt; HighTotal:        0 kB
</EM><BR>
<EM>&gt; HighFree:         0 kB
</EM><BR>
<EM>&gt; LowTotal:   1019936 kB
</EM><BR>
<EM>&gt; LowFree:      71072 kB
</EM><BR>
<EM>&gt; SwapTotal:   554976 kB
</EM><BR>
<EM>&gt; SwapFree:    554720 kB
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; And top also seams ok at the top lines , but the memory percentage of used 
</EM><BR>
<EM>&gt; memory indicates that it is assuming a total ram of 2GB ! and as soon as
</EM><BR>
<EM>&gt; *ANY* process uses more than the first 128MB of swap space , the box freezes
</EM><BR>
<EM>&gt; without any further comment.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; 4:14pm  up  5:30,  7 users,  load average: 1.00, 1.00, 1.00
</EM><BR>
<EM>&gt; 58 processes: 56 sleeping, 2 running, 0 zombie, 0 stopped
</EM><BR>
<EM>&gt; CPU states: 64.7% user, 37.7% system, 98.6% nice,  0.0% idle
</EM><BR>
<EM>&gt; Mem:  1019936K av, 952352K used,  67584K free,      0K shrd,    576K buff
</EM><BR>
<EM>&gt; Swap: 554976K av,    256K used, 554720K free                 34776K cached
</EM><BR>
<EM>&gt;   PID USER     PRI  NI  SIZE  RSS SHARE STAT  LIB %CPU %MEM   TIME COMMAND
</EM><BR>
<EM>&gt;   431 dhobbs    19   5  868M 868M  3408 R N  866M 98.6 43.5 249:36 vasp
</EM><BR>
<EM>&gt;   586 root       2   0  1624 1624  1288 R    1520  3.9  0.0   0:00 top
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;  the problem I guess is the BSD-disklable support.
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; Command (m for help): 
</EM><BR>
<EM>&gt; BSD disklabel command (m for help): 
</EM><BR>
<EM>&gt; 8 partitions:
</EM><BR>
<EM>&gt; #        size   offset    fstype   [fsize bsize   cpg]
</EM><BR>
<EM>&gt;   a:   260096     4096      ext2                    	# (Cyl.    3 - 129)
</EM><BR>
<EM>&gt;   b:  1576960   264192      ext2                    	# (Cyl.  130 - 899)
</EM><BR>
<EM>&gt;   c:  4098048  1841152      ext2                    	# (Cyl.  900 - 2900)
</EM><BR>
<EM>&gt;   d:   276480  5939200      swap                    	# (Cyl. 2901 - 3035)
</EM><BR>
<EM>&gt;   e:   278528  6215680      swap                    	# (Cyl. 3036 - 3171)
</EM><BR>
<EM>&gt;   f:   276480  6494208      swap                    	# (Cyl. 3172 - 3306)
</EM><BR>
<EM>&gt;   g:   278528  6770688      swap                    	# (Cyl. 3307 - 3442)
</EM><BR>
<EM>&gt;   h: 28794880  7049216      ext2                    	# (Cyl. 3443 - 17502)
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; BSD disklabel command (m for help): 
</EM><BR>
<EM>&gt;  
</EM><BR>
<EM>&gt; output from dmesg:
</EM><BR>
<EM>&gt; ------------------
</EM><BR>
<EM>&gt; ....
</EM><BR>
<EM>&gt; Starting kswapd v1.6
</EM><BR>
<EM>&gt; ....
</EM><BR>
<EM>&gt; Partition check:
</EM><BR>
<EM>&gt;  sda: sda1 sda2 sda3 sda4 sda5 sda6 sda7 sda8
</EM><BR>
<EM>&gt; VFS: Mounted root (ext2 filesystem) readonly.
</EM><BR>
<EM>&gt; Freeing unused kernel memory: 208k freed
</EM><BR>
<EM>&gt; Adding Swap: 138232k swap-space (priority -1)
</EM><BR>
<EM>&gt; Adding Swap: 139256k swap-space (priority -2)
</EM><BR>
<EM>&gt; Adding Swap: 138232k swap-space (priority -3)
</EM><BR>
<EM>&gt; Adding Swap: 139256k swap-space (priority -4)
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt;  So my assumtion is that some part of the kernel is calculating the swapspace
</EM><BR>
<EM>&gt;  with  278528*512k wich gives me the actual 139256 but other parts seam to 
</EM><BR>
<EM>&gt;  calculate 278528*1024k (..top %MEM ) and when this first swap partitions
</EM><BR>
<EM>&gt;  physical end is reached at 128MB it messes up , accessing a swap area that 
</EM><BR>
<EM>&gt;  does not exist...
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; any hint where to start diging ??
</EM><BR>
<EM>&gt; are any problems with BSD-Disklabels as such known ??
</EM><BR>
<EM>&gt; or are my assumptions completly wrong ?
</EM><BR>
<EM>&gt; 
</EM><BR>
<EM>&gt; thx
</EM><BR>
<EM>&gt; hofrat
</EM><BR>
<EM>&gt; *------------------------------------------------------------------------*
</EM><BR>
<EM>&gt; *THERE           {__}                         Universitaet Wien          *
</EM><BR>
<EM>&gt; *IS              oo )                      Inst. f. Materialphysik       *
</EM><BR>
<EM>&gt; *LIFE           O_   `_-------.              Mc  Guire  Nicholas         *
</EM><BR>
<EM>&gt; *IN               (-.         ,-\                                        *
</EM><BR>
<EM>&gt; *THE               || )---&lt;  )            nicholas.mc.guire@univie.ac.at *
</EM><BR>
<EM>&gt; *NET !             |||     | |          privat: der.herr@hofr.at         *
</EM><BR>
<EM>&gt; *                                     q5293324@bonsai.fernuni-hagen.de   *
</EM><BR>
<EM>&gt; *------------------------------------------------------------------------*
</EM><BR>
<EM>&gt; *ASCII-COW (C) 1996-2001 der.herr@hofr.at                                *
</EM><BR>
<EM>&gt; *------------------------------------------------------------------------*
</EM><BR>
<EM>&gt; 
</EM><BR>
<P>Rich Payne
<BR>
rpayne@alphalinux.org			www.alphalinux.org
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0020.html">Brian Pomerantz: "SCSI reset"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0018.html">Der Herr Hofrat: "DP-264 ,BSD-Dislabels and SWAP-problems"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0018.html">Der Herr Hofrat: "DP-264 ,BSD-Dislabels and SWAP-problems"</A>
<!-- nextthread="start" -->
<LI><STRONG>Reply:</STRONG> <A HREF="0018.html">Rich Payne: "Re: DP-264 ,BSD-Dislabels and SWAP-problems"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Sat Apr 01 2000 - 04:15:03 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
