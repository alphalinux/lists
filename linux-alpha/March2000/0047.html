<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Linux Alpha List: Re: new IRQ scalability changes in 2.3.48</TITLE>
<META NAME="Author" CONTENT="Ingo Molnar (mingo@chiara.csoma.elte.hu)">
<META NAME="Subject" CONTENT="Re: new IRQ scalability changes in 2.3.48">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: new IRQ scalability changes in 2.3.48</H1>
<HR>
<P>
<!-- received="Mon Mar 13 19:14:37 2000" -->
<!-- isoreceived="20000314031437" -->
<!-- sent="Mon, 13 Mar 2000 14:14:49 +0100 (CET)" -->
<!-- isosent="20000313131449" -->
<!-- name="Ingo Molnar" -->
<!-- email="mingo@chiara.csoma.elte.hu" -->
<!-- subject="Re: new IRQ scalability changes in 2.3.48" -->
<!-- id="Pine.LNX.4.10.10003131401280.2069-100000@chiara.csoma.elte.hu" -->
<!-- inreplyto="Pine.LNX.4.21.0003091223500.430-100000@alpha.random" -->
<STRONG>Subject: </STRONG>Re: new IRQ scalability changes in 2.3.48<BR>
<STRONG>From: </STRONG>Ingo Molnar (<EM>mingo@chiara.csoma.elte.hu</EM>)<BR>
<STRONG>Date: </STRONG>Mon Mar 13 2000 - 05:14:49 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#47">[ date ]</A>
<A HREF="index.html#47">[ thread ]</A>
<A HREF="subject.html#47">[ subject ]</A>
<A HREF="author.html#47">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0048.html">Andrea Arcangeli: "Re: new IRQ scalability changes in 2.3.48"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0046.html">Ingo Molnar: "Re: new IRQ scalability changes in 2.3.48"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0042.html">Andrea Arcangeli: "Re: new IRQ scalability changes in 2.3.48"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0051.html">Andrea Arcangeli: "Re: new IRQ scalability changes in 2.3.48"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0042.html">Ingo Molnar: "Re: new IRQ scalability changes in 2.3.48"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
On Thu, 9 Mar 2000, Andrea Arcangeli wrote:
<BR>
<P><EM>&gt; I instead propose to not make the kernel preemtable but to take the other
</EM><BR>
<EM>&gt; way around marking some special section as preemtable.
</EM><BR>
<P>no. First, this is definitely not going to happen before 2.5. And even in
<BR>
that case we do not care about copy_user latencies. Adding 'may preempt'
<BR>
areas is just as tiresome to validate as adding conditional reschedules.
<BR>
We care about generic unbound kernel-space routines. Quality RT-capable
<BR>
kernel code will only happen in the long run if _all_ (but a well
<BR>
specified) section can be preempted and spinlocks are held for a bound
<BR>
amount of time, and we do not need any explicit 'cpu_preemptable'
<BR>
mechanizm for that. We _must_ identify all areas which must never be
<BR>
preempted anyway (and it's not only spinlocks), so there is no need to add
<BR>
a mechanizm to identify 'may preempt' areas. Such an approach also
<BR>
seriously hinders the development of a preemptible kernel: all new code
<BR>
added would be non-preemptible by default, so we'd be continuously hunting
<BR>
and validating new code. _If_ a preemptible kernel (option) is added to
<BR>
Linux then it must be an 'all inclusive' thing, otherwise it's going to be
<BR>
a maintainance nightmare. The majority of Unix kernels are preemptible in
<BR>
an 'inclusive' way, so it can be done and it also has another nice side
<BR>
effect: it automatically makes UP code 'SMP-safe' to a fair degree.
<BR>
<P>the 'lock' example you cited in the previous mail is just a hidden
<BR>
spinlock. Such code has to be changed to be 'explicit' and play nice with
<BR>
any potential preemptible kernel. But please, first lets take care of 2.4
<BR>
:-)
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Ingo
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0048.html">Andrea Arcangeli: "Re: new IRQ scalability changes in 2.3.48"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0046.html">Ingo Molnar: "Re: new IRQ scalability changes in 2.3.48"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0042.html">Andrea Arcangeli: "Re: new IRQ scalability changes in 2.3.48"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0051.html">Andrea Arcangeli: "Re: new IRQ scalability changes in 2.3.48"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0042.html">Ingo Molnar: "Re: new IRQ scalability changes in 2.3.48"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Sat Apr 01 2000 - 04:15:03 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
