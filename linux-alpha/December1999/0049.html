<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Linux Alpha List: patch non-x86 agp</TITLE>
<META NAME="Author" CONTENT="Richard Henderson (rth@twiddle.net)">
<META NAME="Subject" CONTENT="patch non-x86 agp">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>patch non-x86 agp</H1>
<HR>
<P>
<!-- received="Tue Dec 14 17:30:17 1999" -->
<!-- isoreceived="19991215013017" -->
<!-- sent="Tue, 14 Dec 1999 07:10:33 -0800" -->
<!-- isosent="19991214151033" -->
<!-- name="Richard Henderson" -->
<!-- email="rth@twiddle.net" -->
<!-- subject="patch non-x86 agp" -->
<!-- id="19991214071033.A676@twiddle.net" -->
<STRONG>Subject: </STRONG>patch non-x86 agp<BR>
<STRONG>From: </STRONG>Richard Henderson (<EM>rth@twiddle.net</EM>)<BR>
<STRONG>Date: </STRONG>Tue Dec 14 1999 - 07:10:33 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#49">[ date ]</A>
<A HREF="index.html#49">[ thread ]</A>
<A HREF="subject.html#49">[ subject ]</A>
<A HREF="author.html#49">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0050.html">Brian Pomerantz: "Re: patch non-x86 agp"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0048.html">Andre Hedrick: "Re: ide config patchlet"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0050.html">Brian Pomerantz: "Re: patch non-x86 agp"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
The following gets the AGP GART driver to compile for Alpha.
<BR>
<P>If someone can point me at something that uses this, I'll actually
<BR>
try it out.  I've got a Permedia2 AGP card handy, and Voodoo3, TNT2,
<BR>
and GeForce cards I can steal from elsewhere.
<BR>
<P>In response to questions from Soohoon earlier today:
<BR>
<EM>&gt; I'm writing AGP GART driver.
</EM><BR>
<EM>&gt; And the problem is alpha doesn't have cache flush instruction
</EM><BR>
<EM>&gt; or write combining feature.
</EM><BR>
<P>Actually, we do.  The `cflush' PALcode call will flush the cache
<BR>
for a single page.  But there's wording in the ARM that lets me
<BR>
want to believe that we shouldn't need to do anything special.
<BR>
<P><EM>&gt; GART is a kind of page table, as you know.
</EM><BR>
<EM>&gt; And it needs to be flushed to be accessible from Irongate(northbridge).
</EM><BR>
<EM>&gt; They recommend flushing individual cache lines. And It looks like solution.
</EM><BR>
<P>What exactly is supposed to be happening here?  Just manipulating
<BR>
page table entries in memory?  Whether that memory is in SDRAM or
<BR>
whether it is on the Irongate, you should be able to just use `mb'
<BR>
or `wmb' to get things serialized properly before performing another
<BR>
action.
<BR>
<P><EM>&gt; But one more problem is, It needs uncachable mmapped space and It's
</EM><BR>
<EM>&gt; usually more than 32MB, But writing many bytes to such space is very
</EM><BR>
<EM>&gt; slow.  Intel has 'write combining' feature. Does alpha has similar one?
</EM><BR>
<EM>&gt; What address space is it if it's dp264?
</EM><BR>
<P>The EV6 considers physical address bit 43 to indicate I/O space,
<BR>
which is uncached.  It considers _all_ I/O space eligible for
<BR>
write combining.  If you don't want write combining, the user
<BR>
is required to issue an appropriate memory barrier instruction.
<BR>
<P><P><P>r~
<BR>
<P>PS: Tsk, tsk.  No floating point in kernel space.
<BR>
<P><P><HR>
<UL>
<LI>text/plain attachment: <A HREF="att-bin0buEhTf">-2332-agp_</A>
</UL>
<!-- attachment="att-bin0buEhTf" -->
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0050.html">Brian Pomerantz: "Re: patch non-x86 agp"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0048.html">Andre Hedrick: "Re: ide config patchlet"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0050.html">Brian Pomerantz: "Re: patch non-x86 agp"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Mon Jan 03 2000 - 11:15:13 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
