<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=KS_C_5601-1987">
<TITLE>Linux Alpha List: PCI configuration problem in 2.3.99 prex</TITLE>
<META NAME="Author" CONTENT="Soohoon Lee (Soohoon.Lee@alpha-processor.com)">
<META NAME="Subject" CONTENT="PCI configuration problem in 2.3.99 prex">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>PCI configuration problem in 2.3.99 prex</H1>
<HR>
<P>
<!-- received="Wed May 10 21:35:38 2000" -->
<!-- isoreceived="20000511043538" -->
<!-- sent="Wed, 10 May 2000 17:11:32 -0400" -->
<!-- isosent="20000510211132" -->
<!-- name="Soohoon Lee" -->
<!-- email="Soohoon.Lee@alpha-processor.com" -->
<!-- subject="PCI configuration problem in 2.3.99 prex" -->
<!-- id="278EEF4F1348D211940600A0C95BCF7F3B21E8@yellow-fin" -->
<!-- charset="KS_C_5601-1987" -->
<STRONG>Subject: </STRONG>PCI configuration problem in 2.3.99 prex<BR>
<STRONG>From: </STRONG>Soohoon Lee (<EM>Soohoon.Lee@alpha-processor.com</EM>)<BR>
<STRONG>Date: </STRONG>Wed May 10 2000 - 14:11:32 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#7">[ date ]</A>
<A HREF="index.html#7">[ thread ]</A>
<A HREF="subject.html#7">[ subject ]</A>
<A HREF="author.html#7">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0008.html">David Huggins-Daines: "[PATCH] bogo-resource-management for 2.2.15 bios32.c (Miata+SRM+IDE fix)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0006.html">Soohoon Lee: "eepro100 timeout error, bug."</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0010.html">Matti Aarnio: "Re: PCI configuration problem in 2.3.99 prex"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Alpha has seperate address space for each PCI bus and
<BR>
current pci drivers in drivres/pci cannot deal with that.
<BR>
I've modified drivers/pic/setup-res.c like following but
<BR>
What about having min field in struct resource.
<BR>
<P>Soohoon.
<BR>
<P>diff -Naur /root/linux/drivers/pci/setup-res.c drivers/pci/setup-res.c
<BR>
--- /root/linux/drivers/pci/setup-res.c Wed Jan 12 14:15:16 2000
<BR>
+++ drivers/pci/setup-res.c     Sat May  6 19:00:40 2000
<BR>
@@ -69,6 +69,11 @@
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}
<BR>
&nbsp;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;min = (res-&gt;flags &amp; IORESOURCE_IO ? PCIBIOS_MIN_IO :
<BR>
PCIBIOS_MIN_MEM);
<BR>
+
<BR>
+      if (root-&gt;start &gt; 0xffffffffUL) { 
<BR>
+       min |= root-&gt;start &amp; ~0xffffffffUL;
<BR>
+      }
<BR>
+
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;size = res-&gt;end + 1;
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DBGC((&quot;  for root[%lx:%lx] min[%lx] size[%lx]\n&quot;,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;root-&gt;start, root-&gt;end, min, size));
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0008.html">David Huggins-Daines: "[PATCH] bogo-resource-management for 2.2.15 bios32.c (Miata+SRM+IDE fix)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0006.html">Soohoon Lee: "eepro100 timeout error, bug."</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0010.html">Matti Aarnio: "Re: PCI configuration problem in 2.3.99 prex"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Thu Jun 01 2000 - 09:46:28 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
