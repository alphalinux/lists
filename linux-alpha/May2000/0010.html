<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Linux Alpha List: Re: PCI configuration problem in 2.3.99 prex</TITLE>
<META NAME="Author" CONTENT="Matti Aarnio (matti.aarnio@sonera.fi)">
<META NAME="Subject" CONTENT="Re: PCI configuration problem in 2.3.99 prex">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: PCI configuration problem in 2.3.99 prex</H1>
<HR>
<P>
<!-- received="Thu May 11 16:49:52 2000" -->
<!-- isoreceived="20000511234952" -->
<!-- sent="Thu, 11 May 2000 12:44:16 +0300" -->
<!-- isosent="20000511094416" -->
<!-- name="Matti Aarnio" -->
<!-- email="matti.aarnio@sonera.fi" -->
<!-- subject="Re: PCI configuration problem in 2.3.99 prex" -->
<!-- id="20000511124416.V829@mea.tmt.tele.fi" -->
<!-- inreplyto="278EEF4F1348D211940600A0C95BCF7F3B21E8@yellow-fin" -->
<STRONG>Subject: </STRONG>Re: PCI configuration problem in 2.3.99 prex<BR>
<STRONG>From: </STRONG>Matti Aarnio (<EM>matti.aarnio@sonera.fi</EM>)<BR>
<STRONG>Date: </STRONG>Thu May 11 2000 - 02:44:16 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#10">[ date ]</A>
<A HREF="index.html#10">[ thread ]</A>
<A HREF="subject.html#10">[ subject ]</A>
<A HREF="author.html#10">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0011.html">Jay Estabrook: "Re: [PATCH] bogo-resource-management for 2.2.15 bios32.c (Miata+SRM+IDE fix)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0009.html">Graham Stoney: "Calling testers for another Dead Function Optimisation update"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0007.html">Soohoon Lee: "PCI configuration problem in 2.3.99 prex"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0013.html">Soohoon Lee: "RE: PCI configuration problem in 2.3.99 prex"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0007.html">Matti Aarnio: "Re: PCI configuration problem in 2.3.99 prex"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
On Wed, May 10, 2000 at 05:11:32PM -0400, Soohoon Lee wrote:
<BR>
<EM>&gt; Alpha has seperate address space for each PCI bus and
</EM><BR>
<EM>&gt; current pci drivers in drivres/pci cannot deal with that.
</EM><BR>
<EM>&gt; I've modified drivers/pic/setup-res.c like following but
</EM><BR>
<EM>&gt; What about having min field in struct resource.
</EM><BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I think I understand what you mean with that, but you say it
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in a mudled way..  &quot;PCI bus&quot; can mean many things, after all.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Some Alpha systems have multiple Host/PCI interfaces, e.g.
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;they do have separate PCI busses attached to the CPU crossbar.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is separate thing from more common single Host/PCI interface
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;plus PCI/PCI bridges, which bridged backends are also called busses,
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;but they all are within the Host/PCI interface space.
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cleaning the code a bit:
<BR>
<P><EM>&gt; +      if (root-&gt;start &gt; 0xffffffffUL) {
</EM><BR>
<EM>&gt; +       min |= root-&gt;start &amp; ~0xffffffffUL;
</EM><BR>
<EM>&gt; +      }
</EM><BR>
<P>&nbsp;&nbsp;+#if BITS_PER_LONG &gt; 32
<BR>
&nbsp;&nbsp;+      min |= root-&gt;start &amp; ~0xffffffffUL;
<BR>
&nbsp;&nbsp;+#endif
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;At 64-bit machines we don't need to care about doing some extra
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;test in case we might not need to use that code, plus at 32-bit
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;machines it would never execute anyway.  Right ?
<BR>
<P><EM>&gt; Soohoon.
</EM><BR>
<P>/Matti Aarnio
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0011.html">Jay Estabrook: "Re: [PATCH] bogo-resource-management for 2.2.15 bios32.c (Miata+SRM+IDE fix)"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0009.html">Graham Stoney: "Calling testers for another Dead Function Optimisation update"</A>
<LI><STRONG>In reply to:</STRONG> <A HREF="0007.html">Soohoon Lee: "PCI configuration problem in 2.3.99 prex"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0013.html">Soohoon Lee: "RE: PCI configuration problem in 2.3.99 prex"</A>
<LI><STRONG>Reply:</STRONG> <A HREF="0007.html">Matti Aarnio: "Re: PCI configuration problem in 2.3.99 prex"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Thu Jun 01 2000 - 09:46:28 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
