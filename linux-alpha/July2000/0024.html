<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Linux Alpha List: [PATCH] TASK_PTRACE in arch/alpha/kernel/entr</TITLE>
<META NAME="Author" CONTENT=" ()">
<META NAME="Subject" CONTENT="[PATCH] TASK_PTRACE in arch/alpha/kernel/entry.S">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>[PATCH] TASK_PTRACE in arch/alpha/kernel/entry.S</H1>
<HR>
<P>
<!-- received="Mon Jul 24 18:37:04 2000" -->
<!-- isoreceived="20000725013704" -->
<!-- sent="Mon, 24 Jul 2000 09:05:10 -0400" -->
<!-- isosent="20000724130510" -->
<!-- subject="[PATCH] TASK_PTRACE in arch/alpha/kernel/entry.S" -->
<!-- id="200007241305.JAA04503@orourke.lowell.mclinux.com" -->
<STRONG>Subject: </STRONG>[PATCH] TASK_PTRACE in arch/alpha/kernel/entry.S<BR>
<EM></EM><BR>
<STRONG>Date: </STRONG>Mon Jul 24 2000 - 06:05:10 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#24">[ date ]</A>
<A HREF="index.html#24">[ thread ]</A>
<A HREF="subject.html#24">[ subject ]</A>
<A HREF="author.html#24">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0025.html">: "Time granularity"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0023.html">: "Re: Sudden halts on Linux 2.2.15"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0026.html">: "Re: [PATCH] TASK_PTRACE in arch/alpha/kernel/entry.S"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
A colleague of mine (Dave Anderson) noticed that 'strace' was appearing
<BR>
in the stack traces of processes which had done a system call on alpha
<BR>
platforms.  After some investigation he noticed that alpha's entry.S has
<BR>
the offset of the task_struct's ptrace field as 104, or right after the
<BR>
'processor' field.  This appears incorrect because the 'ptrace' field is
<BR>
actually after 'need_resched'.  This patch will adjust the definition of
<BR>
TASK_PTRACE accordingly.
<BR>
<P>Pat
<BR>
<P><PRE>
-- 
Patrick O'Rourke
orourke@missioncriticallinux.com
<P>--- linux-2.4.0-test5-pre3/arch/alpha/kernel/entry.S    Mon Jun 19 20:59:32 
2000
+++ orourke/linux-2.4.0-test5-pre3/arch/alpha/kernel/entry.S    Fri Jul 21 
15:12:27 2000
@@ -33,8 +33,8 @@
 #define TASK_ADDR_LIMIT                24
 #define TASK_EXEC_DOMAIN       32
 #define TASK_NEED_RESCHED      40
+#define TASK_PTRACE            48
 #define TASK_PROCESSOR         100
-#define TASK_PTRACE            104
 
 /*
  * task flags (must match include/linux/sched.h):
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0025.html">: "Time granularity"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0023.html">: "Re: Sudden halts on Linux 2.2.15"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0026.html">: "Re: [PATCH] TASK_PTRACE in arch/alpha/kernel/entry.S"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Tue Aug 01 2000 - 04:53:15 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
