<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Linux Alpha List: including linux/delay.h vs asm/delay.h</TITLE>
<META NAME="Author" CONTENT="Ruediger Oertel (ro@suse.de)">
<META NAME="Subject" CONTENT="including linux/delay.h vs asm/delay.h">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>including linux/delay.h vs asm/delay.h</H1>
<HR>
<P>
<!-- received="Tue Jun 27 19:45:08 2000" -->
<!-- isoreceived="20000628024508" -->
<!-- sent="Tue, 27 Jun 2000 14:26:12 +0200 (MEST)" -->
<!-- isosent="20000627122612" -->
<!-- name="Ruediger Oertel" -->
<!-- email="ro@suse.de" -->
<!-- subject="including linux/delay.h vs asm/delay.h" -->
<!-- id="Pine.LNX.4.21.0006271421150.12762-100000@fatou.suse.de" -->
<STRONG>Subject: </STRONG>including linux/delay.h vs asm/delay.h<BR>
<STRONG>From: </STRONG>Ruediger Oertel (<EM>ro@suse.de</EM>)<BR>
<STRONG>Date: </STRONG>Tue Jun 27 2000 - 05:26:12 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#25">[ date ]</A>
<A HREF="index.html#25">[ thread ]</A>
<A HREF="subject.html#25">[ subject ]</A>
<A HREF="author.html#25">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0026.html">David Huggins-Daines: "[ANNOUNCE] aboot 0.7a"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0024.html">Ivan Kokshaysky: "Re: Unable to mount root fs"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Hi,
<BR>
<P>what is the intended difference between including 
<BR>
&nbsp;&nbsp;#include &lt;asm/delay.h&gt;
<BR>
vs
<BR>
&nbsp;&nbsp;#include &lt;linux/delay.h&gt;
<BR>
<P>Currently (2.2.17preX) this results in 
<BR>
&nbsp;&nbsp;... `loops_per_sec' undeclared (first use in this function)
<BR>
since &lt;asm/delay.h&gt; includes &lt;asm/smp.h&gt; but this
<BR>
defines loops_per_sec only for the SMP case, while
<BR>
on x86, the file  &lt;asm/processor.h&gt; defines it regardless of SMP.
<BR>
<P>Including &lt;linux/delay.h&gt; declares loops_per_sec as &quot;extern unsigned long&quot;,
<BR>
which would make these drivers compile.
<BR>
<P>A quick grep in drivers/*/*.c yields:
<BR>
net/am79c961a.c:#include &lt;asm/delay.h&gt;
<BR>
net/comx-hw-comx.c:#include &lt;asm/delay.h&gt;
<BR>
net/seeq8005.c:#include &lt;asm/delay.h&gt;
<BR>
sbus/dvma.c:#include &lt;asm/delay.h&gt;
<BR>
scsi/seagate.c:#include &lt;asm/delay.h&gt;
<BR>
video/clgenfb.c:#include &lt;asm/delay.h&gt;
<BR>
<P><P><P><PRE>
-- 
with kind regards (mit freundlichem Grinsen),
                              Ruediger Oertel (ro@suse.de)
----------------------------------------------------------
          does &quot;DONT PANIC&quot; give a hint ?
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0026.html">David Huggins-Daines: "[ANNOUNCE] aboot 0.7a"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0024.html">Ivan Kokshaysky: "Re: Unable to mount root fs"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Sat Jul 01 2000 - 05:31:32 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
