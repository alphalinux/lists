<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>SuSE AXP: [suse-axp] USB on XP1000 2nd</TITLE>
<META NAME="Author" CONTENT="Marcus Gellert (mgellert@agnld.uni-potsdam.de)">
<META NAME="Subject" CONTENT="[suse-axp] USB on XP1000 2nd">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>[suse-axp] USB on XP1000 2nd</H1>
<HR>
<P>
<!-- received="Tue Nov 13 13:28:43 2001" -->
<!-- isoreceived="20011113212843" -->
<!-- sent="Fri, 9 Nov 2001 14:14:39 +0100 (CET)" -->
<!-- isosent="20011109131439" -->
<!-- name="Marcus Gellert" -->
<!-- email="mgellert@agnld.uni-potsdam.de" -->
<!-- subject="[suse-axp] USB on XP1000 2nd" -->
<!-- id="Pine.LNX.4.32.0111091342250.27516-100000@havel.agnld.uni-potsdam.de" -->
<STRONG>Subject: </STRONG>[suse-axp] USB on XP1000 2nd<BR>
<STRONG>From: </STRONG>Marcus Gellert (<EM>mgellert@agnld.uni-potsdam.de</EM>)<BR>
<STRONG>Date: </STRONG>Fri Nov 09 2001 - 05:14:39 PST
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#1">[ date ]</A>
<A HREF="index.html#1">[ thread ]</A>
<A HREF="subject.html#1">[ subject ]</A>
<A HREF="author.html#1">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0002.html">Stefan Reinauer: "Re: [suse-axp] XP1000: QLogic ISP 1020 + Adaptec 2940 simultanously?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0000.html">Ivan Skytte Jørgensen: "Re: [suse-axp] Installation boot problem"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
As answer to Stefan Reinauers email from Oct, 5th:
<BR>
<P>I tried his suggestion to hardcode the usb irq into the usb kernel sources
<BR>
and had success. Now I'm able to insmod the usb-ohci module and connect a
<BR>
digital still camera from Olympus and also a scanner to the usb port and
<BR>
use both devices. That's nice, isn't it?
<BR>
<P>Here the steps i did:
<BR>
<P>1. in the SRM console look for the usb entry (i.e. show usb*). If it is
<BR>
&nbsp;&nbsp;&nbsp;enabled (that the default) notice the assigned irq.
<BR>
2. You have to edit the usb-ohci.c file in the kernel source tree (should
<BR>
&nbsp;&nbsp;&nbsp;be /usr/src/linux/drivers/usb/usb-ohci.c). I have the 2.4.10 kernel
<BR>
&nbsp;&nbsp;&nbsp;from kernel.org, but should be the same with original SuSE kernel.
<BR>
<P>&nbsp;&nbsp;&nbsp;Goto function ohci_pci_probe(..) [l. 2560]. The second 'if' instruction
<BR>
&nbsp;&nbsp;&nbsp;looks for an assigned irq. If there is no one, you get the error
<BR>
&nbsp;&nbsp;&nbsp;message. And there I assigned the noticed irq and everything works
<BR>
&nbsp;&nbsp;&nbsp;fine.
<BR>
&nbsp;- original (line 2569):
<BR>
<P>&nbsp;&nbsp;&nbsp;if (!dev-&gt;irq) {
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;err(&quot;found OHCI device with no IRQ assigned. check BIOS settings!&quot;);
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return -ENODEV;
<BR>
&nbsp;&nbsp;&nbsp;}
<BR>
<P>&nbsp;- working version (with irq 10 on my machine):
<BR>
<P>&nbsp;&nbsp;&nbsp;if (!dev-&gt;irq) {
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dev-&gt;irq=10; // hardcoded irq by mg  Oct,15th 2001
<BR>
&nbsp;&nbsp;&nbsp;}
<BR>
<P>I know it's not really a good solution, but it works.
<BR>
If someone has a better idea, please inform me.
<BR>
<P>Marcus
<BR>
------------------------------------------------------------------------------
<BR>
Marcus Gellert                      email: mgellert@agnld.uni-potsdam.de
<BR>
------------------------------------------------------------------------------
<BR>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0002.html">Stefan Reinauer: "Re: [suse-axp] XP1000: QLogic ISP 1020 + Adaptec 2940 simultanously?"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0000.html">Ivan Skytte Jørgensen: "Re: [suse-axp] Installation boot problem"</A>
<!-- nextthread="start" -->
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Sat Dec 08 2001 - 16:00:06 PST</EM>
</EM>
</SMALL>
</BODY>
</HTML>
