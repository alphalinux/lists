<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>SuSE AXP: Re: [suse-axp] Fdisk behavior is wrong in 6.3 ???</TITLE>
<META NAME="Author" CONTENT="William H. Magill (magill@isc.upenn.edu)">
<META NAME="Subject" CONTENT="Re: [suse-axp] Fdisk behavior is wrong in 6.3 ???">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>Re: [suse-axp] Fdisk behavior is wrong in 6.3 ???</H1>
<HR>
<P>
<!-- received="Wed Jun 14 19:25:42 2000" -->
<!-- isoreceived="20000615022542" -->
<!-- sent="Wed, 14 Jun 2000 15:25:40 -0400 (EDT)" -->
<!-- isosent="20000614192540" -->
<!-- name="William H. Magill" -->
<!-- email="magill@isc.upenn.edu" -->
<!-- subject="Re: [suse-axp] Fdisk behavior is wrong in 6.3 ???" -->
<!-- id="200006141925.e5EJPen12161@falstaff.isc-net.upenn.edu" -->
<!-- inreplyto="000701bfd60f$36572ec0$b10a0ac0@dominicans.it" -->
<STRONG>Subject: </STRONG>Re: [suse-axp] Fdisk behavior is wrong in 6.3 ???<BR>
<STRONG>From: </STRONG>William H. Magill (<EM>magill@isc.upenn.edu</EM>)<BR>
<STRONG>Date: </STRONG>Wed Jun 14 2000 - 12:25:40 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#19">[ date ]</A>
<A HREF="index.html#19">[ thread ]</A>
<A HREF="subject.html#19">[ subject ]</A>
<A HREF="author.html#19">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0020.html">Jim Hoepner: "RE: [suse-axp] FW: New Thread - Getting &quot;Block 0 not valid bootblock&quot;error"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0018.html">Stefan Fent: "Re: [suse-axp] FW: New Thread - Getting &quot;Block 0 not valid bootblock&quot; error"</A>
<!-- nextthread="start" -->
<LI><STRONG>Maybe reply:</STRONG> <A HREF="0015.html">William H. Magill: "Re: [suse-axp] Fdisk behavior is wrong in 6.3 ???"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
<EM>&gt;   From: &quot;Mike O'Rourke&quot; &lt;mjoop@dominicans.it&gt;
</EM><BR>
<EM>&gt;   References: &lt;200006141131.e5EBVUB23575@falstaff.isc-net.upenn.edu&gt;
</EM><BR>
<EM>&gt;   Date: Wed, 14 Jun 2000 16:45:41 +0200
</EM><BR>
<EM>&gt;
</EM><BR>
<EM>&gt;   If you use the &quot;-u&quot; option with fdisk (fdisk -u /dev/sda), fdisk will show
</EM><BR>
<EM>&gt;   sectors rather than cylinders.  Since this is how OSF1/Tru64 makes the
</EM><BR>
<EM>&gt;   disklabels, at least you will be on the same level.  I had Tru64 4.0f
</EM><BR>
<EM>&gt;   installed on a 1000A and had to delete all partitions from the existing
</EM><BR>
<EM>&gt;   disklabel for SuSE to use the disk (it would not use the Tru64 disklabel at
</EM><BR>
<EM>&gt;   all, even though all of the partitions were the same.)  Once I deleted the
</EM><BR>
<EM>&gt;   partitions and re-made the label, everything was happy; but I had to use the
</EM><BR>
<EM>&gt;   &quot;-u&quot; oprion to do this.
</EM><BR>
<EM>&gt;
</EM><BR>
The partitions all delete with no problem and I can create new ones with no
<BR>
trouble using either sectors or cylinders. 
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;- the problem is that the numbers I give to fdisk are NOT the
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;numbers which fdisk uses (or at least plays back to me) when it
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;creates the partitions (using either sectors or cylinders).
<BR>
<P>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;And it changes these values arbitrarily with no warning, let
<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;alone error, messages of any kind.
<BR>
<P><EM>&gt;   If you are doing fdisk in conjunction with a new installation, I recommend
</EM><BR>
<EM>&gt;   making the disklabel and then before returning to YaST, do a mkswap
</EM><BR>
<EM>&gt;   /dev/sda? -- that way you will not have to restart YaST to mount the swap --
</EM><BR>
<EM>&gt;   it recognises the swap partition if you format it first.
</EM><BR>
<EM>&gt;
</EM><BR>
Basically, that is what everything describes -- you flip out of YaST to do
<BR>
the partition via fdisk, then reboot from the CD and &quot;skip partitioning.&quot;
<BR>
<P>According to the SuSE 6.3 docs, YaST cannot deal with BSD partitions needed
<BR>
by the SRM console. That part of the process is pretty clean,  straight
<BR>
forward and wll documented.
<BR>
<P>What does not perform as documented is fdisk.
<BR>
<P><EM>&gt;   If the XP1000 is not MILO capable (since you are using BSD labels, I assume
</EM><BR>
<EM>&gt;   you are booting from the SRM console), and you follow SuSE's instructions
</EM><BR>
<EM>&gt;   and make one big partiton and a swap, the machine will not boot.  There is
</EM><BR>
<EM>&gt;   some magic size limit for the partition that has the boot files on it.  I
</EM><BR>
<EM>&gt;   tried a 9gb disk (on my 1000A), and had to make a small /boot partition for
</EM><BR>
<EM>&gt;   the kernel and boot files for aboot.  
</EM><BR>
<P>[I'm using SRM and booting from the 6.3 CD on both boxes. ]
<BR>
<P>This is what I was trying to do with fdisk -- make a boot partion that was
<BR>
only about 10 or 20 meg. And then a couple of others for /, swap, /usr, etc.
<BR>
That's the pattern described in Compaq's  2.1 &quot;linux installation and
<BR>
configuration guide...&quot; 
<BR>
<P><EM>&gt;   A 4gb disk works fine.  This is an undocumented &quot;gotcha&quot;.
</EM><BR>
<EM>&gt;
</EM><BR>
This doesn't surprise me -- from what I've been reading recently on the
<BR>
various Alpha lists, Linux is anything but 64bit clean even deep down in
<BR>
the bowels of the kernel let alone in some of the upper layers of drivers.
<BR>
<P>&nbsp;&nbsp;&nbsp;----- Original Message -----
<BR>
&nbsp;&nbsp;&nbsp;From: &quot;William H. Magill&quot; &lt;magill@isc.upenn.edu&gt;
<BR>
&nbsp;&nbsp;&nbsp;To: &lt;suse-axp@suse.com&gt;
<BR>
&nbsp;&nbsp;&nbsp;Sent: Wednesday, June 14, 2000 1:31 PM
<BR>
&nbsp;&nbsp;&nbsp;Subject: [suse-axp] Fdisk behavior is wrong in 6.3 ???
<BR>
<P><P><EM>   &gt; I'm new to Suse and Linux, but old with Ultrix/OSF1/DU/Tru64.
</EM><BR>
<EM>   &gt;
</EM><BR>
<EM>   &gt; I'm trying to setup a Linux disk that can be mounted by Tru64 and
</EM><BR>
&nbsp;&nbsp;&nbsp;following
<BR>
<EM>   &gt; the instructions in rev 2.1 of Compaq's installatin guide.
</EM><BR>
<EM>   &gt;
</EM><BR>
<EM>   &gt; I've been playing with both and XP1000 and a 433A.
</EM><BR>
<EM>   &gt;
</EM><BR>
<EM>   &gt; The XP1000 has an RZ2DD-KS [9 gig 10K RPM]
</EM><BR>
<EM>   &gt; The 433A          RZ1CB-BA [4 gig 7200 RPM]
</EM><BR>
<EM>   &gt;
</EM><BR>
<EM>   &gt; I have no trouble booting from the 6.3 CD and getting to the point where
</EM><BR>
<EM>   &gt; fdisk is running, and I go to BSD labels...
</EM><BR>
<EM>   &gt;
</EM><BR>
<EM>   &gt; I try to create the new partitions trying to assing partion A
</EM><BR>
<EM>   &gt; cylinders 1 and 2.
</EM><BR>
<EM>   &gt;
</EM><BR>
<EM>   &gt; This fails.... or rather fdisk simply goes off and randomly assigns
</EM><BR>
<EM>   &gt; some number cylinders.
</EM><BR>
<EM>   &gt;
</EM><BR>
<EM>   &gt; If I look at the partition display after assigning cylinders 1 and 2,
</EM><BR>
<EM>   &gt; I get some exoticly high number. (not an obviously rational multiple of
</EM><BR>
<EM>   &gt; anything I have guessed.)
</EM><BR>
<EM>   &gt;
</EM><BR>
<EM>   &gt; If I try to assign A to 1 +5000K, it gives me yet a different number.
</EM><BR>
<EM>   &gt;
</EM><BR>
<EM>   &gt; So, in short, I see no correlation between the numbers entered in fdisk,
</EM><BR>
<EM>   &gt; and what is actually being generated by fdisk.
</EM><BR>
<EM>   &gt;
</EM><BR>
<EM>   &gt; Yes, both disk have pre-existing Tru64 labels via disklabel.
</EM><BR>
<EM>   &gt;
</EM><BR>
<EM>   &gt; So, what part of fdisk is broken --
</EM><BR>
<EM>   &gt;         the calculation of the size of cylinders?
</EM><BR>
<EM>   &gt;         the display of the label/partition information that it plans to
</EM><BR>
<EM>   &gt;                         create?
</EM><BR>
<EM>   &gt;
</EM><BR>
<EM>   &gt; I find it difficult to believe that such an important and old program can
</EM><BR>
<EM>   &gt; be so wrong (and we are talking -- not even close here gang), but have no
</EM><BR>
<EM>   &gt; other choice.
</EM><BR>
<EM>   &gt;
</EM><BR>
<EM>   &gt; --
</EM><BR>
<P><PRE>
-- 
                        www.tru64unix.compaq.com
                              www.tru64.org
                             comp.unix.tru64
                        
T.T.F.N.
William H. Magill                          Senior Systems Administrator
Information Services and Computing (ISC)   University of Pennsylvania
Internet: magill@isc.upenn.edu             magill@acm.org
<A HREF="http://www.isc-net.upenn.edu/~magill/">http://www.isc-net.upenn.edu/~magill/</A>
<P>-- 
To unsubscribe, e-mail: suse-axp-unsubscribe@suse.com
For additional commands, e-mail: suse-axp-help@suse.com
</PRE>
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0020.html">Jim Hoepner: "RE: [suse-axp] FW: New Thread - Getting &quot;Block 0 not valid bootblock&quot;error"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0018.html">Stefan Fent: "Re: [suse-axp] FW: New Thread - Getting &quot;Block 0 not valid bootblock&quot; error"</A>
<!-- nextthread="start" -->
<LI><STRONG>Maybe reply:</STRONG> <A HREF="0015.html">William H. Magill: "Re: [suse-axp] Fdisk behavior is wrong in 6.3 ???"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Sat Jul 01 2000 - 05:31:32 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
