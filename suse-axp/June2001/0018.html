<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>SuSE AXP: [suse-axp] Kernel 2.4 problems: Synchronous I/O bug?</TITLE>
<META NAME="Author" CONTENT="Markus Lischka (Markus_Lischka@Physik.TU-Muenchen.DE)">
<META NAME="Subject" CONTENT="[suse-axp] Kernel 2.4 problems: Synchronous I/O bug?">
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1 ALIGN=CENTER>[suse-axp] Kernel 2.4 problems: Synchronous I/O bug?</H1>
<HR>
<P>
<!-- received="Fri Jun 15 21:31:33 2001" -->
<!-- isoreceived="20010616043133" -->
<!-- sent="Tue, 12 Jun 2001 18:11:31 +0200 (CEST)" -->
<!-- isosent="20010612161131" -->
<!-- name="Markus Lischka" -->
<!-- email="Markus_Lischka@Physik.TU-Muenchen.DE" -->
<!-- subject="[suse-axp] Kernel 2.4 problems: Synchronous I/O bug?" -->
<!-- id="Pine.LNX.4.30.0106121755050.15086-200000@slater.t30.physik.tu-muenchen.de" -->
<STRONG>Subject: </STRONG>[suse-axp] Kernel 2.4 problems: Synchronous I/O bug?<BR>
<STRONG>From: </STRONG>Markus Lischka (<EM>Markus_Lischka@Physik.TU-Muenchen.DE</EM>)<BR>
<STRONG>Date: </STRONG>Tue Jun 12 2001 - 09:11:31 PDT
<P>
<UL>
<LI><STRONG>Messages sorted by:</STRONG> 
<A HREF="date.html#18">[ date ]</A>
<A HREF="index.html#18">[ thread ]</A>
<A HREF="subject.html#18">[ subject ]</A>
<A HREF="author.html#18">[ author ]</A>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0019.html">Sebastian Moeller: "[suse-axp] XFree86 4.1.0"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0017.html">James Oakley: "Re: SV: SV: [suse-axp] AS1000/200 Mikasa booting"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0021.html">Markus Lischka: "Re: [suse-axp] Kernel 2.4 problems: Synchronous I/O bug?"</A>
<!-- reply="end" -->
</UL>
<HR>
<!-- body="start" -->
<P>
Hi,
<BR>
<P>we have just installed SuSE 7.1/AXP on an AlphaStation 400 4/233 (ev4,
<BR>
21064) and encountered the following problems with kernel 2.4.4-SuSE:
<BR>
Whenever a file descriptor is opened for synchronous I/O, the write system
<BR>
call fails with error code EINVAL (22). This happens on both local SCSI
<BR>
volumes as well as on NFS mounted volumes (but not on /dev/shmem).
<BR>
The same problem occurs on a new XP1000/ev6.
<BR>
<P>Switching back to kernel 2.2 resolved the problem. What is going wrong
<BR>
here? Are there any known fixes (besides not using synchronous I/O)?
<BR>
<P>I attach a small C program we finally used to test writing with the O_SYNC
<BR>
flag set.
<BR>
<P><P>Furthermore, the 2.4 kernel does not properly reboot/halt the machine on
<BR>
our AS 400 (the XP1000 reboots fine). Instead of returning to the SRM
<BR>
console, it just beeps twice and starts blinking the keyboard LEDs
<BR>
forever. Any known workarounds?
<BR>
<P><P>Thanks in advance,
<BR>
Markus Lischka
<BR>
<P>----------------------------------------------------------------------
<BR>
email: mlischka@physik.tu-muenchen.de                   Markus Lischka
<BR>
www  : <A HREF="http://www.ph.tum.de/~mlischka">http://www.ph.tum.de/~mlischka</A>           Physics Department T30
<BR>
phone: (0 89) 2 89-1 43 30                         James-Franck-Str. 1
<BR>
fax  : (0 89) 2 89-1 22 96                            D-85747 Garching
<BR>
----------------------------------------------------------------------
<BR>
<P><P><HR>
<UL>
<LI>TEXT/plain attachment: <A HREF="att-bin2ApwZvb">write.c</A>
</UL>
<!-- attachment="att-bin2ApwZvb" -->
<P><!-- body="end" -->
<HR>
<P>
<UL>
<!-- next="start" -->
<LI><STRONG>Next message:</STRONG> <A HREF="0019.html">Sebastian Moeller: "[suse-axp] XFree86 4.1.0"</A>
<LI><STRONG>Previous message:</STRONG> <A HREF="0017.html">James Oakley: "Re: SV: SV: [suse-axp] AS1000/200 Mikasa booting"</A>
<!-- nextthread="start" -->
<LI><STRONG>Next in thread:</STRONG> <A HREF="0021.html">Markus Lischka: "Re: [suse-axp] Kernel 2.4 problems: Synchronous I/O bug?"</A>
<!-- reply="end" -->
</UL>
<!-- trailer="footer" -->
<HR>
<P>
<SMALL>
<EM>
This archive was generated by <A HREF="http://www.www.fts.frontec.se/~dast/hypermail/">hypermail 2a22</A> 
: <EM>Thu Jul 05 2001 - 05:45:32 PDT</EM>
</EM>
</SMALL>
</BODY>
</HTML>
